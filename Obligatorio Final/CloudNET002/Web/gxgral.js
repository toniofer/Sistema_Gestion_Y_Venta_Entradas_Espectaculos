/*
 GeneXus 18.0.3.171080 mustache.js - Logic-less {{mustache}} templates with JavaScript
 http://github.com/janl/mustache.js
 modernizr 3.6.0 (Custom Build) | MIT *
 https://modernizr.com/download/?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop ! modernizr v3.6.0
 Build https://modernizr.com/download?-csstransitions-flexbox-history-domprefixes-setclasses-testallprops-testprop-dontmin

 Copyright (c)
  Faruk Ates
  Paul Irish
  Alex Sexton
  Ryan Seddon
  Patrick Kettner
  Stu Cox
  Richard Herrera

 MIT License
 {
  "name": "History API",
  "property": "history",
  "caniuse": "history",
  "tags": ["history"],
  "authors": ["Hay Kranen", "Alexander Farkas"],
  "notes": [{
    "name": "W3C Spec",
    "href": "https://www.w3.org/TR/html51/browsers.html#the-history-interface"
  }, {
    "name": "MDN documentation",
    "href": "https://developer.mozilla.org/en-US/docs/Web/API/window.history"
  }],
  "polyfills": ["historyjs", "html5historyapi"]
}
! {
  "name": "Flexbox",
  "property": "flexbox",
  "caniuse": "flexbox",
  "tags": ["css"],
  "notes": [{
    "name": "The _new_ flexbox",
    "href": "http://dev.w3.org/csswg/css3-flexbox"
  }],
  "warnings": [
    "A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect."
  ]
}
! {
  "name": "CSS Transitions",
  "property": "csstransitions",
  "caniuse": "css-transitions",
  "tags": ["css"]
}
! jQuery UI - v1.11.4 - 2016-07-07
 http://jqueryui.com
 Includes: position.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Position 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,c){l.raw=c;return l};$jscomp.arrayIteratorImpl=function(l){var c=0;return function(){return c<l.length?{done:!1,value:l[c++]}:{done:!0}}};$jscomp.arrayIterator=function(l){return{next:$jscomp.arrayIteratorImpl(l)}};$jscomp.makeIterator=function(l){var c="undefined"!=typeof Symbol&&Symbol.iterator&&l[Symbol.iterator];return c?c.call(l):$jscomp.arrayIterator(l)};
$jscomp.arrayFromIterator=function(l){for(var c,d=[];!(c=l.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(l){return l instanceof Array?l:$jscomp.arrayFromIterator($jscomp.makeIterator(l))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(l,c,d){if(l==Array.prototype||l==Object.prototype)return l;l[c]=d.value;return l};$jscomp.getGlobal=function(l){l=["object"==typeof globalThis&&globalThis,l,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<l.length;++c){var d=l[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(l,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return l[c];d=l[d];return void 0!==d?d:l[c]};
$jscomp.polyfill=function(l,c,d,g){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(l,c,d,g):$jscomp.polyfillUnisolated(l,c,d,g))};$jscomp.polyfillUnisolated=function(l,c,d,g){d=$jscomp.global;l=l.split(".");for(g=0;g<l.length-1;g++){var a=l[g];if(!(a in d))return;d=d[a]}l=l[l.length-1];g=d[l];c=c(g);c!=g&&null!=c&&$jscomp.defineProperty(d,l,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(l,c,d,g){var a=l.split(".");l=1===a.length;g=a[0];g=!l&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var b=0;b<a.length-1;b++){var f=a[b];if(!(f in g))return;g=g[f]}a=a[a.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?g[a]:null;c=c(d);null!=c&&(l?$jscomp.defineProperty($jscomp.polyfills,a,{configurable:!0,writable:!0,value:c}):c!==d&&($jscomp.propertyToPolyfillSymbol[a]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(a):$jscomp.POLYFILL_PREFIX+a,a=
$jscomp.propertyToPolyfillSymbol[a],$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:c})))};$jscomp.polyfill("Array.from",function(l){return l?l:function(c,d,g){d=null!=d?d:function(k){return k};var a=[],b="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof b){c=b.call(c);for(var f=0;!(b=c.next()).done;)a.push(d.call(g,b.value,f++))}else for(b=c.length,f=0;f<b;f++)a.push(d.call(g,c[f],f));return a}},"es6","es3");
$jscomp.checkStringArgs=function(l,c,d){if(null==l)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return l+""};
$jscomp.polyfill("String.prototype.startsWith",function(l){return l?l:function(c,d){var g=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var a=g.length,b=c.length;d=Math.max(0,Math.min(d|0,g.length));for(var f=0;f<b&&d<a;)if(g[d++]!=c[f++])return!1;return f>=b}},"es6","es3");$jscomp.findInternal=function(l,c,d){l instanceof String&&(l=String(l));for(var g=l.length,a=0;a<g;a++){var b=l[a];if(c.call(d,b,a,l))return{i:a,v:b}}return{i:-1,v:void 0}};
$jscomp.polyfill("Array.prototype.find",function(l){return l?l:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6","es3");$jscomp.polyfill("String.prototype.endsWith",function(l){return l?l:function(c,d){var g=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===d&&(d=g.length);d=Math.max(0,Math.min(d|0,g.length));for(var a=c.length;0<a&&0<d;)if(g[--d]!=c[--a])return!1;return 0>=a}},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(l){if(l)return l;var c=function(a,b){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:b})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d=0,g=function(a){if(this instanceof g)throw new TypeError("Symbol is not a constructor");return new c("jscomp_symbol_"+(a||"")+"_"+d++,a)};return g},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var g=$jscomp.global[c[d]];"function"===typeof g&&"function"!=typeof g.prototype[l]&&$jscomp.defineProperty(g.prototype,l,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return l},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(l){l={next:l};l[Symbol.iterator]=function(){return this};return l};$jscomp.iteratorFromArray=function(l,c){l instanceof String&&(l+="");var d=0,g={next:function(){if(d<l.length){var a=d++;return{value:c(a,l[a]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill("Array.prototype.values",function(l){return l?l:function(){return $jscomp.iteratorFromArray(this,function(c,d){return d})}},"es8","es3");$jscomp.polyfill("Object.is",function(l){return l?l:function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(l){return l?l:function(c,d){var g=this;g instanceof String&&(g=String(g));var a=g.length;d=d||0;for(0>d&&(d=Math.max(d+a,0));d<a;d++){var b=g[d];if(b===c||Object.is(b,c))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(l){return l?l:function(c,d){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,d||0)}},"es6","es3");$jscomp.owns=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)};
$jscomp.polyfill("Object.entries",function(l){return l?l:function(c){var d=[],g;for(g in c)$jscomp.owns(c,g)&&d.push([g,c[g]]);return d}},"es8","es3");var gxnoFunc=function(){},gxdbg={logDebug:gxnoFunc,logMsg:gxnoFunc,logEx:gxnoFunc,exTxt:gxnoFunc,write:gxnoFunc,logPerf:gxnoFunc,printPerformanceLog:gxnoFunc};
(function(l,c){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?c(exports):"function"===typeof define&&define.amd?define(["exports"],c):(l.Mustache={},c(l.Mustache))})(this,function(l){function c(u){return"function"===typeof u}function d(u){return u.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function g(u,y){return null!=u&&"object"===typeof u&&y in u}function a(u,y){function B(ia){"string"===typeof ia&&(ia=ia.split(x,2));if(!n(ia)||2!==ia.length)throw Error("Invalid tags: "+
ia);R=new RegExp(d(ia[0])+"\\s*");P=new RegExp("\\s*"+d(ia[1]));Y=new RegExp("\\s*"+d("}"+ia[1]))}if(!u)return[];var E=[],I=[],L=[],M=!1,O=!1,R,P,Y;B(y||l.tags);u=new k(u);for(var W,Z,aa;!u.eos();){y=u.pos;if(Z=u.scanUntil(R)){aa=0;for(var ba=Z.length;aa<ba;++aa)if(W=Z.charAt(aa),w.call(A,W)?O=!0:L.push(I.length),I.push(["text",W,y,y+1]),y+=1,"\n"===W){if(M&&!O)for(;L.length;)delete I[L.pop()];else L=[];O=M=!1}}if(!u.scan(R))break;M=!0;W=u.scan(G)||"name";u.scan(q);"="===W?(Z=u.scanUntil(C),u.scan(C),
u.scanUntil(P)):"{"===W?(Z=u.scanUntil(Y),u.scan(F),u.scanUntil(P),W="&"):Z=u.scanUntil(P);if(!u.scan(P))throw Error("Unclosed tag at "+u.pos);aa=[W,Z,y,u.pos];I.push(aa);if("#"===W||"^"===W)E.push(aa);else if("/"===W){W=E.pop();if(!W)throw Error('Unopened section "'+Z+'" at '+y);if(W[1]!==Z)throw Error('Unclosed section "'+W[1]+'" at '+y);}else"name"===W||"{"===W||"&"===W?O=!0:"="===W&&B(Z)}if(W=E.pop())throw Error('Unclosed section "'+W[1]+'" at '+u.pos);return f(b(I))}function b(u){for(var y=[],
B,E,I=0,L=u.length;I<L;++I)if(B=u[I])"text"===B[0]&&E&&"text"===E[0]?(E[1]+=B[1],E[3]=B[3]):(y.push(B),E=B);return y}function f(u){for(var y=[],B=y,E=[],I,L=0,M=u.length;L<M;++L)switch(I=u[L],I[0]){case "#":case "^":B.push(I);E.push(I);B=I[4]=[];break;case "/":B=E.pop();B[5]=I[2];B=0<E.length?E[E.length-1][4]:y;break;default:B.push(I)}return y}function k(u){this.tail=this.string=u;this.pos=0}function m(u,y){this.view=u;this.cache={".":this.view};this.parent=y}function t(){this.cache={}}var v=Object.prototype.toString,
n=Array.isArray||function(u){return"[object Array]"===v.call(u)},w=RegExp.prototype.test,A=/\S/,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},q=/\s*/,x=/\s+/,C=/\s*=/,F=/\s*\}/,G=/#|\^|\/|>|\{|&|=|!/;k.prototype.eos=function(){return""===this.tail};k.prototype.scan=function(u){u=this.tail.match(u);if(!u||0!==u.index)return"";u=u[0];this.tail=this.tail.substring(u.length);this.pos+=u.length;return u};k.prototype.scanUntil=function(u){u=this.tail.search(u);
switch(u){case -1:var y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,u),this.tail=this.tail.substring(u)}this.pos+=y.length;return y};m.prototype.push=function(u){return new m(u,this)};m.prototype.lookup=function(u){var y=this.cache;if(y.hasOwnProperty(u))var B=y[u];else{for(var E=this,I,L,M,O=!1;E;){if(0<u.indexOf("."))for(I=E.view,L=u.split("."),M=0;null!=I&&M<L.length;)M===L.length-1&&(O=g(I,L[M])||null!=I&&"object"!==typeof I&&I.hasOwnProperty&&I.hasOwnProperty(L[M])),
I=I[L[M++]];else I=E.view[u],O=g(E.view,u);if(O){B=I;break}E=E.parent}y[u]=B}c(B)&&(B=B.call(this.view));return B};t.prototype.clearCache=function(){this.cache={}};t.prototype.parse=function(u,y){var B=this.cache,E=u+":"+(y||l.tags).join(":"),I=B[E];null==I&&(I=B[E]=a(u,y));return I};t.prototype.render=function(u,y,B,E){var I=this.parse(u,E);y=y instanceof m?y:new m(y);return this.renderTokens(I,y,B,u,E)};t.prototype.renderTokens=function(u,y,B,E,I){for(var L="",M,O,R,P=0,Y=u.length;P<Y;++P)R=void 0,
M=u[P],O=M[0],"#"===O?R=this.renderSection(M,y,B,E):"^"===O?R=this.renderInverted(M,y,B,E):">"===O?R=this.renderPartial(M,y,B,I):"&"===O?R=this.unescapedValue(M,y):"name"===O?R=this.escapedValue(M,y):"text"===O&&(R=this.rawValue(M)),void 0!==R&&(L+=R);return L};t.prototype.renderSection=function(u,y,B,E){function I(Y){return L.render(Y,y,B)}var L=this,M="",O=y.lookup(u[1]);if(O){if(n(O))for(var R=0,P=O.length;R<P;++R)M+=this.renderTokens(u[4],y.push(O[R]),B,E);else if("object"===typeof O||"string"===
typeof O||"number"===typeof O)M+=this.renderTokens(u[4],y.push(O),B,E);else if(c(O)){if("string"!==typeof E)throw Error("Cannot use higher-order sections without the original template");O=O.call(y.view,E.slice(u[3],u[5]),I);null!=O&&(M+=O)}else M+=this.renderTokens(u[4],y,B,E);return M}};t.prototype.renderInverted=function(u,y,B,E){var I=y.lookup(u[1]);if(!I||n(I)&&0===I.length)return this.renderTokens(u[4],y,B,E)};t.prototype.renderPartial=function(u,y,B,E){if(B&&(u=c(B)?B(u[1]):B[u[1]],null!=u))return this.renderTokens(this.parse(u,
E),y,B,u)};t.prototype.unescapedValue=function(u,y){u=y.lookup(u[1]);if(null!=u)return u};t.prototype.escapedValue=function(u,y){u=y.lookup(u[1]);if(null!=u)return l.escape(u)};t.prototype.rawValue=function(u){return u[1]};l.name="mustache.js";l.version="3.0.1";l.tags=["{{","}}"];var p=new t;l.clearCache=function(){return p.clearCache()};l.parse=function(u,y){return p.parse(u,y)};l.render=function(u,y,B,E){if("string"!==typeof u)throw y=TypeError,u=n(u)?"array":typeof u,new y('Invalid template! Template should be a "string" but "'+
u+'" was given as the first argument for mustache#render(template, view, partials)');return p.render(u,y,B,E)};l.to_html=function(u,y,B,E){u=l.render(u,y,B);if(c(E))E(u);else return u};l.escape=function(u){return String(u).replace(/[&<>"'`=\/]/g,function(y){return r[y]})};l.Scanner=k;l.Context=m;l.Writer=t;return l});(function(){window.onpageshow=function(l){l.persisted&&window.location.reload()}})();
var gx=function(l){var c=/^(?:gx\.O\.)(.+)$/,d=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,g=function(){return!1};return{$:l.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",servletBasePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,
msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:g,trueFn:function(){return!0},numericLenDec:function(a){var b=a.split(".");a=2===b.length?b[0]:a;b=2===b.length?b[1]:"";a=(a.match(/9|Z/g)||[]).length;b=(b.match(/9|Z/g)||[]).length;return{Integers:a,Decimals:b}},rtPicture:function(a,b){return b&&b.getAttribute("data-gx-rt-picture")||a&&a.pic||""},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,b){return"string"===typeof a?(b=b||
document,b.getElementById(a)):a},byName:function(a){return a?document.getElementsByName(a):[]},toggleAttribute:function(a,b,f){"function"===typeof a.toggleAttribute?a.toggleAttribute(b,f):f?a.setAttribute(b,""):a.removeAttribute(b,"")},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,b,f){return!b&&(f=document||f,f.getElementsByClassName)?f.getElementsByClassName(a):l((b||"")+"."+a,f).toArray()},bySelector:function(a){return l(a).toArray()},getAttributeNames:function(a){return"function"===
typeof a.getAttributeNames?a.getAttributeNames():Array.from(a.attributes).map(function(b){return b.name})},scripts:function(a){var b=document.scripts;b||(b=document.getElementsByTagName("script"));if("undefined"!=typeof b){for(var f=[],k=b.length,m=0;m<k;m++)if(!a||null==b[m].getAttribute("data-gx-external-script")){var t=b[m].attributes.src;t&&t.value&&(t=t.value,"//:"!=t&&f.push(t))}return f}return[]},getIntersectionObserver:function(a){"IntersectionObserver"in window&&"IntersectionObserverEntry"in
window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?a&&a(window.IntersectionObserver):gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"intersection-observer.js",!1),function(){a&&a(window.IntersectionObserver)})},_init:function(){gx.evt.processing=!1;gx.evt.userReadyCnt=1;gx.evt._userReady=!1;gx.evt.on_ready(this,function(){var a,b=gx.util.browser,f=[];if(document.querySelectorAll)f=document.querySelectorAll("input[type='hidden']");else{var k=gx.dom.byTag("input");
var m=0;for(a=k.length;m<a;m++)"hidden"==k[m].getAttribute("type")&&f.push(k[m])}m=0;for(a=f.length;m<a;m++)f[m].setAttribute("autocomplete","off");l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(b.isChrome())for(b=document.querySelectorAll("select"),m=0,a=b.length;m<a;m++)b[m].value||(f=b[m].querySelectorAll("option[selected]"))&&f.length&&(b[m].value=f[0].value);l('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=
gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!1,skipPromptCtrl:!0,
touchTimer:null,userReadyCnt:0,_userReady:!1,userReadyThreshold:2E3,userReadyThresholdFast:400,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},serialRunner:function(){var a=[];return{addTask:function(b){a.push(b);if(1===a.length)a[0]()},signalEndTask:function(){a.shift();if(0<a.length)a[0]()}}},addHook:function(a,b,f,k){this.hooks.push({c:a,e:b,f:f,o:k})},removeHookByKey:function(a){l.each(gx.evt.hooks,function(b,f){f.o&&f.o.hookKey&&a===f.o.hookKey&&(gx.evt.detach(f.e,f.o,f.f),gx.evt.hooks[b]=void 0)});
gx.evt.hooks=gx.evt.hooks.filter(function(b){return b})},attach:function(a,b,f,k,m){m=m||{};if("string"==typeof b){var t=f;k&&(t=f.closure(k));var v=gx.evt.hooks.length;if(m.single){var n=t,w=!1,A;t=function(){w||(A&&clearTimeout(A),gx.evt.detach(a,b,n,m),n.apply(this,arguments),gx.evt.hooks.splice(v,1),w=!0)};m.timeout&&(A=setTimeout(t,m.timeout))}a.addEventListener?a.addEventListener(b,t,m.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,t):a["on"+b]=t;this.addHook(a,b,t,m)}else if(gx.lang.isArray(b)){t=
0;for(var r=b.length;t<r;t++)this.attach(a,b[t],f,k,m)}},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,b,f){gx.pO.MasterPage&&a.req.setRequestHeader(f,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,f,k,m,t){gx.reinit(!t)},
oncontentreplace:function(a,b,f,k,m,t,v,n){a=gx.lang.getType(k);t=(t=t==v?t:v)?gx.lang.getType(t.toLowerCase()):!1;var w=gx.ajax.getJsonResponse();w&&gx.fn.setJsonHiddens(null,w.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);n?gx.setMasterPage(m):t&&gx.setMasterPage(new t);gx.ajax.clearJsonResponse();w?gx.ajax.setJsonResponse({response:w,isPostBack:!1,afterCmpLoaded:function(){n&&(m.restoreTargetComponents(),m.restoreExoEventHandlers());gx.objectLoad(w.gxGrids,w.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},
gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}})})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},_init:function(){gx.evt.userReadyThresholdFast=gx.util.browser.isIE()?2E3:gx.evt.userReadyThresholdFast;document.gxReadyState="loading";gx.lang.doCallTimeout(function(){gx.evt.userReadyThreshold=
gx.evt.userReadyThresholdFast},gx.evt,[],gx.evt.userReadyThreshold);gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE())?this.attach(document,"readystatechange",this.onready):9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,
"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&
this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(a,b,f){var k=window||this,m=a.split("."),t=m.length;for(a=0;a<t-1;a++)"undefined"==typeof k[m[a]]&&(k[m[a]]={}),k=k[m[a]];k[m[t-1]]=f;b||(k[m[t-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(a){gx.spa&&
gx.spa.started||(a instanceof gx.GxObject||(GxObj=new a),GxObj&&this.setParentObj(GxObj))},setExecutableComponent:function(a){gx.spa&&gx.spa.started||gx.wi(function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,"")),gx.fn.objectOnload(void 0,!0))},this)},setMasterPage:function(a){gx.wpo(function(){null!=gx.pO&&(gx.pO.MasterPage=a,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(a){gx.wpo(function(){var b;gx.spa.isNavigating()||(a instanceof gx.GxObject||(b=new a),b&&this.setMasterPage(b))},
this)},addComponent:function(a,b){null!=gx.pO&&gx.pO.setWebComponent(a,b)},createComponent:function(a,b,f){var k=null;a=gx.lang.getType(a);if(null!=a){a.prototype=new gx.GxObject;var m=gx.csv.cmpCtx;gx.csv.cmpCtx=b;k=new a(b);f&&k.setContainer(f);gx.csv.cmpCtx=m;k.serviceUrl=gx.fn.getControlValue(k.CmpContext+"_CMPPGM")}return k},getObj:function(a,b){return""==a?1==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){if(1==arguments.length&&"object"==typeof arguments[0])gx.O=arguments[0];
else{var a=arguments[0];var b=arguments[1];gx.O=this.getObj(a,b)||gx.pO}gx.csv.cmpCtx=gx.O.CmpContext;return gx.O},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=c;b=b.exec(a);null!=b&&b[1]?a=b[1]:(b=d,b=b.exec(a),null!=b&&b[1]&&(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=
a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var b=gx.staticDirectory.length;a=!gx.isabsoluteurl(a)&&"/"!=gx.staticDirectory.charAt(0);b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=
(a?"/":"")+gx.staticDirectory+(b?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");a&&a!=this.theme&&(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search("/"+this.theme+".css")&&(a.href=a.href.replace(/[^/]*.css/,this.theme+".css")))},setTheme:function(a){var b=gx.util.browser,f=b.isIE();b=b.ieVersion();var k=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{void 0===a&&k.resetFixesStyleElement();
gx.HTML5&&k.html5(a);if(void 0===a){f&&(l(document.documentElement).addClass("ie"),l(document.documentElement).addClass("ie"+b),gx.runtimeTemplates&&!Modernizr.flexbox&&l(document.documentElement).addClass("gx-align-fallback"));if(f&&10==b){var m=document.createElement("style");m.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(m)}k.setPopupMinWidth()}k.fixTableResets(a)}catch(t){gx.dbg.logEx(t,"gxapi.js","setTheme")}},typedOld:function(a,b,f){switch(f){case "int":return this.OldInteger(a,
b);case "decimal":return this.OldDecimal(a,b,!0);case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,b)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.isvalidating()||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},
gen:{net:!1,isDotNet:function(){return this.net},isRuby:g,isJava:function(){return!this.net},resolveObjClass:function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&gx.pO&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b}},util:function(){var a=/^gx-image:\/\/(.*)/;return{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(b){return b!==gx.util.executionContext.getContext()}},
contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",
tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},compare:function(b,f,k){if(typeof b!=typeof k)return!1;if("string"==typeof b&&"like"==f)return f=k.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),f=gx.text.replaceAll(gx.text.replaceAll(f,"%",".*"),"_","."),(new RegExp(f,"i")).test(b);switch(f){case ">":return b>k;case ">=":return b>=k;case "<":return b<k;case "<=":return b<=k;case "<>":return b!=k;default:return b==k}},isKnownContentType:function(b){for(var f in this.contentTypes)if(this.contentTypes[f]==
b)return!0;return!1},getContentTypeFromExt:function(b){b=b.split(/[#?]/)[0].split(".").pop().trim();return this.getContentType(b)},getContentType:function(b){if(gx.lang.emptyObject(b))return"text/html";b=b.toLowerCase();b=gx.text.trim(b);if(this.isKnownContentType(b))return b;var f=b.lastIndexOf(".");-1!=f&&(b=b.substring(f+1));b=this.contentTypes[b];return gx.lang.emptyObject(b)?"text/html":b},getFileName:function(b){var f=b.lastIndexOf("/"),k=b.lastIndexOf("\\");f=f>k?f:k;k=b.lastIndexOf(".");if(!b)return b;
if(0>k||f>k)k=b.length;return b.substring(f+1,k)},getFileType:function(b){var f=b.lastIndexOf("/"),k=b.lastIndexOf("\\"),m=b.lastIndexOf(".");return 0>m||m<f||m<k?"":b.substring(m+1)},getWindowInfo:function(){var b="",f=!0,k=!1;try{if(k=window.location!=window.parent.location?!0:!1)try{f=window.frameElement.id||window.top.document.body,b=window.name}catch(m){f=!1}}catch(m){}return{insideIframe:k,canAccessFrame:f,frameId:b}},browser:function(){var b=navigator.userAgent,f=/; rv.([0-9]+)/,k;return{w3c:!0,
ie5:!0,ie:-1!=b.indexOf("MSIE")||-1!=b.indexOf("Trident"),edge:-1!=b.indexOf("Edge"),ff:-1!=b.indexOf("Firefox"),winCE:-1!=b.indexOf("Windows CE"),iphone:-1!=b.indexOf("iPhone"),ipad:-1!=b.indexOf("iPad"),ipod:-1!=b.indexOf("iPod"),blackBerry:-1!=b.indexOf("BlackBerry"),operaMini:-1!=b.indexOf("Opera Mini"),opera:-1!=b.indexOf("Opera"),chrome:-1!=b.indexOf("Chrome"),android:-1!=b.indexOf("Android"),webkit:-1!=b.search(/webkit/ig),safari:-1!=b.indexOf("Safari")&&-1===b.indexOf("Chrome"),isIEStrict:function(){return this.ie},
isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},
isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(m){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=(m||8)},ieVersion:function(){var m=function(){if(this.ie)try{var t=b.indexOf("MSIE");if(0<=t){var v=b.indexOf(";",t),n=b.substring(t+5,v);return parseFloat(n,10)}var w=b.match(f);if(1<w.length)return parseFloat(w[1],10)}catch(A){gx.dbg.logEx(A,
"gxapi.js","ieVersion")}else if(this.edge&&(w=b.match(/ Edge\/([0-9]+)\./),1<w.length))return parseFloat(w[1],10);return-1};k||(k=m.call(this));return k},chromeVersion:function(){if(this.isChrome()){var m=b.match(/Chrome\/([0-9]+)/);if(1<m.length)return parseFloat(m[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&"undefined"!==typeof Range&&!Range.prototype.createContextualFragment&&(Range.prototype.createContextualFragment=function(m){var t=document.createDocumentFragment(),
v=document.createElement("div");t.appendChild(v);v.outerHTML=m;return t});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),addOnce:function(b,f,k){void 0==b[k]&&(b[k]=f)},inArray:function(b,f){if(null==b||!gx.lang.isArray(f))return!1;if("function"==typeof f.indexOf)return-1!=f.indexOf(b);
for(var k=f.length,m=0;m<k;m++)if(f[m]==b)return!0;return!1},pushOnceSorted:function(b,f){for(var k=!0,m=0,t=f.length;m<t;m++){if(b==f[m]){k=!1;break}if(b<f[m]){f.splice(m,0,b);k=!1;break}}k&&f.push(b)},lastArray:function(b){return 0<b.length?b[b.length-1]:null},noParmsUrl:function(b){var f=b.indexOf("?");-1!=f&&(b=b.substring(0,f));return b},resolveUrl:function(b){if(!b)return b;b=gx.util.imageUrl(b);return gx.isabsoluteurl(b)?b:gx.isRelativeToHost(b)?0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?
gx.util.resourceUrl(gx.basePath+b,!1):b:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1)},imageName:function(b){return(b=a.exec(b))?b[1].replaceAll(".","_"):null},imageUrl:function(b){var f=a.exec(b);return f?gx.uc.getComputedImagePath(f[1].replaceAll(".","_")):b},resourceUrl:function(){var b;return function(f,k){b||(b=new RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof f)return"";if(-1!=f.indexOf("://")||"."==f.charAt(0))return gx.text.startsWith(f,gx.basePath)?f.substring(gx.basePath.length):
f;var m="/"!=gx.basePath.charAt(gx.basePath.length-1),t=""==gx.basePath?0:f.search(b);if(0==t&&!k)return("/"==f.charAt(0)?"":"/")+f;if(-1!=t||k){k=-1!=t&&0<gx.basePath.length?gx.text.replaceAll(f.substring(t+gx.basePath.length),"\\","/"):f;if("/"==f.charAt(0))return location.protocol+"//"+location.host+f;f=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);m=m&&"/"!=k.charAt(0);return location.protocol+"//"+location.host+(f?"/":"")+gx.basePath+(m?"/":"")+k}return f}}(),sameAppUrl:function(b){b=new this.Url(b);
return b.isRelative()?!0:b.isSameApp(location.href)},removeBaseUrl:function(b){var f="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1),k=0<gx.basePath.length;var m="/"==gx.staticDirectory.charAt(0)?gx.staticDirectory.substring(1):gx.staticDirectory;m=(new RegExp("(?:/)?(?:"+gx.basePath+(k?"/":"")+"(?:"+m+(f?"/":"")+")?)?((?:[\\S]*))")).exec(b);null!=m&&m[1]&&(b=m[1]);return b},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?
"gx_blank.html":"about:blank"},Url:function(){var b=/^(([^:\/\?#]+):)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,f=/^(([^@]+)@)?([^:]+)(:(.+))?$/,k=function(m){this.url=m;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(t){t=new gx.util.Url(t);return this.protocol==t.protocol&&this.host==t.host};(function(t,v){var n=b;n=n.exec(v);if(v=!gx.lang.emptyObject(n))if(t.protocol=
n[2]?n[2]:"",v=n[4]?n[4]:"",t.path=n[5]?n[5]:"",t.query=n[7]?n[7]:"",t.hash=n[9]?n[9]:"",n=f,n=n.exec(v),v=!gx.lang.emptyObject(n))t.user=n[2]?n[2]:"",t.host=n[3]?n[3]:"",t.port=n[5]?n[5]:""})(this,m)};k.parseWithAnchor=function(m){var t=document.createElement("a");t.href=m;!t.protocol&&gx.util.browser.isIE()&&(t.href=t.href);return t};return k}(),regExp:{isMatch:function(b,f){return null!==(new RegExp(f)).exec(b)},replace:function(b,f,k){return b.replace(f,k)},split:function(b,f){return b.split(f)},
matches:function(b,f){b=(new RegExp(f)).exec(b);return null!==b?b:[]}},autoRefresh:{arTimer:null,getProps:function(){var b=gx.fn.getHidden("_GxRefreshTimeout");null!=b&&(b=gx.json.evalJSON(b),b.Time=parseInt(b.Time));return b},install:function(){var b=this.getProps();null!=b&&(this.create(),"focus"==b.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var b=this.getProps();null!=b&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*b.Time))}},destroy:function(){null!=
gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(b){var f="";if(-1!=b.indexOf("&"))for(var k=b.length,m=0;m<k-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b[m+1];break}return f},accessKeyCaption:function(b){var f="";if(-1==b.indexOf("&"))return b;for(var k=b.length,m=0;m<k-1;m++)if("&"==b[m]&&"&"!=b[m+1]){f+=b.substring(m+1);break}else f+=b[m];return f},invalidFunc:function(b){throw"gxInvalidFunc: "+b;},urlValue:function(b){var f=
b;"string"!=typeof f&&(f=gx.fn.getControlValueInt(b));return encodeURIComponent(f)},help:function(b){open(b,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}}}(),guid:{generate:function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(a){(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}},lang:{inherits:function(a,b,f){var k=a.prototype;a.prototype=
new b;for(var m in k)"undefined"==typeof a.prototype[m]&&(a.prototype[m]=k[m]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===f&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);k.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var f in b)a[f]=b[f];return a},isEmpty:function(a){return a instanceof gx.date.gxdate?0==(new gx.date.gxdate("")).compare(a):"number"==typeof a?0==a:"undefined"!=typeof gx.num.dec&&
a instanceof gx.num.dec.bigDecimal?gx.num.compare(a,0):""==a},instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||b==Array&&"array"==typeof a||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(a=a.base;"undefined"!=typeof a;){if(a==b)return!0;a=a.base}return!1},clone:function(a){var b=
{},f;for(f in a)b[f]=a[f];return b},cloneDeep:function(a){return JSON.parse(JSON.stringify(a))},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isFixedCharacterType:function(a){return"char"==a||"bits"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return 1==
a||0==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==
typeof a&&isNaN(a)?!0:!1},supEval:function(a,b){var f=null;f=b instanceof String||"string"==typeof b?a[b]:b;return function(){return f.apply(a,arguments)}},getType:function(a){var b=null;try{for(var f=0,k=a.split("."),m=k.length;null===b&&f<m;)b=this.getTypeImpl(window,k,f++,m)}catch(t){gx.dbg.logEx(t,"gxapi.js","getType")}return b},getTypeImpl:function(a,b,f,k){var m=null;for(i=f;i<k;i++)if(a[b[i]])a=a[b[i]];else break;i===k&&a&&"function"===typeof a&&(m=a);return m},doEval:function(a,b){b=b||window;
return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],f=arguments.length,k=1;k<f;k++)b.push(arguments[k]);return a.apply(this,b)}catch(m){gx.dbg.logEx(m,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,f,k){a=a.closure(b,f);k=setTimeout(a,k);return{f:a,t:k}},requestAnimationFrame:function(a,b){a=b?a.closure(b):a;window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,
10)},htmlDecode:function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=escape(b).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=b,b=l(a).text(),l(a).text(""));return unescape(b)}}(),arrayUnique:function(a,b){a=a.concat();for(var f=0;f<a.length;++f)for(var k=f+1;k<a.length;++k)(b&&b(a[f],a[k])||a[f]===a[k])&&a.splice(k--,1);return a},objToArray:function(){var a=function(b){return[b]};return function(b){return l.map(b,a)}}()},cache:function(){var a=
!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(b){return this.exceptionsRegEx?!!b&&-1==b.search(this.exceptionsRegEx):!0},addRemoteFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},addLoadedFile:function(b){this.isCacheable(b)&&(b=gx.util.noParmsUrl(b),b=gx.util.resourceUrl(b,!0),this.remoteFiles[b]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(b){var f;if(b)for(f in this.remoteFiles)b.exec(f)&&
(this.remoteFiles[f]=!1)},removeRemoteFile:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);this.remoteFiles[b]=!1},fileLoaded:function(b){b=gx.util.noParmsUrl(b);b=gx.util.resourceUrl(b,!0);return this.remoteFiles[b]?!0:!1},updateStyles:function(b,f){for(var k=[],m=b.length,t=0;t<m;t++){var v=b[t];if(!gx.lang.emptyObject(v)){for(var n=!1,w=f.length,A=0;A<w;A++)if(v==f[A]){n=!0;break}n||k.push(v)}}b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));m=k.length;for(t=0;t<m;t++)v=
k[t],"/"!=v.charAt(0)&&(v=b+v),this.removeRemoteFile(v)},addInlineCode:function(b){this.inlineCode[b]=!0},deleteInlineCode:function(b){delete this.inlineCode[b]},codeLoaded:function(b){return this.inlineCode[b]?!0:!1},_init:function(){if(!a){a=!0;var b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));for(var f=gx.dom.scripts(!0),k=f.length,m=0;m<k;m++){var t=f[m];gx.lang.emptyObject(t)||("/"==t.charAt(0)||gx.isabsoluteurl(t)||(t=b+t),this.addRemoteFile(t))}f=gx.dom.styles();k=f.length;for(m=
0;m<k;m++)t=f[m],gx.lang.emptyObject(t)||("/"==t.charAt(0)||gx.isabsoluteurl(t)||(t=b+t),this.addRemoteFile(t))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,f=0;f<b;f++)if(this._nonSerializables[f]==a)return!0;return!1},evalJSON:function(a,b){try{return window.JSON&&!b?void 0===a?a:JSON.parse(a):eval("("+a+")")}catch(f){gx.dbg.logEx(f,"gxapi.js","evalJSON")}return a},
evalValidJSON:function(a){return eval("("+a+")")},serializeSDTJson:function(a,b,f){a=gx.lang.cloneDeep(a);a=gx.O.applySDTMapping(a,b,!1);return gx.json.serializeJson(a,f)},serializeJson:function(a,b){if(b&&window.JSON)return JSON.stringify(a);var f=this.objToJson(a);if(null===f)f=this.arrayToJson(a);else return f;if(null===f){if("function"==typeof a)return null;f=[];for(var k in a)if(b||!this.isNonSerializable(k)){var m=this.objToJson(k,!0);if(null!==m){var t=this.serializeJson(a[k]);"string"==typeof t&&
f.push(m+":"+t)}}return"{"+f.join(",")+"}"}return f},objToJson:function(a,b){var f=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==f)return gx.text.escapeString(a);if("number"==f)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"'}}else{if("undefined"==f)return f;if("string"==f)return gx.text.escapeString(a);if("number"==f||"boolean"==f)return a.toString();if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+
a.toString()+'"';if(null===a)return"null";if("function"==typeof a.json&&(b=a.json(),a!==b))return this.serializeJson(b)}return null},arrayToJson:function(a){if(Array.isArray(a)){for(var b=[],f=a.length,k=0;k<f;k++){var m=this.serializeJson(a[k]);"string"!=typeof m&&(m="undefined");b.push(m)}return"["+b.join(",")+"]"}return null},SDTFromJson:function(a,b,f,k){(f=gx.json.objFromJson(a,f,k))&&gx.O.applySDTMapping(a,b,!0);return f},objFromJson:function(a,b,f){try{var k=this.evalValidJSON(b);if(Array.isArray(a)&&
Array.isArray(k))for(;a.length>k.length;)a.shift();else for(var m in a)"function"!=typeof a[m]&&delete a[m];for(m in k)a[m]=k[m];return!0}catch(t){return gx.dbg.logEx(t,"gxapi.js","objFromJson"),f&&f.push({Id:"FromJson Error",Description:gx.dbg.exTxt(t),Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+
a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return location.href.replace(location.hash,"")},loadScript:function(a,b,f){var k=b,m=!1,t;if("string"!==typeof a){var v=a.callback;m=a.isExternal;var n=a.attris;a=a.url;k=function(){v&&v();b()}}var w=gx.dom.byTag("head")[0],A=l("script[src='"+a+"']"),r=!0;if(0<A.length&&!f)if(m)A.remove();else{var q=A.get(0);r=!1}f=function(x){var C=function(){x();
q.removeAttribute("data-gx-loading-script")};"function"==typeof x&&(q.addEventListener?gx.evt.attach(q,["load","error"],C,{userCapture:!1}):q.onreadystatechange=function(){"loaded"!=q.readyState&&"complete"!=q.readyState||C()})};if(q)null!==q.getAttribute("data-gx-loading-script")?f(k):k();else{q=document.createElement("script");q.type="text/javascript";q.src=a;if(n)for(t in n)n.hasOwnProperty(t)&&q.setAttribute(t,n[t]);k&&q.setAttribute("async","");m&&q.setAttribute("data-gx-external-script","");
f(k);r&&(w.appendChild(q),q.setAttribute("data-gx-loading-script",""))}}},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(b,f){this.supported&&(this._store[this._prefix+b]=f)};this.get_string=function(b){return this.supported?this._store[this._prefix+b]:null};this.set=function(b,f){this.set_string(b,gx.json.serializeJson(f))};this.get=function(b){return(b=this.get_string(b))?gx.json.evalJSON(b):null};this.remove=function(b){this.supported&&
this._store.removeItem(this._prefix+b)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}},_setBasePath:function(){for(var a=gx.dom.scripts(),b=null,f=0,k=a.length;f<k;f++)if(0<=a[f].indexOf("gxgral.js")||0<=a[f].indexOf("gxcore.js")||0<=a[f].indexOf("gxapiSD.js")){b=a[f];break}var m="";a="";if(!gx.isRelativeToHost(b)||
gx.isabsoluteurl(b))f=location.pathname.lastIndexOf("/"),m=1<f?location.pathname.substring(1,f):"";else{b=b.split("/");var t=location.pathname.split("/");b.splice(b.length-1,1);t.splice(t.length-1,1);f=0;for(k=t.length;f<k;f++)if(t[f]==b[f])m=m+(""==m?"":"/")+t[f];else if(gx.gen.isJava()&&"servlet"==t[f])a=t[f];else break}gx.basePath=m;gx.servletBasePath=a},objectLoad:function(a,b){var f=l.Deferred();if(!gx.evt.execLoad)return f.resolve(),f.promise();var k=function(){gx.sec.loadKey();void 0===gx.runtimeTemplates&&
(gx.runtimeTemplates=0<l("div[data-abstract-form]").length);var m=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(t){if(t=t.getContainer()){gx.setTheme(t);gx.html.applyCustomHTMLAttributes(t);var v=function(){"undefined"!=typeof gx.pendingCmps&&(--gx.pendingCmps,0===gx.pendingCmps&&gx.fx.obs.notify("webcom.all_rendered"))};m||(gx.pendingCmps=gx.pendingCmps||0,gx.pendingCmps+=1,gx.plugdesign.applyTemplateObject({selector:"#"+t.id,observerKey:t.id,
deferred:!0}).then(v))}});gx.fx.obs.addObserver("grid.onafterrender",this,function(t,v){v||gx.dom.fixes.fixTableResets(t.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,!1);gx.plugdesign.init().done(function(){if("undefined"!=typeof gx.StorageTimeZone&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var t=
jstz.determine().name();!gx.lang.emptyObject(t)&&gx.http.getCookie("GxTZOffset")!=t&&gx.http.setCookie("GxTZOffset",t,365,!1,"/")&&gx.config.timezone.reload&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady(function(){gx.evt.setReady(!0,"goReady")});document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.fx.obs.notify("gx.onload");l(document).ready(function(v){gx.dom.indexElements()});gx.evt.userOnload();
gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();m=!1;f.resolve()})};gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()});gx.wpo(function(){k()});return f.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();
gx._deinit();l(document).off("keypress keyup");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr);gx.evt.userReadyCnt=0},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,gx);gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});
gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.fn.getFormElements(),f=0,k=b.length;f<k;f++)gx.dom.purgeElement(b[f],a);b=gx.dom.byTag("span");f=0;for(k=b.length;f<k;f++)gx.dom.purgeElement(b[f],
a);b=gx.dom.byTag("img");f=0;for(k=b.length;f<k;f++)gx.dom.purgeElement(b[f],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);gx._init()}}}(jQuery);gx.$.extend(gx.dbg,gxdbg);Object.defineProperty(gx.evt,"userReady",{get:function(){return gx._isReadyUI()}});
gx.plugdesign=function(l){var c={},d=!1,g,a,b=1,f={},k={},m=function(v,n){return function(w){var A=v[w.property],r;A&&(r=A[w.control.id]);!r&&A&&(r=A[w.control.name]);r&&(A=!0===r.fn.call(r.template,w.control,w.value),n&&(w.cancel=A))}},t=function(v,n){n=n||{};!0===n.deferred&&window.requestIdleCallback?window.requestIdleCallback(v):gx.lang.requestAnimationFrame(v)};return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));
gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},
onBeforePropertyChange:m(f,!0),onAfterPropertyChange:m(k,!1),registerTemplate:function(v){c[v.name]=v},unRegisterTemplate:function(v){delete c[v];gx.plugdesign.definition.templates=l.grep(gx.plugdesign.definition.templates,function(n){return n!==v})},getDOMContext:function(v,n,w,A,r,q){var x;n={};q&&(n.text=l(v).text());q=0;for(x=v.attributes.length;q<x;q++){var C=v.attributes[q];n[C.name]=C.value}n.el=v;w&&(n.outerHTML=v.outerHTML);A&&(n.innerHTML=v.innerHTML);r&&(n=r.call(this,n,v)||n);return n},
assingUserAPI:function(v,n){n.fnc_isRO=v.fnc_isRO},getElements:function(v,n,w,A){v="function"==typeof v.selector?v.selector(n?n:""):n&&!v.global?l(n).find(v.selector):l(v.selector);return w?v.not(w):v},shouldApplyOnElement:function(v,n){return"function"==typeof n.selector?this.getElements(n).is(v):l(v).is(n.selector)},applyTemplateOnElement:function(v,n,w){w=w||{};var A=l.Deferred();t(function(){if("string"==typeof v&&(v=c[v],!v))return;if(!0!==w.checkInclusion||this.shouldApplyOnElement(n,v)){var r=
gx.plugdesign.getDOMContext(n,r,v.outerHTML,v.innerHTML,v.setContext);v.apply(n,r);v.initialize&&v.initialize(r);if(v.listeners){var q=v.listeners,x;r="function"==typeof q.control?q.control(r):q.control;if(q.before)for(x in q.before)q.before.hasOwnProperty(x)&&(f[x]||(f[x]={}),f[x][r]={id:r,fn:q.before[x],template:v});if(q.after)for(x in q.after)q.after.hasOwnProperty(x)&&(k[x]||(k[x]={}),k[x][r]={id:r,fn:q.after[x],template:v})}A.resolve()}}.closure(this),w);return A},applyTemplateSelection:function(v,
n,w,A){A=A||{};var r=l.Deferred(),q=[],x="data-gx-tpl-applied-"+v.name,C=this.getElements(v,n,w,A);!0===v.onDemandInvoke||v.reDraw||(C=C.not("["+x+"]"));C.each(function(F,G){if(G)if("function"==typeof v.reDraw&&null!==G.getAttribute(x)){var p=gx.plugdesign.getDOMContext(G,p,!1,!1,v.setContext);v.reDraw(p)}else q.push(gx.plugdesign.applyTemplateOnElement(v,G,A))});l.when.apply(l,q).done(function(){v.outerHTML&&(C=this.getElements(v,n,w,A));C.attr(x,"");r.resolve()}.closure(this));return r},applyClassMapOnElement:function(v,
n){var w,A;v.initialize&&(w=gx.plugdesign.getDOMContext(n,w,!1,!1,v.setContext));if(Array.isArray(v.cssClass)){var r=0;for(A=v.cssClass.length;r<A;r++)gx.dom.addClass(n,v.cssClass[r])}else gx.dom.addClass(n,v.cssClass);v.initialize&&v.initialize(w)},applyClassSelection:function(v,n,w,A){var r=function(q){"Class"==q.property&&gx.dom.matchesSelector(q.control,v.selector)&&gx.plugdesign.applyClassMapOnElement(v,q.control)};this.getElements(v,n,w,A).each(function(q,x){x&&(gx.plugdesign.applyClassMapOnElement(v,
x),gx.plugdesign.assingUserAPI(v,x),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,r,{unique:!1,observerKey:A.observerKey}))})},controlValueChanged:function(v,n){v&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:v,property:"Value",value:n}])},applyControlValue:function(v,n){gx.fn.setControlValue(v.id,n);gx.html.onchange(v,n)},applyTemplates:function(v,n,w,A,r){r=r||{};var q=l.Deferred();if(0===v.length)return q.resolve();v=l.map(v,function(x){var C=l.Deferred();"string"==
typeof x?x=c[x]:(x.name=x.name||"auto-generated-"+b++,x=new gx.plugdesign.Template(x));if(!A||"function"==typeof A&&A(x)){var F=function(){gx.plugdesign.applyTemplateSelection(x,n,w,r).done(function(){C.resolve()})};!0===r.deferred?t(F):(F(),C.resolve())}else C.resolve();return C});!0===r.deferred?l.when.apply(l,v).done(function(){q.resolve()}):q.resolve();return q},applyClassMaps:function(v,n,w,A,r){var q=l.Deferred(),x=function(F,G){gx.plugdesign.applyClassSelection(G,n,w,r)},C=function(){v=l.grep(v,
A||gx.trueFn);l.each(v,x);q.resolve()};!0===r.deferred?t(C):C();return q},applyTemplateObject:function(v){v=v||{};var n=v.selector,w=v.excluded,A=v.templateSelector,r=v.classMapSelector,q=l.Deferred(),x=l.Deferred();A=A||function(y){return!0!==y.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return q.resolve().promise();if(d){var C=this.applyTemplates(g,n,w,A,v);var F=this.applyClassMaps(a,n,w,r,v);q.resolve()}else{var G=gx.plugdesign.definition;G.css&&l.each(G.css,function(y,
B){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+B+"?"+gx.gxBuild,!1),!1,!0)});var p=[];G.js&&l.each(G.js,function(y,B){p.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+B+"?"+gx.gxBuild,!1))});var u=jQuery;jQuery=gx.$;gx.http.loadScripts(p,function(){d=!0;g=G.templates||[];a=G.class_maps||[];C=this.applyTemplates(g,n,w,A,v);F=this.applyClassMaps(a,n,w,void 0,v);jQuery=u;q.resolve()}.closure(this))}l.when.apply(l,[q,C,F]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",
[v]);x.resolve()});return x.promise()},fixBootstrapGridLayout:function(){0===l(".container-fluid, .container").length&&l(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var v=function(n){var w,A=[];n=n||{};if(n.name){if(n.selector){if(n.listeners){var r=n.listeners;if(!r.control&&(r.before||r.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}}this.preProcessTemplate=function(){var q=this.template,x=/\{\{\$(\w+)\$\}\}/g,
C,F=0;for(A=[];null!==(C=x.exec(q));)A[F]=C[1],q=q.replace(C[0],'<span id="hook_'+F+'"></span>'),F++;return q};this.postProcessTemplate=function(q){var x;if(A){var C=0;for(x=A.length;C<x;C++){var F=q[A[C]];var G=l("#hook_"+C);F&&G.after(F);G.remove()}}};this.apply=function(q,x){var C=gx.util.browser.isIE(),F=!1;!w&&this.template&&(w=this.preProcessTemplate(),Mustache.parse(w));if(w){var G=Mustache.render(w,x);if("inner"==this.applyTo){if(C)for(;q.firstChild;)q.removeChild(q.firstChild);q.innerHTML=
G}else F=q===document.activeElement,q.parentNode&&!C?q.outerHTML=G:l(q).replaceWith(G);this.postProcessTemplate(x);F&&gx.fn.setFocus(q)}};gx.lang.apply(this,n);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};v.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}};return v}()}}(gx.$);
gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea',
cssClass:"form-control"},{selector:".gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input",cssClass:"form-control"},{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',
cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],
first:!0}]};
gx.html=function(l){var c=/<style[^>]*>([\s\S]*?)<\/style>/i,d=/<style[^>]*>([\s\S]*?)<\/style>/ig,g=/<style[^>]*data-gx-href="(.*)"\s*>\s*@import\s*url\("(.*)"\)\s*layer\((.*)\).*/i,a=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,b=/<link ([^>]*rel=['"]?shortcut icon['"]?[^>]*)>/i,f=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/ig,k=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,m=/(<script[^>]*>\s*)\r?\n?\x3c!--\s*\r?\n?(.*)\r?\n?\s*\/\/--\x3e\s*\r?\n?(<.?\/script>)/ig,t=/<script([^>]*)>([\s\S]*?)<\/script>/i,
v=/data-gx-external-script/;HREF_ELEMENT_ATT_REGEX=/href=(['"]?)([^'">]*)\1/i;ID_ELEMENT_ATT_REGEX=/id=(['"]?)([^'">]*)\1/i;SRC_ELEMENT_ATT_REGEX_1=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i;SRC_ELEMENT_ATT_REGEX_2=/src=(['"]?)([^"']*)\1/i;INPUT_GXSTATE_REGEX=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g;INPUT_HIDDEN_REGEX=/(<input type="hidden" name="[a-zA-Z0-9]+" value="[^"]+">)/igm;STYLE_ELEMENT_HREF="data-gx-href";IMAGE_CLASS_APPLIED_ATT="data-gx-image-class";IMAGE_URI_ATT="data-gx-image-uri";
return{encodeCaseFormat:function(n,w,A){w==gx.html.controls.formats.TEXT?n=gx.html.encode(n,!1,A):w==gx.html.controls.formats.TEXT_W_SPACES&&(n=gx.html.encode(n,!0,A));return n},setGXImageCSSClass:function(n,w){var A=n.jquery?n:l(n);n=l(n)[0];(prevImageClass=A.attr(IMAGE_CLASS_APPLIED_ATT))&&A.removeClass(prevImageClass);[].concat($jscomp.arrayFromIterable(n.classList)).forEach(function(r){r.startsWith("GX_Image_")&&n.classList.remove(r)});A.addClass(w);A.attr(IMAGE_CLASS_APPLIED_ATT,w)},applyCustomHTMLAttributes:function(n){n=
n?l(n):l(document);n.find("input[data-msk-att], textarea[data-msk-att]").each(function(w,A){w=l(A);A=w.attr("data-msk-att");w.attr(A,w.attr("data-"+A))});n.find("img["+IMAGE_URI_ATT+"]").each(function(w,A){w=l(A);A=w.attr(IMAGE_URI_ATT);(A=gx.util.imageName(A))&&gx.html.setGXImageCSSClass(w,"GX_Image_"+A+"_Class")})},encode:function(n,w,A){var r=["<",">","&"],q=["&lt;","&gt;","&amp;"];w&&(r.push(" "),q.push("&nbsp;"));A&&(r.push("\n"),q.push("<br/>"),r.push("\r"),q.push(""));return gx.text.charReplace(n,
r,q)},getHidden:function(n,w){return'<input type="hidden" id="'+n+'" name="'+n+'" value="'+w+'">'},viewportWidth:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientWidth,document.body.clientWidth):document.body.clientWidth},viewportHeight:function(){var n=document.documentElement;return n&&n.clientHeight?Math.max(n.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(n,w){(void 0===w||w)&&(n=n.replace(d,""));n=n.replace(f,
"");for(w=[];w;)if(w=n.match(t)){var A=this.nestedScripts(w,n);0<A&&(w=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+A+"}"),"i"),w=n.match(w));(A=w.lastIndex)||(A=w.index+w[0].length);n=n.substring(0,w.index)+n.substring(A)}else break;return n},setOuterHtml:function(n,w){n.outerHTML=w},setInnerHtml:function(n,w,A,r,q){var x=gx.dom.styles(),C=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;gx.dom.shouldPurge()&&gx.dom.purge(n,!0);var F=
l(n).children("."+C).get(0);!F&&r&&(F=document.createElement("div"),gx.dom.addClass(F,C),gx.dom.addClass(F,"Form-fx"),n.appendChild(F));r&&gx.pO.fullAjax&&F&&gx.dom.hasClass(F,C)&&!gx.dom.hasClass(n,"transitioning")?(n=document.createElement("div"),n.innerHTML=this.cleanHtmlRefs(w,q),gx.dom.replaceWithFx(F,n.children[0])):l(n).html(this.cleanHtmlRefs(w,q));gx.util.browser.isIE()&&gx.cache.updateStyles(x,gx.dom.styles());1==A&&this.processCode(w,!1)},setInnerText:function(n,w,A,r){var q=l(n);null!=
n.nodeValue?n.nodeValue=w:gx.util.browser.isChrome()||null==n.innerText?gx.util.browser.isFirefox()||gx.util.browser.isChrome()?q.html(gx.html.encodeCaseFormat(w,A,r)):"TEXT"==n.tagName&&null!=n.innerHTML?q.html(w):q.html("<text>"+w+"</text>"):n.innerText=w},nodesFromText:function(n){var w=document.createElement("div");w.style.visibility="hidden";w.style.display="none";document.body.appendChild(w);gx.dom.shouldPurge()&&gx.dom.purge(w,!0);w.innerHTML=n;n=[];for(var A=w.childNodes.length,r=0;r<A;r++)n.push(w.childNodes[r].cloneNode(!0));
gx.dom.removeControlSafe(w);return n},onTypeAvailable:function(n,w,A,r){try{var q=gx.gen.resolveObjClass(n);try{var x=window.eval(q)}catch(C){}(x=x||eval(q))?A instanceof Array?w.apply(this,A):w():10>r&&setTimeout(function(){gx.html.onTypeAvailable(n,w,A,r+1)},0)}catch(C){10>r&&setTimeout(function(){gx.html.onTypeAvailable(n,w,A,r+1)},150)}},processCSS:function(n){if(""!=n){var w=document.createElement("style");w.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(w);
w.styleSheet?w.styleSheet.cssText=n:(n=document.createTextNode(n),w.appendChild(n))}},nestedScripts:function(n,w){n=n[0].match(k);for(var A=0;n;)w=w.replace(n[1],""),A++,n=(n=w.match(t))?n[0].match(k):null;return A},processCode:function(n,w,A,r,q,x,C){var F=n,G=[],p=!1,u=[],y=[],B=[],E="",I=[];E=[];if(""!=n){if(void 0===x||x)for(;E;){if(E=n.match(c))(x=E.lastIndex)||(x=E.index+E[0].length),n=n.substring(x);else break;B.push(E[1])}n=F;for(E=[];E;){if(E=n.match(g))(x=E.lastIndex)||(x=E.index+E[0].length),
n=n.substring(x);else break;x=E[3];var L=E[2];var M=E[1];x&&!gx.cache.fileLoaded(L)&&(gx.http.loadStyle(L,gx.emptyFn,!0,M,x),gx.cache.addRemoteFile(L))}n=F;for(E=[];E;){if(E=n.match(a))(x=E.lastIndex)||(x=E.index+E[0].length),n=n.substring(x);else break;x=E[1].match(HREF_ELEMENT_ATT_REGEX);M=E[1].match(ID_ELEMENT_ATT_REGEX);x&&!gx.cache.fileLoaded(x[2])&&(y.push({href:x[2],id:M&&2<M.length?M[2]:null}),gx.cache.addRemoteFile(x[2]))}n=F;for(E=[];E;){if(E=n.match(b))(x=E.lastIndex)||(x=E.index+E[0].length),
n=n.substring(x);else break;l("head link[rel='shortcut icon'").remove();l(document.head).append(E[0])}n=F.replace(INPUT_GXSTATE_REGEX,"");n=F;gx.util.browser.isIE()&&(n=n.replace(m,"$1$2$3"));for(E=[];E;){if(E=n.match(t))F=this.nestedScripts(E,n),0<F&&(E=new RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+F+"}"),"i"),E=n.match(E)),(x=E.lastIndex)||(x=E.index+E[0].length),n=n.substring(x);else break;void 0!=E[1]&&""!=E[1]?(x=E[1].match(SRC_ELEMENT_ATT_REGEX_1),
F=!!E[1].match(v),null==x&&(x=E[1].match(SRC_ELEMENT_ATT_REGEX_2)),x&&!gx.cache.fileLoaded(x[2])?(L=x[2],gx.lang.emptyObject(x[3])||(L+="?"+x[3]),G.push({url:L,isExternal:F,callback:F?void 0:function(R,P){return function(){gx.cache.addRemoteFile(R)}}(x[2],F)})):x&&gx.cache.fileLoaded(x[2])?p=!0:!x&&E[2]&&u.push(E[2])):E[2]&&u.push(E[2])}if(1!=w){E=u.join(";");""!=E&&gx.lang.doEval(E);if("function"==typeof A)gx.http.loadScripts(G,function(R,P){P instanceof Array?R.apply(this,P):R()}.closure(this,[A,
r]),void 0,C);else{w={method:"GET",useCash:!0};w.load=function(R,P){gx.lang.supEval(this,I.push(P))}.closure(this);w.mimetype="text/plain";w.sync=!0;var O=G.length;for(n=0;n<O;n++)w.url=G[n].url,gx.http.doCall(w)}E=I.join("");""!=E&&gx.lang.doEval(E);G=document.getElementsByTagName("style");scrQty=y.length;for(n=0;n<scrQty;n++){w=!1;C=G.length;for(u=0;u<C;u++)G[n]&&y[n].href==(G[u].styleSheet&&G[u].styleSheet.cssText?G[u].styleSheet.cssText:G[u].innerHTML)&&(w=!0);w||((w=gx.dom.byId(y[n].id))?w.href=
y[n].href:gx.http.loadStyle(y[n].href,gx.emptyFn,!1,y[n].id))}E=B.join("");gx.html.processCSS(E);if(0==O&&"function"==typeof A)if(p&&q)gx.html.onTypeAvailable(q,A,r,0);else r instanceof Array?A.apply(this,r):A()}}},getFieldLabel:function(n,w){var A=n.id,r=n.previousSibling;if(r&&"LABEL"===r.tagName&&r.htmlFor===A)labelEl=r;else{if("INPUT"==n.tagName||"SELECT"==n.tagName||"TEXTAREA"==n.tagName)var q=n.id;else"SPAN"==n.tagName?(q=l(n).attr("data-gx-enabled-id"))||0!==A.indexOf("span_")||(q=A.substring(5)):
gx.dom.hasClass(n,gx.uc.gxCssClass)&&(q=gx.uc.CtrlId(n.id));gx.dom.hasClass(n,gx.html.multimediaUpload.gxCssClass)&&(q=gx.html.multimediaUpload.CtrlId(n.id));if(q)return l("label[for='"+q+"']",w).get(0)}},multimediaUpload:{gxPreviewHTMLAtt:"data-gx-preview-image",gxCssClass:"gx-multimedia-upload",setPreviewAtt:function(n,w){(n="Object"===typeof n?n:gx.dom.el(n))&&n.setAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt,w)},getPreviewAtt:function(n){return(n="Object"===typeof n?n:gx.dom.el(n))?n.getAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt):
""},getInputFileEl:function(n){return l("#"+n+"[type='file']")[0]},CtrlId:function(n){return n.replace(/_ct$/,"")},resolveFileName:function(n,w){return n||w||""},onOptionChange:function(n){n=this.getElements(n);var w=n.fileField,A=n.uriField;n.uriOption.checked?(gx.dom.removeClass(w,"field-selected"),gx.dom.addClass(A,"field-selected")):(gx.dom.removeClass(A,"field-selected"),gx.dom.addClass(w,"field-selected"))},imageLoadHandler:function(n,w){var A=function(q){var x="IMG"==q.tagName?"src":"href";
return!q[x]||q[x]==document.location.href||"/"==q[x].charAt(q[x].length-1)};gx.dom.removeClass(w,"gx-multimedia-unknown");gx.dom.removeClass(w,"gx-multimedia-download");!n||A(n)?gx.dom.addClass(w,"gx-multimedia-empty"):gx.dom.removeClass(w,"gx-multimedia-empty");A(n)&&w&&!A(w)&&(gx.dom.removeClass(w,"gx-multimedia-empty"),("IMG"!==n.tagName||A(n))&&gx.dom.addClass(w,"gx-multimedia-download"));if(gx.util.browser.isIE()&&n&&"IMG"==n.tagName){w=l(n);A=parseInt(w.css("maxWidth"));var r=parseInt(w.css("maxHeight"));
A<n.width&&(w.css("height",gx.dom.addUnits(A*n.height/n.width)),w.css("width",gx.dom.addUnits(A)));r<n.height&&(w.css("width",gx.dom.addUnits(r*n.width/n.height)),w.css("height",gx.dom.addUnits(r)))}},dialogCloseHandler:function(n,w,A){A=this.getElements(n);w.style.display="none";n.appendChild(w);A.uriOption.checked?this.refreshPreviewImg(n,A.uriField):this.refreshPreviewImg(n,A.fileField);A.action.focus();gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(n,
w){n=n||event;var A=gx.evt.source(n);0<l(A).closest(".gx-multimedia-empty").length&&this.actionClickHandler(n,w)},actionClickHandler:function(n,w){var A=gx.html.multimediaUpload.isModal;n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1;n=this.getElements(w);var r=n.button[1];n.fieldsCt.style.display="block";var q=130,x=500,C=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(w.style.position="static",n.fileField.style.marginTop="0",n.uriField.style.marginTop="0",q=230);gx.runtimeTemplates&&
(C=!1,l(window).width()<x&&(x=l(window).width()-20,q=170));w=gx.popup.openDialog({parentElement:w,w:x,h:q,contentHtml:n.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:C,isModal:void 0===A||A,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[w,n.fieldsCt,r])}});n.fileOption.focus();gx.evt.attach(r,"click",w.close,w,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(n,w){n=n||event;n.preventDefault?n.preventDefault():
n.returnValue=!1;n=this.getElements(w);n.uriField.value="";n.fileField.value="";n.uriOption.checked=!1;n.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[w]);this.clearPreviewImg(w);this.imageLoadHandler(n.previewImg,n.previewLink)},keypressHandler:function(n){13==n.event.keyCode&&(n.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(n){this.getElements(n).action.focus()},getElements:function(n){n=gx.dom.byId(n);var w=l(n);n=w.find(".change-action")[0];var A=w.find(".clear-action")[0],
r=null,q=l(A).next()[0];w=w.find(".fields-ct");q&&("A"==q.tagName?(r=q,q=q.firstChild):"IMG"!=q.tagName&&(q=null));return{previewLink:r,action:n,clearAction:A,previewImg:q,fieldsCt:w[0],uriField:w.find("input[type='text']")[0],fileField:w.find("input[type='file']")[0],uriOption:w.find("input[type='radio'][value='uri']")[0],fileOption:w.find("input[type='radio'][value='file']")[0],button:w.find("input[type='button']")}},getContainer:function(n){for(n=gx.dom.byId(n);n;){if(gx.dom.hasClass(n,gx.html.multimediaUpload.gxCssClass))return n;
n=n.parentNode}return null},setPreviewImage:function(n,w){n=gx.dom.byId(n);var A=this.getElements(n);0>gx.util.Url.parseWithAnchor(w).protocol.search(/^https?:/)&&A.uriOption.checked||(this.clearPreviewImg(n),A.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(w),"image")&&("IMG"==A.previewImg.tagName&&(A.previewImg.src=w),this.imageLoadHandler(A.previewImg,A.previewLink)))},setPreviewLink:function(n,w){n=gx.dom.byId(n);n=this.getElements(n);n.previewLink&&w&&n.previewLink&&(n.previewLink.href=
w);this.imageLoadHandler(n.previewImg,n.previewLink)},clearPreviewImg:function(n){n=gx.dom.byId(n);(n=this.getElements(n))&&n.previewImg&&n.previewLink&&(n.previewImg.src="",n.previewLink.href="")},refreshPreviewImg:function(n,w){n=gx.dom.byId(n);var A=this.getElements(n);if(A.previewImg&&"INPUT"==w.tagName){this.setPreviewAtt(n,"");if(w==A.fileField){var r;if(w.files&&(r=w.files[0]))if(r.type.match(/image.*/)){var q=new FileReader;q.onload=function(x,C,F){C.src=x.target.result;F.href=x.target.result;
this.setPreviewAtt(n,x.target.result)}.closure(this,[A.previewImg,A.previewLink],!0);q.readAsDataURL(r)}else{A.previewLink.href="#";A.previewLink.className="gx-multimedia-download";this.clearPreviewImg(n);return}w.gxctrldeleted&&this.clearPreviewImg(n)}else w==A.uriField&&(A.previewImg.src=w.value,A.previewLink.href=w.value);this.imageLoadHandler(A.previewImg,A.previewLink)}},setType:function(n,w){n=gx.dom.byId(n);var A=this.getElements(n);A.fileOption.checked=w;A.uriOption.checked=!w;w&&(A.uriField.value=
"");this.onOptionChange(n)},getOptionValue:function(n){n=gx.dom.byId(n);return this.getElements(n).fileOption.checked?"file":"uri"},createControl:function(n){n=gx.dom.byId(n);if(!n._created){n._created=!0;var w=this.getElements(n);gx.dom.addClass(w.fileField,"field-selected");w.action.setAttribute("gxfocusable","1");var A=document.createElement("input");A.type="button";A.className="BtnCancel";A.value=gx.getMessage("GXM_cancel");A.onclick=function(){gx.fn.closeWindow([])};w.fieldsCt.appendChild(A);
A=document.createElement("input");A.type="button";A.className="BtnEnter";A.value=gx.getMessage("GXM_uploadconfirmoption");w.fieldsCt.appendChild(A);A=this.imageLoadHandler.closure(this,[w.previewImg,w.previewLink]);var r=this.onOptionChange.closure(this,[n]);A();w.previewImg&&gx.evt.attach(w.previewImg,"load",A);r();gx.evt.attach(w.uriOption,"click",r);gx.evt.attach(w.fileOption,"click",r);gx.evt.attach(w.action,"click",this.actionClickHandler.closure(this,[n],!0));gx.evt.attach(w.previewImg.parentNode,
"click",this.prevImgClickHandler.closure(this,[n],!0));gx.evt.attach(w.clearAction,"click",this.clearActionHandler.closure(this,[n],!0));gx.evt.attach(n,"touchstart",this.tapHandler.closure(this,[n]))}}},controls:function(){var n={},w={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}</label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',
"{{/values}}","</span>"]},A=function(q,x){var C=gx.lang.isArray(w[q])?w[q].join(""):w[q];n[q]||(n[q]=!0,Mustache.parse(C));return Mustache.render(C,x)},r=/"/g;return{applyTemplate:A,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,
formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(q){return"combo"==q||"dyncombo"==q||"listbx"==q||"dynlistbx"==q?!0:!1},eventJSCode:function(q,x,C,F,G){var p="";if(4==q&&C)p=C;else if(1==q)p="gx.fn.closeWindow();";else if(7==q)q="",F&&G&&(q=",'"+F.gridName+"','"+G.gxId+"'"),p="gx.evt.execCliEvt( "+x+q+",this);";else if(6==q||5==q)p="gx.evt.execEvt("+x+",this,"+F.gridId+");";return p},onJsEventAttributes:function(q,x,C){var F=gx.GxObject,G=
" "+F.GX_EVENT_DATA_ATTR+'="'+q+'"';scriptAttribute="";4===q&&(scriptAttribute=" "+F.GX_EVENT_CODE_DATA_ATTR+'="'+q+'"');C?G=x?G+(" "+F.GX_EVENT_CONDITION_DATA_ATTR+'="'+C+'"'+scriptAttribute):G+scriptAttribute:x&&(G+=scriptAttribute);return G+" "},startAnchor:function(q,x,C,F,G,p,u){u=u?' class="'+u+'"':"";x=this.onJsEventAttributes(x,C,F);F?q.append('<a href="#"'+x+u+">"):C?q.append('<a href="#"'+x+u+">"):G&&(C=G.replace(/(\\")/ig,"\\u0022"),q.append('<a href="'+C+'"'),""!=p&&q.append(' target="'+
p+'"'),q.append(u+">"))},endAnchor:function(q,x,C,F){(x||C||F)&&q.append("</a>")},onJSEvent_impl:function(q,x,C){var F=[];""!=C&&F.push('jsevent="'+C+'" ');F.push(q+'="if( ');""!=x?F.push("gx.evt.jsEvent(this)) {"+x+'} else return false;"'):F.push('!gx.evt.jsEvent(this)) return false;"');return F.join("")},onJSEvent:function(q,x,C,F){q.append(" ");q.append(this.onJSEvent_impl(x,C,F))},htmlControl:function(q,x,C,F,G){this.id=q||"";this.width=x||0;this.widthUnit="px";this.height=C||0;this.heightUnit=
"px";this.cssClass=F||"";this.style=this.ownCssClass=this.roClass="";this.title=G||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(p){return this.buffer.append(p)};
this.tagAtt=function(p,u){u=u.toString();u=0<=u.indexOf('"')?u.replace(r,"&quot;"):u;return this.buffer.append(" "+p+(u?'="'+u+'"':""))};this.persistValue=function(){var p=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&p&&(this._persistValue?this._persistValue():p.v2v&&p.v2v(this.value))};this.setIndividualProp=function(p,u){this[p]="enabled"==p||"visible"==p||"isPassword"==p||"autoComplete"==p||"hasJsLink"==p?gx.lang.gxBoolean(u):u};this.setGridData=function(p){this.grid=p.grid;this.row=
p.row;this.gridId=p.gridId;this.gridRow=p.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var p=this.grid.parentObject;return gx.json.serializeJson([p.CmpContext,p.IsMasterPage])}},singleLineEdit:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=
!1;this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha){this.id=p;this.inputType=pa;this.step=ka;this.title=L;this.placeholder=M;this.width=fa;this.widthUnit=da;this.height=17==oa?0:oa;this.heightUnit=z;this.maxLength=D;this.visible=0!=ba;this.enabled=0!=ia;this.rtEnabled=0!=ma;this.isPassword=0!=J;this.format=H;this.link=E;this.linkTarget=I;this.style=Y;this.cssClass=P;this.roClass=W;this.columnClass=Z;this.columnHeaderClass=aa;this.vStruct=
gx.O.getValidStructFld(this.column.htmlName);ea&&(this.rtEnabled||this.enabled)&&(u=ha);this.formattedValue=""===ha?"":gx.lang.emptyObject(u)?gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(ha||"",H)):gx.html.encodeCaseFormat(u,H);this.extraAttributes=y;this.jsScrCode=R;this.usrOnclick=O;this.eventName=B;this.parentId=K;this.hasTheme=N;this.autoComplete=0!=Q;this.autoCorrection=0!=S;this.value=ha||"";this.domainName=X;this.rtPicture=V};this._getHtml=function(){var p="",u=this.getVStruct();0==
this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?p=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");var y=this.style;this.style+=this.visible?"":";display:none;";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),
this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(1==this.isPassword)this.tagAtt("type",
"password");else{this.tagAtt("type",this.inputType);if(this.step&&("number"==this.inputType||"range"==this.inputType)){this.tagAtt("step",this.step);var B=Math.pow(10,this.maxLength)-1;this.tagAtt("min",-1*B);this.tagAtt("max",B);"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')}this.dataType==gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")}this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?
gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(p);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&"datetime"!=this.inputType&&"datetime-local"!=this.inputType&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.rtPicture&&this.tagAtt("data-gx-rt-picture",
this.rtPicture);p=this.style;""!=this.column.align&&(p+=";text-align:"+this.column.align);B=!this.enabled&&this.rtEnabled?";display:none;":"";p+=B;""!=p&&this.tagAtt("style",p);this.append(this.extraAttributes);gx.fn.controlFiresEvent(u)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,u.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(p=this.grid.parentObject.getValidStructFld(this.id),
void 0!=p.dp&&(0==p.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),B=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+B),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==
gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value);B=this.hasTheme?gx.fn.prefixROClass(0==this.parentId?this.cssClass:this.roClass):this.cssClass;p="";this.format!=gx.html.controls.formats.RAW_HTML&&(gx.runtimeTemplates&&this.append('<p class="form-control-static">'),y+=this.visible?"":";display:none;",this.append("<span"),gx.runtimeTemplates&&this.append(" data-gx-tpl-applied-readonly-atts-vars"),this.append(this.extraAttributes),""!=B&&this.tagAtt("class",B),""!=y&&
this.tagAtt("style",y),this.tagAtt("data-gx-readonly",""),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),gx.fn.controlFiresEvent(u)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,u.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"),p=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,
this.jsScrCode,p,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword)for(y=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength),u=0;u<y;u++)this.append("*");else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,p,this.usrOnclick,this.link),this.append("</span>"),gx.runtimeTemplates&&this.append("</p>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},
multipleLineEdit:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D,J,H,K){this.id=p;this.visible=0!=E;this.enabled=0!=I;this.rtEnabled=0!=L;this.width=M;this.widthUnit=O;this.height=R;this.heightUnit=P;this.style=W;this.cssClass=Z;this.columnClass=aa;this.columnHeaderClass=ba;this.maxLength=ia;this.extraAttributes=y;this.autoresize=0!=ma;this.format=B;this.link=u;this.linkTarget=
ka;this.placeholder=fa;this.value=K||"";this.autoCorrection=0!=da;this.domainName=z;this.maxTextLines=pa;this.jsScrCode=J;this.title=H};this._getHtml=function(){var p=this.getVStruct();this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)this.row.ownerGrid.isFreestyle||void 0!==this.column.titleformat&&this.column.titleformat!=gx.html.controls.formats.TEXT||this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),
this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),
this.tagAtt("maxlength",this.maxLength),""!=this.title&&this.tagAtt("title",this.title),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,
gx.html.controls.formats.TEXT,!1)),this.append("</textarea>");if(!this.enabled){var u=this.visible?"":"display:none;";this.autoresize||(u+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);this.cssClass=gx.fn.prefixROClass(this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=u&&this.tagAtt("style",u);this.tagAtt("data-gx-readonly","");""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id",
"span_"+this.id);p.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,p.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.format===gx.html.controls.formats.TEXT_W_SPACES&&this.tagAtt("data-text-format",gx.html.controls.formats.TEXT_W_SPACES);this.append(">");gx.html.controls.startAnchor(this,this.jsScrCode,!!p.evt,"",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,
!!p.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(q,x,C,F,G,p,u){this.base(q,x,C,F,G);this.type=gx.html.controls.types.blob;this.display=p||0;this.contentType=u||"text/html";this.parameters=this.url="";this.setProperties=function(y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D,J,H,K,N,Q,S,U){this.id=y;this.value=B;this.contentType=E||"text/html";this.linkTarget=L;this.parameters=M;this.display=O;this.visible=0!=P;this.enabled=0!=R;this.alt=
Y;this.title=W;this.borderWidth=Z;this.autoresize=0!=aa;this.width=ba;this.widthUnit=ia;this.height=ma;this.heightUnit=pa;this.vSpace=ka;this.hSpace=fa;this.jsScrCode=da;this.usrOnclick=oa;this.eventName=z;this.style=D;this.cssClass=J;this.columnClass=H;this.columnHeaderClass=K;this.extraAttributes=N;this.extraDisplayAttributes=Q;this.jsDynCode=S;this.url=gx.util.resolveUrl(U)};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",
0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var y=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(y){this.append("<img");this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",
this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0==this.width||this.autoresize||(this.style=this.style+"width:"+this.width+this.widthUnit+";");0==this.height||this.autoresize||(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);var B=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;this.enabled||
(B=gx.fn.prefixROClass(B));this.tagAtt("class",B);this.append(this.extraDisplayAttributes);this.append(">");y?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),
this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var E="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");B=gx.dom.byId(this.id);this.grid&&this.grid.parentObject.isTransaction()&&B&&this.value===B.value?(y=this.id+"_hook",this.append("<div"),this.tagAtt("id",y),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:B,hookId:y})):(this.append("<input"),
this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(E+="display:none;"),0!=this.width&&(E=E+"width:"+this.width+";"),this.tagAtt("style",E),this.tagAtt("value",this.value),B=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,this.enabled||(B=gx.fn.prefixROClass(B)),this.tagAtt("class",B),y&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(q,x,C,F,G){this.base(q,
x,C,F,G);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba){this.possibleValues=p.v||[];this.id=u;this.title=y;this.visible=0!=B;this.enabled=0!=E;this.columns=I;this.orientation=L;this.style=M;this.cssClass=O;this.columnClass=R;this.columnHeaderClass=P;this.jsScrCode=Y;this.usrOnclick=W;this.eventName=Z;this.extraAttributes=aa;this.value=ba};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=
gx.text.trim(this.value.toString()));var p=[];p.push(this.enabled?this.cssClass:gx.fn.prefixROClass(this.cssClass));p.push("gx-radio-button");1==this.orientation&&p.push("gx-radio-button-vertical");p=p.join(" ");var u=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(A("radio",{id:this.id,className:p,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",
u,this.usrOnclick),values:l.map(this.possibleValues,function(y,B){return{itemId:this.id+"_"+B,itemValue:y[0],itemDesc:y[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(y[0].toString())}}.closure(this))}))}},comboBox:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D){this.possibleValues=p.v||[];this.id=u;this.title=M;this.visible=
0!=O;this.enabled=0!=R;this.rtEnabled=0!=P;this.rows=y;this.format=Y;this.width=W;this.widthUnit=Z;this.height=aa;this.heightUnit=ba;this.style=ia;this.cssClass=ma;this.columnClass=pa;this.columnHeaderClass=ka;this.formattedValue=da;this.jsScrCode=E;this.usrOnclick=B;this.eventName=I;this.extraAttributes=fa;this.value=D;this.rawValue=p};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+
this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var p=this.style+" ;overflow:hidden;",u=this.enabled||this.rtEnabled;this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(u){var y=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);
""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",y,this.usrOnclick);this.append(">");y=this.possibleValues.length;for(var B=0;B<y;B++){var E=this.possibleValues[B];this.append("<option");this.tagAtt("value",E[0]);gx.text.trim(E[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&
this.append(" selected");this.append(">");this.append(E[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);y=gx.fn.prefixROClass(this.cssClass);p+=this.visible?"":";display:none;";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=y&&this.tagAtt("class",y);""!=p&&this.tagAtt("style",p);gx.O.DSO&&this.tagAtt("data-gx-readonly","");u||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,
gx.json.serializeJson(this.rawValue));this.append(this.extraAttributes);this.append(">");y=this.possibleValues.length;for(B=0;B<y;B++)if(E=this.possibleValues[B],gx.text.trim(E[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(E[1]);break}this.append("</span>")}}},listBox:function(q,x,C,F,G,p){this.base(q,x,C,F,G);this.type=gx.html.controls.types.listBox;this.rows=p},checkBox:function(q,x,C,F,G,p,u,y){this.base(q,x,C,F,G);this.type=gx.html.controls.types.checkBox;
this.caption=p||"";this.checkedValue=u;this.uncheckedValue=y;this.setProperties=function(B,E,I,L,M,O,R,P,Y,W,Z,aa,ba){this.id=B;this.title=E;this.visible=0!=L;this.enabled=0!=M;this.checkedValue=O;this.caption=R;this.style=P;this.cssClass=Y;this.columnClass=W;this.columnHeaderClass=Z;this.extraAttributes=aa;this.value=ba;this.labelCaption=I};this._getHtml=function(){var B=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));
var E=this.cssClass;this.enabled||(E=gx.fn.prefixROClass(this.cssClass));this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=E&&this.tagAtt("class",E);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);
""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(B)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,B.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(p,u,y,B,E,I,L,
M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D,J,H,K,N,Q){this.id=p;this.accessKey=B;this.visible=0!=I;this.enabled=0!=L;this.alt=M;this.title=O;this.borderWidth=R;this.autoresize=0!=P;this.width=Y;this.widthUnit=W;this.height=Z;this.heightUnit=aa;this.vSpace=ba;this.hSpace=ia;this.link=u;this.linkTarget=y;this.jsScrCode=ma;this.usrOnclick=pa;this.eventName=ka;this.style=fa;this.cssClass=da;this.columnClass=oa;this.columnHeaderClass=z;this.align=D;this.extraAttributes=J;this.useMap=H;this.jsDynCode=
K;this.imgSrcSet=N;this.value=this.imageUrl=Q};this._getHtml=function(){var p=this.getVStruct();this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));var u=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=u&&(this.accessKey=u);this.style+=this.visible?"":";display:none;";u=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,
this.grid,this.row);this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,this.jsScrCode,u,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);
""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);
""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);p.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,p.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&""!=this.link&&
""==u&&gx.html.controls.endAnchor(this,u,this.usrOnclick,this.link)};this._persistValue=function(){var p=this.getVStruct();p.v2v&&p.v2v(this.imageUrl)}},multimedia:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.multimedia;this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa){this.id=p;this.text=u;this.display=0!=y;this.visible=0!=B;this.enabled=0!=E;this.autoresize=0!=I;this.width=L;this.widthUnit=M;this.height=O;this.heightUnit=R;this.jsScrCode=
P;this.usrOnclick=Y;this.eventName=W;this.style=Z;this.cssClass=aa;this.columnClass=ba;this.columnHeaderClass=ia;this.extraInputAttributes=ma;this.jsDynCode=ka;this.readOnly=0!=fa;this.isBlob=gx.lang.gxBoolean(da);this.multimediaUrl=oa;this.value=gx.util.resolveUrl(oa)};this.startMultimediaUploadControl=function(p,u,y,B){return['<div id="',p,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(B||"")+(u?"":"display:none;"),'" ',gx.html.multimediaUpload.gxPreviewHTMLAtt,'="',this.value,
'" ">'].join("")};this.endMultimediaUploadControl=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba){y=[];B=gx.html.multimediaUpload.getInputFileEl(this.id);E="checked";I="";L=p.match(/([\w]+)(_\d{4})$/);L=L[1]+"_GXI"+L[2];if(aa||void 0===aa)E="",I="checked",u="";aa=['<div id="',p,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',p,'Option" type="radio" value="file" ',I,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',p,'Option" type="radio" value="uri" ',
E,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',P,'" id="',L,'" name="',L,'" value="',u,'" ',W," />"];y.push(aa.join(""));aa=B?['<div id="',p,'_hook"></div>']:['<input type="file" class="field ',P,'" id="',p,'" name="',p,'" accept="',ba,'" ',W,"/>"];y.push(aa.join(""));aa=["</div>","</div>"];y.push(aa.join(""));return y.join("")};this.getPreviewHtml=function(){var p=gx.fn.prefixROClass(this.cssClass||""),u=this.value,y=u?' href="'+u+'"':"",B=this.readOnly||
!this.enabled,E=B?this.id:"";return(gx.text.startsWith(gx.util.getContentTypeFromExt(u),"image")||!B&&""===u?["<a",' class="'," gx-multimedia-ro",'"',' target ="_blank"',y,">",'<img id = "Object_',this.id,'" class = "',p,'" alt = "',this.alt,'" src = "',u,'" />','<span id="',E,'" class="',this.placeHolderClass,'"></span>',"</a>"]:["<a",u?" download":"",' class="'," gx-multimedia-ro",'"',' target = "_blank"',y,">",'<span id = "',E,'" class = "',p," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),
'"></span>',"</a>"]).join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&
this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var p=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&p&&this.grid.addControlToReuse({el:p,hookId:this.id+"_hook"})}};this._persistValue=function(){var p=this.getVStruct();p.v2v&&p.v2v(gx.html.multimediaUpload.getPreviewAtt(this.id+
"_ct")||this.multimediaUrl)}},image:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa,ka,fa,da,oa,z,D,J,H,K,N,Q,S,U,X,T){this.id=p;this.accessKey=B;this.visible=0!=I;this.enabled=0!=L;this.alt=M;this.title=O;this.borderWidth=R;this.autoresize=0!=P;this.width=Y;this.widthUnit=W;this.height=Z;
this.heightUnit=aa;this.vSpace=ba;this.hSpace=ia;this.link=u;this.linkTarget=y;this.jsScrCode=ma;this.usrOnclick=pa;this.eventName=ka;this.style=fa;this.cssClass=da;this.columnClass=oa;this.columnHeaderClass=z;this.align=D;this.extraInputAttributes=J;this.extraImageAttributes=H;this.useMap=K;this.jsDynCode=N;this.readOnly=0!=Q;this.isBlob=gx.lang.gxBoolean(S);this.isAttribute=gx.lang.gxBoolean(U);this.imgSrcSet=X;this.multimediaUrl=T;this.value=gx.util.resolveUrl(T);this.themeName=E;this.className=
da;U&&(this.className=gx.fn.prefixROClass(da));p=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(p);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.widthUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,
this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};this.getPreviewHtml=function(){var p=this.value,u=gx.fn.prefixROClass(this.cssClass||"");return['<a target="_blank" class="gx-multimedia-ro"><img id="Object_',this.id,'" class="',u,'" alt="',this.alt,'" src="',p,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=
this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,
this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var p=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&this.grid.parentObject.isTransaction()&&p&&this.grid.addControlToReuse({el:p,hookId:this.id+"_hook"})}}},video:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},
audio:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.textBlock;this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z){this.id=p;this.visible=0!=R;this.enabled=0!=P;this.rtEnabled=0!=
Y;this.format=W;this.title=O;this.link=u;this.linkTarget=y;this.jsScrCode=M;this.usrOnclick=B;this.eventName=E;this.extraAttributes=I;this.cssClass=L;this.value=gx.text.replaceAll(Z,"","'")};this._getHtml=function(){var p=this.getVStruct(),u=this.enabled||this.rtEnabled;if(this.format!=gx.html.controls.formats.RAW_HTML){if(this.format==gx.html.controls.formats.HTML){var y=(this.visible?";display:inline;":";display:none;")+this.extraAttributes;this.append("<div ")}else y=(this.visible?"":";display:none;")+
this.extraAttributes,this.append("<span ");this.tagAtt("id",this.id);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.tagAtt("data-gxformat",this.format);""!=y&&this.tagAtt("style",y);""!=this.title&&this.tagAtt("title",this.title);gx.fn.controlFiresEvent(p)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,p.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">")}u?
(y=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,y,this.usrOnclick,this.link,this.linkTarget)):y="";this.append(gx.html.encodeCaseFormat(this.value,this.format));u&&gx.html.controls.endAnchor(this,y,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),
!1)}},label:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.label;this.setProperties=function(p,u,y,B,E,I){this.referencedEl=p;this.labelCaption=u;this.labelClass=y;this.extraStyle=I;this.addAttributes=[0===B?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(A("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(q,
x,C,F,G,p){this.base(q,x,C,F,G);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=p||"rounded";this.setProperties=function(u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia){this.reset=ba;this.id=u;this.title=I;this.accessKey=L;this.style=M;this.cssClass=O;this.visible=0!=R;this.enabled=0!=P;this.buttonStyle=Y;this.jsScrCode=E;this.usrOnclick=B;this.eventName=W+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=Z;this.jsCode=y;this.jsDynCode=aa;this.caption=ia};this._getHtml=
function(){var u=this.getVStruct();this.style+=this.visible?"":";display:none;";var y="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",y),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");y="button";1==this.reset?y="submit":0==this.reset&&(y="reset");this.tagAtt("type",
y);y=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==y&&(y=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=y&&(this.accessKey=y);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||this.append(" disabled");
this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);gx.fn.controlFiresEvent(u)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,u.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=
function(p){this.containerName=p;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(p,u){this.id=this.containerName=p;this.visible=0!=u};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);
this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(p,u){this.parentName=p;this.containerName=u;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class",
"gx_usercontrol_child");this.append(">")}},webComponent:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(p){this.controlName=p;var u=this.grid.parentObject.getComponentData(this.controlName);p=u.Prefix;var y=this.grid.gxComponentContext+"gxHTMLWrp"+p+this.gridRow,B=gx.dom.byId(y),E="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+p+this.gridRow);if(null!=B)u=y+"_hook",this.grid.addComponentToDraw({create:!1,
existingEl:u,el:y,p:this.grid.gxComponentContext+p+this.gridRow}),y=u;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(B=gx.csv.lastEvtResponse.gxComponents[y],gx.lang.emptyObject(B))E="";else{E=gx.html.cleanHtmlRefs(B);var I=gx.fn.getHidden(this.grid.gxComponentContext+p+this.gridRow);I||(I=u.GXClass);gx.lang.emptyObject(I)||this.grid.addComponentToDraw({load:!0,n:I.toLowerCase(),p:this.grid.gxComponentContext+p+this.gridRow,c:B})}this.id=
y;this.content=E};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P){this.id=p;this.value=u;this.visible=0!=y;this.width=B;this.widthUnit=E;this.height=
I;this.heightUnit=L;this.borderStyle=M;this.align=O;this.title=R;this.scrollbars=P};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),
this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia){this.id=p;this.visible=0!=u;this.cssClass=y;this.background=B;this.backColor=
E;this.borderColor=I;this.align=L;this.title=M;this.borderWidth=O;this.cellPadding=R;this.cellSpacing=P;this.height=Y;this.width=W;this.rules=Z;this.heightUnit=aa;this.widthUnit=ba;this.style="";this.header=ia};this._getHtml=function(){var p=this.getVStruct();this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var u=
parseInt(this.backColor);u=isNaN(u)?this.backColor:gx.color.html(u).Html;this.style=this.style+"background-color: "+u+";"}""!=this.borderColor&&(u=parseInt(this.borderColor),u=isNaN(u)?this.borderColor:gx.color.html(u).Html,this.style=this.style+"border-color: "+u+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+
";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);
p.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,p.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("</caption>"))}},row:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(p,
u,y){u&&(this.cssClass=this.ownCssClass?u+(this.ownCssClass?" "+this.ownCssClass:""):u);this.style=y};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);
""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.cell;this.className=this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(p,u,y){this.background=p;this.cssClass=y;u&&""!=u&&0<u.indexOf("style=")&&
(this.style=u.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",
this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(q,x,C,F,G){this.base(q,x,C,F,G);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",
this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(q,x,
C,F,G){this.base(q,x,C,F,G);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&
this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(p,u,y,B,E,I,L,M,O){this.id=p;this.caption=u;this.visible=0!=y;this.width=B;this.widthUnit=
E;this.height=I;this.heightUnit=L;this.cssClass=M;this.extraAtts=O};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var p="-moz-border-radius:3pt;";"0"!=this.width&&(p+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(p+="height: "+this.height+this.heightUnit+";");this.visible||(p+="display:none;");this.tagAtt("style",p);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");
this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.div;this.setProperties=function(p,u,y,B,E,I,L,M,O,R,P){this.id=p;this.visible=0!=u;this.width=y;this.widthUnit=B;this.height=E;this.heightUnit=I;this.cssClass=L;this.align=M;this.vAlign=O;this.extraAtts=R;this.extraStyle=P};this._getHtml=function(){var p=
this.getVStruct(),u=this.align&&"left"!=this.align.toLowerCase()&&"start"!=this.align.toLowerCase(),y=this.vAlign&&"top"!=this.vAlign.toLowerCase(),B=this.visible?"":";display:none;",E=this.align.toLowerCase(),I=this.vAlign.toLowerCase(),L=E,M=I;"justify"===L&&(L="space-evenly");"middle"===M?M="center":"bottom"===M&&(M="end");""!=this.height&&(B=B+"height: "+this.height+this.heightUnit+";");""!=this.width&&(B=B+"width: "+this.width+this.widthUnit+";");B+=this.extraStyle;this.append("<div");this.id&&
this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);if(u||y)this.tagAtt("data-valign",""),B="display:flex;justify-content:"+L+";"+B,y&&(B=B+";flex-wrap:wrap;align-content:"+M+";");""!=B&&this.tagAtt("style",B);""!=this.extraAtts&&this.append(this.extraAtts);u&&this.tagAtt("data-align",E);y&&this.tagAtt("data-valign",I);gx.fn.controlFiresEvent(p)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,p.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),
this.tagAtt("tabindex","0"));this.append(">")}},divEnd:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.divEnd;this.setProperties=function(p,u){this.align=p;this.vAlign=u};this._getHtml=function(){this.append("</div>")}},formGroup:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.formGroup;this.setProperties=function(p){this.captionPosition=p};this._getHtml=function(){1===this.captionPosition&&this.append('<div class="form-group gx-form-group">')}},
formGroupEnd:function(q,x,C,F,G){this.base(q,x,C,F,G);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(p){this.captionPosition=p};this._getHtml=function(){1===this.captionPosition&&this.append("</div>")}},specificDomainCtrls:function(q){if(q.domainName==gx.domains.component&&0==q.enabled){var x=q.enabled?";display:none;":"",C=q.id+"_comp_trigger",F=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);q.append("<img");q.tagAtt("src",
F);q.tagAtt("id",C);q.tagAtt("class","");q.tagAtt("style",x+" margin-left:2px; cursor:pointer;");q.tagAtt("onclick","gx.popup.openUrl('"+q.value+"')");q.append("/>");x=[];x.push(q.column.gxId)}else q.dataType==gx.types.geolocation&&(x=q.enabled?"":";display:none;",C=q.id+"_geoLocMe",q.append("<img"),q.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),q.tagAtt("id",C),q.tagAtt("class","GeoLocOption"),q.tagAtt("style",x),q.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),q.append(">"),x=
[],x.push(q.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,
this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);
gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){var l={};return{observers:[],initialObservers:[],addObserver:function(c,d,g,a){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,d,g,a){a=a||{};if(!1===a.unique||0>this.indexOf(c,d,g)){var b={e:c,o:d,f:g,cfg:a};a&&a.observerKey&&(l[a.observerKey]=l[a.observerKey]||[],l[a.observerKey].push(b));this.observers.push(b);!0===a.doNotDelete&&this.initialObservers.push({e:c,o:d,f:g,cfg:a})}},deleteObserverByKey:function(c){l[c]&&($.each(l[c],
function(d,g){gx.fx.obs.deleteObserver(g.e,g.o,g.f)}),l[c]=[])},deleteObserver:function(c,d,g){new gx.thread.Mutex(this,this.deleteObserverSync,[c,d,g])},deleteObserverSync:function(c,d,g){c=this.indexOf(c,d,g);0<=c&&this.observers.splice(c,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(c,d,g){for(var a=this.observers.length,b=0;b<a;b++){var f=this.observers[b];if(f&&f.e==c&&f.o==d&&f.f==g)return b}return-1},notify_count:0,notify:function(c,d,g){d||(d=[]);
var a=this.observers.length;this.notify_count+=1;for(var b=[],f,k=0;k<a;k++){var m=this.observers[k];if(m&&m.e==c&&!m.removed)try{m.cfg&&m.cfg.single&&(m.removed=!0),f=m.f.apply(m.o,d),m.cfg&&m.cfg.async&&b.push(f)}catch(t){gx.dbg.logEx(t,"gxfx.js","gx.obs.notify")}}gx.$.when.apply($,b).then(function(){--this.notify_count;if(0===this.notify_count)for(var t=this.observers.length-1;0<=t;t--)this.observers[t].removed&&this.observers.splice(t,1);g&&g()}.closure(this))}}};
gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(l,c){gx.fx.installSuggest(c,!0)})},installSuggest:function(l,c){if(!c&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[l.id]=l;else try{var d=gx.O.getValidStructFld(l.id);if(d&&!gx.lang.emptyObject(d.gxsgprm)){var g=0<d.grid?gx.fn.currentGridRowImpl(d.grid):"main",a=d.gxsgprm;a.installed||(a.installed={});a.installed[g]||(gx.ajax.suggest(gx.O,
a[1],l.id,a[0],a[3],a[2]),a.installed[g]=!0,$(l).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(l).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(l).val().length))}}catch(b){gx.dbg.logEx(b,"gxfx.js","installSuggest")}},updateSuggestParms:function(l){if(l)for(var c=l.length,d=0;d<c;d++){var g=gx.fn.validStruct(l[d]);g&&"function"==typeof g.c2v&&g.c2v()}},firesuggest:function(l,c,d,g){gx.evt.isComposing?gx.evt.firesuggestdelayed||(gx.evt.firesuggestdelayed=!0,gx.evt.doAfterComposing(function(){gx.fx.firesuggestimpl(l,c,
d,g)},this)):gx.fx.firesuggestimpl(l,c,d,g)},firesuggestimpl:function(l,c,d,g){gx.evt.firesuggestdelayed=!1;this.updateSuggestParms(g);if(l.textbox.value)return c.requestSuggestions(l.sdtParms,function(){c.values?l.autosuggest(c.values,d):l.hideSuggestions();delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===l.textbox.value)gx.evt.onchange_impl(l.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(l,c,d,g,a,b){this.cur=-1;
this.layer=this.IFrameControl=null;this.provider=c;this.textbox=l;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=l.onblur);this.ControlRefresh=d;this.typeahead=g;this.suggestParms=a||[];this.sdtParms=b||[];this.requestSuggestions=function(f,k,m){gx.fx.delayedValidation=!0;var t=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(f,k,m,t)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};
this.highlightSuggestion=function(f){for(var k=this.layer.childNodes.length,m=0;m<k;m++){var t=this.layer.childNodes[m];t==f?t.className="current":"current"==t.className&&(t.className="")}};this.init=function(){var f=function(k){k||(k=window.event);this.handleKeyUp(k)};gx.evt.attach(this.textbox,"keyup",f.closure(this));gx.evt.attach(this.textbox,"keydown",function(k){k||(k=window.event);this.handleKeyDown(k)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));
gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",f.closure(this));this.createDropDown()};this.nextSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=this.cur<f.length-1?this.cur+1:0,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};this.previousSuggestion=function(){var f=this.layer.childNodes;0<f.length&&(this.cur=0<this.cur?this.cur-1:f.length-1,f=f[this.cur],this.highlightSuggestion(f),this.pickvalue(f.firstChild.nodeValue))};
this.selectRange=function(f,k){if(this.textbox.createTextRange){var m=this.textbox.createTextRange();m.moveStart("character",f);m.moveEnd("character",k-this.textbox.value.length);m.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(f,k);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(f){this.cur=-1;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,!0);this.layer.innerHTML="";if(!this.IFrameControl){var k=!1;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");
this.IFrameControl||(k=!0,this.IFrameControl=document.createElement("IFRAME"),this.IFrameControl.src="about:blank",this.IFrameControl.id="gxAutosuggestIFrame");$(this.IFrameControl).css({zIndex:1,display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";k&&document.body.appendChild(this.IFrameControl)}for(var m=f.length,t=0;t<m;t++)k=document.createElement("div"),k.appendChild(document.createTextNode(f[t].d)),k.style.width=this.textbox.offsetWidth,this.layer.appendChild(k);this.layer.style.left=
this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(f){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var k=this.textbox.value.length;this.pickvalue(f);
f=f.length;k<f&&this.selectRange(k,f)}};this.pickvalue=function(f,k){for(var m=this.aSuggestions.length,t=0;t<m;t++)if(this.aSuggestions[t].d==f){this.textbox.value=f;!0===k&&gx.evt.fireEvent(this.textbox,"input");gx.evt.onchange_impl(this.textbox,void 0,!0);break}};this.autosuggest=function(f,k){this.aSuggestions=f;f=this.aSuggestions.length;if(k&&null!=this.aSuggestions&&1==f)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&null!=this.aSuggestions&&0<f&&(1==f&&this.aSuggestions[0].d!=
this.textbox||1<f)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var f=!1;this.layer=gx.dom.byId("gxAutosuggestElement");this.layer||(f=!0,this.layer=document.createElement("div"),this.layer.className="suggestions",this.layer.id="gxAutosuggestElement");this.setupLayer();f&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=
this.layer.onmouseup=this.layer.onmouseover=function(f){f=f||window.event;var k=gx.evt.source(f);"mousedown"==f.type?(gx.evt.cancel(f,!0),this.pickvalue(k.firstChild.nodeValue,!0),this.hideSuggestions(),window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)):"mouseover"==f.type?this.highlightSuggestion(k):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var f=this.textbox,k=0;null!=f&&"BODY"!=f.tagName;)k+=f.offsetLeft,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=
f.tagName;)k-=f.scrollLeft,f=f.parentNode;return k};this.getTop=function(){for(var f=this.textbox,k=0;null!=f&&"BODY"!=f.tagName;)k+=f.offsetTop,f=f.offsetParent;for(f=this.textbox;null!=f&&"BODY"!=f.tagName;)k-=f.scrollTop,f=f.parentNode;return k};this.handleKeyDown=function(f){switch(f.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(f){f=f.keyCode;if(9==f)this.hideSuggestions();else if(8==f||46==f)this.requestSuggestions(this,
this.provider,!1);else if(!(32>f||33<=f&&46>f||112<=f&&123>=f))this.requestSuggestions(this,this.provider,this.typeahead);else if(0===f){f=this.textbox.value.length;var k=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",10);f!==k&&this.requestSuggestions(this,this.provider,this.typeahead)}$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};this.init()},suggestProvider:function(l,c,d,g){this.requestSuggestions=function(a,b,f,k){var m,t=gx.ajax.gxObjectUrl(l)+
"?",v="gxajaxSuggest_"+g,n=c.length;for(m=0;m<n;m++)v+=","+encodeURIComponent(gx.fn.evalCtxScope(l,c[m]));v+=","+encodeURIComponent(void 0===k?gx.fn.getControlValue_impl(d):k);n=a.length;for(m=0;m<n;m++)v+=","+encodeURIComponent(gx.fn.evalCtxScope(l,a[m]));t+=gx.ajax.encryptParms(l,v);gx.http.doCall({method:"GET",url:t,handler:function(w,A){w=gx.json.evalJSON(A);this.values=gx.fx.returnSuggestValues(this.VarRefresh,w[0]);b()},error:f,obj:this})}},returnSuggestValues:function(l,c){return c},addElement:function(l,
c,d){if(!this.elementExists(l,c,d)){var g=c.id;!0===d&&(g+=c.types.sort().join(""));l.splice(0,0,c);l[g]=c}},elementExists:function(l,c,d){var g=c.id;!0===d&&(g+=c.types.sort().join(""));return l[g]?!0:!1},deleteElement:function(l,c,d){var g=c;d&&(g+=d.sort().join(""));l[g]&&delete l[g];g=l.length;for(var a=0;a<g;a++){var b=l[a];if(b.id==c)if(d){if(this.matchingTypes(d,b.types)){l.splice(a,1);break}}else{l.splice(a,1);break}}return l},matchingTypes:function(l,c){for(var d=c.length,g=0;g<d;g++){for(var a=
!1,b=l.length,f=0;f<b;f++)c[g].toLowerCase()==l[f].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(l,c,d,g){c=gx.dom.el(d);if(null!=c&&"none"!==$(c).css("display"))return c;c=gx.fn.getRONode(d,!1);if(g&&null!=c&&$(c).is(":visible"))return c;c=gx.dom.el("gxHTMLWrp"+d);if(null!=c)return c;g&&!l.id&&"A"===l.tagName&&(l=l.parentNode);d="(^"+(g?"("+gx.fn.getRONodePrefix()+")?":"")+"v?"+d+"_(?:(?:[0-9]){4})+$)";d=new RegExp(d);return null!=l&&d.test(l.id)?l:null},isUnderMouse:function(l){var c=
gx.evt.mouse.x,d=gx.evt.mouse.y,g=gx.dom.position(l),a=gx.dom.dimensions(l);return c>=g.x&&c<=g.x+a.w&&d>=g.y&&d<=g.y+a.h||"DIV"==l.tagName&&0===a.w&&0===a.h&&l.firstChild&&(g=gx.dom.position(l.firstChild),a=gx.dom.dimensions(l.firstChild),c>=g.x&&c<=g.x+a.w&&d>=g.y&&d<=g.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(l){return"dblclick"==l?this.dblclicks:this.generics},addEventHandler:function(l,c,d,g){d=gx.lang.emptyObject(l)?d:l.CmpContext+d;l={id:c+d,cId:d,type:c,obj:l,
hdl:g};c=this.getEventHandlers(c);gx.fx.addElement(c,l,!1)},deleteEventHandlers:function(l){for(var c=[this.dblclicks,this.generics],d=c.length,g=0;g<d;g++){for(var a=[],b=c[g],f=b.length,k=0;k<f;k++){var m=b[k];m.obj==l&&a.push(m)}f=a.length;for(k=0;k<f;k++)gx.fx.deleteElement(b,a[k].id)}},hasEventHandler:function(l,c){var d=gx.evt.source(c);l=this.getEventHandlers(l);for(var g=l.length,a=!1,b=0;b<g&&!a;b++){var f=l[b];f=gx.fx.findControl(d,f.obj,f.cId,!0);null!=f&&(a=c.currentTarget===f||gx.fx.isUnderMouse(f))}return a},
delayedDispatch:function(l){return gx.fx.dom.hasEventHandler("dblclick",l)},raiseEvent:function(l,c){c=gx.evt.source(c);var d=$(c),g=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR;"dblclick"==l&&(clearTimeout(parseInt(d.attr(g),10)),d.removeAttr(g));l=this.getEventHandlers(l);d=l.length;for(g=0;g<d;g++){var a=l[g],b=gx.fx.findControl(c,a.obj,a.cId,!0);null!=b&&gx.fx.isUnderMouse(b)&&a.hdl.call(a.obj)}},highlight:function(l,c,d){var g=gx.color.fromRGB(c[0],c[1],c[2]),a=gx.dom.getStyle(l,"backgroundColor"),
b="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){l.style.backgroundColor=g.Html;setTimeout(this.end,d)},end:function(){var f=a;b&&(f="transparent");l.style.backgroundColor=f}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(l,c,d){d&&(gx.evt.setEventRow(l,this.dragCtrl),this.obj=d.call(l,this.dragCtrl),this.obj.gxDragTypes=c)},drop:function(l,c,d){d&&d.call(c,l,this.dragCtrl,this.obj)},
noDrop:function(){var l=this.noDropCtrl;null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"NoAcceptDrag")},out:function(){var l=this.dropCtrl;l&&l.gxClassName&&(l.className=l.gxClassName);this.dropCtrl=null;l=this.noDropCtrl;null!=l&&l.gxClassName&&(l.className=l.gxClassName);this.noDropCtrl=null},over:function(){var l=this.dropCtrl;null!=l&&l.gxDndClassName&&(l.className=l.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);
this.clonCtrl=null},restoreControl:function(){var l=this.clonCtrl;null!=l&&(null==this.toHdl&&(l.dropLeft=parseFloat(l.style.left||"0"),l.dropTop=parseFloat(l.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored()?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(l=this.nextCoords(),this.moveDragControl(l.X,l.Y)))},nextCoords:function(){var l=this.clonCtrl,c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0");c>=d?(--c,d=l.dropTop-
(l.dropTop-l.originalTop)*(l.dropLeft-c)/(l.dropLeft-l.originalLeft)):(--d,c=l.dropLeft-(l.dropTop-d)*(l.dropLeft-l.originalLeft)/(l.dropTop-l.originalTop));c<=l.originalLeft&&(c=l.originalLeft);d<=l.originalTop&&(d=l.originalTop);return{X:c,Y:d}},moveControl:function(l){if(null==this.clonCtrl){var c=document.createElement("DIV");c.style.position="absolute";l.gxDndClassName&&(c.className=l.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=this.dragInfo();gx.fn.setOpacity(50,
c);document.body.appendChild(c);c.originalLeft=gx.evt.mouse.x-10;c.originalTop=gx.evt.mouse.y-10;c.diffLeft=10;c.diffTop=10;this.clonCtrl=c}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var l=this.clonCtrl;if(null==l)return!0;var c=parseFloat(l.style.left||"0"),d=parseFloat(l.style.top||"0")-l.originalTop;return 0>=c-l.originalLeft&&0>=d?!0:!1},moveDragControl:function(l,c){try{var d=this.clonCtrl;null!=d&&(d.style.left=l-d.diffLeft+"px",d.style.top=c-d.diffTop+"px")}catch(g){this.deleteClonControl()}},
dragInfo:function(){if(null!=this.obj){var l="",c="",d;for(d in this.obj){if("gxDragTypes"!=d){var g=[l];if("function"==typeof this.obj[d])continue;c+=d+": "+this.obj[d]+"</br>";l=g[0]}if(5<=l){c+="...";break}l++}return c}return""},deleteHandlers:function(l){gx.thread.Mutex(this,this.deleteHandlersSync,[l])},deleteHandlersSync:function(l){var c=[],d,g=this.sources.length;for(d=0;d<g;d++){var a=this.sources[d];a.obj!=l&&c.push(a)}this.sources=c;c=[];g=this.targets.length;for(d=0;d<g;d++)a=this.targets[d],
a.obj!=l&&c.push(a);this.targets=c},addSource:function(l,c,d,g,a){gx.thread.Mutex(this,this.addSourceSync,[l,c,d,g,a])},addSourceSync:function(l,c,d,g,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.sources,{id:c,cssClass:d,types:g,obj:l,hdl:a},!1)},addTarget:function(l,c,d,g,a){gx.thread.Mutex(this,this.addTargetSync,[l,c,d,g,a])},addTargetSync:function(l,c,d,g,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.targets,{id:c,cssClass:d,types:g,obj:l,hdl:a},!0)},
deleteSource:function(l){gx.thread.Mutex(this,this.deleteSourceSync,[l])},deleteSourceSync:function(l){this.sources=gx.fx.deleteElement(this.sources,l)},getSource:function(l){l=gx.evt.source(l);for(var c=this.sources.length,d=0;d<c;d++){var g=this.sources[d],a=this.dragCtrl=gx.fx.findControl(l,g.obj,g.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=g.cssClass,gx.fx.isUnderMouse(a)))return g}return this.obj=this.dragCtrl=null},getTarget:function(l,c){l=gx.evt.source(l);for(var d=this.targets.length,
g=0;g<d;g++){var a=this.targets[g],b=gx.fx.findControl(l,a.obj,a.id);if(null!=b&&(b.gxClassName=b.className,b.gxDndClassName=a.cssClass,gx.fx.isUnderMouse(b))){if(gx.fx.matchingTypes(c,a.types))return this.noDropCtrl=null,this.dropCtrl=b,a;this.out();this.noDropCtrl=b;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],initialize:function(l){l.notifications||(l.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",l,gx.fx.notifications.notify.closure(l),
{single:!1,doNotDelete:l.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",l,gx.fx.notifications.fireQueuedEvents.closure(l),{single:!1,doNotDelete:l.IsMasterPage}));if(!this.webSocket){l.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');l=gx.fn.getHidden("GX_WEBSOCKET_PORT");var c=gx.basePath&&0<gx.basePath.length?"/":"";this.webSocket=new gx.webSocket({port:l,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),
wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:l?location.hostname+":"+l+"/":location.host+"/",resourceUrl:c+"gxwebsocket?",basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(l,c,d,g,a,b){gx.fx.notifications.initialize(l);l.notifications[c||""]={gxO:l,handler:a,eventName:d,type:g,noWait:b}},notify:function(l){l=gx.json.evalJSON(l);var c=this.notifications[l.GroupName||""];c&&(gx.fx.notifications.queuedEvents.push({notifObj:c,
data:l}),(c.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var l=0;l<gx.fx.notifications.queuedEvents.length;l++){var c=gx.fx.notifications.queuedEvents[l];if(!c.executed){gx.fx.notifications.queuedEvents.splice(l--,1);var d=c.notifObj.gxO;c.executed=!0;if(gx.lang.emptyObject(c.data.Object)||c.data.Object.toUpperCase()==d.ServerClass.toUpperCase()){var g=c.notifObj.type,a=c.notifObj.eventName;if(a){var b=d.isServerEvent(a),f={};f[g[0][0]]=c.data;
d.setEventParameters(c.notifObj.type,f);gx.evt.dispatcher.dispatch(d.getServerEventName(a),d,0,0,b,void 0,void 0,!0)}else c.notifObj.handler(c.data)}}}}},ctx:{setters:[],trackers:[],deleteHandlers:function(l){gx.thread.Mutex(this,this.deleteHandlersSync,[l])},deleteHandlersSync:function(l){var c,d=[],g=this.setters.length;for(c=0;c<g;c++){var a=this.setters[c];a.obj!=l&&d.push(a)}this.setters=d;d=[];g=this.trackers.length;for(c=0;c<g;c++)a=this.trackers[c],a.obj!=l&&d.push(a);this.trackers=d},addSetter:function(l,
c,d,g,a){gx.thread.Mutex(this,this.addSetterSync,[l,c,d,g,a])},addSetterSync:function(l,c,d,g,a){c=gx.lang.emptyObject(l)?c:l.CmpContext+c;gx.fx.addElement(this.setters,{id:c,cssClass:d,types:g,obj:l,hdl:a},!1)},addTracker:function(l,c,d){gx.thread.Mutex(this,this.addTrackerSync,[l,c,d])},addTrackerSync:function(l,c,d){gx.fx.addElement(this.trackers,{id:l.CmpContext+l.IsMasterPage.toString(),cssClass:"",types:c,obj:l,hdl:d},!0)},deleteSetter:function(l){gx.thread.Mutex(this,this.deleteSetterSync,
[l])},deleteSetterSync:function(l){this.setters=gx.fx.deleteElement(this.setters,l)},notify:function(l,c,d){gx.thread.Mutex(this,this.notifySync,[l,c,d])},notifySync:function(l,c,d){if(l&&l.forcedFocus)l.forcedFocus=!1;else{var g,a=gx.lang.emptyObject,b=function(v,n){var w=gx.O;gx.setGxO(v);n();gx.setGxO(w)},f=null;if(a(c)||a(d)){var k=this.setters.length;for(g=0;g<k;g++){var m=this.setters[g];if(a(l)){if(f=gx.fx.findControl(null,m.obj,m.id),null!=f&&a(f.onfocus)&&gx.fx.isUnderMouse(f)){b.apply(this,
[m.obj,function(){gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}else if(l.id==m.id){b.apply(this,[m.obj,function(){f=l;gx.evt.setEventRow(m.obj,f);c=m.types;d=m.hdl.call(m.obj,f)}]);break}}}if(!a(c)&&(d||""===d))for(a=this.trackers.length,g=0;g<a;g++){var t=this.trackers[g];gx.fx.matchingTypes(c,t.types)&&b.apply(this,[t.obj,function(){t.hdl.call(t.obj,null,f,d)}])}}}}};
gx.date=function(){var l=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,c=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,d=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,g=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00(\.000)?)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(b){return this.getDay()==
b.getDay()&&this.getMonth()==b.getMonth()&&this.getFullYear()==b.getFullYear()?!0:!1},toJson:function(){var b=new gx.date.gxdate("");b.assign_date(this);return b.json()},isoString:function(b){return b.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(b,f){this.json=function(){var k=this.TimeFmt;this.TimeFmt=24;var m=this.HasTimePart,t=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var v=this.getStringWithFmt("Y4MD")+" "+(m?this.getTimeString(!0,!0,!0,0<this.Value.getMilliseconds()):
"00:00:00");this.TimeFmt=k;this.HasTimePart=m;this.HasDatePart=t;return v};this.mapCTODFormatToPattern=function(k){return"ANSI"==k?"Y4MD":k};this.emptyDateString=function(k){return-1==k.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==k?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(k){k=this.mapCTODFormatToPattern(k);if(0===this.Value-a)return this.emptyDateString(k);var m=k,t,v=this.FormatPos(k);if(this.JsonNullFormat===gx.date.jsonNullFormat.YearOne){var n=
t="01";var w="0001"}else t=gx.text.padl(this.Value.getDate().toString(),2,"0"),n=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),w=gx.text.padl(this.Value.getFullYear().toString(),4,"0");m=m.replace("D",t+(3>v.DPos?"/":""));m=m.replace("M",n+(3>v.MPos?"/":""));-1==k.indexOf("Y4")?(w=w.slice(2,4),m=m.replace("Y",w+(3>v.YPos?"/":""))):m=m.replace("Y4",w+(3>v.YPos?"/":""));return m};this.getString=function(k){gx.lang.emptyObject(k)&&(k=gx.dateFormat);return this.getStringWithFmt(k)};this.toISOString=
function(){return this.Value.toISOString()};this.toString=function(){var k=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+k};this.gxdtoc=function(k,m){return this.getStringWithFmt(this.mapCTODFormatToPattern(k)).replace("/",m)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";if(this.HasDatePart){var k=gx.text.padl(this.Value.getDate().toString(),2,"0");var m=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0");var t=gx.text.padl(this.Value.getFullYear().toString(),
4,"0")}else m=k="01",t="0001";var v=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",n=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",w=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",A=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return t+m+k+v+n+w+A};this.getTimeString=function(k,m,t,v){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var n="";t&&(n+="  ");k&&(n+="   ");m&&(n+="   ");
v&&(n+="    ");return n}n="";var w=this.Value.getHours();t=t||!0;12==this.TimeFmt&&12<=w?(12<w&&(w-=12),n=" PM"):12==this.TimeFmt&&(n=" AM");var A=this.HasTimePart?gx.text.padl(w.toString(),2,"0"):"",r=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",q=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",x=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";0===w&&""!==n&&(A="12");w="";t&&(w=A);k&&(w=w+":"+r);m&&(w=w+":"+
q);v&&(w=w+"."+x);return w+n};this.FormatPos=function(k){if("ANSI"==k){var m=1;var t=2;k=3}else{var v=k.indexOf("Y4");m=-1==v?k.indexOf("Y")+1:v+1;t=k.indexOf("M");0!==v&&t++;k=k.indexOf("D");0!==v&&k++}return{YPos:m,MPos:t,DPos:k}};this.assign_date=function(k){k instanceof gx.date.gxdate?(this.Value=k.Value,this.HasTimePart=k.HasTimePart,this.HasDatePart=k.HasDatePart):this.Value=void 0===k?a:k};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==
gx.NULL_TIMEZONEOFFSET)return this;var k=new gx.date.gxdate("");k.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());k.HasTimePart=this.HasTimePart;k.HasDatePart=this.HasDatePart;return k};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var k=new gx.date.gxdate("");k.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());k.HasTimePart=this.HasTimePart;k.HasDatePart=
this.HasDatePart;return k};this.assign_string=function(k,m,t,v){var n=l,w=n.exec(k),A=0;if(null!=w){var r=k.indexOf(w[0]);0<r&&"."==gx.text.substring(k,r,1)&&(w=null)}if(null==w)-1!=k.indexOf("  /  /  ")&&(t=!0);else{r=w.length;for(var q=1;q<r;q++)gx.lang.emptyObject(w[q])||A++}var x=this.FormatPos(m),C=q=r=m=0,F=0,G=0,p=0;try{this.HasDatePart=!0;if(6==x.DPos+x.MPos+x.YPos&&null!=w&&3<=A){null!=w[x.YPos]&&(m=parseInt(w[x.YPos],10));if(isNaN(m))throw"InvalidDate";m<this.FYearOfCentury?m+=2E3:100>m?
m+=1900:1E3>m&&(m+=1E3);null!=w[x.MPos]&&(r=parseInt(w[x.MPos],10)-1);if(isNaN(r)||0>r||11<r)throw"InvalidDate";null!=w[x.DPos]&&(q=parseInt(w[x.DPos],10));if(isNaN(q)||0>q||q>gx.date.maxDays(r,m))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;x=0;null==w?(n=c,w=n.exec(k),null!=w&&(x=1,this.HasTimePart=!0)):3<A&&(x=4,this.HasTimePart=!0);if(this.HasTimePart&&!t){null!=w[x]&&(C=parseInt(w[x],10));if(gx.lang.emptyObject(w[x])||isNaN(C))throw this.HasTimePart=!1,"InvalidHour";null!=
w[x+1]&&(F=parseInt(w[x+1],10));isNaN(F)&&(F=0);null!=w[x+2]&&(G=parseInt(w[x+2],10));isNaN(G)&&(G=0);null!=w[x+3]&&(p=parseInt(w[x+3],10));isNaN(p)&&(p=0);if(!this.validTime(-1!=k.toLowerCase().indexOf("m"),C,F,G,p))throw"InvalidHour";(-1!=k.indexOf("PM")||-1!=k.indexOf("pm"))&&12>C&&(C+=12);-1==k.indexOf("AM")&&-1==k.indexOf("am")||12!=C||(C=0)}}catch(u){if(v)throw u;"InvalidDate"==u&&(p=G=F=C=q=r=m=0);"InvalidHour"==u&&(p=G=F=C=0)}this.Value=new Date(m,r,q,C,F,G,p);0<m+r+q+C+F+G+p&&(!this.HasTimePart||
t)&&this.Value.getDate()!=q&&(this.Value=new Date(Date.UTC(m,r,q,C+12,F,G,p)))};this.validTime=function(k,m,t,v,n){return k&&12<m||!k&&(24<m||24==m&&0<t+v)?!1:59>=t||59>=v||999>=n};this.compare=function(k){return"string"==typeof k?this.compare_string(k):this.compare_date(k)};this.compare_string=function(k){k=new gx.date.gxdate(k);return this.compare_date(k.Value)};this.compare_date=function(k){if(!k)return null;k=k instanceof gx.date.gxdate?k.Value:k;return this.HasTimePart?this.Value-k:this.Value.getFullYear()>
k.getFullYear()?1:this.Value.getFullYear()<k.getFullYear()?-1:this.Value.getMonth()>k.getMonth()?1:this.Value.getMonth()<k.getMonth()?-1:this.Value.getDate()>k.getDate()?1:this.Value.getDate()<k.getDate()?-1:0};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=f||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(b){return"string"==typeof b&&l.test(b)?!0:
!1},isANSIDate:function(b){return"string"==typeof b&&d.test(b)?!0:!1},isLeapYear:function(b){return 0===b%400?!0:0===b%100?!1:0===b%4?!0:!1},dateObject:function(b){return b instanceof this.gxdate?b.Value:"string"==typeof b?(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).Value:b instanceof Date?b:new Date},gxdateObject:function(b){if(b instanceof this.gxdate)return b;if("string"==typeof b)return new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0);if(b instanceof Date){var f=new this.gxdate("");
f.assign_date(b);return f}return new this.gxdate("")},clonedDate:function(b,f){var k=new this.gxdate("");k.assign_date(f);b instanceof this.gxdate&&(k.SFmt=b.SFmt,k.HasTimePart=b.HasTimePart,k.HasDatePart=b.HasDatePart);return k},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var b=this.today();b.HasTimePart=!0;b.HasDatePart=!0;return b},today:function(){var b=new this.gxdate("");b.assign_date(new Date);return b},ctot:function(b,f){return new this.gxdate(b,f)},ctod:function(b,
f){b=new this.gxdate(b,f);b.Value.setHours(0,0,0,0);return b},ymdtod:function(b,f,k){b=new this.gxdate(b+"/"+f+"/"+k,"ANSI");b.Value.setHours(0,0,0,0);return b},ymdhmstot:function(b,f,k,m,t,v){return new this.gxdate(b+"/"+f+"/"+k+" "+m+":"+t+":"+v,"ANSI")},hour:function(b){return(new this.gxdate(b)).Value.getHours()},minute:function(b){return(new this.gxdate(b)).Value.getMinutes()},second:function(b){return(new this.gxdate(b)).Value.getSeconds()},millisec:function(b){return 864E5*b},day:function(b){return(new this.gxdate(b)).Value.getDate()},
month:function(b){return(new this.gxdate(b)).Value.getMonth()+1},year:function(b){return(new this.gxdate(b)).Value.getFullYear()},addDays:function(b,f){return this.addMill(b,this.dayToMillisec(f))},addSec:function(b,f){return this.addMill(b,this.secToMillisec(f))},addMill:function(b,f){var k=this.dateObject(b).clone(),m=new this.gxdate;m.assign_date(k);var t=k.getMilliseconds();k.setMilliseconds(t+f);return m.getString(this.isANSIDate(b)?"Y4MD":-1==gx.dateFormat.indexOf("Y4")?gx.dateFormat.replace("Y",
"Y4"):gx.dateFormat)},secDiff:function(b,f){return this.millisecToSec(this.milliDiff(b,f))},daysDiff:function(b,f){return this.millisecToDay(this.milliDiff(b,f))},milliDiff:function(b,f){b=this.gxdateObject(b);f=this.gxdateObject(f);b=b.Value.valueOf();f=f.Value.valueOf();return b-f},dayToMillisec:function(b){return 864E5*b},secToMillisec:function(b){return 1E3*b},millisecToDay:function(b){return b/24/60/60/1E3},millisecToSec:function(b){return b/1E3},dateParm:function(b){return"string"==typeof b?
new this.gxdate(b):b},urlDate:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=new this.gxdate(b,f);return this.isNullDate(f)?"":f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")},urlDateTime:function(b,f){b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b;f=new this.gxdate(b,f);return f.HasDatePart?this.isNullDate(f)?"":f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+
1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")+(0===f.Value.getMilliseconds()?"":gx.text.padl(f.Value.getMilliseconds().toString(),3,"0")):"00010101"+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")},isNullDate:function(b){b instanceof
this.gxdate&&(b=b.Value);var f=this.nullDate();return f.getFullYear()!=b.getFullYear()||f.getMonth()!=b.getMonth()||f.getDate()!=b.getDate()||f.getHours()!=b.getHours()||f.getMinutes()!=b.getMinutes()||f.getSeconds()!=b.getSeconds()||f.getMilliseconds()!=b.getMilliseconds()?!1:!0},dtoc:function(b,f,k){return(new this.gxdate(b,this.isANSIDate(b)?"Y4MD":void 0)).gxdtoc(f,k)},dttoc:function(b,f,k){b=new this.gxdate(b,this.isANSIDateTime(b)?"Y4MD":void 0);var m=gx.dateFormat,t="";0<f&&(8<f&&-1==m.indexOf("Y4")&&
(m=m.replace("Y","Y4")),t=b.getStringWithFmt(m)+" ");return 0<k?t+b.getTimeString(3<k,8<=k,1<k,12<=k):t},nulldate_toc:function(b,f){var k=new this.gxdate("");k.HasTimePart=!0;k.HasDatePart=!0;var m=gx.dateFormat,t="";0<b&&(8<b&&-1==m.indexOf("Y4")&&(m=m.replace("Y","Y4")),t=k.getStringWithFmt(m)+" ");return 0<f&&!gx.blankWhenEmpty?t+k.getTimeString(3<f,8<=f,1<f,12<=f):t},addyr:function(b,f){return this.addmth(b,12*f)},addmth:function(b,f){var k=this.gxdateObject(b);b=new Date(this.dateObject(b).getTime());
var m=b.getDate();b.setDate(1);b.setMonth(b.getMonth()+1*f);b.setDate(Math.min(m,this.maxDays(b.getMonth(),b.getFullYear())));return this.clonedDate(k,b)},dtadd:function(b,f){var k=this.gxdateObject(b);b=new Date(this.dateObject(b).getTime());var m=b.getMilliseconds();b.setMilliseconds(m+1E3*f);return this.clonedDate(k,b)},dtdiff:function(b,f){b=this.dateObject(b);f=this.dateObject(f);return(b-f)/1E3},maxDays:function(b,f){return[31,this.isLeapYear(f)?29:28,31,30,31,30,31,31,30,31,30,31][b]},eom:function(b){var f=
this.gxdateObject(b);b=this.dateObject(b);b=new Date(b.getTime());var k=this.maxDays(b.getMonth(),b.getFullYear());b.setDate(k);return this.clonedDate(f,b)},dow:function(b){b=this.dateObject(b);return b.equalsNoTime(this.nullDate())?0:b.getDay()+1},age:function(b,f){b=this.dateObject(b);f=this.dateObject(f);var k=this.nullDate();if(b.equalsNoTime(k)||f.equalsNoTime(k)||b.equalsNoTime(f))return 0;if(f>=b){k=36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+1E3*f.getUTCSeconds()-(36E5*b.getUTCHours()+6E4*
b.getUTCMinutes()+1E3*b.getUTCSeconds());if(f.getUTCDate()>b.getUTCDate()||f.getUTCDate()==b.getUTCDate()&&0<=k)k=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds()));else for(k=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()-1,b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds())),f=f.getUTCMonth()-1,-1==f&&(f=11);k.getUTCMonth()!=f;)k.setUTCDate(k.getUTCDate()-1);return b=k.getUTCMonth()>=b.getUTCMonth()?k.getUTCFullYear()-
b.getUTCFullYear():k.getUTCFullYear()-1-b.getUTCFullYear()}return 0},valid_date:function(b,f,k,m,t,v,n,w){var A=n||!1,r=!1;v=b.value;n=k;var q="^[ ]*(",x=0<f?"GXM_invaliddate":"GXM_invalidtime";var C=gx.num.replaceFullWidthNumerals(v);C=C.split("\n")[0];k="YMD"==k?1:0;t=12==t?1:0;if(g.test(C))r=!0,v=C="";else if(0<f&&(4===C.length||5===C.length&&"/"===C[2])){var F=(new Date).getFullYear().toString().substring(10===f?0:2);C=1===k?F+C:C+F}q=0<f?8==f?0===k?q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":
q+"([0-9]{2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":0===k?A?q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":q+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":A?q+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":q+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":q+"( )?( )?( )?";0<m&&(q+="(",0<f&&(q+="[ ]*"),q+="([0-9]{1,2})",q=2<m?q+"(:?([0-9]{1,2}))?":q+"(( )?)?",q=5<m?q+"(:?([0-9]{1,2}))?":q+"(( )?)?",q=8<m?q+"(\\.?([0-9]{1,3}))?":q+"(( )?)?",q=(1==t?q+"[ ]*(a|am|p|pm)?":q+"(( )?)?")+")?");
k=new RegExp(q+")?[ ]*$","i");if(k.test(C)){A=C.match(k);0<f?(k="/",0<C.indexOf("-")&&(k="-"),A[2]?k=A[2]+k+A[3]+k+A[4]:(k=1==w?"        ":"  "+k+"  "+k+"  ",10==f&&(k+="  "))):k="";0<m&&(0<f&&(k+=" "),1!=w||A[6]||A[8]||A[10]||A[12]?(A[6]?k+=A[6]:r?(w=C.match(g),k=w[4]?k+w[4]:k+(1==t?"12":"00")):k+=1==t?"12":"00",2<m&&(k=A[8]?k+":"+A[8]:k+":00"),5<m&&(k=A[10]?k+":"+A[10]:k+":00"),8<m&&(k=A[12]?k+"."+A[12]:k+".000"),1==t&&(k="p"==(A[13]?A[13].substr(0,1):"a").toLowerCase()?k+" PM":k+" AM")):k+="        ");
t=new this.gxdate("",n);try{t.assign_string(k,n,0>=m,!0),""!==gx.text.trim(k)&&(k=this.formatDateTime(m,f,n,t))}catch(G){return gx.fn.alert(b,gx.getMessage(x)),gx.csv.setFormatError(b),!1}if(k!=v){b.value=k;if(-1!=navigator.userAgent.indexOf("Firefox/2"))b.onchange();(f=gx.O.getValidStructFld(b))&&gx.O.refreshDependantGrids(f)}gx.csv.setFormatError(b,!1);return!0}gx.fn.alert(b,gx.getMessage(x));gx.csv.setFormatError(b);return!1},formatDateTime:function(b,f,k,m){var t="";0<b&&m.HasTimePart&&(t=m.getTimeString(4<=
b,8<=b,void 0,12<=b));b=k;8<f&&-1==b.indexOf("Y4")&&(b=b.replace("Y","Y4"));return 0<f?m.getStringWithFmt(b)+(m.HasTimePart?" "+t:""):m.HasTimePart?t:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(l){this.capacity=l||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var l=arguments[0],c=arguments.length,d=1;d<c;d++)l=l.replace("%"+d,gx.text.rtrim(arguments[d].toString()));return l},formatString:function(l,c,d,g){if(d)return gx.text.padl("",
c,"*");if(!gx.lang.emptyObject(g)&&this.startsWith(g,"@")&&0<g.indexOf("!")){c="";d=this.padr("",l?l.length:0,"!");g=this.replaceAll(d,"!"," ");if(l)for(var a=0,b=0,f;a<g.length&&b<l.length;)f=l[b],this.isSeparator(d[a])?(f==d[a]?(b++,c+=f):c+=g[a],a++):(c+=this.getCaret(d,f,a,c),a++,b++);else c=g;return gx.text.rtrim(c)}return l},getCaret:function(l,c,d,g){switch(l[d]){case "9":if(!isNaN(c))return c;break;case "X":return c;case "A":case "M":case "!":return c.toUpperCase();case "Z":if("1"<=c&&"9">=
c)return c;if("0"==c){l=!0;for(c=0;c<d;c++)if(" "!=g[c]){l=!1;break}if(!l)return"0"}}return" "},isSeparator:function(l){return"9"!=l&&"X"!=l&&"!"!=l&&"Z"!=l&&"A"!=l&&"M"!=l},replaceAll:function(l,c,d){return-1!=l.toString().indexOf(c)?String(l).split(c).join(d):l},charReplace:function(l,c,d){for(var g="",a=l.length,b=0;b<a;b++){for(var f=!1,k=c.length,m=0;m<k;m++)if(l.charAt(b)==c[m]&&m<d.length){g+=d[m];f=!0;break}!1===f&&(g+=l.charAt(b))}return g},length:function(l){return l.length},upper:function(l){return l.toUpperCase()},
lower:function(l){return l.toLowerCase()},padr:function(l,c,d){var g=c-l.length;if(1>g)return l.substring(0,c);for(c=0;c<g;c++)l+=d;return l},padl:function(l,c,d){var g=c-l.length;if(1>g)return l.substring(0,c);c="";for(var a=0;a<g;a++)c+=d;return c+l},ltrimstr:function(l,c,d){return this.ltrim(gx.num.str(l,c,d))},ltrim:function(l){return l.toString().replace(/^ */,"")},rtrim:function(l){return l.toString().replace(/ *$/,"")},trim:function(l){return this.rtrim(this.ltrim(l))},chr:function(l){return String.fromCharCode(l)},
like:function(l,c){if(null===c)return!1;c=c.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:\-])/g,"\\$1");return(new RegExp(c.replace(/%/g,".*").replace(/_/g,"."))).test(l)},compare:function(l,c){return this.rtrim(l).localeCompare(this.rtrim(c))},concat:function(l,c,d){return this.rtrim(l)+d+c},space:function(l){for(var c="",d=0;d<l;d++)c+=" ";return c},substring:function(l,c,d){return 0>d?l.toString().substring(c-1):l.toString().substring(c-1,c-1+d)},tostring:function(l){return l.toString()},toformattedstring:function(l){return l.toString().replace(".",
gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(l,c){if(l=gx.text.escapeMapping[c])return l;l=c.charCodeAt();return"\\u00"+Math.floor(l/16).toString(16)+(l%16).toString(16)},escapeString:function(l){return this.escapeRegex.start.test(l)?'"'+l.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+l+'"'},indexOf:function(l,c,d){if(d>
l.length)return 0;0>=d&&(d=1);return l.indexOf(c,d-1)+1},lastIndexOf:function(l,c,d){if(d>l.length)return 0;0>=d&&(d=l.length);return l.lastIndexOf(c,d-1)+1},endsWith:function(l,c){return-1!==l.indexOf(c,l.length-c.length)},startsWith:function(l,c){return 1==this.indexOf(l,c)},contains:function(l,c){return 0<this.indexOf(l,c)},charAt:function(l,c){return l.charAt(c-1)}};
gx.num=function(){var l=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,c=function(d,g,a,b){var f=gx.lang.instanceOf,k="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,m=gx.thousandSeparator,t=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,m,t));"string"==typeof b&&(b=gx.num.parseFloat(b,m,t));return f(a,k)&&f(b,Number)?a[d](new k(b.toString())).toString():f(a,Number)&&f(b,k)?(new k(a.toString()))[d](b).toString():f(a,Number)&&f(b,Number)||"undefined"==typeof gx.num.dec?
g(a,b):a[d](b)};return{str:function(d,g,a){if("string"===typeof d)return d;"undefined"==typeof g&&(g=10);if("undefined"==typeof a||g-1<=a)a=0;d=d.toFixed(a);return d.length<=g?gx.text.padl(d,g," "):gx.text.padr("",g,"*")},compare:function(d,g){if("number"===typeof d&&"number"===typeof g)return d>g?1:d===g?0:-1;"number"===typeof d&&(d=new gx.num.dec.bigDecimal(d.toString()));"number"===typeof g&&(g=new gx.num.dec.bigDecimal(g.toString()));return gx.lang.instanceOf(d,gx.num.dec.bigDecimal)&&gx.lang.instanceOf(g,
gx.num.dec.bigDecimal)?d.compareTo(g):d-g},maxNumericPrecision:function(){return 15},extractValue:function(d,g){g=gx.num.replaceFullWidthNumerals(g);if(gx.lang.instanceOf(g,Number)||this.overflowNumber(g))return g;var a=void 0===g?"":g;if(d)for(g="+"==d.charAt(0)||"-"==d.charAt(0)?d.replace(/[\+\-\d,*\.*Z*\s]+/,""):d.replace(/[\d,*\.*Z*\s]+/g,""),d.lastIndexOf(".")!=d.indexOf(".")&&(a=gx.text.replaceAll(a,".","")),d=0;d<g.length;d++)a=a.replace(g.charAt(d),"");return gx.text.trim(a)},formatNumber:function(d,
g,a,b,f,k,m){if(!a||""===d&&"Blank"===m)return d?d.toString():"";d=gx.lang.emptyObject(d)?"0":d;b=-1!=a.indexOf(",")?gx.thousandSeparator:"";m=gx.decimalPoint;var t=!1,v=gx.numericLenDec(a),n=v.Integers;g=v.Decimals;"string"==typeof d&&b&&(d=gx.text.replaceAll(d,b,""));"string"==typeof d&&(d=d.replace(m,"."));if(gx.num.overflowNumber(d))return d;try{d="undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal||0!==g?gx.num.setScale(d,g,m):gx.num.trunc(d,0).toString()}catch(r){d=d.toString()}v=
d.split(".");v[0]||(v[0]="0");v[1]||(v[1]="");if(k){if(v[1].length>g&&v[1].replace(/0*$/,"").length>g)throw"InvalidNumber";if(f&&"-"==v[0].charAt(0)&&v[0].replace(/0*/,"").length>n||!f&&"-"==v[0].charAt(0)||v[0].replace(/[+]?0*/,"").length>n)throw"InvalidNumber";}n=v[0].substring(0,n);0>d&&(f=!0);if(v[1].length<g){var w=v[1];for(k=v[1].length+1;k<=g;k++)w+="0";v[1]=w}w="";f&&("-"==n.charAt(0)?(w="-",n=n.substring(1)):"+"==a.charAt(0)&&(0!==Number(d)&&(w="+"),"+"==n.charAt(0)&&(n=n.substring(1))));
if(b&&3<n.length){f=n;n="";for(d=3;d<f.length;d+=3)k=f.slice(f.length-d,f.length-d+3),n=b+k+n+"";d=f.substr(0,0===f.length%3?3:f.length%3);n=d+n}m=v[1]?m:"";0<g?(d=a.split("."),d[1]==gx.text.padr("",g,"Z")&&(t=!0)):(d=Array(a),0<d.length&&0===gx.text.replaceAll(gx.text.replaceAll(d[0],",",""),"Z","").length&&(t=!0));g=0;a="";if(1<d.length)for(f=d[1],k=0;k<f.length;k++){var A=f.charAt(k);"9"==A||"Z"==A?v[1].length>g?(a+=v[1].charAt(g),g++):a+="0":"."!=A&&","!=A&&(a+=A)}v="";d=d[0];g=n.length-1;for(k=
d.length-1;0<=k;k--)if(f=d.charAt(k),"9"==f||"Z"==f)if(0<=g){if("Z"!=f||0!==Number(n.substring(0,g+1)))v=n.charAt(g)+v;g--}else v=("9"==f?"0":"")+v;else"Z"!=f&&","!=f&&"+"!=f?v=f+v:","==f&&n.charAt(g)==b&&(v=n.charAt(g)+v,g--);return!t||"0"!=v&&""!==v||0!==a.replace(/0+$/,"").length?w+v+(a?m+a:""):""},add:function(d,g){return c("add",function(a,b){return a+b},d,g)},subtract:function(d,g){return c("substract",function(a,b){return a-b},d,g)},multiply:function(d,g){return c("multiply",function(a,b){return a*
b},d,g)},divide:function(d,g){return c("divide",function(a,b){return a/b},d,g)},negate:function(d){return gx.lang.instanceOf(d,Number)||"undefined"==typeof gx.num.dec?-d:d.negate()},pow:function(d,g){return c("pow",function(a,b){return Math.pow(a,b)},d,g)},mod:function(d,g){return c("remainder",function(a,b){return a%b},d,g)},setScale:function(d,g){if(gx.lang.instanceOf(d,Number))return d.toFixed(g);"string"==typeof d&&(d=gx.text.trim(d));if(d.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===
d.length&&0===g)return"0";var a=d.split(".");a[1]||(a[1]="");if(a[1].length<g){var b=a[1];for(d=a[1].length+1;d<=g;d++)b+="0";a[1]=b;return a[0]+(""===a[1]?"":".")+a[1]}return Number(parseFloat(d)).toFixed(g)}return(new gx.num.dec.bigDecimal(d)).setScale(g,gx.num.dec.ROUND_UP).toString()},parseFloat:function(d,g,a){if(gx.lang.instanceOf(d,Number)||this.overflowNumber(d))return d;d=this.toInvariant(d,g,a);return d.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(d):
parseFloat(d)},toInvariant:function(d,g,a){return"number"==typeof d||"undefined"!=typeof gx.num.dec&&d instanceof gx.num.dec.bigDecimal?d:gx.text.replaceAll(d,g,"").replace(a,".")},parseInt:function(d,g,a){if("number"==typeof d)return d;d=gx.text.replaceAll(d,a,"");return parseInt(d,g)},overflowNumber:function(d){return/\*(\**)/.test(d)},urlDecimal:function(d,g,a){return"undefined"!=typeof d?(d="undefined"!=typeof d.value?d.value:d,d=this.parseFloat(d,g,a),d.toString()):""},random:function(){return Math.random()},
intval:function(d){d="undefined"!=typeof d?d.toString():"";d=d.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(d,0):(new gx.num.dec.bigDecimal(d)).setScale(0,gx.num.dec.ROUND_UP);isNaN(d)&&(d=0);return d},val:function(d){d=gx.text.trim(d).replace(",",".");d=this.parseFloat(d);isNaN(d)&&(d=0);return d},trunc:function(d,g){var a=d;d=d.toString();var b=d.indexOf(".");if(-1!=b){a=d.substring(0,b);if(0===g)return Number(a);d=d.substring(b+1,b+1+g);a=gx.num.parseFloat(a+"."+
d);isNaN(a)&&(a=0)}return a},round:function(d,g){return 0<=g?parseFloat(gx.num.decimalAdjust("round",d,-g).toFixed(g)):gx.num.roundNeg(d,g)},decimalAdjust:function(d,g,a){if("undefined"===typeof a||0===+a)return Math[d](g);g=+g;a=+a;if(isNaN(g)||"number"!==typeof a||0!==a%1)return NaN;g=g.toString().split("e");g=Math[d](+(g[0]+"e"+(g[1]?+g[1]-a:-a)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+a:a))},roundNeg:function(d,g){d=d.toString();var a=d.indexOf(".");var b=parseInt(g,0)+1;b=""+
"0000000000000000000000".substring(1,b);var f=parseFloat("."+b+"5");-1==a?(a="0000000000000000000000",b=""+d):0===a?(b="0",d=0+parseFloat(d)+parseFloat(f),d+="0000000000000000000000",a=""+d.substring(1,d.length)):(d=parseFloat(d)+f,b=d.toString().substring(0,a),a=""+(""+d+"0000000000000000000000").substring(a+1,a+1+parseInt(g,0)));a=a.substring(0,parseInt(g,0));g=parseFloat(b+"."+a);isNaN(g)&&(g=0);return g},normalize_decimal_sep:function(d,g,a,b){var f=b.lastIndexOf(a);0<=d.indexOf(".")&&","==a&&
-1==f&&b.lastIndexOf(".")==b.indexOf(".")?b=b.replace(".",a):-1==d.indexOf(g)&&"."==a&&-1==f&&b.lastIndexOf(",")==b.indexOf(",")&&(b=b.replace(",",a));return b},truncate:function(d,g,a){g=d.lastIndexOf(g);var b=d;-1!=g&&(b=0<a?1:0,b=d.slice(0,g+parseInt(a,10)+b));return b},valid_decimal:function(d,g,a,b){var f=d.value,k=!0,m=gx.O.getValidStructFld(d),t=gx.rtPicture(m,d);b=t?gx.numericLenDec(t).Decimals:b;f=this.normalize_decimal_sep(t,g,a,f);gx.lang.emptyObject(m)||(f=gx.num.extractValue(t,f));var v=
new RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+g+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(f)if(v.test(f)){b=gx.num.truncate(f,a,b);try{gx.lang.emptyObject(m)||(b=gx.num.formatNumber(b,m.dec,t,m.len,m.sign,!0,m.emptyAsNull)),"."!=a&&"SELECT"==d.tagName&&(b=gx.num.toInvariant(b,g,a))}catch(n){k=!1}if(k&&b!=gx.text.trim(d.value)&&(d.value=b,gx.util.browser.isIEStrict()||-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else k=!1;else k=!0;k?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),
gx.fn.alert(d,gx.getMessage("GXM_badnum")))},valid_integer:function(d,g){var a=gx.O.getValidStructFld(d),b=gx.lang.emptyObject(a);var f=d.value;b||(f=gx.num.extractValue(gx.rtPicture(a,d),f));g=b||-1==gx.rtPicture(a,d).indexOf(",")?/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/:new RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+g+"[0-9]{3})*[ ]*$");var k=!0;if(f)if(g.test(f)){try{b||(f=gx.num.formatNumber(f,a.dec,gx.rtPicture(a,d),a.len,a.sign,!0,a.emptyAsNull))}catch(m){k=!1}if(f!=gx.text.trim(d.value)&&(d.value=
f,-1!=navigator.userAgent.indexOf("Firefox/2")))d.onchange()}else k=!1;else k="number"===d.type&&"undefined"!==typeof d.validity?d.validity.valid:!0;k?gx.csv.setFormatError(d,!1):(gx.csv.setFormatError(d),gx.fn.alert(d,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(d){return"string"===typeof d?d.replace(l,function(g){return 8213==g.charCodeAt()||12540==g.charCodeAt()?String.fromCharCode(45):String.fromCharCode(g.charCodeAt()-65248)}):d}}}();
gx.color={rgb:function(l,c,d){return 65536*l+256*c+d},css:function(l){return"rgb"==l.substring(0,3)?eval(l):"#"==l.charAt(0)?parseInt(l.substring(1),16):0},html:function(l){l=this.toHex(l);gx.lang.emptyObject(l)&&(l="000000");l=gx.text.padl(l,6,"0");var c={};c.Hexa=l;c.Html="#"+l;c.R=parseInt(l.substring(0,2),16);c.G=parseInt(l.substring(2,4),16);c.B=parseInt(l.substring(4,6),16);return c},fromRGB:function(l,c,d){var g={};"undefined"!=typeof l&&"undefined"!=typeof c&&"undefined"!=typeof d&&(g.Hexa=
this.toHex(l)+this.toHex(c)+this.toHex(d),g.Html="#"+g.Hexa,g.R=l,g.G=c,g.B=d);return g},ARGBToHex:function(l){var c=this.toHex(l>>16&255),d=this.toHex(l>>8&255);l=this.toHex(l&255);return c+d+l},toHex:function(l){if(void 0===l)return"000000";if(0>l)return gx.color.ARGBToHex(l);if(0===l)return l+"0";for(var c,d="";0!==l;)c=l%16,l=(l-c)/16,d="0123456789ABCDEF".charAt(c)+d;0!==d.length%2&&(d="0"+d);return d}};
gx.grid=function(l){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,0:"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,d){return d?(gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0),gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0),gx.lang.inherits(d,gx.ui.grid,!0),d=new d(gx.$),c&&(d.ParentObject=c.parentObject,d.ControlName=c.gridName,c.parentObject.setUserControl(d)),d):c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){c=void 0!=c?c:1;return 0!=c?c:9999},setActiveGridRow:function(c,d){"string"===typeof c&&(c=(c=gx.O.getGrid(c))?c.grid:null);c&&c.gxAllowSelection&&(gx.csv.currentGridSelection=c,"undefined"!==typeof d&&
(c.toggleRowHoverById(c.gxHoveredRowId,!1),c.gxHoveredRowId=parseInt(d,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(c){c&&gx.csv.currentGridSelection!==c.grid||(delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler))},clearActiveGridHandler:function(c){c=
gx.evt.source(c.event);c=gx.fn.rowGridId(c);(c=gx.fn.getGridObj(c))&&c.grid.gxAllowSelection||gx.grid.clearActiveGrid()},handleKeyUpEvt:function(c){var d=gx.csv.currentGridSelection,g=!1;if(!d||!d.gxAllowSelection||d.gxAllowHovering)return g;switch(c.keyCode){case 38:case 40:d.ownerGrid.setSelection(d.ownerGrid.getSelection(),!0),gx.evt.cancel(c,!0),g=!0}return g},handleKeyPressEvt:function(c){var d=gx.csv.currentGridSelection,g=!1;if(!d||!d.gxAllowHovering&&!d.gxAllowSelection)return g;var a=d.gxAllowHovering;
switch(c.keyCode){case 38:a?g=d.setPreviousRowHovered():d.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(c,!0);break;case 40:a?g=d.setNextRowHovered():d.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(c,!0);break;case 13:g=d.ownerGrid.setSelection(d.gxHoveredRowId)&&d.gxOnLineActivate}return g},grid:function(c,d,g,a,b,f,k,m,t,v,n,w,A,r,q,x,C,F,G,p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba,ia,ma,pa){var ka=function(z){return function(D){D=this.parentObject.getGridById(a,D||gx.fn.currentGridRow(a));return z.call(this,
D||this)}.closure(this)}.closure(this);this.parentObject=c;this.parentObject["sub"+b+"_Rows"]=ka(function(z){return z.grid.pageSize/z.grid.gxGridCols});this.parentObject[f.toUpperCase()+(t?"_MPAGE":"")+"_nFirstRecordOnPage"]=ka(function(z){return z.grid.firstRecordOnPage});this.parentObject[f.toUpperCase()+(t?"_MPAGE":"")+"_nEOF"]=ka(function(z){return z.grid.eof});this.gridLvl=d;this.gridLvlName=g;this.gridId=a;this.gridName=b;this.realGridName=f;this.containerName=k||this.gridName+"Container";this.parentName=
v||"";this.pagingParms=[];this.lvlKey=n||[];this.isFreestyle=w||!1;this.isResponsive=Z||!1;this.allowHovering=(this.allowSelection=r||!1)&&q||!1;this.allowCollapsing=Y||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=L||!1;this.hasAddlines=M||!1;this.hasForEachLine=O||!1;this.width=void 0!=u?u:0;this.widthUnit=y||"";this.height=void 0!=B?B:0;this.heightUnit=E||"";this.gridCols=void 0!=A?A:1;this.gridCols=0!=this.gridCols?
this.gridCols:9999;this.gridRows=void 0!=x?x:5;this.gridResponsiveCols=aa||[1,1,1,1];this.usePaging=(this.usePaging=C||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=F||!1;this.defaultSetsContext=G||!1;this.boundedCollType=p||"";this.boundedCollName=W||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=m;this.isMasterPageGrid=t;this.htmlTags="";this.onLineActivate=P;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;
this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=R;this.grid=gx.grid.getImplClass(this,R);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=
this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;
this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=I?I:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=ma;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&
!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(z){var D=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+z,this.gridName,
this.containerName+"_"+z,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,
!1,0,this.grid.isAbstract,this.InverseLoading),J=this.grid,H=D.grid;D.emptyText=this.emptyText;H.ControlLvl=this.gridLvl;H.GridId=this.gridId;H.GridRow=z;H.GridBaseName=this.gridName;if(J.Properties)for(K in J.Properties)H.setProp(K,J.Properties[K],J[K],J.PropTypes[K]);if(J.DynProperties)for(z=0,len=J.DynProperties.length;z<len;z++){var K=J.DynProperties[z];H.setDynProp(K,J.Properties[K],J[K],J.PropTypes[K],!0)}return D}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=
this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=ba;this.InverseLoading=pa;this.ScrollType=ia;this.isAbstract=ma;this.addColumnDinCode=function(z,D){this.gxAddColumnsCode.push(function(){z.apply(this,D)})};this.addSingleLineEdit=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha,ca,ja,qa,ra,la,sa,ta,wa,ua,va){this.addColumnDinCode(this.addSingleLineEdit,arguments);var na=this.newColumn(H,Q,ea,S);na.visible=qa;na.htmlName=J;na.gxId=D;na.gxAttId=z;na.gxAttName=
N;na.gxTooltip=K;na.gxWidthUnit=U;na.gxColSize=T;na.gxSetsContext=la;na.gxCssClass=ta;na.gxColumnClass=ua;na.gxColumnHeaderClass=va;na.gxControl=new gx.html.controls.singleLineEdit;na.gxControl.column=na;na.gxControl.isPassword=sa;na.gxControl.visible=na.visible;na.gxControl.dataType=na.type;na.gxControl.clickEvent=V;this.grid.addColumn(na)};this.addPostingVar=function(z){this.postingVariables.push(z)};this.addMultipleLineEdit=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha,ca,ja,qa,ra){this.addColumnDinCode(this.addMultipleLineEdit,
arguments);var la=this.newColumn(H,N,V,Q);la.visible=ca;la.htmlName=J;la.gxId=D;la.gxAttId=z;la.gxAttName=K;la.gxWidthUnit=S;la.gxSetsContext=ja;la.gxColumnClass=ra;la.gxControl=new gx.html.controls.multipleLineEdit;la.gxControl.column=la;la.gxControl.dataType=la.type;la.gxControl.visible=la.visible;la.gxControl.heightUnit=X;la.gxControl.clickEvent=ha;this.grid.addColumn(la)};this.addBlob=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha){this.addColumnDinCode(this.addBlob,arguments);var ca=this.newColumn(H,
N,"left",U);ca.visible=ea;ca.htmlName=J;ca.gxId=D;ca.gxAttId=z;ca.gxAttName=K;ca.gxWidthUnit=T;ca.gxSetsContext=V;ca.gxColumnClass=ha;ca.gxControl=new gx.html.controls.blob;ca.gxControl.column=ca;ca.gxControl.dataType=ca.type;ca.gxControl.visible=ca.visible;ca.gxControl.height=S;ca.gxControl.width=U;this.grid.addColumn(ca)};this.addRadioButton=function(z,D,J,H,K,N,Q,S,U,X,T){this.addColumnDinCode(this.addRadioButton,arguments);var ea=this.newColumn(H,N,"left","");ea.visible=U;ea.htmlName=J;ea.gxId=
D;ea.gxAttId=z;ea.gxAttName=K;ea.gxSetsContext=X;ea.gxColumnClass=T;ea.gxControl=new gx.html.controls.radio;ea.gxControl.column=ea;ea.gxControl.dataType=ea.type;ea.gxControl.vertical=S;ea.gxControl.visible=ea.visible;ea.gxControl.clickEvent=Q;this.grid.addColumn(ea)};this.addComboBox=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V){this.addColumnDinCode(this.addComboBox,arguments);var ha=this.newColumn(H,N,"left",T);ha.visible=U;ha.htmlName=J;ha.gxId=D;ha.gxAttId=z;ha.gxAttName=K;ha.gxSetsContext=X;ha.gxWidthUnit=
ea;ha.gxColumnClass=V;ha.gxControl=new gx.html.controls.comboBox;ha.gxControl.column=ha;ha.gxControl.dataType=ha.type;ha.gxControl.rtEnabled=1==S;ha.gxControl.visible=ha.visible;ha.gxControl.clickEvent=Q;this.grid.addColumn(ha)};this.addListBox=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha){this.addColumnDinCode(this.addListBox,arguments);var ca=this.newColumn(H,N,"left",T);ca.visible=U;ca.htmlName=J;ca.gxId=D;ca.gxAttId=z;ca.gxAttName=K;ca.gxSetsContext=X;ca.gxWidthUnit=ea;ca.gxColumnClass=V;ca.gxControl=
new gx.html.controls.listBox;ca.gxControl.column=ca;ca.gxControl.dataType=ca.type;ca.gxControl.rows=void 0!==ha?ha:4;ca.gxControl.rtEnabled=1==S;ca.gxControl.visible=ca.visible;ca.gxControl.clickEvent=Q;this.grid.addColumn(ca)};this.addCheckBox=function(z,D,J,H,K,N,Q,S,U,X,T,ea,V,ha,ca){this.addColumnDinCode(this.addCheckBox,arguments);var ja=this.newColumn(H,Q,"left",V);ja.visible=T;ja.htmlName=J;ja.gxId=D;ja.gxAttId=z;ja.gxAttName=N;ja.gxChecked=S;ja.gxUnChecked=U;ja.gxSetsContext=ea;ja.gxWidthUnit=
ha;ja.gxColumnClass=ca;ja.gxControl=new gx.html.controls.checkBox;ja.gxControl.column=ja;ja.gxControl.checkedValue=S;ja.gxControl.uncheckedValue=U;ja.gxControl.dataType=ja.type;ja.gxControl.visible=ja.visible;ja.gxControl.clickEvent=X;this.grid.addColumn(ja)};this.addBitmap=function(z,D,J,H,K,N,Q,S,U,X,T,ea){this.addColumnDinCode(this.addBitmap,arguments);var V=this.newColumn(X,"","left",H);V.htmlName=D;V.gxId=J;V.gxAttId=z;V.gxWidthUnit=K;V.gxControl=new gx.html.controls.image;V.gxControl.column=
V;V.gxControl.dataType=V.type;V.gxControl.width=H;V.gxControl.widthUnit=K;V.gxControl.height=N;V.gxControl.heightUnit=Q;V.gxControl.clickEvent=S;V.gxCssClass=T;V.gxColumnClass=ea;this.grid.addColumn(V)};this.addVideo=function(z,D,J,H,K,N,Q,S,U,X,T,ea){this.addColumnDinCode(this.addVideo,arguments);var V=this.newColumn(X,"","left",H);V.htmlName=D;V.gxId=J;V.gxAttId=z;V.gxWidthUnit=K;V.gxControl=new gx.html.controls.video;V.gxControl.column=V;V.gxControl.dataType=V.type;V.gxControl.width=H;V.gxControl.widthUnit=
K;V.gxControl.height=N;V.gxControl.heightUnit=Q;V.gxControl.clickEvent=S;V.gxCssClass=T;V.gxColumnClass=ea;this.grid.addColumn(V)};this.addAudio=function(z,D,J,H,K,N,Q,S,U,X,T,ea){this.addColumnDinCode(this.addAudio,arguments);var V=this.newColumn(X,"","left",H);V.htmlName=D;V.gxId=J;V.gxAttId=z;V.gxWidthUnit=K;V.gxControl=new gx.html.controls.audio;V.gxControl.column=V;V.gxControl.dataType=V.type;V.gxControl.width=H;V.gxControl.widthUnit=K;V.gxControl.height=N;V.gxControl.heightUnit=Q;V.gxControl.clickEvent=
S;V.gxCssClass=T;V.gxColumnClass=ea;this.grid.addColumn(V)};this.addFile=function(z,D,J,H,K,N,Q,S,U,X,T,ea){this.addColumnDinCode(this.addVideo,arguments);var V=this.newColumn(X,"","left",H);V.htmlName=D;V.gxId=J;V.gxAttId=z;V.gxWidthUnit=K;V.gxControl=new gx.html.controls.file;V.gxControl.column=V;V.gxControl.dataType=V.type;V.gxControl.width=H;V.gxControl.widthUnit=K;V.gxControl.height=N;V.gxControl.heightUnit=Q;V.gxControl.clickEvent=S;V.gxCssClass=T;V.gxColumnClass=ea;this.grid.addColumn(V)};
this.addTextBlock=function(z,D,J){this.addColumnDinCode(this.addTextBlock,arguments);var H=this.newColumn("","","left");H.gxId=J;H.htmlName=z;H.gxControl=new gx.html.controls.textBlock;H.gxControl.column=H;H.gxControl.dataType=H.type;H.gxControl.clickEvent=D;this.grid.addColumn(H)};this.addLabel=function(z){this.addColumnDinCode(this.addLabel,arguments);var D=this.newColumn("","","left");D.htmlName=z;D.gxControl=new gx.html.controls.label;D.gxControl.column=D;this.grid.addColumn(D)};this.addButton=
function(z,D,J,H,K){this.addColumnDinCode(this.addButton,arguments);var N=this.newColumn("","","left");N.htmlName=D;N.gxId=z;N.gxControl=new gx.html.controls.button;N.gxControl.column=N;N.gxControl.dataType=N.type;this.grid.addColumn(N)};this.addGrid=function(z){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(z);var D=this.newColumn("","","left");D.htmlName=z.getContainerControlId();D.gxControl=new gx.html.controls.grid;D.gxControl.column=D;this.grid.addColumn(D)};this.addUsercontrol=
function(z,D,J,H,K,N,Q,S,U,X){this.addColumnDinCode(this.addUsercontrol,arguments);var T="",ea=this.parentObject;ea.GridUCsProps&&ea.GridUCsProps[K]&&(T=ea.GridUCsProps[K].title||"");T=this.newColumn(T,"","left");T.gxUCId=z;T.gxUCLastId=D;T.gxUCClassName=J;T.gxUCContainerName=H;T.gxUCControlName=K;T.gxUCFieldName=N;T.gxShowFunc=Q;T.gxC2VFuncs=S;T.gxV2CFuncs=U;T.visible=X;T.gxControl=new gx.html.controls.userControl;T.gxControl.column=T;T.gxControl.dataType=T.type;T.htmlName=K.toUpperCase();T.isUserControl=
!0;this.grid.addColumn(T)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.userControlContainer;z.gxControl.column=z;z.gxControl.dataType=z.type;this.grid.addColumn(z)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(z){this.addColumnDinCode(this.addWebComponent,arguments);var D=this.newColumn("",
"","left");D.gxControl=new gx.html.controls.webComponent;D.gxControl.column=D;D.gxControl.dataType=D.type;this.grid.addColumn(D)};this.addEmbeddedPage=function(z){this.addColumnDinCode(this.addEmbeddedPage,arguments);var D=this.newColumn("","","left");D.gxControl=new gx.html.controls.embeddedPage;D.gxControl.column=D;D.gxControl.dataType=D.type;this.grid.addColumn(D)};this.addHtmlCode=function(z){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(z)};this.startTable=function(z,
D,J){this.addColumnDinCode(this.startTable,arguments);var H=this.newColumn("","","left");H.gxId=D;H.htmlName=z+"_"+D;H.gxControl=new gx.html.controls.table;H.gxControl.column=H;H.gxControl.width=J;H.gxControl.dataType=H.type;this.grid.addColumn(H)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(z,D,J,H,K,N){this.addColumnDinCode(this.startRow,arguments);var Q=this.newColumn("","","left");Q.gxControl=new gx.html.controls.row;
Q.gxControl.column=Q;Q.gxControl.title=z;Q.gxControl.align=D;Q.gxControl.verticalAlign=J;Q.gxControl.backColor=H;Q.gxControl.borderColor=K;Q.gxControl.cssClass=N;Q.gxControl.ownCssClass=N;Q.gxControl.dataType=Q.type;this.grid.addColumn(Q)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(z,D,J,H,K,N,Q,S,U,X){this.addColumnDinCode(this.startCell,arguments);var T=this.newColumn("","","left");T.gxControl=new gx.html.controls.cell;
T.gxControl.column=T;T.gxControl.title=z;T.gxControl.align=D;T.gxControl.verticalAlign=J;T.gxControl.backColor=H;T.gxControl.borderColor=K;T.gxControl.height=N;T.gxControl.width=Q;T.gxControl.colSpan=S;T.gxControl.rowSpan=U;T.gxControl.cssClass=X;T.gxControl.dataType=T.type;this.grid.addColumn(T)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(z,D,J,H,K){this.addColumnDinCode(this.startGroup,
arguments);var N=this.newColumn("","","left");N.htmlName=z;N.gxControl=new gx.html.controls.group;N.gxControl.column=N;N.gxControl.id=z;N.gxControl.caption=D;N.gxControl.height=J;N.gxControl.width=H;N.gxControl.cssClass=K;N.gxControl.dataType=N.type;this.grid.addColumn(N)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(z,D,J,H){this.addColumnDinCode(this.startDiv,arguments);var K=this.newColumn("","","left");
K.gxId=z;K.htmlName=D+"_"+z;K.gxControl=new gx.html.controls.div;K.gxControl.column=K;K.gxControl.width=H;K.gxControl.height=J;K.gxControl.dataType=K.type;this.grid.addColumn(K)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.divEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.startFormGroup=function(z,D,J,H){this.addColumnDinCode(this.startFormGroup,arguments);var K=this.newColumn("","","left");K.gxId=z;
K.htmlName=D+"_"+z;K.gxControl=new gx.html.controls.formGroup;K.gxControl.column=K;K.gxControl.width=H;K.gxControl.height=J;K.gxControl.dataType=K.type;this.grid.addColumn(K)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var z=this.newColumn("","","left");z.gxControl=new gx.html.controls.formGroupEnd;z.gxControl.column=z;this.grid.addColumn(z)};this.newColumn=function(z,D,J,H){D=this.getColumnType(D);z=new gx.grid.column(z,D,H,J);this.currentBuffer=z.buffer;z.htmlName=
"";z.gxId="";z.gxAttId="";z.gxAttName="";return z};this.getColumnType=function(z){switch(z){case "decimal":case "int":z=gx.types.numeric;break;case "date":z=gx.types.date;break;case "dtime":z=gx.types.dateTime;break;case "boolean":z=gx.types.bool;break;case "GeneXus\\Geolocation":z=gx.types.geolocation;break;default:z=gx.types.character}return z};this.addOldComponent=function(z,D){"undefined"==typeof this.oldCmps[z]&&(this.oldCmps[z]=[]);this.oldCmps[z].push(D)};this.updateOldComponents=function(){for(var z=
this.grid.rows.length,D=0;D<z;D++)delete this.oldCmps[this.grid.rows[D].gxId];for(var J in this.oldCmps){for(z=this.oldCmps[J];0<z.length;)D=z.shift(),gx.fn.deleteHidden(D);delete this.oldCmps[J]}};this.addHidden=function(z){this.hiddens.push(z)};this.addHiddenControl=function(z,D,J){gx.fn.setHidden(z,D);1!=J&&this.addHidden(z)};this.clearHiddens=function(){for(var z=0;z<this.hiddens.length;z++)gx.fn.deleteHidden(this.hiddens[z]);this.hiddens=[]};var fa={};this.setHtmlTags=function(z){gx.lang.apply(fa,
z);var D=' style="'+("0"==fa.Visible?"display:none;":"");z=' class="'+fa.Class+'"';var J=gx.lang.emptyObject;D+=J(fa.Background)?"":"background:"+fa.Background+";";D+=J(fa.Backcolor)||"0"==fa.Backcolor?"":"background-color:"+gx.color.html(fa.Backcolor).Html+";";D+=J(fa.Bordercolor)||"0"==fa.Bordercolor?"":"border-color:"+gx.color.html(fa.Bordercolor).Html+";";D+=J(fa.Borderwidth)||"0"==fa.Borderwidth?"":" border-width:"+fa.Borderwidth+";";D+=J(fa.Width)||"0"==fa.Width?"":" width:"+gx.dom.addUnits(fa.Width,
this.width==fa.Width?this.widthUnit:"")+";";D+=J(fa.Height)||"0"==fa.Height?"":"max-height:"+gx.dom.addUnits(fa.Height,this.height==fa.Height?this.heightUnit:"")+";";z+=J(fa.Align)?"":' align="'+fa.Align+'"';z+=J(fa.Tooltiptext)?"":' title="'+fa.Tooltiptext+'"';z+=J(fa.Cellpadding)?"":' data-cellpadding="'+fa.Cellpadding+'"';z+=J(fa.Cellspacing)?"":' data-cellspacing="'+fa.Cellspacing+'"';this.htmlTags=gx.text.trim(z+(D+'"'));this.grid.gxHtmlTags=this.htmlTags;J(fa.Width)||(this.grid.gxWidth=fa.Width);
J(fa.Height)||(this.grid.gxHeight=fa.Height)};var da={};this.setGridStyles=function(z){gx.lang.apply(da,z);this.grid.header=z.Header;this.visible=void 0!=da.Visible?gx.lang.gxBoolean(da.Visible):!0;this.setSortable(void 0!=da.Sortable?gx.lang.gxBoolean(da.Sortable):!0);this.background=void 0!=da.Background?da.Background:"";this.cssClass=void 0!=da.Class?da.Class:"";this.titleBackstyle=void 0!=da.Backcolorstyle?da.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=da.Titlefont?da.Titlefont:
"";this.linesFont=void 0!=da.Linesfont?da.Linesfont:"";this.borderWidth=void 0!=da.Borderwidth?da.Borderwidth:"";this.toolTipText=void 0!=da.Tooltiptext?da.Tooltiptext:"";try{this.backcolor=void 0!=da.Backcolor?gx.color.html(da.Backcolor).Html:"",this.titleBackcolor=void 0!=da.Titlebackcolor?gx.color.html(da.Titlebackcolor).Html:"",this.titleForecolor=void 0!=da.Titleforecolor?gx.color.html(da.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=da.Backcolorodd?gx.color.html(da.Backcolorodd).Html:
"",this.linesBackcolorEven=void 0!=da.Backcoloreven?gx.color.html(da.Backcoloreven).Html:"",this.bordercolor=void 0!=da.Bordercolor?gx.color.html(da.Bordercolor).Html:""}catch(D){gx.dbg.logEx(D,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=da.Borderwidth?da.Borderwidth:"";this.toolTipText=void 0!=da.Tooltiptext?da.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;
this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=
this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=
this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(z){if(this.sortable!=z){this.sortable=z;for(var D=this.grid.columns.length,J=0;J<D;J++)this.grid.columns[J].sortable=
z}};this.lastRowId=0;this.addRow=function(z){var D,J=this.lastRowId++,H=gx.grid.rowId(J+1);H=new gx.grid.row(J,z,H,this.grid.gxParentRowId);H.gxCmpContext=this.gxComponentContext;H.Grids=z.Grids;H.ownerGrid=this;H.gxLvl=this.gridLvl;this.setRowHiddens(z.Hiddens);for(var K=this.grid.columns,N=K.length,Q=0;Q<N;Q++){var S=K[Q];if(0!==J){var U=this.grid.rows[0].gxProps[Q];var X=z.Props[Q].length;for(D=this.grid.rowsValues?U.length-1:U.length;X<D;X++)H.gxProps[Q].push(U[X])}D=z.Props[Q];D=D[D.length-1];
(U=this.grid.rowsValues)&&!this.autoRefreshing&&(X=U[J],void 0!==X&&0<X.length&&(D=U[J][Q]));H.values[Q]=D;this.grid.rowsValues&&H.gxProps[Q].push(D);this.parentObject.isTransaction()&&(S=this.columnIndexInKey(S.gxAttId),-1!=S&&(H.gxKeyValues[S]=D))}this.isFreestyle&&(H.IsNew=!0,this.installChildGrids(H));this.grid.addRow(H);return H};this.installChildGrids=function(z){for(var D=this.childGrids.length,J=0;J<D;J++){var H=this.childGrids[J],K=H.gxCreateGridCode(z.gxId);K.grid.parentGxObject=this.parentObject;
var N=(K.isMasterPageGrid?"MP":this.grid.gxCmpContext)+K.realGridName+"Container";K.gxContainerDivName=N+"Div_"+z.gxId;K.gxContainerDataName=N+"Data_"+z.gxId;K.gxContainerValuesName=N+"DataV_"+z.gxId;z.gxGrids.push(K);K.parentGrid=this;K.parentRow=z;this.parentObject.setGrid(K);H.copyPropertiesTo(K);K.grid.gxCmpContext=this.grid.gxCmpContext;K.grid.gxParentRowId=z.gxId;this.installChildGridColumns(K,H)}};this.installChildGridColumns=function(z,D){for(var J=D.gxAddColumnsCode.length,H=0;H<J;H++)D.gxAddColumnsCode[H].call(z)};
this.copyPropertiesTo=function(z){z.cssClass=this.cssClass;z.titleBackstyle=this.titleBackstyle;z.titleBackcolor=this.titleBackcolor;z.linesBackcolorOdd=this.linesBackcolorOdd;z.linesBackcolorEven=this.linesBackcolorEven;z.grid.gxCssClass=this.grid.gxCssClass;z.grid.gxTitleClass=this.grid.gxTitleClass;z.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;z.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;z.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;z.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=
function(z){if(z&&this.parentObject.isTransaction())for(var D in z)gx.fn.setHidden(D,z[D])};this.executeEvent=function(z,D){gx.evt.setGridEvt(this.gridId.toString(),D);this.instanciateRow(D);this.parentObject[z].call(this.parentObject,D)};this.getHiddenName=function(z){var D="";this.parentRow&&(D="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+z+D};this.updatePagingVars=function(z,D){void 0==z&&void 0==D?(this.grid.eof=
gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=z,this.grid.firstRecordOnPage=D)};this.setPagingVars=function(z,D){this.grid.eof=z;this.grid.firstRecordOnPage=D;gx.fn.setHidden(this.getHiddenName("nEOF"),z);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),D)};this.clearDefaultEventHandlers=function(){if(this.defaultDragable||this.defaultSetsContext){var z=this.grid.rows.length;for(var D=0;D<z;D++){var J=
this.containerName+"Row_"+this.grid.rows[D].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(J);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(J)}}z=this.grid.columns.length;for(D=0;D<z;D++)if(J=this.grid.columns[D],1==J.gxSetsContext)for(var H=this.grid.rows.length,K=0;K<H;K++)gx.fx.ctx.deleteSetter(J.htmlName+"_"+this.grid.rows[K].gxId)};this.setDefaultEventHandlers=function(){var z=0,D=this.additiveResponse?this.firstAdditiveRow:0,J=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType)){z=
this.grid.rows.length;for(var H=D;H<z;H++){var K=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[H].gxId;K=gx.dom.byId(K);null!=K&&(K.gxGrid=this.containerName,K.gxGridName=this.gridName,K.gxId=this.grid.rows[H].gxId);K=this.containerName+"Row_"+this.grid.rows[H].gxId;N=function(S){return this.returnRowData(S)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,K,this.cssClass,J,N);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,K,this.cssClass,
J,N)}}else{z=this.grid.gxCmpContext+this.containerName+"Div";var N=function(){return this.returnGridData()}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,z,this.cssClass,[this.boundedCollType],N);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,z,this.cssClass,[this.boundedCollType],N)}if(this.parentGrid)for(N=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"],z=this.grid.rows.length,H=D;H<z;H++)K=this.containerName+"Row_"+this.grid.rows[H].gxId,
N&&N.hdl&&gx.fx.ctx.addSetter(this.parentObject,K,this.cssClass,J,N.hdl);if(!this.additiveResponse)for(z=this.grid.columns.length,H=0;H<z;H++)if(J=this.grid.columns[H],1==J.gxSetsContext)for(K=this.grid.rows.length,N=D;N<K;N++){var Q=gx.dom.el(this.gxComponentContext+J.htmlName+"_"+this.grid.rows[N].gxId,!0);null!=Q&&(Q.gxHtmlName=J.htmlName,gx.fx.ctx.addSetter(this.parentObject,J.htmlName+"_"+this.grid.rows[N].gxId,"",[J.gxAttName],this.returnColumnContext))}};this.infinite_scrolling_ensure_loading_scroll=
function(){if(!this.mock_element){var z=l("#"+this.getGridInnerTableId());this.mock_element=l('<div class="gx-grid-loading" style="visibility:hidden;">'+gx.getMessage("GXM_Loading")+"</div>");this.mock_element.insertAfter(z)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();!0!==this.isScrolling&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){this.mock_element&&this.mock_element.css("visibility",
"hidden")};this.remove_loading_message=function(){this.mock_element&&(l(this.mock_element).remove(),this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){var z=this.getGridInnerTableId();l("#"+z);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(z){if(!this.isFreestyle){var D=this.getGridInnerTableId();rows=l("#"+D).find("tbody tr[data-gxrendering_row]");l.each(rows,function(J,H){l(H).children().map(function(K,
N){N.style.width=z[K]+"px";N.style.maxWidth=z[K]+"px"})});rows.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=function(){this.ScrollingElement&&(l(this.ScrollingElement).scrollTop(0),this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(z,D,J,H){var K=gx.grid.scrollingThreshold||4,N=function(){if(this.InverseLoading)return z.scrollTop<=30*z.clientHeight/100;if(1==this.ScrollType){var U=
l(window);var X=l(document).height();var T="CSS1Compat"===(document.compatMode||"");T=void 0!==window.pageXOffset?window.pageYOffset:T?document.documentElement.scrollTop:document.body.scrollTop;U=U.height()}else X=z.scrollHeight,T=z.scrollTop,U=z.clientHeight;var ea=T;var V=S.lastPosition;S.lastPosition=ea;return ea<V?!1:X-T-U<U*K}.closure(this),Q=this,S={allow:!0,reallow:function(){S.allow=!0;S.runAfterReallow&&(S.runAfterReallow=!1,Q.ScrollingHandler())},lastPosition:0,runAfterReallow:!1,delay:300};
this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(S.allow){var U=Q.grid;!0!==Q.isScrolling&&!U.isLastPage()&&N()&&(Q.infinite_scrolling_before_scroll(),U.changeGridPage("NEXT",!1));S.allow=!1;setTimeout(S.reallow,S.delay)}else S.runAfterReallow=!0})};this.infinite_scrolling_ensure_loading_scroll();z.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&
0<this.grid.rows.length){var z=this.getContainerControl();if(z){var D=l(z),J=this,H=this.getGridInnerTableId();z=l("#"+H);var K=z.find("tbody tr:first").children(),N=l("#"+H+"> tbody"),Q=l("#"+H+"> thead > tr"),S=l("#"+H+"> thead");H=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=z.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=K.map(function(){return l(this).width()}).get());D.addClass("gx-infinite-scrolling-container");if(!this.width||H)H?(D.addClass("gx-grid-fixed-header-ie7"),
D.wrap("<div style='position:relative;'>"),z.css("width",""),D.width(this.fixedContainerWidth+l.position.scrollbarWidth()+2),K=S.position(),Q.css("top",K.top),K=Q.outerHeight(!0),D.css("paddingTop",gx.dom.addUnits(K,"px")),z.attr("data-bkgstyle",""),K=z.css("background-color"),S=Q.css("background-color"),!K||S&&"transparent"!==S||Q.css("background-color",K)):z.width(this.fixedContainerWidth+l.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(z.find("thead tr").children().each(function(U,
X){l(X)[0].style.width=J.fixedColumnsWidth[U]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));N.addClass("gx-infinite-scrolling-element");D=H?D:N;z.css("max-height","");D.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}}};this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling){var z=this.getContainerControl();if(z){var D=l(z);D.removeClass("gx-infinite-scrolling-container");if(0<this.grid.rows.length){var J=this,H=this.getGridInnerTableId();
if(1==this.ScrollType){var K=window;this.fixedColumnsWidth=[]}else{this.ScrollingHeight&&l(K).css({height:this.ScrollingHeight});var N=l("#"+H),Q=N.find("tbody tr:first").children(),S=l("#"+H+">tbody"),U=l.grep(this.grid.columns,function(ca){return 1==ca.visible}).length;this.fixedColVisibleCount!=U&&(this.fixedColVisibleCount=U,this.isFreestyle||(this.fixedColntainerWidth=N.width(),this.fixedColumnsWidth=Q.map(function(){return this.offsetWidth}).get()));D.addClass("gx-infinite-scrolling-container");
this.isFreestyle||N.width(this.fixedColntainerWidth+l.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(N.find("thead tr").children().each(function(ca,ja){l(ja)[0].style.width=J.fixedColumnsWidth[ca]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));K=0<S.length?S[0]:z;l(K).addClass("gx-infinite-scrolling-element")}this.ScrollingHeight&&1!=this.ScrollType&&l(K).css({height:this.ScrollingHeight});this.ScrollingElement=K;this.infinitScrollingInstalled=!0;z=this.InverseLoading?
this.grid.firstItemSelector:this.grid.lastItemSelector;var X=this.infinite_scrolling_before_scroll.closure(this);if(!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&0<this.grid.pageSize)){if(1!=this.ScrollType){var T=l(K).height()-2;l(K).css({height:T})}this.ScrollingHeight=T}if(K){var ea=0,V=function(){var ca;if(10==ea)return ea=0,!1;(ca=this.InverseLoading?0==K.scrollTop:1==this.ScrollType?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:
document.body.scrollHeight<=document.body.clientHeight:K.clientHeight==K.scrollHeight)&&ea++;return ca}.closure(this),ha=function(){if(!this.grid.isLastPage()&&V())return X(),this.grid.changeGridPage("NEXT",!1).then(function(){J.InverseLoading&&(K.scrollTop=K.scrollHeight);ha()})}.closure(this);gx.lang.requestAnimationFrame(function(ca,ja,qa,ra){ha();this.installScrollListener(ca,ja,qa,ra)}.closure(this,[this.ScrollingElement,H,S,z]))}}}}};this.returnColumnContext=function(z){z="SPAN"==z.nodeName?
gx.dom.spanValue(z):gx.fn.getControlValue_impl(z.id);return null!=z?z:""};this.returnRowData=function(z){var D={};if(z=this.grid.getRowByGxId(z.gxId))for(var J=this.grid.columns.length,H=0;H<J;H++){var K=this.grid.columns[H].gxAttName;""!=K&&(D[K]=z.values[H])}return D};this.returnGridData=function(){for(var z=[],D=this.grid.rows.length,J=0;J<D;J++){var H={};z[J]=H;for(var K=this.grid.rows[J],N=this.grid.columns.length,Q=0;Q<N;Q++){var S=this.grid.columns[Q].gxAttName;""!=S&&(H[S]=K.values[Q])}}return z};
this.doDrop=function(z){this.getNewRows(void 0!=z.length?ropObj.length:1,null,function(D){this.addDropedRows(D,z)})};this.addDropedRows=function(z,D){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;var J=D.length;if(void 0!=J)for(var H=0;H<J;H++)this.setDroppedRow(z[H],D[H]);else this.setDroppedRow(z[0],D);this.setNewRows(z)};this.setDroppedRow=function(z,D){for(var J=this.grid.columns.length,H=0;H<J;H++){var K=z.Props[H],N=this.grid.columns[H].gxAttName,Q="";""!=
N&&void 0!=D[N]&&(Q=D[N]);K.Value=Q;K.FormattedValue=Q}};this.getRowAsTypes=function(){for(var z=[],D=this.grid.columns.length,J=0;J<D;J++){var H=this.grid.columns[J].gxAttName;""!=H&&z.push(H)}return z};this.addRows=function(z){var D=z.Count;this.grid.rowsValues=z.values;for(var J=0;J<D;J++)this.addRow(z[J])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var z=this.grid.rows[this.grid.rows.length-1];return z.gxExists()||z.gxIsMod()?!0:!1};this.getNewRows=function(z,D,J){J=
void 0!=J?J:this.setNewRows;var H=gx.util.browser.isFirefox()?"keypress":"keydown";null!=D&&((D.type!=H||32!=D.charCode&&32!=D.keyCode&&13!=D.keyCode)&&"click"!=D.type||0!=this.grid.rows.length&&!this.lastRowIsModified())?null==D||32!=D.keyCode&&13!=D.keyCode||gx.evt.cancel(D,!0):(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,z+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,J),gx.csv.pkDirty=
!1,null!=D&&gx.evt.cancel(D,!0))};this.setNewRows=function(z){return this.setNewRows_impl(z,function(D){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(z){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=z.gxContainer?z.gxContainer:z;return this.setNewRows_impl(z,function(D){this.loadGrid({rowProps:D,isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(z,D){z.gxHiddens&&gx.fn.setJsonHiddens(null,z.gxHiddens);z=
z.gxContainer?z.gxContainer:z;if(void 0!=z.Count){var J;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(z.values);for(J=0;J<z.Count;J++){var H=this.addRow(z[J]);gx.fn.setCurrentGridRow(this.gridId,H.gxId)}0<z.Count&&(this.addingRows=!0,D.call(this,z),this.addingRows=!1,this.setFocusFirstControl(z[0]))}return H};this.gxNewRowFocused=function(z){z.style.textDecoration="underline";var D=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(z,D,this.gxComponentContext,
this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(z){var D=gx.evt.source(z);void 0!=D&&z.ctrlKey&&46==z.keyCode&&(this.setRowDeleted(D),gx.evt.cancel(z,!0))};this.gxHasDuplicateKey=function(){for(var z=[],D=this.grid.rows,J=D.length,H=0;H<J;H++){var K=D[H];if((K.gxExists()||K.gxIsMod())&&!K.gxDeleted()){for(var N="",Q=K.gxKeyValues.length,S=0;S<Q;S++)N+=K.gxKeyValues[S].toString();if(void 0!=z[N])return!0;z[N]=1}}return!1};this.columnIndexInKey=function(z){for(var D=this.lvlKey.length,
J=0;J<D;J++)if(this.lvlKey[J]==z)return J;return-1};this.refreshVars=[];this.addRefreshingVar=function(z){if(!gx.lang.emptyObject(z)){var D="",J=function(){this.filterVarChanged()};this.refreshVars[this.refreshVars.length]=z;if(z.fld){var H=gx.dom.el(this.gxComponentContext+z.fld,!1,!0);if(void 0!=H&&gx.lang.emptyObject(z.hc)&&(D="radio"==H.type||"checkbox"==H.type?"click":"SELECT"==H.tagName?"change":gx.evt.eachKeyAutorefreshType(z.type)?["keyup","input"]:"blur",""!=D))if("radio"==H.type){H=gx.dom.byName(this.gxComponentContext+
z.fld);z=H.length;for(var K=0;K<z;K++)gx.evt.attach(H[K],D,J,this)}else"search"==H.type&&(D=[D,"search"]),gx.evt.attach(H,D,J,this)}else if((D=this.parentObject.VarControlMap[z.rfrVar])&&(D=this.parentObject.getValidStructFld(D.id))&&D.isuc)for(H in D.ucInstances)D.ucInstances.hasOwnProperty(H)&&(D.ucInstances[H].autoRefreshFn=J.closure(this))}};this.refreshParms=[];this.addRefreshingParm=function(z){gx.lang.emptyObject(z)||(this.refreshParms[this.refreshParms.length]=z)};this.doRefresh=function(){var z=
this.getRefreshParmsUrl();this.callAsyncRefresh(z)};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var z=this.getRefreshParmsUrl();this.lastRefreshParms!=z&&(this.lastRefreshParms=z,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var z=this.refreshVars.length,D=0;D<z;D++){var J=this.refreshVars[D];if("undefined"==typeof J.rfrVar){var H=gx.fn.getHidden(this.gxComponentContext+
"GXH_"+J.fld);J=J.val();if(void 0!==H&&H!=J)return!0}}return!1};this.getRefreshParmsUrl=function(z){return this.getParmsValues(z,this.refreshParms,!0).join(",")};this.getParmsValues=function(z,D,J){var H=gx.O,K=D.length,N=[];gx.setGxO(this.parentObject);for(var Q=function(ca,ja,qa,ra){!0===qa&&(ja=gx.ajax.ControlValuesObject(ja,ca))&&ra.push(encodeURIComponent(gx.json.serializeJson(ja)));ra.push(ca)},S=0;S<K;S++){var U=D[S];if(U&&("function"==typeof U.c2v&&U.c2v(),"function"==typeof U.v2bc&&U.v2bc.call(gx.O),
"undefined"!=typeof U.rfrVar)){var X=gx.fn.vStructForVar(U.rfrVar);if(!X&&(X=gx.fn.getVarControlMapForVar(U.rfrVar))&&!z){var T=this.parentObject.getValidStructFld(X.id);if(T&&T.isuc){var ea=T&&T.grid?gx.fn.currentGridRowImpl(T.grid):void 0;(T.getUCInstance(ea)||T.uc).execC2VFunctions()}}if(X&&("undefined"==typeof U.rfrProp||this.isValueProperty(U.rfrProp)))var V=X.type}if("undefined"!=typeof U.rfrVar){X=ctrlName=colVStruct=void 0;if("undefined"!=typeof U.rfrProp){var ha;"undefined"!=typeof U.gxAttId&&
(ha=this.grid.getColumnByGxAttId(U.gxAttId));ha||(ha=this.grid.getColumnForVar(U.rfrVar));ha?(T=U.rfrProp.toLowerCase(),X=ha.hasOwnProperty(T)?ha[T]:ha.gxControl[T],this.isValueProperty(T)&&ha.gxControl.type==gx.html.controls.types.image&&(X=gx.util.removeBaseUrl(X)),(colVStruct=this.parentObject.getValidStruct(ha.gxId))&&this.isValueProperty(T)&&(V=colVStruct.type)):X=""}else"undefined"!=typeof this.parentObject.VarControlMap[U.rfrVar]&&(ctrlName=this.parentObject.VarControlMap[U.rfrVar].id),gx.lang.emptyObject(this.parentObject[U.rfrVar])?
"undefined"==typeof X&&"undefined"!=typeof ctrlName&&(X=gx.fn.getHidden(this.gxComponentContext+ctrlName)):X=this.parentObject[U.rfrVar],"object"==typeof X&&"date"!=V&&"dtime"!=V&&(X=gx.json.serializeJson(X));X="undefined"==typeof X?"":X;Q(this.getFormattedParm(X,V),U.rfrVar,(!U.rfrProp||"Value"===U.rfrProp)&&J,N)}else"string"==typeof U.gxGrid?(X=gx.O.getGridByBaseName(U.gxGrid),"string"==typeof U.rfrProp&&"Rows"==U.rfrProp&&N.push(X?X.grid.pageSize:9999)):gx.lang.emptyObject(U.hc)?(Q(this.getFormattedVStructParm(U),
U.gxvar,(!U.rfrProp||"Value"===U.rfrProp)&&J,N),gx.fn.setHidden(this.gxComponentContext+"GXH_"+U.fld,U.val())):(X=gx.fn.getHidden(this.gxComponentContext+"GXH_"+U.fld),N.push(encodeURIComponent(z&&"undefined"!==typeof X?X:this.parentObject[U.hc])))}this.parentObject.IsComponent&&N.push(encodeURIComponent(this.parentObject.CmpContext));gx.setGxO(H);return N};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(z){return"undefined"!=
typeof z&&"value"==z.toLowerCase()};this.getFormattedVStructParm=function(z){if("date"==z.type||"dtime"==z.type){var D=gx.dom.el(this.gxComponentContext+z.fld);D="undefined"!=typeof D.value?D.value:gx.dom.spanValue(D)||D}else D=z.val();return this.getFormattedParm(D,z.type)};this.getFormattedParm=function(z,D){"date"===D?z=gx.date.urlDate(z,gx.dateFormat):"dtime"===D&&(z=gx.date.urlDateTime(z,gx.dateFormat));return encodeURIComponent(z)};this.callAsyncRefresh=function(z,D){gx.evt.refreshGridCallback||
(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0,"callAsyncRefresh"));gx.evt.setReady(!1,"callAsyncRefresh");var J=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){gx.util.executionContext.changedContext(J)||(this.autoRefreshing||gx.evt.processing?this.callAsyncRefresh(z):(gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:!0}),"undefined"===
typeof z&&(z=this.getRefreshParmsUrl()),gx.ajax.refreshGrid(this,z),gx.evt.setReady(!0,"callAsyncRefresh"),this.refreshTimer=null))}.closure(this),D||400)};this.updatePropsHidden=function(z){var D=this.getDataHiddenName();gx.fn.setHidden(D,z)};this.updatePagingVarsAfterRefresh=function(z){if(this.usePaging){var D=this.grid.gxGridName.toUpperCase()+"_nEOF",J=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(z[D],z[J])}};this.getSelection=function(){if(this.allowSelection)for(var z=
this.grid.rows.length,D=0;D<z;D++)if(this.grid.rows[D].selected)return D;return-1};this.setNextRowSelected=function(z){var D=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(D,z);this.grid.keepGridItemVisible(D)};this.setPreviousRowSelected=function(z){var D=Math.max(this.getSelection()-1,0);this.setSelection(D,z);this.grid.keepGridItemVisible(D)};this.setProperty=function(z){if(z.Selectedindex)if(z=Number(z.Selectedindex),-1==z)this.setSelection(z);else return this.setSelectionRowCtrl(this.grid.getRowByPos(z));
return!1};this.setSelection=function(z,D){if(this.allowSelection){if(-1==z)return this.grid.setRowSelected(void 0,"",void 0,void 0,D),!0;if(0<=z)return z=this.getRowCtrlByIdx(z),this.setSelectionRowCtrl(z,D)}return!1};this.setSelectionRowCtrl=function(z,D){return this.allowSelection&&z?(this.grid.setRowSelected(z,z.getAttribute("data-gxrow"),void 0,void 0,D),!0):!1};this.getRowCtrlByIdx=function(z){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(z+1))};this.blankGridRows=
function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);this.InfiniteScrolling&&this.additiveResponse||(this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues)};this.setRowDeleted=function(z){z="string"==typeof z?this.grid.getRowByGxId(z):void 0==z.gxId?this.getRowFromHtmlCtrl(z):z;z.setDeleted(!z.gxDeleted());this.setRowModified(z.gxId);gx.fn.removeGridRow(z.gxId,this.gridId.toString());var D=new gx.text.stringBuffer;parseInt(z.gxId);this.grid.renderRow(z,
!1,z.id,0,this.grid.lastRenderedRow,this.gxIsFreestyle&&1<this.gxGridCols,D,void 0,this.grid.gxBuffer.toString(),this.grid.columns.length,void 0,void 0,void 0,void 0,this.grid.fromCollection,this.grid.columns);z=D.toString();D=(D=z.match(/id='(\S+)'/))&&gx.dom.el(D[1]);D.outerHTML=z;gx.plugdesign.applyTemplateObject(D);gx.dom.indexElements()};this.setFocusFirstControl=function(z){for(var D=0;D<z.Count;D++){var J=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(J&&(J=
gx.dom.el(this.grid.gxCmpContext+this.grid.columns[D].htmlName+"_"+J.gxId),void 0!=J&&gx.fn.isAccepted(J))){gx.grid.lastFocusCtrl=this.grid.columns[D].gxId;gx.fn.setFocus(J);break}}};this.instanciateRow=function(z){var D=gx.O,J,H;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var K=z;"string"==typeof K&&(K=this.grid.getRowByGxId(z));if(null!=K){gx.fn.setCurrentGridRow(this.gridId,K.gxId);var N=K.values.length;for(H=0;H<N;H++){var Q=this.grid.columns[H];if(""!=Q.gxId){var S=this.parentObject.getValidStruct(Q.gxId);
S&&(this.useUserControlModelValues()?S.v2v&&(S.v2v(this.grid.properties[K.id][Q.index].value),gx.fn.setHidden(this.grid.properties[K.id][Q.index].id,this.grid.properties[K.id][Q.index].value)):"function"==typeof S.c2v&&S.c2v())}}}else for(gx.fn.setCurrentGridRow(this.gridId,z),N=this.grid.columns.length,H=0;H<N;H++)Q=this.grid.columns[H],""!=Q.gxId&&(S=this.parentObject.getValidStruct(Q.gxId))&&"function"==typeof S.c2v&&S.c2v();var U=this.parentObject.UserControls;for(J in U)if(U.hasOwnProperty(J)){var X=
U[J];X.GridId===this.gridId&&X.GridRow===K.gxId&&(this.parentObject[X.DesignContainerName]=X)}}catch(T){gx.dbg.logEx(T,"gxgrid.js","instanciateRow")}gx.setGxO(D);return!0};this.setRenderProp=function(z,D,J,H){this.grid.setProp(z,D,J,H)};this.setRenderDynProp=function(z,D,J,H){this.grid.setDynProp(z,D,J,H)};this.addRenderEventHandler=function(z,D){this.grid.addEventHandler(z,D)};this.addRenderV2CFunction=function(z){this.grid.addV2CFunction(z)};this.addRenderC2VFunction=function(z){this.grid.addC2VFunction(z)};
this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(z){gx.dbg.logPerf("loadGrid_"+this.gridName);z=z||{};var D=z.rowProps,J=z.isPostback,H=z.addRows;z=z.isNestedLoad;this.isNestedLoad=this.isNestedLoad||
z;z=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var K=this.parentObject.isTransaction();K&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));if(void 0!=D){K=D.GridName?D[D.GridName.toUpperCase()+"_nEOF"]:void 0;var N=D.GridName?D[D.GridName.toUpperCase()+"_nFirstRecordOnPage"]:void 0,Q=this.getContainerControl();if(null!=Q){this.autoRefreshing?this.updatePagingVarsAfterRefresh(D):this.updatePagingVars(K,N);this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);
J&&!H&&(D.values=this.getValuesFromHidden(),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents());this.deleteGridData();this.grid.setContainerDelayed(Q);this.additiveResponse||this.clearHiddens();this.setRowsProperty();J=this.getSelection();this.autoRefreshing?this.updatePagingVarsAfterRefresh(D):this.updatePagingVars(K,N);H||this.blankGridRows();this.setHtmlTags(D);this.setGridStyles(D);this.setDeleteMethod(D.DeleteMethod);this.setSelectionAndHover(D.Allowselection,D.Selectioncolor,
D.Allowhover,D.Hovercolor,D.Selectedindex);this.setCollapsing(D.Allowcollapsing,D.Collapsed);this.setSflColumns(D.SflColumns);this.setColumnsProperties(D.Columns);H||this.addRows(D);this.updateOldComponents();this.initRefreshParms();var S=this.getGridInnerTableId();S=void 0!==l("#"+S).attr("data-gx-grid-nodata");S=this.refreshGrid({addRows:H&&!S,loadChildGrids:null,fromAutoRefresh:this.autoRefreshing});this.setProperty({Selectedindex:J+1})}}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=
K||this.isFreestyle?9999:this.gridRows,Q=this.getContainerControl(),null!=Q?(this.grid.setContainerDelayed(Q),H=this.getRowsFromHidden(),null!=H?(H.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(H),this.setGridStyles(H),this.setDeleteMethod(H.DeleteMethod),this.setSelectionAndHover(H.Allowselection,H.Selectioncolor,H.Allowhover,H.Hovercolor,H.Selectedindex),this.setCollapsing(H.Allowcollapsing,H.Collapsed),this.setSflColumns(H.SflColumns),this.setColumnsProperties(H.Columns),
this.updatePagingVars(),this.addRows(H),this.initRefreshParms(),this.addingRows=!0,S=this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),S=this.refreshGrid())):S=this.loadWrappedGridChilds();this.isLoading=!1;gx.setGxO(z);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded");return S};this.loadWrappedGridChilds=function(){var z=l.Deferred();try{var D=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=
typeof D){D=parseInt(D);for(var J=0;J<D;J++)for(var H=this.grid.columns.length,K=0;K<H;K++){var N=this.grid.columns[K];N.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(J+1),c:N})}this.setupGridUsercontrols(this.GridUserControls)}}catch(Q){gx.dbg.logEx(Q,"gxgrid.js","loadWrappedGridChilds")}z.resolve();return z};this.getRowsFromHidden=function(){var z=this.getDataHiddenName(),D=gx.fn.getHidden(z);gx.json.setNonSerializable(z);return"string"==typeof D?
gx.json.evalJSON(D):"object"==typeof D?D:null};this.deleteGridData=function(){var z=this.getDataHiddenName();gx.json.setNonSerializable(z)};this.getValuesFromHidden=function(){var z=this.getValuesHiddenName(),D=gx.fn.getHidden(z);gx.lang.emptyObject(D)&&(D=gx.fn.getControlValue(z));gx.json.setNonSerializable(z);z=null;null!=D&&""!=D&&(z=gx.json.evalJSON(D));return z};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+
"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var z=gx.dom.byId(this.getContainerControlId());z&&(this.gxContainerCtrl=z,z.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(z,"gx-grid"),this.isResponsive&&gx.dom.addClass(z,"gx-responsive-grid"),gx.dom.addClass(z,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),z.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};
this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(z){try{if(!gx.lang.emptyObject(z))for(var D=z.length,J=0;J<D;J++){var H=this.grid.columns[J];for(N in z[J]){var K=z[J][N];
var N=this.fixColumnPropName(N);if(this.isUsercontrol){var Q=gx.uc.getClientProperty(N,K);H[Q.name]=Q.value}H[N.toLowerCase()]=K}this.checkPromptColumn(H)}}catch(S){gx.dbg.logEx(S,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(z){try{if(this.isPromptColumn(z)){var D=gx.fn.getAttachedCtrl(z.htmlName);if(D&&D.info&&D.info.controls){for(var J=!1,H=!1,K=D.info.controls.length,N=0;N<K;N++){var Q=this.grid.getColumnByGxId(D.info.controls[N]),S=gx.lang.gxBoolean(Q.enabled),U=gx.lang.gxBoolean(Q.visible);
S&&(H=!0);U&&(J=!0)}H||(z.enabled="0");J||(z.visible="0")}}}catch(X){gx.dbg.logEx(X,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(z){return"Horizontalalignment"==z?"align":z};this.setDeleteMethod=function(z){if(this.parentObject.isTransaction()){var D="DSP"==this.parentObject.Gx_mode;!D&&z&&"none"==z&&(D=!0);this.deleteMethod=D?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(z,D,J,H,K){try{"undefined"!=typeof z&&(this.allowSelection=gx.lang.gxBoolean(z)),
"undefined"!=typeof D&&(this.selectionColor=null),"undefined"!=typeof H&&(this.hoverColor=null),this.allowSelection&&"undefined"!=typeof D&&("undefined"!=typeof J&&(this.allowHovering=gx.lang.gxBoolean(J)),D=eval(D),this.selectionColor="undefined"!=typeof D[0]?gx.color.fromRGB(D[0],D[1],D[2]):gx.color.html(D),this.allowHovering&&"undefined"!=typeof H&&(H=eval(H),this.hoverColor="undefined"!=typeof H[0]?gx.color.fromRGB(H[0],H[1],H[2]):gx.color.html(H))),this.grid.gxAllowSelection=this.allowSelection,
this.grid.gxSelectionColor=this.selectionColor,this.grid.gxAllowHovering=this.allowHovering,this.grid.gxHoverColor=this.hoverColor,this.grid.selectedRows=[],K=Number(K||0),0<K&&(this.grid.Selectedindex=K-1)}catch(N){gx.dbg.logEx(N,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(z,D){try{void 0!==z&&(this.allowCollapsing=gx.lang.gxBoolean(z),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==D&&(this.collapsed=gx.lang.gxBoolean(D),this.grid.gxCollapsed=this.collapsed)}catch(J){gx.dbg.logEx(J,
"gxgrid.js","setCollapsing")}};this.setSflColumns=function(z){try{gx.lang.emptyObject(z)&&0!==z||(this.gridCols=gx.grid.validGridColsValue(parseInt(z)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols))}catch(D){gx.dbg.logEx(D,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(z){return z.gxAttId.indexOf&&-1!=z.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var z=gx.fn.getHidden(this.getHiddenName("Rows"));
if(null!=z){try{this.gridRows=parseInt(z,10)}catch(D){gx.dbg.logEx(D,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var z=this.grid.columns.length,D=0;D<z;D++){var J=this.parentObject.getValidStruct(this.grid.columns[D].gxId);J&&J.gxsgprm&&J.gxsgprm.installed&&(J.gxsgprm.installed={})}};this.refreshCollection=function(z){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var D=
z.length,J=0;J<D;J++){for(var H={Props:[]},K=z[J],N=this.grid.columns.length,Q=0;Q<N;Q++){var S=this.grid.columns[Q];H.Props[S.index]=[K[S.gxAttName]]}this.addRow(H)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(U){gx.dbg.logEx(U,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(z){var D=l.Deferred(),J=[D];z=z||{};var H=z.loadChildGrids,K=z.fromAutoRefresh,N=z.fromCollection,Q=z.isNestedLoad,S=z.immediateApplyInfiniteScroll;this.isNestedLoad=this.isNestedLoad||
Q;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.ColumnPropertiesAfterRender=[];this.additiveResponse||(z.addRows||this.clearDefaultEventHandlers(),this.clearHiddens());this.crearInstalledSuggests();this.setRowsProperty();void 0==this.parentRow||gx.lang.emptyObj(this.parentRow.Grids)||(Q=this.parentRow.Grids[this.realGridName],null!=Q&&(this.setHtmlTags(Q),this.setGridStyles(Q),this.setColumnsProperties(Q.Columns),this.addingRows||this.parentRow.IsNew&&
this.addRows(Q)));var U=!1;Q=function(){this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var T=this,ea=this.getGridInnerTableId(),V=this.grid.scroll_last_row_selector(this.gridRows),ha=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+ea+ha;this.grid.lastItemSelector="#"+ea+V;var ca=function(ja){ja=l.map(ja,function(qa,
ra){return qa.onLoadDeferred});l.when.apply(l,ja).done(function(){if(T.InfiniteScrolling)if(S)T.handleInfiniteScrolling();else{var qa=T.getContainerControl();gx.fn.isVisible(qa)?gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",T,T.handleInfiniteScrolling,{single:!0}):gx.ol(T.handleInfiniteScrolling,T):gx.dom.getIntersectionObserver(function(ra){var la=new ra(function(){gx.fn.isVisible(qa)&&(la.disconnect(),T.handleInfiniteScrolling())},{root:document.body});la.observe(qa)})}D.resolve()})};
this.setupGridComponents(this.GridComponents).then(function(){var ja=l.map(T.GridComponents,function(qa,ra){return gx.pO.getWebComponent(qa.p)});T.isFreestyle&&(J=J.concat(T.loadRowsGrids(U,z)));gx.fx.obs.notify("grid.onafterrender",[T.grid,T.isNestedLoad]);T.isNestedLoad?(T.isNestedLoad=!1,ca(ja)):T.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",T,function(){T.infinite_scrolling_after_scroll()}):T.infinite_scrolling_after_scroll():T.applyTemplateObject().then(function(){ca(ja)});
T.additiveResponse=!1});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)};Q=Q.closure(this);this.grid.doSort();0==H?this.grid.render(U,!1,N,Q,z):(U=!0,this.grid.render(U,K,N,Q,z));var X=l.Deferred();l.when.apply(l,J).done(function(){X.resolve()});return X.promise()};this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.disposeTemplateObject=
function(){gx.fx.obs.deleteObserverByKey(this.getContainerControl().id)};this.applyTemplateObject=function(z){z=z||{};var D=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";gx.$.extend(z,{selector:"#"+this.getContainerControl().id,excluded:D,observerKey:this.getContainerControl().id});return gx.plugdesign.applyTemplateObject(z)};var oa="gx-wc-bkp_"+m+"_"+b;this.getComponentsBackupContainer=function(){var z=gx.dom.byId(oa);z||(z=document.createElement("div"),
z.id=oa,z.style.display="none",document.body.appendChild(z));return z};this.destroyComponentsBackup=function(){var z=gx.dom.byId(oa);z&&z.parentNode&&gx.dom.removeControlSafe(z)};this.backupComponents=function(){try{if(!this.additiveResponse)for(var z=this.grid.rows.length,D=0;D<z;D++){for(var J=this.grid.rows[D],H=this.grid.columns.length,K=0;K<H;K++)if(this.grid.columns[K].gxControl.type==gx.html.controls.types.webComponent){var N=this.parentObject.getComponentPrefix(J.gxProps[K][0]),Q=gx.dom.byId(this.gxComponentContext+
"gxHTMLWrp"+N+J.gxId);Q&&(Q.parentNode.removeChild(Q),this.getComponentsBackupContainer().appendChild(Q))}var S=J.gxGrids.length;for(K=0;K<S;K++){var U=J.gxGrids[K];U&&U.isFreestyle&&U.backupComponents()}}}catch(X){gx.dbg.logEx(X,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(z){var D=this.getContainerControl();if(!D)return[];var J=D.firstChild;D=[];if(J.querySelectorAll)D=gx.fn.toArray(J.querySelectorAll("td[data-colindex='"+z+"'], th[data-colindex='"+z+"']"));else{var H=gx.dom.byTag("TD",
J);J=gx.dom.byTag("TH",J);for(var K=0,N=H.length;K<N;K++)H[K].getAttribute("data-colindex")==z&&D.push(H[K]);K=0;for(N=J.length;K<N;K++)J[K].getAttribute("data-colindex")==z&&D.push(J[K])}return D};this.applyPropEntireColumn=function(z,D,J){z=this.getEntireGridColumn(z);for(var H=0;H<z.length;H++)gx.fn.setCtrlPropertyImpl(z[H],D,J)};this.setupFixedColumnProperties=function(){for(var z=0;z<this.ColumnPropertiesAfterRender.length;z++){var D=this.ColumnPropertiesAfterRender[z];this.applyPropEntireColumn(D.colIndex,
D.ptyName,D.ptyValue)}};this.addColPropertyAfterRender=function(z,D,J){J={colIndex:z,ptyName:D,ptyValue:J};z="gxpty"+D+z;(D=this.ColumnPropertiesAfterRender[z])?this.ColumnPropertiesAfterRender[D]=J:(D=this.ColumnPropertiesAfterRender.push(J)-1,this.ColumnPropertiesAfterRender[z]=D)};this.setupCellAttributes=function(z){for(var D in z){var J=z[D],H=gx.dom.byId(D);if(H)for(var K in J)H.setAttribute(K,J[K])}};this.setupGridControls=function(z){for(var D=0,J=z.length;D<J;D++){var H=z[D],K=gx.dom.byId(H.hookId),
N=K.parentNode;N&&(N.insertBefore(H.el,K),gx.dom.removeControlSafe(K))}};this.setupGridComponents=function(){var z=function(J,H){var K,N=J.length;for(K=0;K<N;K++){var Q=J[K];if(!1!==Q.create){var S=gx.createComponent(Q.n,Q.p);if(null!=S){gx.addComponent(S);S.readServerVars();if(Q.load)S.onload(void 0,!0);K==N-1&&H.resolve()}}}},D=function(J){var H,K=J.length;for(H=0;H<K;H++)gx.dom.removeClass(J[H],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(J){var H=l.Deferred(),K,N=J.length,Q=[];
0==N&&H.resolve();var S=[];for(K=0;K<N;K++){var U=J[K];if(!1===U.create){var X=gx.dom.byId(U.existingEl);if(X){var T=X.parentNode;U=gx.dom.byId(U.el);gx.dom.removeControlSafe(X);T.appendChild(U);S.push(U)}K==N-1&&H.resolve()}else Q.push(U.c)}gx.lang.requestAnimationFrame(D.closure(this,[S]));0<Q.length&&gx.html.processCode(Q.join(""),!1,z.closure(this,[J,H]));this.destroyComponentsBackup();return H.promise()}}();this.setupGridUsercontrols=function(z){var D=z.length;gx.uc.StartRender();for(var J=0;J<
D;J++){var H=z[J].r,K=z[J].c;H=gx.uc.getNew(this.parentObject,K.gxUCId,K.gxUCLastId,K.gxUCClassName,K.gxUCContainerName+"_"+H,K.gxUCControlName,K.gxUCFieldName,this.gridLvl,this.gridId,H);H.DesignContainerName=K.gxUCContainerName;H.setC2ShowFunction(K.gxShowFunc);for(var N=K.gxC2VFuncs.length,Q=0;Q<N;Q++)H.addC2VFunction(K.gxC2VFuncs[Q]);N=K.gxV2CFuncs.length;for(Q=0;Q<N;Q++)H.addV2CFunction(K.gxV2CFuncs[Q],K.gxUCFieldName);H.setGridProperties();H.setGridEventHandlers();this.parentObject.setUserControl(H);
H.execV2CFunctions(!0);H.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(z){for(var D=z.length,J=0;J<D;J++){for(var H=z[J].CtrlId,K=z[J].Grid,N=z[J].Row,Q=gx.O,S=null,U=gx.fn.controlIds(),X=U.length,T=0;T<X&&(S=gx.fn.validStruct(U[T]),S.grid!=K||Q.CmpContext+S.fld+"_"+N!=H);T++);null!=S&&void 0!=S.dp&&gx.fn.installDatePicker(H,S,Q,S.dp.f,S.dp.st,S.dp.wn,S.dp.mf,gx.fn.datePickerFormat(S.dp.pic,S.dp.dec,S.len),S.len,S.dp.dec)}};this.installImageControls=function(){var z=
this.gxContainerCtrl,D=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null;this.additiveResponse&&D&&D.childNodes[0]&&(z=D);z=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",z);if(z[0]){D=0;for(var J=z.length;D<J;D++)gx.html.multimediaUpload.createControl(z[D])}};this.addComponentToDraw=function(z){this.GridComponents.push(z)};this.addUsercontrolToDraw=function(z){this.GridUserControls.push(z)};this.addDatepickerToSetup=function(z){this.DatePickersControls.push(z)};this.addControlToReuse=
function(z){z.el.parentNode&&gx.dom.removeControlSafe(z.el);this.GridControls.push(z)};this.loadRowsGrids=function(z,D){D=D||{};var J=[],H=this.grid.rows.length;for(D=this.additiveResponse||D.addRows?this.firstAdditiveRow:0;D<H;D++)J=J.concat(this.loadRowGrids(this.grid.rows[D],z));return J};this.loadRowGrids=function(z,D){for(var J=z.gxGrids.length,H=[],K=0;K<J;K++){var N=z.gxGrids[K];N.grid.setContainerDelayed(gx.dom.byId(N.gxContainerDivName));if(D){if(void 0!=N.parentRow&&!gx.lang.emptyObj(N.parentRow.Grids)){var Q=
N.getDataHiddenName();gx.fn.setHidden(Q,gx.json.serializeJson(N.parentRow.Grids[N.realGridName]))}H.push(N.loadGrid({isNestedLoad:!0}))}else H.push(N.refreshGrid({isNestedLoad:!0}));z.IsNew=!1}return H};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var z=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+
"_ROW");if(0==this.lastRowId||parseInt(z,10)>this.lastRowId)this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(z,D,J){try{var H=this,K=J=J||gx.fn.currentGridRow(z.grid).toString(),N=J.length;if(4<N){var Q=J.substring(4,N);H=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+Q,this.isMasterPageGrid);if(!H)return;K=J.substring(0,4)}var S=parseInt(K,10)-1;1==D&&H.setRowModified(J);var U=H.getColumnIndexByName(z.fld),X=gx.dom.el(this.gxComponentContext+
z.fld+"_"+J);H.updateRowValue(U,S,X);return H}catch(T){gx.dbg.logEx(T,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(z,D,J){var H=z.lastIndexOf("_");if(-1!=H){var K=z.substring(0,H);H=z.substring(H+1);if(H=this.grid.getRowByGxId(H))if(K=this.grid.getColumnByHtmlName(K)){var N=this.parentObject[J.gxvar];"decimal"==J.type&&gx.lang.instanceOf(N,Number)&&(N=N.toFixed(J.dec));H.values[K.index]=N;H.gxProps[K.index]||(H.gxProps[K.index]={});(z=gx.dom.el(z))&&"SELECT"==z.tagName&&
(H.gxProps[K.index].Values=gx.dom.comboBoxToObj(z));H.gxProps[K.index].Value=N;H.gxProps[K.index].FormattedValue=D}}};this.getColumnIndexByName=function(z){for(var D=this.grid.columns,J=D.length,H=0;H<J;H++)if(D[H].htmlName==z)return H;return-1};this.setRowModified=function(z){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+z,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(z)};this.validateRow=function(z){if(z)try{var D=
z.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(D,z.gxrow);var J=gx.fn.lastGridControl(D);gx.csv.validControls(gx.csv.lastId,J+1,!0,gx.O)}catch(H){gx.dbg.logEx(H,"gxgrid.js","validateRow")}};this.updateRowValue=function(z,D,J){D=this.grid.getRowById(D);var H=this.grid.columns[z];"checkbox"==J.type&&(J.value=J.checked?H.gxChecked:H.gxUnChecked);J=this.parentObject.getValidStruct(this.grid.columns[z].gxId).val(D.gxId);D.values[z]=J;gx.lang.emptyObject(D.gxProps[z])||(D.gxProps[z].Value=J,D.gxProps[z].FormattedValue=
gx.fn.getControlValue(this.grid.columns[z].htmlName+"_"+D.gxId,"screen"));this.parentObject.isTransaction()&&(z=this.columnIndexInKey(H.gxAttId),-1!=z&&(D.gxKeyValues[z]=J));H.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+H.htmlName+"_"+D.gxId+"_gxBlob",J)};this.expandCollapse=function(z,D){gx.evt.cancel(D,!0);D=gx.dom.byId(this.getGridInnerTableId());null!=D&&(this.collapsed?(l(D).removeAttr("data-gx-sr-only"),z.className="collapse-icon",z.src=gx.ajax.getImageUrl(gx,
"collapseImage")):(l(D).attr("data-gx-sr-only",""),z.className="expand-icon",z.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(z=this.gridName.lastIndexOf("_"),z=this.gridName.substring(z),z=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+z):z=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(z,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(z){var D=z.gxrow;
gx.lang.emptyObject(D)&&(D=z.id.lastIndexOf("_"),D=z.id.substring(D+1));return this.grid.getRowByGxId(D)};this.showContextMenu=function(z,D){this.contextMenu.show(z,D)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var d=new gx.text.stringBuffer;this.show=function(g,a){this.gxgrid.validateRow(g);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=
g;this.startMenu();d.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){d.clear();var g=this.getMenuCoords();d.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');d.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+
".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');d.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");d.append("top:"+g.top+"; left:"+g.left+";").append('">')};this.endMenu=function(){d.append("</div>");var g=gx.dom.byId(this.controlName);null==g&&(g=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),
g.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(g),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));
gx.dom.shouldPurge()&&gx.dom.purge(g,!0);g.innerHTML=d.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var g=0,a=0,b=this.contextEvent;if(b.pageX||b.pageY)g=b.pageX,a=b.pageY;else if(b.clientX||b.clientY)g=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:g,top:a}};this.contextMenuClicked=
function(g){g=gx.evt.source(g);this.handleContextMenuAction(g.id);this.hide()};this.handleContextMenuAction=function(g){switch(g){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);
this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=
this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);
gx.grid.impl=function(l){return function(c){var d=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";
this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=c;this.container=null;this.setContainerDelayed=function(f){this.container=f};this.addColumn=function(f){f.isGxRemove()&&(f.visible=!1);var k=
this.columns.length;f.index=k;f.table=this;this.columns[k]=f;"undefined"!=typeof f.htmlName&&(this.columnsHtmlName[f.htmlName]=f);"undefined"!=typeof f.gxId&&(this.columnsGxId[f.gxId]=f);"undefined"!=typeof f.gxAttId&&(this.columnsGxAttId[f.gxAttId]=f);return f};this.getColumnByIndex=function(f){return this.columns[f]};this.getColumnByCtrlType=function(f){return l.map(this.columns,function(k){return k.gxControl.type==f?k:null})};this.addRow=function(f,k){f.table=this;if(null!=f)return this.rows[this.rows.length]=
f,"undefined"!=typeof f.id&&(this.rowsById[f.id]=f),"undefined"!=typeof f.gxId&&(this.rowsByGxId[f.gxId]=f),gx.lang.booleanValue(k)&&this.render(),f};this.getColumnByHtmlName=function(f){var k=this.columnsHtmlName[f];if("undefined"==typeof k&&"undefined"!=typeof this.gxCmpContext&&this.gxCmpContext.length<f.length){var m=f.substring(0,this.gxCmpContext.length);m==this.gxCmpContext&&(f=f.substring(this.gxCmpContext.length,f.length),k=this.columnsHtmlName[f])}return k};this.getColumnByGxId=function(f){return this.columnsGxId[f]};
this.getColumnByGxAttId=function(f){return this.columnsGxAttId[f]};this.getColumnForVar=function(f){for(var k=0;k<this.columns.length;k++){var m=this.parentGxObject.getValidStruct(this.columns[k].gxId);if(m&&m.gxvar==f)return this.columns[k]}return null};this.getRowById=function(f){return this.rowsById[f]};this.getRowByGxId=function(f){return this.rowsByGxId[f]};this.setSort=function(f,k){f==this.sortColumn?this.ascSort=null==k?!this.ascSort:gx.lang.booleanValue(k):(this.sortColumn=f,this.ascSort=
null==k?!0:gx.lang.booleanValue(k));this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:!0})};this.doSort=function(){-1!=this.sortColumn&&this.rows.sort(this.sort)};this.getControlName=function(f,k){return this.gxCmpContext+k.htmlName+"_"+f.gxId};this.getControlId=function(f,k){return this.getControlName(f,k)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};
this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(f){return this.gxCmpContext+"delete"+this.gxGridName+"_"+f};this.showDeleteImage=function(f){this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn()&&(f=gx.dom.byId(this.deleteImgId(f)))&&!gx.fn.isVisible(f)&&(f.style.display="inline","A"==f.parentNode.nodeName&&(f.parentNode.style.display="inline"))};this.appendDeleteHeader=
function(f,k){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var m=this.isGxTrn(),t=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(k==gx.grid.deletePositions.left)t=!0;else return;else gx.grid.deletePosition==k&&(t=!0);m&&t&&(k="&nbsp;",this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(k=gx.grid.deleteTitle),f.append('<th class="'+this.columnAutoHeaderClass+'">'+k+"</th>"))}};this.appendDeleteImage=function(f,k,m){if(this.ownerGrid.deleteMethod!=
gx.grid.deleteMethods.none&&this.isGxTrn()){var t=!1,v=!1;"DSP"!=this.parentGxObject.Gx_mode&&"DLT"!=this.parentGxObject.Gx_mode&&(t=k.gxDeleted(),v=k.gxIsMod()||k.gxExists());var n=this.deleteImgId(k.gxId),w=!1;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(m==gx.grid.deletePositions.left)w=!0;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==m)w=!0;else if(this.gxIsFreestyle){var A=gx.grid.deletePositionFree;m==gx.grid.deletePositions.left?w=A==gx.grid.deletePositions.topL||
A==gx.grid.deletePositions.bottomL:m==gx.grid.deletePositions.right&&(w=A==gx.grid.deletePositions.topR||A==gx.grid.deletePositions.bottomR);m=A}if(w){var r="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(m)+" gx-remove-row-"+this.deleteVerticalAlign(m)+'" style="text-align:'+this.deleteImageAlign(m)+";vertical-align:"+this.deleteVerticalAlign(m)+'">';m="</"+this.CELL_TAG+">";w=!1;A="gx-grid-delete";gx.O.DSO&&(A="gx-grid__row-delete");var q=gx.getMessage("GXM_deleterow");
t&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?(t=gx.grid.undeleteImage,gx.O.DSO&&(A="gx-grid__row-add"),q=gx.getMessage("GXM_Add")):v&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images?t=gx.grid.deleteImage:t&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu?t=gx.grid.deleteImage:(t=gx.grid.deleteImage,w=!0);v="";f.append(r);this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&(r=gx.fn.firstGridControl(this.ownerGrid.gridId),v=gx.grid.deleteTooltip,f.append('<a gxfocusable="1" href="javascript:'+
this.gridObject()+".setRowDeleted('"+k.gxId+"');\""),f.append(' onfocus="gx.evt.onfocus(this,'+r+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+k.gxId+"',"+this.ownerGrid.gridId+')"'),k="",w&&(k+="display:none;"),k&&f.append(' style="'+k+'"'),f.append(">"));f.append('<img id="'+n+'" src="'+t+'"" title="'+q+'"');v&&f.append(' title="'+v+'"');f.append(' style="border-style: none;');w&&f.append("display:none;");f.append('"');f.append(' class="'+A+'"/>');this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.images&&f.append("</a>");f.append(m)}}};this.deleteVerticalAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var k="top";if(f==gx.grid.deletePositions.bottomL||f==gx.grid.deletePositions.bottomR)k="bottom";return k}return"middle"};this.deleteImageAlign=function(f){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var k="right";if(f==gx.grid.deletePositions.bottomL||f==
gx.grid.deletePositions.topL)k="left";return k}return"center"};this.getRowByPos=function(f){return this.container.querySelector(" tbody>tr:nth-child("+f+")")};this.scroll_last_row_selector=function(f){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(f/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(f,k){var m=this.ROW_TAG,
t=this.ROW_BASE_CLASS;this.gxIsFreestyle&&(m=this.CELL_TAG);t+=(t?" ":"")+(f?this.evenRowClass:this.oddRowClass)+(k?" RowDeleted":"");return{cls:t,tag:m}};this.simpleAppendFn=function(f){return function(k){k.append(f)}};this.appendGridStyle=function(f){var k=d.exec(this.gxHtmlTags);k&&1<k.length&&f.append(k[1]);gx.lang.emptyObject(this.gxBackground)||f.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,!0)+"');");gx.lang.emptyObject(this.gxBorderWidth)||f.append(";border: solid "+
this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?f.append(";"):f.append(this.gxBordercolor+";");0<this.ownerGrid.width&&f.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(f){f.append(this.gxHtmlTags.replace(d,""));this.gxAllowCollapsing&&this.gxCollapsed&&f.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(f){-1==this.gxHtmlTags.indexOf("class=")&&f.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=
function(f){f.append('<div valign="top" ><div>');f.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?f.append(gx.ajax.getImageUrl(gx,"expandImage")):f.append(gx.ajax.getImageUrl(gx,"collapseImage"));f.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(f){f.append("</div></div>")};this.appendContainerStart=function(f,k){k.append("<table ");this.appendGridClassAttribute(k);k.append(' id="'+
f+'" ');gx.lang.emptyObject(this.gxToolTipText)||k.append('title="'+this.gxToolTipText+'" ');k.append('style="');this.appendGridStyle(k);k.append('" ');this.appendGridAttributes(k);this.isAbstract||(k.append('data-bkgstyle="'),k.append(gx.grid.styles[this.gxTitleBackstyle]),k.append('" '));k.append(">");gx.lang.emptyObject(this.header)||(k.append("<caption>"),k.append(this.header),k.append("</caption>"))};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(f,k){gx.lang.emptyObject(this.headerText)||
k.append('<tr><td colspan="'+f+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(f,k){gx.lang.emptyObject(this.footerText)||k.append('<tr><td colspan="'+f+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};var g={left:"start",right:"end"},a=function(f){return gx.util.browser.isIE()||!g[f]?f:g[f]};this.appendHeader=function(f,k){var m=f.length,t=[],v=gx.ajax.getImageUrl(gx,"ascImage"),n=gx.ajax.getImageUrl(gx,"descImage"),w=0;k.append("<thead>");
k.append("<tr>");this.appendDeleteHeader(k,gx.grid.deletePositions.left);for(var A=0;A<m;A++){var r=f[A];var q=[r.gxColumnClass||r.gxControl.columnClass,r.columnheaderclass||"",this.columnAutoHeaderClass].join(" ");k.append('<th class="'+q+'"');q="white-space:nowrap;";gx.lang.gxBoolean(r.visible)||(q+="display:none;");r.width&&(r.gxWidthUnit||(r.gxWidthUnit="px"),q+="width:"+r.width+r.gxWidthUnit+";");r.align&&(q+="text-align:"+a(r.align)+";");gx.lang.emptyObject(this.gxTitleBackColor)||this.gxTitleBackstyle!=
gx.grid.styles.header&&this.gxTitleBackstyle!=gx.grid.styles.report||(q+="background-color:"+this.gxTitleBackColor+";",this.gxRealTitleBackColor=this.gxTitleBackColor);gx.lang.emptyObject(this.gxBackColor)||this.gxTitleBackstyle!=gx.grid.styles.uniform||(q+="background-color:"+this.gxBackColor+";",this.gxRealTitleBackColor=this.gxBackColor);gx.lang.emptyObject(this.gxTitleForeColor)||(q+="color:"+this.gxTitleForeColor+";");gx.lang.emptyObject(this.gxTitleFont)||(q+=this.gxTitleFont);r.titlefontunderline?
q+="text-decoration: underline;":r.titlefontstrikethru&&(q+="text-decoration: line-through;");r.titlefontbold&&(q+="font-weight: bold;");r.titlefontitalic&&(q+="font-style: italic;");r.titlebackcolor&&(q+="background-color:"+gx.color.html(r.titlebackcolor).Html+";");r.titleforecolor&&(q+="color:"+gx.color.html(r.titleforecolor).Html+";");k.append(' style="'+q+';"');k.append(' data-colindex="'+w+'"');k.append(">");w++;gx.lang.emptyObject(gx.text.trim(r.title))?k.append("&nbsp;"):(k.append("<span"),
r.gxTooltip&&k.append(' title="'+r.gxTooltip+'"'),r.sortable&&k.append(' onclick="'+this.gridObject()+".grid.setSort("+r.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\""),k.append(">"),k.append(r.title),null!=this.ascLabel&&null!=this.descLabel&&(this.ascLabel.src=v,this.descLabel.src=n,r.sortable&&this.sortColumn==r.index&&k.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,t))),k.append("</span>"));
k.append("</th>")}this.appendDeleteHeader(k,gx.grid.deletePositions.right);k.append("</tr>");k.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");
this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;l.each(this.beforeRenderCallbacks,
function(f,k){k()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var f=this.ownerGrid,k=f.getGridInnerTableId();f.emptyText&&0===l("#"+k+" + .gx-text-gridnodata").length&&l(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(f.emptyText).insertAfter(l("#"+k));0===this.rows.length?l("#"+k).attr("data-gx-grid-nodata",""):l("#"+k).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){var f,k=["onblur","onclick","onfocus","onchange"],m=gx.dom.byTag("input",
this.container);var t=0;for(f=m.length;t<f;t++)gx.dom.purgeElement(m[t],k);m=gx.dom.byTag("textarea",this.container);t=0;for(f=m.length;t<f;t++)gx.dom.purgeElement(m[t],k);m=gx.dom.byTag("select",this.container);t=0;for(f=m.length;t<f;t++)gx.dom.purgeElement(m[t],k);m=gx.dom.byTag("span",this.container);t=0;for(f=m.length;t<f;t++)gx.dom.purgeElement(m[t],k);m=gx.dom.byTag("img",this.container);t=0;for(f=m.length;t<f;t++)gx.dom.purgeElement(m[t],k)};this.render=function(f,k,m,t,v){f=!!f;var n=this.ownerGrid.getGridInnerTableId(),
w=this.container;this.ownerGrid.disposeTemplateObject();this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();f=this.drawGrid(n,f,k,m,v);gx.dom.shouldPurge()&&this.purgeGrid();var A=gx.dom.getActiveElement();k=A?A.tagName.toUpperCase():"";w=A&&(A.id||A.name)&&"FORM"!=k&&gx.dom.isChildNode(A,w);var r=gx.dom.getCaretOffset(A);this.setGridHtml(this.container,f,v);this.ownerGrid.isNestedLoad||gx.dom.fixes.fixTableResets(this.container);this.ownerGrid.applyTemplateObject({deferred:!1});this.gxIsFreestyle||
this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&-1!=this.sortColumn&&this.ownerGrid.handleInfiniteScrolling();w&&setTimeout(function(){var q=gx.dom.el(A.id||A.name,!1,!0);q&&(gx.csv.disableFocus=!0,0<q.offsetWidth&&0<q.offsetHeight&&gx.fn.setFocus(q,function(){gx.dom.setCaretOffset(q,r)}))},10);this.drawEmptyContent();this.afterRender(n);t();this.rendered=!0};this.setGridHtml=function(f,k,m){m=m||{};gx.csv.IgnoreBlur=!0;var t=this.ownerGrid.InverseLoading,
v;if(this.ownerGrid.additiveResponse||m.addRows)if(-1!==this.sortColumn)f.innerHTML=k,gx.plugdesign.applyTemplateObject({selector:f});else{if(this.gxIsFreestyle){f=document.createElement("div");f.className="gx-sr-only";f.innerHTML=k;f.setAttribute("data-gx-grid-rendering-additive-rows","");var n=l(f);k=t?this.firstItemSelector:this.lastItemSelector;t?n.insertBefore(k):n.insertAfter(k)}else t?n=l(k).insertBefore(this.firstItemSelector):f=l(k).insertAfter(this.lastItemSelector);this.newAdditiveRows=
n;gx.plugdesign.applyTemplateObject({selector:n,deferred:!0}).then(function(){this.newAdditiveRows&&(v=this.newAdditiveRows.children(),t?v.insertBefore(this.newAdditiveRows):v.insertAfter(this.newAdditiveRows),this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render"),this.newAdditiveRows.remove(),delete this.newAdditiveRows)}.closure(this))}else f.innerHTML=k;gx.csv.IgnoreBlur=!1};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.renderRow=function(f,k,m,t,v,n,w,
A,r,q,x,C,F,G,p,u){f=this.rows[m];C=!!(m%2);var y=this.isGxTrn();k&&m===t&&!gx.fn.currentGridRowImpl(this.gxId)&&gx.fn.setCurrentGridRow(this.gxId,f.gxId);var B=f.gxDeleted();x=new gx.text.stringBuffer;var E=this.getRowRenderingProps(C,B,m,t,v);n&&this.gxIsFreestyle&&(0<m&&0===m%this.gxGridCols||0===m&&0<this.gxGridCols)&&(0<m&&this.appendRowEnd(w,m,t,v),this.appendRowStart(w,m,t,v));var I="";this.gxTitleBackstyle==gx.grid.styles.report&&(I=C?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);this.gxTitleBackstyle==
gx.grid.styles.header&&(I=this.gxLinesBackcolorOdd);this.gxTitleBackstyle==gx.grid.styles.uniform&&(I=this.gxBackColor);if(!this.gxIsFreestyle||this.gxIsFreestyle&&n)this.appendRowPrefix(x,m,t,v),x.append("<"+E.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+"'"),this.gxIsFreestyle||x.append(' data-gxrendering_row=""'),this.gxIsFreestyle&&n?(x.append(' data-gxrow="'+f.gxId.toString()+'"'),(A=this.columns[1].gxControl.verticalAlign)&&x.append(' data-cell-valign="'+A+'"')):x.append(' data-gxrow="'+
f.gxId.toString()+'"'),x.append(' class="'+E.cls+'"'),f.selected&&x.append(' data-selected="1"'),C="",I&&(C="background-color:"+I+";"),gx.lang.emptyObject(this.gxLinesFont)||(C+=this.gxLinesFont),C&&x.append(' style="'+C+'" '),x.append(">"),w.append(x.toString());this.gxIsFreestyle&&(n&&this.appendRowBreaksWrapperStart(w,f),r=this.gxBuffer.toString(),w.append(r));this.gxIsFreestyle||this.appendDeleteImage(w,f,gx.grid.deletePositions.left);this.appendCellPrefixStart(w,m,t,v,f,E);for(A=0;A<q;A++){x=
u[A];C=gx.lang.gxBoolean(x.visible);F=f.gxProps[x.index];r=f.values[x.index];G=x.gxControl;this.gxIsFreestyle&&G.type==gx.html.controls.types.row&&0===x.index&&(G.isFreestyleRow=!0);G.setGridData({grid:this.ownerGrid,row:f,gridId:this.gxId,gridRow:f.gxId});p?(delete G.formattedValue,G.value=r,G.id=x.htmlName+"_"+G.gridRow):(G.setProperties.apply(G,F),G.isFreestyleRow&&(G.cssClass=E.cls));if(k)delete gx.usrPtys[G.id];else if(void 0!==gx.usrPtys[G.id])for(var L in gx.usrPtys[G.id])"enabled"==L&&(G.rtEnabled=
!0),G.setIndividualProp(L,gx.usrPtys[G.id][L]);B&&(G.rtEnabled=!0,G.enabled=!1);r=this.parentGxObject.getValidStruct(x.gxId);"undefined"!==typeof F.Value&&(G.value="."!=gx.decimalPoint&&r&&"decimal"==r.type&&"string"==typeof F.Value?F.Value.replace(".",gx.decimalPoint):F.Value);"undefined"!==typeof F.FormattedValue&&(G.formattedValue=F.FormattedValue);"undefined"===typeof G.formattedValue&&(p&&r&&r.v2c?(G.persistValue(),r.v2c(f.gxId),G.formattedValue=gx.fn.getControlValue(G.id)):G.formattedValue=
G.value);F.Values&&(G.possibleValues=F.Values.v);this.gxIsFreestyle&&G.type==gx.html.controls.types.row&&0===x.index&&(G.id=this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId,y&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&(G.oncontextmenu=this.gridObject()+".showContextMenu(this, event);"),I&&(G.style+="background-color:"+I+";"));this.gxIsFreestyle||(w.append("<"+this.CELL_TAG+' class="gx-attribute '+(G.columnClass||"")+'" data-cell-valign="'+x.valign+'"'),w.append(' data-colindex="'+
A+'"'),F="",C||(F+="display:none;",!G.visible||x.isGxRemove()||this.ownerGrid.isPromptColumn(x)||this.ownerGrid.addColPropertyAfterRender(A,"Visible",1)),x.width?(x.gxWidthUnit||(x.gxWidthUnit="px"),F+="width:"+x.width+x.gxWidthUnit+";"):x.gxColSize&&(G.colSize=x.gxColSize),x.align&&(F+="text-align:"+a(x.align)+";"),G.style&&(F+=G.style.replace(/content:var\(.*\);/,"")),F&&w.append(' style="'+F+'" '),w.append(">"));w.append(G.getHtml());this.gxIsFreestyle&&G.type==gx.html.controls.types.row&&0===
x.index&&this.appendDeleteImage(w,f,gx.grid.deletePositions.left);G.persistValue();this.gxIsFreestyle||w.append("</"+this.CELL_TAG+">");this.gxIsFreestyle&&(x.index==this.columns.length-1&&this.appendDeleteImage(w,f,gx.grid.deletePositions.right),r=x.buffer.toString(),w.append(r))}this.appendCellPrefixEnd(w,m,t,v);this.gxIsFreestyle&&n?this.appendRowBreaksWrapperEnd(w):this.appendDeleteImage(w,f,gx.grid.deletePositions.right)};this.drawGrid=function(f,k,m,t,v){v=v||{};var n=this.isGxTrn(),w=this.gxIsFreestyle&&
1<this.gxGridCols;m=new gx.text.stringBuffer;var A=this.columns,r=A.length,q,x=this.ownerGrid.additiveResponse||v.addRows;!this.gxIsFreestyle&&n&&r++;if(x||v.immediateApplyInfiniteScroll){var C=x||"0"!=this.firstRecordOnPage&&-1==this.sortColumn?this.lastRenderedRow:0;var F=this.rows.length;this.ownerGrid.firstAdditiveRow=C}else 0!==Number(this.pageSize)?(v=this.getMaxPage(),0>=this.currentPage?this.currentPage=1:this.currentPage>v&&(this.currentPage=v),C=Math.max(this.pageSize*(this.currentPage-
1),0),F=Math.min(C+this.pageSize,this.rows.length)):(C=0,F=this.rows.length);this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(m);var G=A.length;if(!this.gxIsFreestyle&&F>C&&0==C)for(var p=0;p<G;p++){var u=A[p];if(q=gx.lang.gxBoolean(u.visible)){var y=!1;for(v=C;v<F&&!y;v++){var B=this.rows[v];var E=u.gxControl;var I=B.gxProps[u.index];t||E.setProperties.apply(E,I);E.visible&&(y=!0)}y||(u.visible=!1)}}x&&-1==this.sortColumn||(this.appendContainerStart(f,m),this.appendHeaderText(r,m),this.gxIsFreestyle||
this.appendHeader(A,m),this.appendBodyWrapperStart(m));if(this.ownerGrid.InverseLoading)for(v=F-1;v>=C;v--)this.renderRow.call(this,B,k,v,C,F,w,m,void 0,void 0,G,u,q,I,E,t,A);else for(v=C;v<F;v++)this.renderRow.call(this,B,k,v,C,F,w,m,void 0,void 0,G,u,q,I,E,t,A);this.gxIsFreestyle&&0<this.gxGridCols&&w&&this.appendRowEnd(m);this.lastRenderedRow=F;x||(this.appendBodyWrapperEnd(m),this.appendFooterWrapperStart(m),this.ownerGrid.InfiniteScrolling||!n&&!this.hasPagingButtons()||this.appendNavigationBar(r,
m),this.appendFooterText(r,m),this.appendFooterWrapperEnd(m),this.appendContainerEnd(m),this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(m));this.fromCollection=t;f=m.toString();m.clear();return f};this.defineEventHandlers=function(){var f={};if(this.ownerGrid&&this.ownerGrid.parentObject&&this.ownerGrid.parentObject.IsComponent)var k=this.ownerGrid.parentObject;k&&(k=gx.pO.getWebComponent(k.CmpContext),f.hookKey=k&&k.getContainer()&&k.getContainer().id);this.gxIsFreestyle||(gx.evt.attach(this.container,
"mouseover",this.mouseOverHandler,this,f),gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this,f));this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this,f);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],!0),this,f);gx.evt.attach(this.container,"click",this.clickHandler,this,f);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this,f)};this.isGridRow=
function(f){return f&&f.tagName.toLowerCase()==this.ROW_TAG&&null!=f.getAttribute("data-gxrow")&&l(f).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(f,k){for(;f&&gx.dom.isChildNode(f,this.container);){if(this.isGridRow(f)&&(!k||"body"==k&&"TBODY"==f.parentNode.tagName||"header"==k&&"THEAD"==f.parentNode.tagName))return f;f=gx.dom.findParentByTagName(f,this.ROW_TAG)}};this.mouseOverHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&
"1"!=f.getAttribute("data-selected")&&(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(f),this.gxHoveredRowId=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(f){!gx.runtimeTemplates&&this.gxAllowHovering&&(f=this.getTargetRow(gx.evt.source(f)))&&"1"!=f.getAttribute("data-selected")&&this.endRowHover(f)};this.contextMenuHandler=function(f){var k=this.getTargetRow(gx.evt.source(f));k&&this.ownerGrid.showContextMenu(k,f)};this.mouseDownHandler=
function(f,k){if(f=this.getTargetRow(gx.evt.source(f)))k="undefined"===typeof k?this.gxAllowSelection&&!this.gxIsFreestyle:k,this.setRowSelected(f,f.getAttribute("data-gxrow"),!1,k)};this.keyDownHandler=function(f){this.getTargetRow(gx.evt.source(f))&&this.ownerGrid.rowKeyPressed(f)};this.clickHandler=function(f){var k=gx.evt.source(f);k.parentNode&&gx.dom.hasClass(k.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(k,f)}.closure(this))};this.pagingHandler=function(f,
k){var m="";gx.evt.cancel(k,!0);gx.dom.hasClass(f,this.pagingButtonDisabled)||(gx.dom.hasClass(f,this.pagingButtonFirstClass)?m="FIRST":gx.dom.hasClass(f,this.pagingButtonPreviousClass)?m="PREV":gx.dom.hasClass(f,this.pagingButtonNextClass)?m="NEXT":gx.dom.hasClass(f,this.pagingButtonLastClass)&&(m="LAST"),this.changeGridPage(m))};this.changeGridPage=function(f,k){var m=l.Deferred(),t=this.gxGridName.toUpperCase()+"PAGING",v=this.ownerGrid,n="";if(f){v.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){if(gx.setGxO(this.parentGxObject),
n="E"+v.realGridName.toUpperCase()+"_"+f+"PAGE"+(v.isMasterPageGrid?"_MPAGE":""),v.parentGrid)var w=v.parentGrid.gridId}else gx.fn.setHidden(this.gxCmpContext+t,f),n=this.gxCmpContext+"E"+t+".";gx.evt.execEvt(void 0,void 0,n,gx.evt.dummyCtrl,w,void 0,void 0,!1,function(){this.unmask();m.resolve()}.closure(this),k);return m.promise()}};this.setRowSelected=function(f,k,m,t,v){gx.grid.setActiveGridRow(this,k);t=void 0===t||t;v=void 0===v||v;var n=function(){var w=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){t&&
!gx.runtimeTemplates&&void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);this.instanciateSelectionVars(k);var A=this.getRowByGxId(k),r=this.selectedRows||[],q=[];A&&r.push(A);for(A=0;A<r.length;A++){var x=r[A];x.selected=x.gxId==k;x.selected?(t&&(gx.runtimeTemplates||(f.gxSBackcolor=void 0!==f.gxOriginalBackcolor?f.gxOriginalBackcolor:f.style.backgroundColor,this.gxSelectionColor&&(f.style.backgroundColor=this.gxSelectionColor.Html)),gx.dom.addClass(f,this.selectedRowClass),
l(f).attr("data-gxselected","")),q.push(x)):t&&(x=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+x.gxId),null==x||void 0===x.gxSBackcolor||gx.runtimeTemplates||(x.style.backgroundColor=x.gxSBackcolor),gx.dom.removeClass(x,this.selectedRowClass),l(x).removeAttr("data-gxselected"))}for(A=0;A<q.length;A++)this.instanciateSelectedRow(q[A],!v);gx.setGxO(w)}};m&&(t||gx.O.isTransaction())?setTimeout(n.closure(this),100):n.call(this)};this.instanciateSelectionVars=function(f){gx.setGxO(this.parentGxObject);
gx.fn.setCurrentGridRow(this.gxId,f);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",f.substring(0,4))};this.instanciateSelectedRow=function(f,k){this.selectedRows=[f];this.setSelectedRowVars(f);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading&&(gx.csv.instanciatedRowGrid=this.ownerGrid,!k)){var m=this.parentGxObject;gx.lang.doCallTimeout(function(){gx.evt.doAfterProcessing(function(){if(m.fullAjax){var t=m.isServerEvent(this.gxOnLineActivate);gx.evt.dispatcher.dispatch(m.getServerEventName(this.gxOnLineActivate),
m,this.ownerGrid.gridId,f.gxId,t)}else m[this.gxOnLineActivate].call(m,f.gxId)},this)},this,[],100)}};this.setSelectedRowVars=function(f){for(var k=this.parentGxObject,m=this.columns.length,t=0;t<m;t++){var v=k.GXValidFnc[this.columns[t].gxId];null!=v&&v.c2v&&v.c2v(f.gxId)}};this.scrollIntoView=function(f,k,m){function t(q,x,C,F){return!1===k||C<=q+F&&q<=x+F?Math.min(C,Math.max(x,q)):(x+C)/2}function v(q,x,C,F){return{left:q,top:x,width:C,height:F,right:q+C,bottom:x+F,translate:function(G,p){return v(G+
q,p+x,C,F)},relativeFromTo:function(G,p){var u=q,y=x;G=G.offsetParent;p=p.offsetParent;if(G===p)return n;for(;G;G=G.offsetParent)u+=G.offsetLeft+G.clientLeft,y+=G.offsetTop+G.clientTop;for(;p;p=p.offsetParent)u-=p.offsetLeft+p.clientLeft,y-=p.offsetTop+p.clientTop;return v(u,y,C,F)}}}var n,w;for(n=v(f.offsetLeft,f.offsetTop,f.offsetWidth,f.offsetHeight);w=f.parentNode;){var A=w.offsetLeft+w.clientLeft,r=w.offsetTop+w.clientTop+m;n=n.relativeFromTo(f,w).translate(-A,-r);w.scrollTop=t(w.scrollTop,n.bottom-
w.clientHeight+m,n.top,w.clientHeight);n=n.translate(A-w.scrollLeft,r-w.scrollTop);f=w}};this.keepGridItemVisible=function(f,k){var m=gx.util.browser.isOldIE(),t=l(this.ownerGrid.getContainerControl()),v=m?t.closest(".gx-grid-fixed-header-ie7"):l("#"+this.ownerGrid.getContainerControlId()+" > table > tbody");0<v.length&&v[0].offsetHeight<v[0].scrollHeight&&(f=this.ownerGrid.getRowCtrlByIdx(f))&&(m=m?parseInt(t.css("paddingTop"),10):0,this.scrollIntoView(f,k,m))};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+
1,!0,!1)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,!0,!0)};this.toggleRowHoverById=function(f,k,m){var t=this.ownerGrid.getRowCtrlByIdx(f),v=!1;t&&(v=!0,k?(this.toggleRowHoverById(this.gxHoveredRowId,!1),this.startRowHover(t),this.gxHoveredRowId=f,this.keepGridItemVisible(f,m)):this.endRowHover(t));return v};this.getRowByDOMCtrl=function(f){f=parseInt(f.getAttribute("data-gxrow").substring(0,4),10)-1;return this.getRowById(f)};this.startRowHover=function(f){if(gx.runtimeTemplates)l(f).addClass("gx-row-hovered");
else{void 0===f.gxOriginalBackcolor&&(f.gxOriginalBackcolor=f.style.backgroundColor);var k=this.getRowByDOMCtrl(f);this.gxAllowHovering&&this.gxHoverColor&&!k.selected&&(f.gxHBackcolor=f.style.backgroundColor,f.style.backgroundColor=this.gxHoverColor.Html)}};this.endRowHover=function(f){if(gx.runtimeTemplates)l(f).removeClass("gx-row-hovered");else{var k=this.getRowByDOMCtrl(f);this.gxAllowHovering&&!k.selected&&void 0!==f.gxHBackcolor&&(f.style.backgroundColor=f.gxHBackcolor)}};this.hasPagingButtons=
function(){return this.usePaging&&0<this.pageSize&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(f,k){gx.lang.emptyObject(this.gxRealTitleBackColor)?k.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;">'):k.append('<tr><td colspan="'+f+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(f){f.append("</td></tr>")};this.appendNavigationBar=
function(f,k){var m=this.getRowCount();m=(0<m||0===m&&!this.isFirstPage())&&this.usePaging;var t=this.parentGxObject.Gx_mode;t=this.isGxTrn()&&!this.gxHasAddlines&&!("DSP"==t||"DLT"==t);this.navigationClass=this.gxFooterClass;this.gxIsFreestyle&&1<this.gxGridCols&&(f=this.gxGridCols);(m||t)&&this.appendNavBarRowStart(f,k);m&&(k.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">'),0>=this.currentPage&&(this.currentPage=1),k.append(this.buildPagingButton(this.pagingButtonFirstClass,
!this.isFirstPage(),gx.getMessage("GXM_first"))),k.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous"))),k.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next"))),k.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last"))),k.append("</div>"));t&&(f="["+this.gxNewRowText+"]",gx.O.DSO&&(f=this.gxNewRowText),k.append(this.buildLink(f,this.gridObject()+
".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);")));(m||t)&&this.appendNavBarRowEnd(k)};this.buildPagingButton=function(f,k,m){return'<button type="button" class="'+f+(k?"":" "+this.pagingButtonDisabled)+'"style="padding-left:20px;padding-bottom:5px;'+((k?"":"opacity:.7;cursor:default")+'" title="')+m+'"'+(k?"":" disabled")+"/>"};this.buildLink=function(f,k,m,t,v){var n=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+
v+'" onblur="this.style.textDecoration = \'none\';"><span '+(void 0!==t?'id="'+t+'"':"")+' style="cursor:'+((document.createTextRange?"hand":"pointer")+';" class="')+n+'" onclick="'+k+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+m+"';return true;\" onMouseOut=\"this.className='"+n+"';window.status='';return true;\">"+f+"</span></a>"};this.isLastPage=function(){return"0"!=this.eof};this.isFirstPage=function(){return"0"==(gx.lang.emptyObject(this.firstRecordOnPage)?
"0":this.firstRecordOnPage)};this.getWebImageTag=function(f){return'<img border="0" src="/'+this.basePath+this.imgsDir+f.toString()+'"/>'};var b=0;this.handleLabel=function(f){if(f.src){var k="img"+b;b++;var m="sort-ico--asc";f.src.includes("desc")&&(m="sort-ico--desc");return"<img name='"+k+"' border='0' src='"+f.src+"' class='"+m+"' >"}return f};this.sort=function(f,k){if(f.table.isGxTrn())if(f.gxExists()||k.gxExists()||f.gxIsMod()||k.gxIsMod()){if(!f.gxExists()&&k.gxExists()||!f.gxIsMod()&&k.gxIsMod())return 1;
if(f.gxExists()&&!k.gxExists()||f.gxIsMod()&&!k.gxIsMod())return-1}else return 0;var m=f.table,t=m.getColumnByIndex(m.sortColumn);f=f.values[m.sortColumn];k=k.values[m.sortColumn];gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(k,Array)||(k=[k]);switch(t.type){case gx.types.numeric:t=function(q){q=gx.num.parseFloat(q,gx.thousandSeparator,gx.decimalPoint);isNaN(q)&&(q=0);return q};break;case gx.types.date:case gx.types.dateTime:t=function(q){try{q=(new gx.date.gxdate(q)).Value}catch(x){gx.dbg.logEx(x,
"JSTable.js","sort")}return q.valueOf()};break;case gx.types.bool:t=function(q){return gx.lang.booleanValue(q)?1:0};break;default:t=function(q){return String(q).replace(/<[^>]*>/g,"").toUpperCase()}}for(var v=Math.max(f.length,k.length),n=0,w=0;0===n&&w<v;w++){var A=f[w];null==A&&(n=-1);var r=k[w];null==r&&(n=1);0===n&&(A=t(A),r=t(r),n="function"==typeof A.localeCompare?A==r?0:A.localeCompare(r):A==r?0:A>r?1:-1);0!==n&&(n*=m.ascSort?1:-1)}return n};this.mask=function(){var f=this.container||"function"===
typeof this.getContainerControl&&this.getContainerControl();f&&f.firstChild&&gx.dom.mask(f.firstChild)};this.unmask=function(){var f=this.container||"function"===typeof this.getContainerControl&&this.getContainerControl();f&&f.firstChild&&gx.dom.unmask(f.firstChild)}}}(gx.$);
gx.grid.column=function(l,c,d,g,a){this.table=null;this.index=-1;this.title=l||"";this.type="undefined"!=typeof c?c:gx.types.character;this.width=d||"";this.align=g||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(l,c,d,g){this.table=null;this.id=l;this.gxParentRowId=g||"";this.gxId=d+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=c.Props||[];this.gxRenderProps=c.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(l){var c=["xs","sm","md","lg"];return function(d){d=new gx.grid.impl(d);d.appendContainerStart=function(g,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+g+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');this.appendGridAttributes(a);a.append(">")};d.getRowByPos=function(g){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+
g+")")};d.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};d.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};d.ROW_TAG="div";d.CELL_TAG="div";d.ROW_BASE_CLASS="row";d.getRowRenderingProps=function(g,a){var b=this.ROW_TAG,f=this.ROW_BASE_CLASS,k=this.gxGridResponsiveCols;this.gxIsFreestyle&&(b=this.CELL_TAG,f=l.map(c,function(m,t){return["col-",m,"-",Math.floor(12/(k[t]||12))||1].join("")}).join(" "));
this.gxIsFreestyle||(f+=" "+(g?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:f,tag:b}};d.appendGridClassAttribute=function(g){g.append(' class="'+this.gxCssClass+'"')};d.appendGridAttributes=function(g){this.gxAllowCollapsing&&this.gxCollapsed&&g.append(" data-gx-sr-only ")};d.appendContainerEnd=d.simpleAppendFn("</div>");d.appendHeaderText=gx.emptyFn;d.appendFooterText=gx.emptyFn;d.appendHeader=gx.emptyFn;d.appendBodyWrapperStart=gx.emptyFn;d.appendBodyWrapperEnd=gx.emptyFn;
d.appendFooterWrapperStart=d.simpleAppendFn("<div>");d.appendFooterWrapperEnd=d.simpleAppendFn("</div>");d.appendRowStart=function(g,a,b){a==b&&!0!==this.ownerGrid.additiveResponse&&g.append('<div class="row">')};d.appendRowEnd=function(g,a,b,f){a==f&&!0!==this.ownerGrid.additiveResponse&&g.append("</div>")};d.appendRowBreaksWrapperStart=function(g,a){g.append("<div>");this.appendDeleteImage(g,a,gx.grid.deletePositions.left)};d.appendRowBreaksWrapperEnd=d.simpleAppendFn("</div></div>");d.appendRowPrefix=
function(g,a,b){if(a!=b){var f=this.gxGridResponsiveCols,k=!1;b=l.map(c,function(m,t){return 1!=f[t]&&0===a%f[t]||0===f[t]&&0===a%12?(k=!0,"visible-"+m):""}).join(" ");k&&g.append('<div class="clearfix '+b+'"></div>')}};d.appendCellPrefixStart=function(g,a,b,f,k){a=k.gxDeleted()?" RowDeleted":"";1==this.gxGridCols&&(g.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+k.gxId+'" data-gxrow="'+k.gxId.toString()+'" class="row'+a+'"><div class="col-xs-12">'),this.appendDeleteImage(g,k,gx.grid.deletePositions.left))};
d.appendCellPrefixEnd=function(g){1==this.gxGridCols&&g.append("</div></div>")};d.appendNavBarRowStart=function(g,a){a.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')};d.appendNavBarRowEnd=function(g){g.append("</div></div>")};return d}}(gx.$);
gx.grid.flexGrid=function(l){var c,d=gx.dom;this.useNativeChildControls=!0;this.show=function(){c=l("#"+this.getContainerControl().id);var b=this.drawGrid(this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(c.get(0),b);this.ownerGrid.applyTemplateObject({deferred:!1});gx.dom.fixes.fixTableResets(this.container);this.gxWidth&&c.width(d.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&c.height(d.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){c&&c.hide()};this.appendGridAttributes=
function(b){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);b.append(" data-gx-flex")};var g={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"},a=function(b,f,k){g[f]!==k&&b.append(f+": "+k+";")};this.appendGridStyle=function(b){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);a(b,"flex-direction",this.FlexDirection);a(b,"flex-wrap",this.FlexWrap);a(b,"justify-content",this.JustifyContent);
a(b,"align-items",this.AlignItems);a(b,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(b,f){this.appendDeleteImage(b,f,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</div>");this.appendCellPrefixStart=function(b,f,k,m,t){1==this.gxGridCols&&(b.append('<div id="'+this.gxCmpContext+this.gxGridObject+
"Row_"+t.gxId+'" data-gxrow="'+t.gxId.toString()+'">'),this.appendDeleteImage(b,t,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(b){1==this.gxGridCols&&b.append("</div>")};this.appendNavBarRowStart=function(b,f){f.append('</div></div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(b){b.append("</div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};
gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);
gx.GxObject=function(l){var c=function(){this.onLoadDeferred=l.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=
[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=c.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackCallCounter=this.feedbackTimeoutId=
0;gx.lang.apply(this,new gx.util.Observable)};c.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control";c.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition";c.GX_EVENT_DATA_ATTR="data-gx-evt";c.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code";c.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context";c.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay";c.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"];c.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress";c.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";c.WEBCOMPONENT_LOADING_CLASS_NAME=
"gxwebcomponent-loading";c.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";c.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return c}(gx.$);
gx.fn=function(l){var c=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,d=function(a){a=a.replace(/\\/g,".");return gx.gen.isDotNet()?a.replace(/\.aspx$/,""):a},g=function(){var a=function(b,f){return b.gxIndex<f.gxIndex?-1:b.gxIndex>f.gxIndex?1:0};return function(b){return gx.fn.toArray(b).sort(a)}}();return{disableKeys:function(){gx.fx.obs.addObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},enableKeys:function(){gx.fx.obs.deleteObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},
swallowKeys:function(a){a.cancel=!0;a.event.preventDefault()},attachedControls:function(){return gx.attachedControls},cancelWindow:function(a){this.closeWindow(a,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(a,b,f){b=b||{};f=f||gx.O;if("string"==typeof a){if(this.closeFromServer(a,b.parmsMetadata))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var k=gx.popup.getPopup(),m=k.url?gx.util.noParmsUrl(k.url):"";if(!k.frameWindow||-1!=k.frameWindow.location.href.search(m+"(\\?.*)?$")||
gx.grid.drawAtServer){k.close(a,b,f);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),a=gx.absoluteurl(a),gx.spa.started?(gx.spa.redirect(a),gx.ajax.enableForm(f)):(gx.evt.redirecting=!0,location.href=a)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(a,
b){try{if(window.parent&&window.parent.gx)return!gx.popup.ispopup()||gx.grid.drawAtServer||window.parent.gx.grid.drawAtServer?window.parent.gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}):gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}),!0}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,b,f){gx.evt.execLoad=!1;f&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(a,
{parmsMetadata:b})},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var b=a.v.length,f=0;f<b;f++)if(a.v[f][0]===a.s)return!1;return!0}return!1},trimSelectValue:function(a,b){return"int"==b?gx.text.trim(a):gx.text.rtrim(a)},selectedDescription:function(a,b){for(var f=a.v.length,k=0;k<f;k++)if(this.trimSelectValue(a.v[k][0],b)===a.s)return a.v[k][1];return null},setGridCheckBoxValue:function(a,b,f,k){this.setCheckBoxValue(a+"_"+b,f,k)},setGridDecimalValue:function(a,b,f,k,m){return this.setGridControlValue(a,
b,f)},setGridControlValue:function(a,b,f,k){if(void 0!==b)return this.setControlValue(a+"_"+b,f,k)},setVarValues:function(a,b){for(var f=a.length,k=0;k<f;k++){var m=gx.fn.vStructForVar(a[k]);m&&m.v2v?m.v2v(b[k]):eval(a[k]+'="'+b[k]+'"')}},refreshControlOldValue:function(a){if(void 0!==l(a).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)){var b=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));gx.fn.setControlOldValue(a,b)}},setControlOldValue:function(a,b){if(a){var f=a.id,k=gx.O.getValidStructFld(f);
b=gx.applyPicture(k,b,a);k&&k.gxgrid&&(k.gxgrid.IsValidState[f]=k.gxgrid.IsValidState[f]||{},k.gxgrid.IsValidState[f][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=b);if("radio"==a.type)for(a=gx.dom.byName(a.name),f=a.length,k=0;k<f;k++)a[k].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b);else a.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b)}},setControlGxValid:function(a,b){if(a&&a.id){var f=a.id,k=gx.O.getValidStructFld(f);k&&k.gxgrid&&(k.gxgrid.IsValidState[f]?k.gxgrid.IsValidState[f].gxvalid=b:k.gxgrid.IsValidState[f]=
{gxvalid:b});a.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,b)}},setControlValue:function(a,b,f){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,b,f)},setControlValueAny:function(a,b,f){var k=gx.O.getValidStructFld(a),m,t=!1;(m=gx.dom.el(a,k&&("edit"==k.ctrltype||"checkbox"==k.ctrltype||"combo"==k.ctrltype)))&&gx.lang.isEmpty(b)&&!0===m.GXFormatError&&(gx.csv.setFormatError(m,!1),gx.util.balloon.clear(a));k&&("dtime"==k.type||"date"==k.type?""===b?b=gx.date.nulldate_toc(k.len,k.dec):"string"==typeof b&&
(b=new gx.date.gxdate(b)):gx.lang.isFixedCharacterType(k.type)&&(b=gx.text.rtrim(b)));b instanceof gx.date.gxdate?gx.lang.emptyObject(k)||(b=gx.date.formatDateTime(k.dec,k.len,gx.dateFormat,b)):gx.lang.instanceOf(b,Number)||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal?gx.lang.emptyObject(k)||(b=gx.num.formatNumber(b,k.dec,gx.rtPicture(k,m),k.len,k.sign,!1,k.emptyAsNull)):"string"!=typeof b||gx.lang.emptyObject(k)||((t=void 0!=k.isPwd)?null!=m&&"SPAN"==m.nodeName&&(b=gx.text.formatString(b,
k.len,k.isPwd)):b=gx.text.formatString(b,k.len,k.isPwd,gx.rtPicture(k,m)));this.persistGridControlValue(a,b);null!=m&&"SPAN"!=m.nodeName?(this.setControlValue_impl(m,b,f),!0!==gx.csv.settingUIparms&&gx.fn.setControlOldValue(m,b)):gx.fn.setHidden(a,b);null!=m&&"SPAN"==m.nodeName&&(a=m);var v=k?k.multiline:null!=m&&"TEXTAREA"==m.tagName;t?this.setControlValue_span_safe(a,gx.text.formatString(b,k.len,k.isPwd,gx.rtPicture(k,m),f,v)):this.setControlValue_span_safe(a,b,f,v)},setDecimalValue:function(a,
b,f,k){this.setControlValue(a,b)},toDecimalValue:function(a,b,f){return gx.num.parseFloat(a,b,f)},toDatetimeValue:function(a,b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(a,b,f){try{a=gx.csv.ctxControlId(a);var k=gx.dom.byId(a);k||(k=gx.dom.form()[a]);if(k){var m=b.toString()==f.toString();k.checked=m;gx.dom.toggleAttribute(k,"checked",m);k.value=b}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,b,f){var k=a.lastIndexOf("_");-1!=k&&(f=
f?f:gx.O.getValidStructFld(a.substring(0,k)))&&f.gxgrid&&(k=a.substring(k+1),4<k.length?(k=k.substring(4,k.length),(k=gx.O.getGrid(f.gxgrid.gridName+"_"+k))&&k.persistControlValue(a,b,f)):f.gxgrid.persistControlValue(a,b,f))},setControlValue_span_safe:function(a,b,f,k){"string"==typeof a&&(a=gx.dom.byId("span_"+a));if(a&&"SPAN"!==a.nodeName){var m="span_";m="string"==typeof a?m+a:m+gx.dom.id(a);a=gx.dom.byId(m)}null!=a&&(m=gx.dom.bySelector('[data-name="'+a.id+'"]'),2>m.length&&(m=[a]),l.each(m,function(t,
v){gx.fn.setControlValue_fmt(v,b,f,k)}))},setControlValue_fmt:function(a,b,f,k){try{if(null!=a)if(1==f){var m=a.getAttribute("data-gxlink");gx.lang.emptyObject(m)||null==a.firstChild||"A"!=a.firstChild.nodeName||(a=a.firstChild);gx.html.setInnerHtml(a,b,!0)}else{0==f&&"string"==typeof b&&(b=b.replace(/ +/g," "));for(m=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;0!=f||null!=a.firstChild&&"#text"==a.firstChild.nodeName||"A"==a.nodeName?gx.html.setInnerText(a,b,f,k):gx.html.setInnerText(m,
b,f,k)}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,b,f){"string"==typeof a&&(a=gx.dom.el(a));b instanceof gx.date.gxdate&&(b=b.getString());if(null!=a){var k=gx.dom.byName(a.id);if(2>k.length||"radio"===a.type)k=[a];l.each(k,function(m,t){"radio"===t.type?gx.fn.setRadioValue(t.name,b):gx.dom.isEditControl(t)||"textarea"==t.type?(m=t.value!==b&&gx.dom.getActiveElement()===t&&t.selectionStart!==t.selectionEnd&&0<t.selectionEnd,t.value=b,m&&gx.fn.setSelection(t)):
void 0!=t.value?t.value=b:gx.fn.setControlValue_span_safe(t,b,f)})}},setGridComboBoxValue:function(a,b,f){this.setComboBoxValue(a+"_"+b,f)},setComboBoxValue:function(a,b){var f=gx.util.browser.isIE();a=gx.csv.ctxControlId(a);var k=gx.dom.byId(a);if(k){var m="",t=gx.O.getValidStructFld(a);gx.lang.emptyObject(t)||(m=t.type);"int"==m?b=gx.text.trim(b):"date"==m&&b instanceof gx.date.gxdate?b=b.getStringWithFmt("Y4MD"):"decimal"!=m&&(b=gx.text.rtrim(b));var v=b,n=!1;try{for(var w=k.options.length,A,r=
0;r<w;r++){var q=k.options[r];if(gx.lang.isNumericType(m)?Number(q.value)==Number(b):gx.text.trim(q.value)==gx.text.trim(b)){if(v="undefined"!=typeof q.innerText?q.innerText:q.text,k.selectedIndex=r,n=!0,q.setAttribute("selected","selected"),A=q,f)break}else f||q.removeAttribute("selected")}A&&A.value!=k.value&&gx.util.browser.isFirefox()&&gx.dom.redrawControl(k);n||(k.selectedIndex=0);0<t.grid&&this.persistGridControlValue(a,b,t)}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,
v,0)}},loadRadioButton:function(a,b,f){var k=l(a).parent().closest(".gx-radio-button"),m=l(a);b=l(gx.html.controls.applyTemplate("radio",{id:a.name,className:k.attr("class"),style:k.attr("style"),title:a.title,isDisabled:a.disabled,gxoch0:m.attr("data-gxoch0"),values:l.map(b,function(t,v){return{itemId:a.name+"_"+v,itemValue:t[0],itemDesc:t[1],isSelected:gx.text.trim(f.toString())==gx.text.trim(t[0].toString())}})}));k.replaceWith(b);gx.plugdesign.applyTemplateObject(b)},loadComboBox:function(a,b){this.setComboValues(a,
b)},setGridComboValues:function(a,b){if(0==this.controlGridId(a))this.setComboValues(a,b);else for(var f=1;999>f;f++){var k=gx.text.padl(f.toString(),4,"0");k=gx.dom.el(a+"_"+k);if(null==k)break;this.setComboValues(k.name,b)}},setComboValues:function(a,b){a=gx.dom.el(a);var f=gx.util.browser;if(null!=a){var k="";-1!=a.selectedIndex&&(k=a.options[a.selectedIndex].value);for(;a.options.length>b.length;)a.remove(a.options.length-1);for(;b.length>a.options.length;){var m=document.createElement("OPTION");
a.options.add(m)}for(var t=b.length,v=0;v<t;v++)if(m=a.options[v],m.value=b[v][0],f.isIE()&&9<=f.ieVersion()?m.innerText!=b[v][1]&&(m.innerText=b[v][1]):m.text!=b[v][1]&&(m.text=b[v][1]),Number(m.value)?Number(m.value)==Number(k):gx.text.trim(m.value)==gx.text.trim(k))a.selectedIndex=v;if(0==a.options.length)a.selectedIndex=-1;else if(-1==a.selectedIndex||a.selectedIndex>a.options.length-1)a.options[0].selected=!0}},getControlRefById:function(a){return(a=this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,
!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,b){b||(a=gx.csv.ctxControlId(a));if("FORM"==a)return document;a=gx.dom.el(a);return null!=a?a:null},getControlRef_list:function(a){var b=gx.dom.byName(a);if(null!=b)return b;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=this.getControlGridRef(a,this.controlGridId(a));return gx.lang.emptyObject(a)?null:("hidden"==a.type&&(a=gx.dom.byId("span_"+gx.dom.id(a))),a)},screen_CtrlId:function(a){return this.getControlGridId(a,
this.controlGridId(a))},getControlGridId:function(a,b,f){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;try{if(0==b)return a;void 0==f&&(f=this.currentGridRow(b));return a+"_"+f}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,b,f){var k;a=gx.csv.ctxControlId(a);if(0==b||-1!==a.search(gx.csv.CTRL_ROW_INDEX_REGEXP))if(k=gx.dom.el(a))return k;try{if(0==b)return null;void 0==f&&(f=this.currentGridRow(b));if(k=gx.dom.el(a+"_"+f))return k;var m=gx.O.getComponentData(a);
if(m)return gx.dom.el("gxHTMLWrp"+m.Prefix+f)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRowSafe:function(a,b){var f=gx.fn.getGridObj(a,b);if(f&&f.grid.rows.length>=b)return gx.fn.setCurrentGridRow(a,b)},setCurrentGridRow:function(a,b){if("0000"!=b)try{return gx.currentRows[a]=b}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=
this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=gx.fn.validStruct(a);if(void 0!=a){var b=a.gxgrid;if(null!=b&&(b=b.updateControlValue(a,!0)))return b.gxHasDuplicateKey()}return!1},firstGridControl:function(a,b){var f=gx.fn.controlIds(),k=f.length;for(i=0;i<k;i++){var m=gx.fn.validStruct(f[i],b);if(void 0!=m&&m.grid==a)return f[i]}return-1},lastGridControl:function(a,b){var f=gx.fn.controlIds();for(i=f.length-1;0<=i;i--){var k=gx.fn.validStruct(f[i],b);if(void 0!=
k&&k.grid==a)return f[i]}return-1},getGridDateTimeValue:function(a,b,f,k){a=this.getControlValue(a+"_"+b);return new gx.date.gxdate(a,gx.dateFormat)},getGridDecimalValue:function(a,b,f,k){return this.getDecimalValue(a+"_"+b,f,k)},getGridIntegerValue:function(a,b,f){return this.getIntegerValue(a+"_"+b,f)},getGridControlValue:function(a,b){return this.getControlValue(a+"_"+b)},getControlValue:function(a,b,f,k){return this.getControlValue_impl(gx.csv.ctxControlId(a,f),b,f,k)},getControlValue_impl:function(){var a=
/_CMPPGM$/g;return function(b,f,k,m){if("hidden_only"==f)return gx.fn.getHidden(b);if(0<=b.search(a))return"nohidden"===f?null:gx.fn.getHidden(b);k=k||gx.O;m=m||(k?k.getValidStructFld(b):null);if(!(m&&m.gxgrid&&m.gxgrid.grid&&m.gxgrid.grid.useHiddensForControlValues)){var t=!m||"edit"!=m.ctrltype&&"checkbox"!=m.ctrltype&&"combo"!=m.ctrltype?gx.dom.el(b,!1,!0):gx.dom.byId(b);if(null!=t&&k){m&&!t.gxtype&&(t.gxtype={type:m.type,len:m.len,dec:m.dec});if("checkbox"==t.type&&m.values&&m.values.length&&
1<m.values.length)var v=t.checked?m.values[0]:m.values[1];else if("hidden"==t.type||"text"==t.type||"textarea"==t.type||"checkbox"==t.type)v=t.value;else if("radio"==t.type)v=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==t.nodeName&&0<t.options.length?v=-1!=t.selectedIndex?"screen"==f?t.options[t.selectedIndex].text:t.options[t.selectedIndex].value:"screen"==f?t.options[0].text:t.options[0].value:m&&"date"!=m.type&&"dtime"!=m.type&&"bits"!=m.type&&"audio"!=m.type&&"video"!=m.type&&"binaryfile"!=
m.type&&(v=t.value),"IMG"==t.nodeName||"INPUT"==t.nodeName&&"image"==t.type)v=t.getAttribute("src");if(void 0!==v)return m&&"boolean"==m.type?gx.lang.gxBoolean(v):v}t=gx.dom.byId("span_"+b);if(null!=t)return b=gx.fn.getHidden(b),t=gx.fn.getControlValue_span(t),"screen"==f?void 0!=t?t:b:void 0!=b?b:t;t=gx.dom.form()[b];if(null!=t)return"file"==t.type&&(f=gx.html.multimediaUpload.getPreviewAtt(t.id+"_ct"))?f:this.getControlValueInt(t);ControlList=gx.dom.byName(b);if(null!=ControlList){k=ControlList.length;
for(m=0;m<k;m++)if(t=ControlList[m],null!=t)return this.getControlValueInt(t);if(t=ControlList[0])return t.value}}return null==t?"nohidden"===f?null:gx.fn.getHidden(b):""}}(),setRadioValue:function(a,b){a=gx.csv.ctxControlId(a);a=gx.dom.byName(a);if(null!=a)for(var f=a.length,k=0;k<f;k++){var m=l(a[k]);if(gx.text.ltrim(a[k].value)==gx.text.ltrim(b)){m.attr("checked","");m.prop("checked",!0);break}}},getRadioValue:function(a){for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f].value;return""},
getRadioSelected:function(a){a=gx.dom.byName(a);for(var b=a.length,f=0;f<b;f++)if(a[f].checked)return a[f];return null},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var b=gx.fn.getHidden(gx.dom.id(a));return void 0!=b?b:gx.fn.getControlValue_span(a)}if("INPUT"==a.tagName&&"text"==a.type&&(b=gx.dom.id(a),gx.O)){var f=gx.O.getValidStructFld(b);
if(f&&"undefined"!=typeof gx.rtPicture(f,a)){if("int"==f.type)return this.getIntegerValue(b,-1!=gx.rtPicture(f,a).indexOf(",")?gx.thousandSeparator:"");if("decimal"==f.type)return this.getDecimalValue(b,-1!=gx.rtPicture(f,a).indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];return a&&a.nodeValue?a.nodeValue:""},getDateTimeArrayValue:function(a){try{var b=function(m,t){gx.lang.emptyObject(m)||l.each(m,function(v,
n){m[v]=new gx.date.gxdate(n,t)});return""},f=this.getControlValue(a,"nohidden");var k=b(f,gx.dateFormat);k||(f=gx.fn.getHidden(gx.csv.ctxControlId(a)),k=b(f,"Y4MD"));return k}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var b=this.getControlValue(a,"nohidden");if(!gx.lang.emptyObject(b))return new gx.date.gxdate(b,gx.dateFormat);b=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(b,
"Y4MD")}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(a,b,f){var k=gx.O?gx.O.getValidStructFld(a):null;a=this.getControlValue(a,f,void 0,k);k&&a&&(a=gx.num.extractValue(gx.rtPicture(k),a));if(gx.lang.isArray(a))return a;a="undefined"!=typeof a?a.toString():"";if(0===a.length&&k&&"Blank"===k.emptyAsNull)return a;b=a.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(a,10,b):(new gx.num.dec.bigDecimal(gx.text.replaceAll(a,b,
""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(b)?0:b},getDecimalValue:function(a,b,f,k){var m=gx.O?gx.O.getValidStructFld(a):null;k=this.getControlValue(a,k,void 0,m);a=gx.dom.el(a,m&&("edit"==m.ctrltype||"checkbox"==m.ctrltype||"combo"==m.ctrltype));m&&k&&(k=gx.num.extractValue(gx.rtPicture(m,a),k));if("undefined"!==typeof k&&0===k.length&&m&&"Blank"===m.emptyAsNull)return"";if(gx.lang.isArray(k))return k;b=gx.num.parseFloat(k||"",b,f);return isNaN(b)?0:b},getBlobValue:function(a){var b=
gx.dom.byId("Object_"+a);if(null!=b){if(b.data&&!gx.text.endsWith(b.data,"about:blank"))return b.data}else if(b=gx.dom.byId("Link_"+a),null!=b)return b.getAttribute("href");return""},getVarControlMap:function(a,b){if(a=a||gx.O)for(var f in a.VarControlMap)if("function"!=typeof f){var k=a.VarControlMap[f];if(k.id==b||a.CmpContext+k.id==b)return f}return null},getVarControlMapForVar:function(a){for(var b in gx.O.VarControlMap)if("string"==typeof b&&b==a)return gx.O.VarControlMap[b];return null},v2c:function(a,
b,f,k){a.v2c(k);"undefined"===typeof b&&(b=a.val(k));a=gx.fn.getControlGridRef(a.fld,a.grid,k);gx.plugdesign.controlValueChanged(a,b);f&&(a.value="")},v2cMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f="";"number"==typeof b.grid&&0!=b.grid&&(f="_"+gx.fn.currentGridRowImpl(b.grid));gx.fn.setHidden(gx.O.CmpContext+b.id+f,gx.O[a])}},c2vMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var f="";"number"==typeof b.grid&&0!=b.grid&&(f="_"+gx.fn.currentGridRowImpl(b.grid));
gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+b.id+f)}},depsToVars:function(a){for(var b=0;b<a.length;b++){var f=a[b],k=gx.fn.vStructForVar(f);gx.lang.emptyObject(k)||"function"!=typeof k.c2v?this.c2vMap(f):k.c2v()}},verticalFormula:function(a,b,f,k,m,t,v){var n=gx.fn.vStructForVar(a);gx.lang.emptyObject(n)?this.v2cMap(a):n.v2c(k);var w=gx.fn.currentGridRowImpl(f),A=gx.fn.getGridObj(f,k),r=0,q=!1;if(A){for(var x=A.grid.rows.length,C=0;C<x;C++){var F=A.grid.rows[C],G=F.gxDeleted(),p=F.gxExists(),u=F.gxIsMod();
G||!p&&!u||(gx.fn.setCurrentGridRow(f,F.gxId),v&&0<v.length?this.depsToVars(v):gx.lang.emptyObject(n)||"function"!=typeof n.c2v?this.c2vMap(a):n.c2v(),m.call(gx.O)&&(q=!0,r=t(C,r)))}gx.fn.setCurrentGridRow(f,w);v&&0<v.length?this.depsToVars(v):gx.lang.emptyObject(n)||"function"!=typeof n.c2v?this.c2vMap(a):n.c2v(k);q||(r=b)}else gx.dbg.write("verticalFormula: cant find grid "+f+" at row "+k);return r},rowValueHandler:function(a,b,f,k,m,t,v){try{var n=gx.fn.vStructForVar(a)||gx.fn.getVarControlMapForVar(a),
w=n?n.type:"decimal";switch(w){case "boolean":return k(a,b,f);case "int":case "decimal":var A=gx.num.parseFloat(gx.O[a],t,v);return 0==b?A:m(a,b,f,A);default:gx.dbg.write("Warning: Forumula not supported for: ",a,w)}}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","Formula could not be calculated for Field: "+a)}},maxFrm:function(a,b,f,k,m,t,v,n){var w=function(r,q,x){return x||gx.O[r]},A=function(r,q,x,C){return C>x?C:x};return gx.fn.verticalFormula(a,b,m,t,v,function(r,q){return gx.fn.rowValueHandler(a,r,
q,w,A,f,k)},n)},sumFrm:function(a,b,f,k,m,t,v,n){var w=function(r,q,x){return x||gx.O[r]},A=function(r,q,x,C){return C+x};return gx.fn.verticalFormula(a,b,m,t,v,function(r,q){return gx.fn.rowValueHandler(a,r,q,w,A,f,k)},n)},minFrm:function(a,b,f,k,m,t,v,n){var w=function(r,q,x){return x&&gx.O[r]},A=function(r,q,x,C){return C<x?C:x};return gx.fn.verticalFormula(a,b,m,t,v,function(r,q){return gx.fn.rowValueHandler(a,r,q,w,A,f,k)},n)},averageFrm:function(a,b,f,k,m,t,v,n){return gx.fn.verticalFormula(a,
b,m,t,v,function(w,A){var r=gx.num.parseFloat(gx.O[a],f,k);return 0==w?r:(A*w+r)/(w+1)},n)},countFrm:function(a,b,f,k,m,t){return gx.fn.verticalFormula(a,b,f,k,m,function(v,n){return 0==v?1:n+1},t)},serialRule:function(a,b,f,k,m){m=m||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(f),f))return m[a];gx.lang.emptyObject(m[b])&&(m[b]=m[a]+k,(f=gx.fn.vStructForVar(b))&&f.v2c(),(f=m.VarControlMap[a])&&gx.fn.setControlValue(f.id,m[b]));b=m[b]||0;a=m[a]||0;return 0<k?Math.max(b,a):Math.min(b,a)},setReturnParms:function(a,
b,f,k){try{gx.csv.settingUIparms=!0;var m;if(k){var t=f.length;for(m=0;m<t;m++){var v=gx.fn.vStructForVar(b[m]);k.grid.setCellValue.apply(k.grid,[v,f[m]])}}else if(a&&b&&f&&(t=b.length,t==f.length)){gx.setGxO(a);k=null;for(m=0;m<t;m++){var n=b[m];if(n){var w=f[m];v=gx.fn.vStructForVar(n);gx.lang.emptyObject(v)&&(v=gx.fn.vStructForHC(n));if(v){var A=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(v.fld));v.v2v&&(v.v2v(w),gx.fn.v2c(v,w));"function"===typeof v.v2bc&&v.v2bc.call(a);gx.fn.isAccepted(A)&&(k=A,
gx.evt.onchange_impl(A));a.refreshDependantGrids(v)}else a.setVariable(n,w)}}k&&gx.fn.setFocus(k)}}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(a){return a&&a.IOType&&("out"==a.IOType||"inout"==a.IOType)?!0:!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(b&&b.frameDocument&&(a.ownerDocument?a.ownerDocument:a.document).URL!=b.frameWindow.location.href)return b.setFocusFirst(),!1}return!0},persistControlProperty:function(a,
b,f){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][b.toLowerCase()]=f},setCtrlProperty:function(a,b,f){if(gx.O){var k="FORM"==a?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a));if(null!=k){this.persistControlProperty(a,b,f);var m=gx.O.getValidStructFld(a);this.setCtrlPropertyImpl(k,b,f,m)}}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,b,f){var k=gx.fn.screen_CtrlRef(a);
if(null!=k){this.setCtrlPropertyImpl(k,b,f);var m=gx.fn.controlGridId(a);m&&(k=l(k).parent().closest("TD",l("[data-gxgridid="+m+"]").get(0)).get(0))&&(this.persistControlProperty(a,b,f),this.setCtrlPropertyImpl(k,b,f))}},getControls:function(a){var b=[a];(a=this.getRONode(a.id,!1))&&b.push(a);return l(b)},setCtrlPropertyImpl:function(a,b,f,k){if(null!=a&&(a==document&&"Backcolor"==b&&(a=document.body,this.setCtrlPropertyImpl(gx.dom.form(),b,f)),k=k||gx.O.getValidStructFld(a.id),!(("Enabled"===b||
"Visible"===b)&&k&&0<k.grid&&gx.fn.rowIsRemoved(k.grid,gx.fn.controlRowId(a))))){var m=k?k.ctrltype:null,t=a,v={control:t,property:b,value:f};gx.fx.obs.notify("gx.control.onbeforepropertychange",[v]);if(!v.cancel){var n=l();switch(b){case "Picture":a.setAttribute("data-gx-rt-picture",f);k&&(k.v2c(),k.c2v());break;case "Caption":this.setCtrlCaption(a,f);break;case "Tooltiptext":a.title=f;break;case "Invitemessage":a.placeholder=f;break;case "Visible":if("INPUT"==a.nodeName&&"button"==a.type)this.setButtonVisibility(a,
!this.propertyValueFalse(f));else{k="checkbox"===a.type;"INPUT"==a.nodeName&&(k&&l(a).parent().is("span:not(.gx-checkbox-wrapper)")?n=l(a).parent():"radio"==a.type&&(v=l(a).parent().closest(".gx-radio-button"),0<v.length&&(a=v[0])),(v=gx.html.multimediaUpload.getContainer(a))&&(a=v));v=this.propertyValueFalse(f);m=a.gxusrdisabled&&!k?a.gxusrdisabled:!1;v?(k=gx.dom.byId("span_"+a.id),this.setVisible(a,!v),k&&this.setVisible(k,!v)):((k=this.getRONode(a.id,m))&&this.setVisible(k,m),this.setVisible(a,
!m));for(k=0;k<n.length;k++)this.setVisible(n[k],!m);gx.fn.setDateCtrlProperties(a,!m,!v)}gx.fn.checkAttachedProperty(a.id,b,gx.lang.gxBoolean(f));break;case "Enabled":v=this.propertyValueFalse(f);if("hidden"===a.type)return;"textblock"===m&&l(a).toggleClass("gx-disabled",v);if(("SPAN"===a.tagName||"DIV"===a.tagName&&"1"===a.getAttribute("data-gxformat"))&&v)return;if("INPUT"===a.nodeName&&"radio"===a.type)for(n=gx.dom.byName(a.name),m=n.length,k=0;k<m;k++)this.setEnabledProperty(n[k],!v);else!gx.dom.isEditControl(a)&&
"textarea"!==a.type&&"file"!==a.type&&"SELECT"!==a.tagName||"password"===a.type?this.setEnabledProperty(a,!v):(k=this.getRONode(a.id,v,k.fmt),gx.fn.isVisible(a,0)||k&&gx.fn.isVisible(k,0)?(k&&this.setVisible(k,v),this.setEnabledProperty(a,!v),this.setVisible(a,!v),gx.fn.setDateCtrlProperties(a,!v,!0),gx.fn.checkAttachedProperty(a.id,b,!v),gx.fn.checkAttachedProperty(a.id,"Visible",!v)):(this.setEnabledProperty(a,!v),gx.fn.setDateCtrlProperties(a,!v,!1),gx.fn.checkAttachedProperty(a.id,b,!v)));break;
case "Class":a==document?(v=l(gx.dom.form()),n=l(document.body),k=v.attr("data-gx-class")||"",n.removeClass(k).attr("class",f+" "+n.attr("class")),v.removeClass(k).attr({"class":f+" "+v.attr("class"),"data-gx-class":f})):(n=this.getControls(a),n.attr("class",f),!gx.O.DSO&&0>=f.indexOf("Readonly")&&l(this.getRONode(a.id,!1)).attr("class",f+" Readonly"+f));break;case "Columnclass":(v=a.parentNode)&&"TD"==v.tagName&&this.setCtrlClass(v,"gx-attribute "+f);break;case "Columnheaderclass":(v=a.parentNode)&&
"TD"==v.tagName&&(v=l(v).closest("table").find("th:nth-child("+(v.cellIndex+1)+")").get(0))&&this.setCtrlClass(v,f);break;case "Link":this.setCtrlLink(this.getRONode(a.id,!1)||a,f);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(a.id,!1)||a,f);break;case "Backcolor":(v=gx.color.html(f))&&void 0==a.gxGridName&&(n=this.getControls(a),n.css("background-color",v.Html));break;case "Background":n=this.getControls(a);n.css("background-image","url("+f+")");break;case "Forecolor":if(v=gx.color.html(f))n=
this.getControls(a),n.css("color",v.Html);break;case "Fontbold":v=this.propertyValueFalse(f);n=this.getControls(a);n.css("fontWeight",v?"normal":"bold");break;case "Fontitalic":v=this.propertyValueFalse(f);n=this.getControls(a);n.css("fontStyle",v?"normal":"italic");break;case "Fontunderline":v=this.propertyValueFalse(f);n=this.getControls(a);n.css("textDecoration",v?"none":"underline");break;case "Fontstrikethru":v=this.propertyValueFalse(f);n=this.getControls(a);n.css("textDecoration",v?"none":
"line-through");break;case "Fontname":n=this.getControls(a);n.css("fontFamily",f);break;case "Fontsize":n=this.getControls(a);n.css("fontSize",f+"pt");break;case "Filename":this.setBlobFilename(a,f);break;case "Filetype":this.setBlobFiletype(a,f);break;case "URL":this.setBlobUrl(a,f);break;case "IsBlob":this.setMultimediaType(a,f);break;case "Bitmap":(gxImage=gx.util.imageName(f))?gx.html.setGXImageCSSClass(a,"GX_Image_"+gxImage+"_Class"):a.src=f;break;case "SrcSet":void 0!==f&&(a.srcset=f);break;
case "gximage":f&&gx.html.setGXImageCSSClass(a,"GX_Image_"+f+"_Class");break;case "Multimedia":this.setMultimediaValue(a.id,f);break;case "Jsonclick":a.jsevent=f;break;case "Source":v=f;n=v.indexOf("?");0<n&&(v=v.substring(0,n));-1==v.indexOf(":")&&-1==v.indexOf("/")?a.src=gx.ajax.objectUrl(f):a.src=gx.util.resourceUrl(f,!0);gx.evt.attach(a,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||gx.dom.isRadio(a)||"SPAN"==a.tagName)f=gx.json.evalJSON(f),"SELECT"==a.tagName?0!=f.isset&&
(gx.fn.loadComboBox(a.id,f.v),gx.fn.setComboBoxValue(a.id,f.s)):gx.dom.isRadio(a)?0!=f.isset&&gx.fn.loadRadioButton(a,f.v,f.s):(v=a.id.substring(5),n="",m=f.s,k=gx.O.getValidStructFld(v),gx.lang.emptyObject(k)||(n=k.type),m=gx.fn.trimSelectValue(m,n),f.s=m,gx.fn.setControlValue_span_safe(v,gx.fn.selectedDescription(f,n)));break;case "Width":a.width&&(a.width=f);a.style.width=gx.dom.addUnits(f);break;case "Height":a.height&&(a.height=f);a.style.height=gx.dom.addUnits(f);break;case "Ispassword":a.type=
gx.lang.gxBoolean(f)?"password":"text"}if(a=gx.dom.id(a))if(k=gx.O.getValidStructFld(a),a=a+(k&&k.grid&&0<k.grid?"":"_")+b,gx.fn.createPtyCondition(b)||gx.fn.isHidden(a))f=1==f?"1":0==f?"0":f,gx.fn.setHidden(a,f);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:t,property:b,value:f}])}}},createPtyCondition:function(a){return("Visible"==a||"Enabled"==a)&&gx.O.isTransaction()},setEnabledProperty:function(a,b,f){var k=gx.dom.id(a);if(gx.lang.gxBoolean(b)){if(delete gx.disabledControls[k],
gx.fn.isAccepted(a,!1))return}else gx.util.addOnce(gx.disabledControls,a,k);1==gx.csv.isvalidating()&&b&&null==gx.csv.validActivatedControl&&a!=gx.csv.lastControl&&(k=gx.O.getValidStructId(k),k>gx.O.fromValid&&k<=gx.O.toValid&&(gx.csv.validActivatedControl=a));a.gxusrdisabled=!b;a.disabled=a.gxdisabled?1==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;(void 0===f||f)&&this.setEnabled(a,b)},setEnabled:function(a,b){var f=function(m,t){gx.lang.booleanValue(t)?m.removeAttribute("data-gx-readonly"):
m.setAttribute("data-gx-readonly","")};gx.lang.booleanValue(b)?gx.dom.removeClass(a,"gx-disabled"):gx.dom.addClass(a,"gx-disabled");if(this.disabledAsSpan(a)){try{if("checkbox"==a.type)var k=a.parentNode;"radio"==a.type&&(k=l(a).parent().closest(".gx-radio-button")[0],f(a,b))}catch(m){}if(gx.lang.booleanValue(b))!gx.O.DSO&&k&&0==k.className.indexOf("Readonly")&&(k.className=k.className.substring(8)),this.isVisible(a)&&(this.setVisible(a,1),(b=this.getRONode(a.id,!0))&&this.setVisible(b,0));else if(!gx.O.DSO&&
k&&0>k.className.indexOf("Readonly")&&!gx.text.startsWith(k.className,"gx-")&&(k.className="Readonly"+k.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type&&"radio"!==a.type&&(b=this.getRONode(a.id,!0)))this.setVisible(a,0),this.setVisible(b,1),f=gx.O.getValidStructFld(a),k=0,!gx.lang.emptyObject(f)&&f.format&&(k=f.format),this.setControlValue_span_safe(b,gx.fn.getControlValue(gx.dom.id(a),"screen",void 0,f),k,"textarea"==a.type)}else f(a,b)},disabledAsSpan:function(a){var b=
a.tagName.toUpperCase();return"IMG"!=b&&!("INPUT"==b&&"button"==a.type)},setVisible:function(a,b){l(a).toggleClass("gx-invisible",!gx.lang.booleanValue(b));a.style.display=0==b?"none":this.displayByType(a.nodeName);var f=gx.O.getValidStructFld(a);if(b&&f&&f.gxgrid&&!f.gxgrid.grid.gxIsFreestyle){var k=a.closest("td[data-colindex]");if(k){f.gxgrid.applyPropEntireColumn(k.getAttribute("data-colindex"),"Visible",b);return}}gx.fn.rowGridId(a)&&(a=l(a).find("table")[0])&&this.setVisible(a,b)},getRONodePrefix:function(){return"span_"},
prefixROClass:function(a){return gx.O.DSO||""===a||0===a.indexOf("Readonly")?a:"Readonly"+a},getRONode:function(a,b,f){f=void 0===f?gx.html.controls.formats.TEXT:f;if(f===gx.html.controls.formats.RAW_HTML||f===gx.html.controls.formats.HTML||gx.lang.emptyObject(a))return null;f=gx.dom.byId(a);a=this.getRONodePrefix()+a;var k=gx.dom.byId(a);if(null!=k)return k;if(!b||null==f||"INPUT"===f.nodeName&&("radio"===f.type||"checkbox"===f.type))return null;b=document.createElement("SPAN");b.setAttribute("id",
a);b.setAttribute("data-gx-readonly","");this.setVisible(b,!1);b.className=gx.fn.prefixROClass(f.className);a="IMG"==f.nodeName||"INPUT"==f.nodeName&&"image"==f.type?f.value:gx.fn.getControlValue(gx.dom.id(f),"screen");b.appendChild(document.createTextNode(a||""));f.parentNode.insertBefore(b,f);return b},setDateCtrlProperties:function(a,b,f){var k=gx.dom.byId(gx.dom.id(a)+"_dp_trigger");k&&l(k).toggle(b);if(k=l(gx.dom.byId(gx.dom.id(a)+"_dp_container")))a.Flat&&l(a).hide(),a=l(".calendar",k),k.toggle(b&&
f||!b&&f),a&&a.toggle(b&&f)},getGridCtrlProperty:function(a,b,f){try{if(0!=a){var k=this.getGridObj(a);if(k){var m=k.grid.getColumnByHtmlName(b);if(m)return m[f.toLowerCase()]}}else return this.getCtrlProperty(b,f)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(a,b){var f=gx.O.getValidStructFld(a),k=f&&0<f.grid?"_"+gx.fn.currentGridRowImpl(f.grid):"";k=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a+k));if(null!=k)return k[b];if(k=this.screen_CtrlRef(a))return"Picture"===
b?gx.rtPicture(f,k):"Text"===b?this.getControlValue(a,"screen",void 0,f):"Visible"==b&&gx.fn.getRONode(k.id)?this.getCtrlProperty_impl(k,b)||this.getCtrlProperty_impl(gx.fn.getRONode(a),b):"Enabled"==b&&gx.fn.getRONode(k.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(k.id),"Visible"):this.getCtrlProperty_impl(k,b)},getCtrlProperty_impl:function(a,b){if(null==a)return"";switch(b){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":return"INPUT"===a.nodeName&&
"radio"===a.type&&(b=l(a).parent().closest(".gx-radio-button"),0<b.length&&(a=b[0])),"none"!=a.style.display;case "Enabled":return void 0===a.disabled?l(a).hasClass("gx-disabled")?!1:!0:!a.disabled;case "Class":return a.className;case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);case "Width":return gx.dom.dimensions(a).w;case "Height":return gx.dom.dimensions(a).h;case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==
a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;case "Filename":return a.value.split(/(\\|\/)/g).pop();case "Fontsize":return a=parseInt(a.style.fontSize),isNaN(a)?12:a;case "Ispassword":return"password"==a.type}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?
"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(a,b){try{var f=gx.html.getFieldLabel(a);if(f)gx.fn.setControlValue_fmt(f,b,0,!1);else{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var k=a.getAttribute("data-gxformat"),m=gx.O.getValidStructFld(a);null==k&&(k=!gx.lang.emptyObject(m)&&m.format?m.format:0);f=!1;m&&(f="edit"===m.ctrltype?m.multiline:!0);gx.fn.setControlValue_fmt(a,b,k,f);return;case "INPUT":"checkbox"!=a.type&&(a.value=b);return}"#document"==
a.nodeName&&(a.title=b)}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(a){var b=gx.html.getFieldLabel(a);if(b)return l(b).text();switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":b=a.getAttribute("data-gxformat");if(null!=b&&"1"==b)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;break;default:return""}},
propertyValueFalse:function(a){return"string"==typeof a&&(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,b){b=b?"":"none";var f=a.parentNode;gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b,f=f.parentNode,gx.lang.emptyObject(f)||"SPAN"!=f.nodeName||(f.style.display=b))));a.style.display=
b},setBlobValue:function(a,b){a=gx.dom.byId(a)||gx.dom.byId("Object_"+a);this.setBlobUrl(a,b)},setBlobFilename:function(a,b){null!=a&&(a=gx.O.getValidStructFld(a))&&gx.fn.setHidden(a.fld+"_Filename",gx.text.trim(b))},setBlobFiletype:function(a,b){if(null!=a){var f=gx.O.getValidStructFld(a);f&&gx.fn.setHidden(f.fld+"_Filetype",gx.text.trim(b));f=a;"INPUT"==f.nodeName&&"file"==f.type&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(b=gx.util.getContentType(b),this.setObjectCtrlType(f,b),gx.fn.setVisible(f,
!0))}},resolveResourceUrl:function(a,b){if(""==a)return b?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.isabsoluteurl(a))if(gx.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+a,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,b){var f=gx.html.multimediaUpload.getContainer(a);if(f)a=this.resolveResourceUrl(b,!1),gx.html.multimediaUpload.setPreviewImage(f,a),gx.html.multimediaUpload.setPreviewLink(f,
a);else if(!b.match(/^[a-z]:[\S]*/i)&&null!=a){f=a;var k="INPUT"==f.nodeName&&"file"==f.type;if(""===b&&""===b){var m=l(f);m.wrap("<form>").closest("form").get(0).reset();m.unwrap()}k&&(f=gx.dom.byId("Object_"+a.id));null!=f&&(k=gx.util.getContentTypeFromExt(b),f=this.setObjectCtrlType(f,k));null!=f?"IMG"==f.tagName?(b=this.resolveResourceUrl(b,!0),f.src=b):(f.data=b||"about:blank",gx.fn.setVisible(f,!0),this.resizeObject(f),gx.dom.redrawControl(f)):(f=gx.dom.byId("Link_"+a.id),null!=f&&(f.style.display=
""!=b?"block":"none",f.href=b))}},setGridMultimediaValue:function(a,b,f,k){if(void 0!==b)return this.setMultimediaValue(a+"_"+b,f,k)},setMultimediaValue:function(a,b,f){var k=gx.dom.byId(gx.csv.ctxControlId(a));if(k){var m=gx.html.multimediaUpload.getContainer(k),t=this.resolveResourceUrl(f||b||"",!1);if(m){0<=gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&gx.html.multimediaUpload.setPreviewImage(m,t);var v=""==b&&""==f||""!=b;if(!v){var n=gx.dom.byId(k.id+"_GXI");n&&(n.value=f)}(a=gx.dom.byId(a))&&
""==b&&(a.value="");this.setMultimediaType(k,v);gx.html.multimediaUpload.setPreviewLink(m,t)}else{if("IMG"==k.tagName||"INPUT"==k.tagName&&"image"==k.type)k.src=t;(b=k.parentNode)&&"A"==b.tagName&&gx.dom.isMultimediaElement(k)&&(t?b.href=t:b.removeAttribute("href"))}}},setMultimediaType:function(a,b){a&&(a=gx.html.multimediaUpload.getContainer(a))&&gx.html.multimediaUpload.setType(a,gx.lang.gxBoolean(b))},setObjectCtrlType:function(a,b){var f=a;if("IMG"==a.nodeName&&(!b||0==b.indexOf("image/")))return f;
if(a.type!=b||"OBJECT"==a.nodeName&&0==b.indexOf("image/"))if(f=0==b.indexOf("image/")?gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+b+'">')[0]){try{for(var k in a.attributes)if("id"!=k&&"type"!=k&&"implementation"!=k&&a[k])try{f[k]=a[k]}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setObjectCtrlType")}}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","setObjectCtrlType")}if(b=a.parentNode){k=null;var m=b.childNodes.length;for(i=0;i<m;i++)if(b.childNodes[i]==
a){i<m-1&&(k=b.childNodes[i+1]);break}gx.dom.removeControlSafe(a);null!=k?b.insertBefore(f,k):b.appendChild(f)}}return f},resizeObject:function(a){var b=gx.lang.emptyObject;!b(a.data)&&"about:blank"!=a.data&&b(a.width)&&b(a.height)&&b(a.style.width)&&b(a.style.height)&&(a.style.width="200px",a.style.height="200px")},restoreLostCtrlOnGridRefresh:function(a,b,f){if(null==b.form){var k=gx.dom.id(b);!(k=gx.O.getValidStructFld(k))||"checkbox"!=b.type||k.gxgrid&&parseInt(a||0,10)!==parseInt(k.gxgrid.grid.firstRecordOnPage||
0,10)||(b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=f)}return b},checkboxClick:function(a,b,f,k,m){var t=b.checked;m=m?gx.getObj(m):null;var v="object"===typeof a?a:gx.fn.validStruct(a,m),n=v&&v.gxgrid?v.gxgrid.grid.firstRecordOnPage:0;a=v&&v.grid?v.grid:0;var w=function(A){b=this.restoreLostCtrlOnGridRefresh(n,b,t);gx.fn.setControlOldValue(b,b.value);b.checked=t;b.value=t?f:k;gx.dom.toggleAttribute(b,"checked",t);v&&("function"==typeof v.c2v&&v.c2v(),"function"==typeof v.v2bc&&v.v2bc.call(gx.O),
gx.csv.invalidateCtrl(b,!0))}.closure(this);a&&gx.pO.supportAjaxEvents&&gx.evt.doAfterValidating(w);gx.fx.obs.notify("gx.validation",null,function(){if(gx.evt.fixWebKitOnFocus())b.onfocus();w.call(this,!0)});gx.pO.fullAjax||w.call(this,!0);m&&gx.util.browser.isIE()&&gx.setGxO(m)},setCtrlClass:function(a,b){null!=a&&(a.className=b)},setCtrlLink:function(a,b){if(null!=a)if(""==b)this.unsetCtrlLink(a);else if("A"==a.tagName)a.href=b;else{var f=a.firstChild;if(f&&"A"==f.tagName)f.href=b;else{var k=a.parentNode;
if("A"==k.tagName)k.href=b;else{var m=document.createElement("A");m.href=b;f&&"#text"==f.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(m,!0),m.innerHTML=f.nodeValue,a.replaceChild(m,f)):(k.replaceChild(m,a),m.appendChild(a));(a=l(a).attr("data-gx-link-target"))&&l(m).attr("target",a)}}}},unsetCtrlLink:function(a){if(null!=a&&(a=a.parentNode,"A"==a.tagName)){var b=a.firstChild;ParentTag2=a.parentNode;if(null!=ParentTag2){for(;null!=b;)ParentTag2.insertBefore(b,a),b=a.firstChild;gx.dom.removeControlSafe(a)}}},
setCtrlLinkTarget:function(a,b){if(null!=a){var f=l(a);f.is("a")||(f=f.children());f.is("a")&&f.attr("target",b);l(a).attr("data-gx-link-target",b)}},isVisible:function(a,b){if(!a||gx.dom.hasClass(a,"gx-invisible")||"INPUT"===a.tagName.toUpperCase()&&"hidden"===a.type||"none"===a.style.display)return!1;try{for(var f;a&&("undefined"==typeof b||0<=b);){if((f=gx.dom.getComputedStyle(a))&&("hidden"==f.visibility||"none"==f.display))return!1;a=a.parentNode;"undefined"!=typeof b&&b--}}catch(k){gx.dbg.logEx(k,
"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,b){var f=this.gridObjByLvl(a);if(f)return f=gx.O.getGridById(f.gridId,b)||f,(a=f.grid.getRowByGxId(b))?a.gxIsMod():!0;f=!1;try{f=1==this.getControlValue("nIsMod_"+a+"_"+b)}catch(k){f=!1}return f},gridObjByLvl:function(a){for(var b=gx.O.Grids,f=b.length,k=0;k<f;k++)if(b[k].gridLvl==a)return b[k];return null},forceEnableControls:function(a){for(var b in gx.disabledControls){b=this.getControlRef_list(b);for(var f=b.length,k=0;k<f;k++)try{"button"!=
b[k].type&&"submit"!=b[k].type&&(b[k].disabled=a)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","forceEnableControls")}}},alert:function(a,b){try{var f=gx.util.balloon.getNew(a.id);f.setError(b);f.show();gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{};gx.csv.invalidForcedCtrl.Ctrl=a;gx.csv.invalidForcedCtrl.ForceFocus=!1}catch(k){gx.util.alert.showError(b)}},getGridRowMode:function(a,b){return this.getGridRowModeImpl(a,b,this.currentGridRow(b))},getGridRowModeImpl:function(a,b,f){b=this.rowIsRemoved(b,
f);a=this.getControlValue("nRcdExists_"+a+"_"+f);return"1"==b?"DLT":"0"==a?"INS":"UPD"},rowIsRemoved:function(a,b){a=this.getGridObj(a);return null!=a&&(b=a.grid.getRowByGxId(b))?b.gxDeleted():!1},getGridObj:function(a,b){return gx.O.getGridById(a,b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){void 0==gx.oldValues[a.id]&&(gx.oldValues[a.id]=a.value)},hasUnicode:function(a){return/[^\u0000-\u00ff]/.test(a)},
setFocusOnError:function(a){var b=gx.fn.controlGridId(a);a=gx.csv.ctxControlId(a);b=0==b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);return null!=b&&(gx.O.AnyError=1,gx.csv.anyError=!0,b.setAttribute("data-gxvalid","0"),gx.csv.stopOnError||gx.csv.invalidForcedCtrl&&gx.csv.invalidForcedCtrl.ForceFocus)?(gx.fn.setFocus(b),!0):!1},usrSetFocus:function(a){gx.usrPendingControl=a},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},
usrSetFocus_impl:function(a,b){void 0===b&&(b=!0);var f=gx.fn.screen_CtrlRef(a);null==f?gx.grid.setActiveGridRow(a,0):(a=gx.dom.id(f),1==gx.csv.isvalidating()?b?gx.fx.obs.addObserver("gx.onaftervalidate",this,function(k){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[k,!1],200)}.closure(gx.fn,[a]),{single:!0}):gx.usrFocusControl=a:(gx.fn.setFocus(f),delete gx.usrFocusControl))},setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():
window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(f){gx.fn.setSelection(f);f.forcedFocus=!0;b&&b()})}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a,b){var f=gx.csv.setFocusOnload;if(a){var k=function(m,t){try{f&&t&&gx.fx.obs.addObserver("gx.onafterfocus",this,
t.closure(this,[m]),{single:!0}),m.focus()}catch(v){}!f&&t&&t(m)};gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,function(){k.call(this,a,b)},{single:!0}):gx.lang.doCallTimeout(k,this,[a,b],f?500:0)}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(a){a&&"radio"==a.type&&(a=gx.fn.getRadioSelected(a.name)||a);return a},setFocusOnload:function(a){a=
void 0===a?!0:!1;gx.wpo(function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null;b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var f=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(f))gx.csv.userFocus=gx.fn.getControlRef(b);else{f.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?b=gx.csv.lastActiveControl:(b=
gx.fn.firstAcceptedControl(gx.popup.ispopup()),b=gx.fn.arrayCtrlFocus(b)));try{b?(f=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=a,gx.fn.isAccepted(b)?(gx.O&&gx.O.IsComponent&&(gx.csv.disableFocus=!0),gx.fn.setFocus(b,f)):(gx.popup.setFocus(),f())):gx.popup.setFocus()}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","setFocusOnload")}}}})},setSelectionImpl:function(a){gx.util.browser.isSafari()?setTimeout(function(){l(a).select()},0):a.select&&a.select()},setSelection:function(a){if(a&&
gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||"file"==a.type)&&a.select)this.setSelectionImpl(a);else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),this.setSelectionImpl(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isAccepted:function(a,b,f){b=void 0===b||b;f=f||gx.O;var k=["FIELDSET"];k=null!=a&&a.type&&"hidden"!==a.type&&!a.disabled&&!a.readOnly&&!gx.util.inArray(a.nodeName,k)&&gx.fn.isVisible(a);if(!k)return!1;b&&(a=gx.dom.id(a),b=f.getValidStructFld(a),
a=f.getVariable("Gx_mode"),0<gx.csv.lastGrid&&f.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),k=!gx.lang.emptyObject(b)&&b.nac?!b.nac.call(f):!0,f.setVariable("Gx_mode",a));return k},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(a,b){b=b||gx.csv.lastControl;var f=gx.fn.getControlIndex(b),k=f,m=this.controlGridId(b.id||b.name),t=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(k=b.gxControlIdx,
t=!0);if(-1==k)return!0;var v=gx.fn.getFormElements();for(b=gx.fn.searchFocus(++k,!0);;b=gx.fn.searchFocus(++k,!0))if(null==b||k==v.length)k=-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(b))break;if("INPUT"==b.nodeName&&"submit"!=b.type&&"button"!=b.type&&"image"!=b.type)break}!t&&m&&gx.O.isTransaction()&&this.controlGridId(b.id||b.name)!=m&&(a=gx.O.getGridById(m),b=gx.dom.byId(a.containerName+"_NewRow").parentNode,b.gxControlIdx=f);gx.fn.setFocus(b)},getFormElements:function(){return l.makeArray(l("button, fieldset, input, img, object, output, select, textarea"))},
getControlIndex:function(a){var b=gx.fn.getFormElements().length-1;return el=this.controlIndex(a,0,b)},controlIndex:function(a,b,f){if(document.all){var k=gx.fn.getFormElements(),m=k[b].sourceIndex,t=k[f].sourceIndex,v=parseInt(b+(f-b)/2)+1;k=k[v].sourceIndex;if(b==f&&a.sourceIndex==m&&a.sourceIndex==t||a.sourceIndex==m)return b;if(a.sourceIndex==t)return f;if(a.sourceIndex==k)return v;if(a.sourceIndex>k&&a.sourceIndex<t)return this.controlIndex(a,v+1,f-1);if(a.sourceIndex>m&&a.sourceIndex<k)return this.controlIndex(a,
b+1,v-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},searchFocusBack:function(a){for(var b=g(gx.fn.getFormElements());0<=a;a--)if(gx.fn.isAccepted(b))return b[a];return null},searchFocusFwd:function(a){for(var b=g(gx.fn.getFormElements()),f=b.length;a<f;a++)if(gx.fn.isAccepted(b[a]))return b[a];return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},
controlRowIndex:function(a){return l(a).parentsUntil(".gx_usercontrol, .gxwebcomponent").filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxrow");return null!=b?b:gx.fn.controlRowIdImpl(a.parentNode)},controlRowId:function(a){var b=gx.fn.controlRowIdImpl(a);null===b&&a&&a.id&&0<a.id.lastIndexOf("_")&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return b},controlGridId:function(a){try{var b=gx.O.Grids;if(b){var f=
0;for(len=b.length;f<len;f++)if(b[f].grid.columnsHtmlName[a])return b[f].gridId}var k=gx.fn.controlIds();f=0;for(len=k.length;f<len;f++){var m=gx.fn.validStruct(k[f]);if(gx.O.isSameField(m,a))return m.grid}var t=gx.O.getComponentData(a);if(t){var v=gx.fn.gridObjByLvl(t.lvl);if(v)return v.gridId}}catch(n){}return 0},oldGridId:function(a){try{var b=gx.fn.controlIds(),f=b.length;for(i=0;i<f;i++){var k=gx.fn.validStruct(b[i]);if(void 0!=k&&k.gxold==a)return k.grid}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js",
"oldGridId")}return 0},saveLvlOldParm:function(a,b){var f="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(f=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(f=gx.O.Gx_mode);return"no_mode"==f?!0:"UPD"==f||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,b){try{var f=gx.O.getOldLvl(b);if(0<=f){if(0<a){var k=gx.fn.gridLvl(a);return f<k}return!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","isLvlParmOld")}return!1},
gridLvl:function(a){try{var b=gx.fn.controlIds(),f=b.length;for(i=0;i<f;i++){var k=gx.fn.validStruct(b[i]);if(void 0!=k&&void 0!=k.lvl&&k.grid==a)return k.lvl}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{var b=gx.fn.controlIds(),f=b.length;for(i=0;i<f;i++){var k=gx.fn.validStruct(b[i]);if(void 0!=k&&k.lvl==a)return k.grid}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(a){try{var b=gx.fn.controlIds();for(i=0;i<b.length;i++){var f=
gx.fn.validStruct(b[i]);if(void 0!=f&&f.fld==a)return b[i]}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var f=null;b&&(f=[]);var k=gx.fn.controlIds(),m=k.length;for(i=0;i<m;i++){var t=gx.fn.validStruct(k[i]);if(void 0!=t&&a(t))if(t.id=k[i],b)f.push(t);else return t}}catch(v){gx.dbg.logEx(v,"gxfrmutl.js","getVStruct")}return f},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==
a})},vStructForVarWId:function(a,b){var f=gx.fn.getVStruct(function(v){return v.gxvar==a},!0),k=f[0],m=f.length;if(1<m)for(var t=0;t<m&&(k=f[t],k.id!=b);t++);return k},vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var f=gx.fn.lastCtrlId();a<f;a++){var k=gx.fn.validStruct(a);if(void 0!=k&&k.grid!=b)return a}return f},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridKey")}return""},setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,f){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=f)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var f=gx.fn.rowIsRemoved(b,
a);try{var k=gx.fn.controlIds(),m=k.length;for(i=0;i<m;i++){var t=gx.fn.validStruct(k[i]);if(void 0!=t&&t.grid==b){var v=gx.dom.el(t.fld+"_"+a);null!=v&&(v.gxdisabled=f,v.disabled=f)}}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","removeGridRow")}gx.evt.doAfterValidating(function(){gx.csv.validGridRow(b,a)})},controlFiresEvent:function(a){return a&&(a.evt||a.triggersEvt)},controlIds:function(a){return(a=a||gx.O)?a.getControlIds():[]},getControlContext:function(a){var b=null;(a=gx.json.evalJSON(l(a).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||
"{}"))&&1<a.length&&(b=gx.getObj(a[0],a[1]));return b},validStruct:function(a,b){b=b||gx.O;return b.getValidStruct(a)},lastCtrlId:function(a){if(!0===a){a=this.controlIds();for(var b=a.length-1;0<=b;b--){var f=this.validStruct(a[b]);if(f.v2v&&(void 0===f.isacc||1==f.isacc))return a[b]}}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(a,b){return 0==b&&a==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=gx.fn.vStructsArray(),
f=gx.fn.controlIds(),k=f.length,m=0;m<k;m++){var t=b[f[m]];if(null!=t){var v=gx.fn.getControlGridRef(t.fld,t.grid);if(v&&gx.fn.isAccepted(v)&&(a||"submit"!=v.type&&"image"!=v.type&&"button"!=v.type&&"fieldset"!=v.type))return v}}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(a){var b=gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&a.isTransaction()&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(a){1!=
gx.csv.isvalidating()&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(a&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(f){try{for(var k=f.length,m=0;m<k;m++)gx.fn.setCtrlPropertyImpl(f[m],"Enabled",0)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","disableCtrl")}};a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==
document.gxReadyState)b(a);else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var f=gx.O.getGridBC(a);if(f){var k=gx.pO.getGridForColl(f.gxvar);if(gx.csv.validatingGrid&&k&&gx.csv.validatingGrid.gridId==k.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(k.gridId))-1],gx.O.bcToScreen(f,b),!0}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(a,b){b=gx.O.applySDTVarMapping(b,a);return this.refreshFormBC(a,b)||
this.refreshGridRowBC(a,b)},refreshFormBC:function(a,b){try{var f=gx.O.getFormBC(a)||gx.O.getFormBCForVar(a);if(f)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(f,b),!0}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},GX_HASH_PREFIX:"gxhash_",getHash:function(a,b,f){return gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b+(f?"_"+f:""))||gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+
b)},getHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,b){var f=a,k=gx.fn.oldGridId(a);0<k&&(f=a+"_"+gx.fn.currentGridRowImpl(k));gx.fn.setHidden(f,b)},deleteHidden:function(a){gx.http.viewState&&delete gx.http.viewState[a]},setJsonHiddens:function(a,b,f){var k=[];f=void 0===f||f;for(var m in b){f?gx.fn.setGridHidden(m,b[m]):gx.fn.setHidden(m,
b[m]);var t=gx.fn.getVarControlMap(a,m);var v=b[m];if(!gx.lang.emptyObject(t)){if(a){var n=a.VarControlMap[t];if("date"==n.type||"dtime"==n.type)v=new gx.date.gxdate(b[m],"Y4MD")}gx.setVar(t,v)}gx.fn.vStructForOld(m)&&gx.setVar(m,v);a&&a.UCBindingsHiddens[m]&&(k=k.concat(gx.O.UCBindingsHiddens[m].uc))}return k},filterHiddens:function(a,b){var f={},k;for(k in b)k&&0==k.search(a)&&(f[k]=b[k]);return f},autoRefreshingControl:function(a,b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&
gx.csv.lastControl.id==b+a},setJsonValues:function(a,b,f,k,m){if(!a)return[];for(var t=gx.O,v=a.length,n=[],w,A,r=0;r<v;r++){var q=a[r],x=q.CmpContext,C=gx.lang.booleanValue(q.IsMasterPage),F=gx.setGxO(x,C);if(!gx.lang.emptyObject(gx.O))for(var G in q)if("CmpContext"!=G&&"IsMasterPage"!=G&&(!m||m(G))){var p=q[G];if(("object"!=typeof p||!gx.fn.refreshBC(G,q[G]))&&"function"!=typeof p){var u=gx.fn.vStructForVar(G)||gx.O.getValidStructFld(G);u?u.v2v&&!gx.fn.autoRefreshingControl(u.fld,x)&&(A=(A=gx.O.getGridById(u.grid))&&
A.InfiniteScrolling,0!=u.grid&&(w=gx.dom.el(G,!1,!1),w=gx.fn.controlRowId(w)||(u.grid==f?k:gx.fn.currentGridRow(u.grid))),A||(u.v2v(p),u.v2c(w))):"GX_FocusControl"!=G||b?(u=gx.fn.vStructForHC(G),gx.lang.emptyObject(u)||gx.lang.emptyObject(u.hc)||u.grid||(u.hc==G?(F[u.hc]=p,gx.fn.setHidden(x+"GXH_"+u.fld,p)):u.hd==G&&(F[u.hd]=p)),u=gx.fn.vStructForHC(G),gx.lang.emptyObject(u)||(A="",0!=u.grid&&(A=u.grid==f?k:gx.fn.currentGridRow(u.grid)),gx.fn.setHidden(x+"GXHC"+u.fld+"_"+A,p)),u=gx.fn.getVarControlMap(F,
G),gx.lang.emptyObject(u)?gx.setVar(G,p):gx.setVar(u,p),gx.fn.setGridHidden(G,p),gx.O.UCBindings[G]&&(n=n.concat(F.UCBindings[G].uc))):t.CmpContext==x&&t.IsMasterPage==C&&(gx.usrFocusControl=p)}}}gx.setGxO(t);return n},getPropertyControlRef:function(a,b,f){var k=gx.fn.getControlRef(a,!0);k=null!=k||f?k:gx.dom.byId("Object_"+a);null==k&&(k=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a)));null==k&&b&&(k=gx.dom.el(a+"_"+b));return k},setJsonProperties:function(a,b){if(!a)return[];for(var f=gx.O,k=a.length,
m=[],t=0;t<k;t++){var v=a[t],n=v.CmpContext,w=gx.lang.booleanValue(v.IsMasterPage);n=gx.setGxO(n,w);if(!gx.lang.emptyObject(gx.O))for(var A in v)if("CmpContext"!==A&&"IsMasterPage"!==A&&""!==A&&(w=v[A],"function"!=typeof w)){var r=n.getValidStructFld(A);if("FORM"==A||r||0<=A.indexOf("gxHTMLWrp")||0<=A.indexOf("ContainerDiv")){var q=r&&("bits"==r.type||"bitstr"==r.type||"audio"==r.type||"video"==r.type||"binaryfile"==r.type);q=gx.fn.getPropertyControlRef(A,b,!q)}else q=gx.fn.getPropertyControlRef(A,
b);var x=!1;if(q&&q.gxGridName){var C=gx.fn.gridObjFromGxO(q.gxGridName);x=C.setProperty(w)}if(!x)if(x=n.getGridColumn(A,b),(null==q||C)&&gx.uc.isUserControl(A,n)||x&&x.isUserControl)r=A,x&&x.isUserControl&&(r=A+"_"+b),gx.uc.setProperties(r,w),m.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(r)));else if(null!=q||null!=x)for(var F in w)if(q)if(q.parentElement||(q=gx.fn.getPropertyControlRef(A,b)),"object"===typeof w[F])for(var G in w[F])gx.fn.setCtrlPropertyImpl(q,G,w[F][G],r);else gx.fn.setCtrlPropertyImpl(q,
F,w[F],r)}}gx.setGxO(f);return m},loadJsonGrids:function(a,b,f){f=f||[];var k=[],m=function(E){for(var I=0;I<E.length;I++)if("string"===typeof E[I])return E[I];return""},t=function(E){var I="",L=E.lastIndexOf("_");-1!==L&&(I=(E=E.substring(L+5))?"_"+E:"");return I},v=function(E,I,L){for(var M=0;M<E.Count;M++){var O=E[M],R;for(R in O.Grids)(O=gx.fn.gridObj(I,R+"_"+gx.text.padl((M+1).toString(),4,"0"),!1))&&O.isUsercontrol&&L.push({cmpCtx:I,gridName:R+"_"+gx.text.padl((M+1).toString(),4,"0"),inMasterPage:!1})}},
n=[];if(a)for(var w=a.length,A,r=0;r<w;r++)try{var q=a[r];if(void 0!=q.Count){var x=q.CmpContext,C=q.GridName,F=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(F)||F.gxComponentContext!=x&&F.gridName!=C||!gx.lang.emptyObject(F.boundedCollType)){var G="true"==q.InMasterPage?!0:!1,p="",u="";q[0]&&q[0].Props&&q[0].Props[0]&&gx.lang.isArray(q[0].Props[0])&&(u=m(q[0].Props[0]));p=t(u);if(A=gx.fn.gridObj(x,C+p,G))v(q,x,n),n.push({cmpCtx:x,gridName:C+p,inMasterPage:G}),b?gx.O.Grids[A.gridName]&&
gx.O.Grids[A.gridName].parentGrid||k.push(A.loadGrid({rowProps:q,isPostback:b})):A.updatePropsHidden(q)}}}catch(E){gx.dbg.logEx(E,"gxfrmutl.js","loadJsonGrids")}n=gx.lang.arrayUnique(n,function(E,I){return E.gridName===I.gridName});var y=[];for(r=0;r<n.length;r++)a=n[r],(a=gx.fn.gridObj(a.cmpCtx,a.gridName,a.inMasterPage))&&a.grid&&(a.grid.ownerGrid&&a.grid.ownerGrid.parentGrid?y.push(a.grid):f.push(a.grid));var B=l.Deferred();l.when.apply(l,k).done(function(){gx.dom.indexElements();B.resolve(y)});
return B.promise()},getErrorViewerCtrls:function(){var a=gx.dom.byClass("gx_ev");if(0==a.length){a=[];for(var b=gx.dom.byTag("span"),f=b.length,k=0;k<f;k++)"gxErrorViewer"==b[k].getAttribute("data-gx-id")&&a.push(b[k])}return a},setErrorViewer:function(a,b){b=void 0===b||b;gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",[a]);var f=gx.dom.byClass("gx_ev"),k=f.length,m;for(m in a){var t=a[m];if(!gx.lang.isArray(t)){var v=t.fields;t=t.msgs}var n=[];if(v)for(var w=0,A=v.length;w<A;w++)if(!gx.lang.isArray(v[w])){var r=
gx.fn.vStructForVar(v[w].replace(/^gx\.O\./,""));r&&n.push(r.fld)}"MAIN"==m&&(m="");if("undefined"!=typeof t){for(w=0;w<k;w++){var q=f[w];if(q&&q.getAttribute("data-gx-id")==m+"gxErrorViewer"){var x=gx.csv.setFocusOnload?q.innerHTML:"";break}}var C={},F=!1,G;for(G in t){var p=t[G];p&&1==p.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(p.text)&&"function"!=typeof p){var u=gx.fn.screen_CtrlRef(p.att),y=u&&l(u).is("[data-gxgridid].gx-invisible "+u.tagName);if(""!=p.att&&(y&&gx.fn.isVisible(u,0)||gx.fn.isVisible(u))){var B=
C[p.att];B||(B=gx.util.balloon.getNew(p.att,void 0,p.id?n:[]),C[p.att]=B);1==p.type?B.setError(p.text):B.setMessage(p.text);F||"ForeignKeyNotFound"!==p.id||(F=!0)}else if("ForeignKeyNotFound"===p.id&&!F||"ForeignKeyNotFound"!==p.id)x+='<div class="'+(1==p.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(p.text)+"</div>"}}F=!1;for(var E in C)if(B=C[E],0!=B.show()||F||(F=!0,gx.fn.setFocusOnError(E)),gx.csv.oneAtAtime)break;for(w=0;w<k;w++)if((q=f[w])&&q.getAttribute("data-gx-id")==
m+"gxErrorViewer"&&q.innerHTML!=x&&(gx.dom.shouldPurge()&&gx.dom.purge(q,!0),q.innerHTML=b?x:q.innerHTML+x,""!=x)){var I=gx.fx.dom.highlight(q,[255,255,165],2500);I.play();q.effect=I}}}gx.plugdesign.applyTemplateObject({templateSelector:function(L){return"errorviewer"===L.name},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&gx.O.AnyError&&!F&&window.scrollTo(0,0)}catch(L){gx.dbg.logEx(L,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(a){var b=c.exec(a);return b?
b[1]+b[2]:a},clearCompontHiddens:function(a){var b=[],f;for(f in a)"function"!=typeof a[f]&&b.push(gx.fn.cmpContextFromCtrl(f));try{gx.O.deleteComponentHiddens(b)}catch(k){except=!0,gx.dbg.logEx(k,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(a,b,f,k,m){try{var t=[],v=!1;gx.gen.isDotNet();var n=[],w;for(w in a)if(n.push(w),"function"!=typeof a[w])try{var A=a[w];if(A){var r=gx.dom.byId(w);!r&&b&&(r=gx.dom.byId(b[w]));gx.lang.emptyObject(r)&&(l(document.body).append("<div id='"+
w+"'></div>"),r=gx.dom.byId(w));if(!gx.lang.emptyObject(r)){r.id&&(gx.fx.obs.deleteObserverByKey(r.id),gx.evt.removeHookByKey(r.id));gx.html.setInnerHtml(r,A,!1,m);var q=gx.fn.cmpContextFromCtrl(w),x=d(gx.fn.getHidden(q+"_CMPPGM"));t.push({type:q,name:x,html:A,container:r})}}}catch(C){v=!0,gx.dbg.logEx(C,"gxfrmutl.js","setJsonComponents")}}catch(C){v=!0,gx.dbg.logEx(C,"gxfrmutl.js","setJsonComponents")}0!=t.length&&!v||"function"!=typeof k?(a=l.map(t,function(C){return gx.fn.createComponentAsync(C,
f)}),l.when.apply(l,a).done(function(){k(n)})):k(n)},cmpRegexCache:{},getCmpRegex:function(a){var b=this.cmpRegexCache[a];this.cmpRegexCache[a]||(b=new RegExp("^"+a),this.cmpRegexCache[a]=b);return b},processCodeCallback:function(a,b,f,k,m,t){gx.fn.createComponentObj(a,b,k);gx.fn.setJsonHiddens(m,f);t.resolve()},createComponentAsync:function(a,b){var f=l.Deferred(),k=a.type,m=a.name,t=a.html;a=a.container;f.then(function(){gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])});try{var v=gx.O,
n=gx.fn.filterHiddens(gx.fn.getCmpRegex(k),b);gx.cache.codeLoaded(k+m)?(gx.fn.createComponentObj(m,k,a),gx.fn.setJsonHiddens(v,n),f.resolve()):(gx.cache.addInlineCode(k+m),gx.html.processCode(t,!1,gx.html.onTypeAvailable,[m,gx.fn.processCodeCallback,[m,k,n,a,v,f],0],m))}catch(w){gx.dbg.logEx(w,"gxfrmutl.js","createComponentAsync"),f.resolve()}return f},createComponentObj:function(a,b,f){a=gx.createComponent(a,b,f);null!=a&&gx.addComponent(a)},cleanAttachedCtrls:function(a){gx.attachedControls=[]},
getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,f=0;f<b;f++){var k=gx.attachedControls[f];if(k.id==a)return k}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(a){var b=gx.fn.attachedControls(),f=b.length,k=gx.O;a=a&&a.length?l.map(a,gx.fn.cmpContextFromCtrl):void 0;var m,t;for(t=0;t<f;t++){var v=b[t];if(!a||0<=l.inArray(v.info.wc,a)){var n=gx.setGxO(v.info.wc,v.info.mp);if(v.info.isPrompt&&n.isTransaction()&&
"DSP"==n.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(v.info.wc+v.info.id),"Visible",!1);else if(!v.attached){n=v.info.controls;var w=n.length;var A=[];for(m=0;m<w;m++){gx.fn.addAttach(n[m],v);var r=gx.fn.validStruct(n[m]);gx.fn.checkAttachedPropertyVS(r,"Visible",!1);gx.fn.checkAttachedPropertyVS(r,"Enabled",!1);A.push(r.fld)}v.attached=!0;l("#"+v.id).attr("data-gx-attached-ctrl",A.join(" "))}}}gx.setGxO(k)},addAttach:function(a,b){a=gx.fn.validStruct(a);void 0==a.attachedCtrls&&(a.attachedCtrls=
[]);a.attachedCtrls.push(b)},checkAttachedProperty:function(a,b,f){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,f)},checkAttachedPropertyVS:function(a,b,f){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var k=a.length,m=0;m<k;m++)gx.fn.checkAttachedControlProperty(a[m],b,f)},checkAttachedControlProperty:function(a,b,f){var k=a.info.id;a=a.info;var m=!0,t=a.controls;a=a.wc;for(var v=t.length,n=0;n<v;n++){var w=gx.fn.getCtrlProperty(a+gx.fn.validStruct(t[n]).fld,b);m=f?w==f:m&&w==f;if(f&&
m)break}m&&gx.fn.setCtrlPropertyImpl(gx.dom.el(a+k),b,f)},changeControlOpacity:function(a,b,f,k){var m=Math.round(k),t="";t="string"==typeof a?a:a.id;b>f?(gx.fn.setOpacity(b,t),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,f,k)},m)):b<f?(gx.fn.setOpacity(b,t),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,f,k)},m)):gx.fn.setOpacity(f,t)},setOpacity:function(a,b){var f=b;"string"==typeof b&&(f="body"==b?document.body:gx.dom.el(b));null!=f&&(b=f.style,f="reset"==a?"":a/100,b.opacity=
f,b.MozOpacity=f,b.filter="alpha(opacity="+("reset"==a?100:a)+")")},fadeControl:function(a,b,f){"in"==b?gx.fn.changeControlOpacity(a,0,100,f):gx.fn.changeControlOpacity(a,100,0,f)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(a,b){var f=document.documentElement,k=window.top.document.documentElement;f!=k&&gx.dom.getAttributeNames(k).filter(function(n){return n.startsWith("gx-data-")}).forEach(function(n){return f.setAttribute(n,k.getAttribute(n))});
var m=l(document.body),t="true"===m.attr("data-HasEnter"),v="true"===m.attr("data-Skiponenter");gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(n){gx.evt.onkeypress(n,t,v)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);l(document).on("keyup",function(n){gx.evt.onkeyup(n)});l(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(n){gx.evt.oncontrolvaluechanging(n)});
l(document).on("paste",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(n){gx.evt.oncontrolpasting(n)});null!=gx.pO&&(gx.pO.onload(a,b),gx.setGxO(gx.pO))},objectOnUnload:function(a){if(null!=gx.pO)gx.pO.onunload(a)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},objectPostback:function(a,b){null!=gx.pO&&(gx.pO.postbackLoad(a,b),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,
a,gx.O.IsMasterPage)},gridObj:function(a,b,f){return(a=gx.getObj(a,f))?a.getGrid(b):null},installComponents:function(a,b){var f=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=f){gx.gen.isDotNet();for(var k in f)if(a||!gx.pO.getWebComponent(k)){var m=d(f[k].toLowerCase());m=gx.createComponent(m,k);null!=m&&(gx.addComponent(m,b),setTimeout(function(t){this.addComponentRemoteFiles(t)}.closure(this,[m]),1))}}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},
datePickerFormat:function(a,b,f){var k=gx.dateFormat,m=k.substr(0,1),t=k.substr(1,1);k=k.substr(2,1);m=gx.fn.datePickerDateFormat(m,a);t=gx.fn.datePickerDateFormat(t,a);a=gx.fn.datePickerDateFormat(k,a);k=gx.fn.datePickerTimeFormat(b);return 0<f&&0<b?m+"/"+t+"/"+a+" "+k:0<f?m+"/"+t+"/"+a:k},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat;if(12==b){b="%I";var f=" %p"}else b=
24==b?"%H":"",f="";if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+f},installDatePicker:function(a,b,f,k,m,t,v,n,w,A){(new gx.ui.controls.datePicker({inputId:a,triggerId:a+"_dp_trigger",inline:k,inputType:m?"datetime":"date",weeksNumbers:t,mondayFirst:v,format:n,datePartLength:w,timePartLength:A,afterChange:gx.fn.datePickerChanged,vStruct:b,gxO:f})).render()},datePickerChanged:function(a,b,f,k,m){if(!a||a.dateClicked){m=m||gx.O;if("undefined"===typeof k){var t=gx.fn.controlIds(),
v=t.length;for(i=0;i<v;i++){k=gx.fn.validStruct(t[i]);var n=0!=k.grid?"_"+gx.fn.currentGridRow(k.grid):"";if(f.id==m.CmpContext+k.fld+n)break}}null!=k&&void 0!=k.dp&&(b=gx.date.isNullDate(b)?gx.date.nulldate_toc(k.len,k.dec):b.print(gx.fn.datePickerFormat(k.dp.pic,k.dp.dec,k.len)),b!=f.value&&(f.setAttribute("data-gxvalid","0"),f.value=b,f.onchange(),a&&a.callCloseHandler(),0<k.grid&&(gx.fn.getGridObj(k.grid)||k.gxgrid).setRowModified(gx.fn.currentGridRow(k.grid)),m.refreshDependantGrids(k)))}},toArray:function(a){if(gx.util.browser.isIE()&&
8>=gx.util.browser.ieVersion()){for(var b=[],f=0,k=a.length;f<k;f++)b[f]=a[f];return b}return Array.prototype.slice.call(a)},evalCtxScope:function(a,b){var f=gx.O;gx.setGxO(a);a=eval(b);a instanceof Object&&(a=gx.json.serializeJson(a));gx.setGxO(f);return a}}}(gx.$);
Function.prototype.closure=function(l,c,d){var g=gx.util.browser;if(g.isIE()&&8>g.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var a=this,b=l.__objId;b||(__objs[b=l.__objId=__objs.length]=l);var f=a.__funId;f||(__funs[f=a.__funId=__funs.length]=a);c||(c=[]);var k=c.__argsId;k||(__args[k=c.__argsId=__args.length]=c);c=a=l=null;return function(){if(__funs){var m=__args[k];!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(__args[k]));0==m.length&&0<arguments.length&&
(m=arguments);m=__funs[f].apply(__objs[b],m);if(__objs)try{delete __objs[b].__objId}catch(t){__objs[b].__objId=null}__funs&&delete __funs[f].__funId;__args&&delete __args[k].__argsId;return m}}}a=this;return function(){var m=c||arguments;!0===d&&(m=Array.prototype.slice.call(arguments,0),m=m.concat(c));return a.apply(l||window,m)}};
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(i in this.map){if(!l)return i;l==i&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){c.apply(l,
d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,g){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof g)try{g.call(l,retVal)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";
gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.isInteractive=!1;gx.isReady=!1;gx.getActiveContext=function(){var l=window;gx.popup.getPopup()&&gx.popup.getPopup().frameWindow&&(l=gx.popup.getPopup().frameWindow);return l};gx.isReadyUI_impl=function(l){return 1>l.gx.evt.userReadyCnt&&l.gx.evt.userReadyThresholdWait()&&l.gx.isInputEnabled()&&(l.gx.ajax.isFormEnabled()||null!=gx.popup.getPopup())};gx.isReadyUI=function(){return gx._isReadyUI()};gx._isReadyUI=function(){return gx.isReadyUI_impl(gx.getActiveContext())};
gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(l){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT,[],l)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(l,c,d,g){d[g]=function(a,b,f){f=f||[];l()?a.apply(b,f):gx.fx.obs.addObserver(c,b,a.closure(b,f),{single:!0})}};gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");
gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.isabsoluteurl=function(l){return-1!==l.search("://")};gx.isRelativeToHost=function(l){return"/"==l.substr(0,1)};
gx.absoluteurl=function(l){return gx.isabsoluteurl(l)?l:"/"!==l.charAt(0)?gx.util.resourceUrl(l,!0):location.protocol+"//"+location.host+l};gx.timeoutActions={ignore:0,warn:1};
gx.uc=function(l){var c=/^_gx_image_resource_/,d=function(g){if("string"===typeof g)return gx.util.imageUrl(g);Array.isArray(g)&&(g=g.map(function(k){return d(k)}));if("object"===typeof g)for(var a=$jscomp.makeIterator(Object.entries(g)),b=a.next();!b.done;b=a.next()){var f=$jscomp.makeIterator(b.value);b=f.next().value;f=f.next().value;g[b]=d(f)}return g};return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(g,a,b,f,k,m,t,v,n,w){try{var A=eval(f);gx.lang.inherits(A,gx.uc.UserControl,
!0);var r=new A(l)}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","getNew UserControl "+f),r=new gx.uc.UserControl}r.ContainerName=k;r.DesignContainerName=k;r.LabelForAttValue=g.CmpContext+m.toUpperCase()+(n?"_"+w:"");r.setupControl(g,m,t,a,b,v,n,w);return r},fromChild:function(g){var a=gx.pO.getUsercontrolFromChild(g);if(null!=a||gx.pO.hasMasterPage()&&(a=gx.pO.MasterPage.getUsercontrolFromChild(g),null!=a))return a;for(var b=gx.pO.WebComponents.length,f=0;f<b;f++)if(a=gx.pO.WebComponents[f].getUsercontrolFromChild(g),
null!=a)return a;return null},getUserControlObj:function(g){var a=gx.O.getUserControl(g);if(gx.lang.emptyObject(a)){if(gx.pO.hasMasterPage()&&(a=gx.pO.MasterPage.getUserControl(g),!gx.lang.emptyObject(a)))return a;for(var b=gx.pO.WebComponents.length,f=0;f<b&&(a=gx.pO.WebComponents[f].getUserControl(g),gx.lang.emptyObject(a));f++);}return a},CtrlId:function(g){return g.replace(/Container$/,"")},userControlContainerId:function(g){var a=g+"Container";if(0<=g.indexOf("ContainerDiv"))return g;var b=gx.O.getValidStructFld(g);
b&&b.uc&&(a=b.uc.ContainerName);return a&&(b=g.lastIndexOf("_"),-1!=b&&(g=a+g.substring(b),null!=gx.dom.byId(g)))?g:a},setProperties:function(g,a){g=gx.uc.getUserControlObj(gx.uc.userControlContainerId(g));if(null!=g)if(void 0!=a.length)for(var b=a.length,f=0;f<b;f++)for(var k in a[f]){var m=a[f][k];g[k]=m}else for(k in a)m=a[k],g[k]=m},isUserControl:function(g,a){a=a||gx.O;return gx.lang.emptyObj(a.UserControls)?!1:g instanceof gx.uc.UserControl?!0:(g=gx.dom.byId(gx.uc.userControlContainerId(g)))&&
"DIV"===g.tagName&&gx.dom.hasClass(g,gx.uc.gxCssClass)?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(g){l.each(g&&g.Scripts||[],function(a,b){PostRenderScripts[b]=b})},EndRender:function(){var g=gx.lang.objToArray(PostRenderScripts);g=l.map(g,function(a){return gx.util.resourceUrl(gx.util.resolveUrl(a),!1)});gx.http.loadScripts(g,gx.emptyFn,0,!0)},isImageResourcePty:function(g){return gx.text.startsWith(g,"_gx_image_resource_")},getComputedImagePath:function(g){try{var a=
getComputedStyle(document.documentElement).getPropertyValue("--GX-Image_"+g)||"";if(a=a.replaceAll("\\","").replace(/\s*url\((.+?)\)/,"$1"))gx.uc.UserControl.theme_el=gx.uc.UserControl.theme_el||gx.getThemeElement(),a=(new URL(a,gx.uc.UserControl.theme_el.href.toString())).toString()}catch(b){}return a},getClientProperty:function(g,a){var b=a,f=g;gx.uc.isImageResourcePty(g)&&(f=g.replace(c,""),b=gx.uc.getComputedImagePath(a));return{name:f,value:b}},UserControl:function(){this.ParentObject=null;this.GridRow=
this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.IsPostBack=this.RealControl=this.C2ShowFunction=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+
").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(g){var a=""!=this.GridRow?"_"+this.GridRow:"",b=this.DesignContainerName+this.ControlName+"_"+g+a;b=gx.dom.byId(b);b||(b=this.DesignContainerName+g+a,b=gx.dom.byId(b));return b};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(g,a,b,f,k,m,t,v){this.ParentObject=g;this.ControlName=
a;this.ControlId=f;this.LastIdBefore=k;this.ControlLvl=void 0!=m?m:0;this.GridId=void 0!=t?t:0;this.GridRow=void 0!=v?v:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var n=v||"_norow",w=this.ParentObject.GXValidFnc[this.ControlId];w||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:b,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl},w=this.ParentObject.GXValidFnc[this.ControlId]);w=this.ParentObject.GXValidFnc[this.ControlId];
w.ucInstances=w.ucInstances||{};w.ucInstances[n]=this;w.getUCInstance=function(A){A=A||n;return w.ucInstances[A]}};this.addValidFunction=function(g,a,b){this.ValidFunctions.push(g);this.ParentObject.addUsercontrolBinding(a,b+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var g=this.ValidFunctions.length,a,b=0;b<g;b++)if((a=this.ValidFunctions[b])&&!a.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};
this.attachEvents=function(){try{var g=this.getContainerControl();if(gx.lang.emptyObject(document.frames))g.onfocus=this.onfocus,this.RealControl=g;else{var a=document.frames.length;if(0<a){var b=0;for(b=0;b<a;b++){var f=document.frames[b];if(1==gx.dom.isChildNode(f,g)){f.frameElement.onfocus=this.onfocus;this.RealControl=f.frameElement;break}}}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,
this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(g){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=
g};this.createWebComponent=function(g,a,b,f,k){this.ParentObject.createWebComponent(g,a,b,this.GridRow,f,k)};this.deleteWebComponent=function(g){g=gx.fn.cmpContextFromCtrl(g);this.ParentObject.deleteComponent(g)};this.notifyContext=function(g,a){gx.fx.ctx.notify(null,g,a)};this.addV2CFunction=function(g,a,b,f){if("function"==typeof g){var k=a;this.V2CFunctions.push(g);var m=gx.fn.getVarControlMap(this.ParentObject,k);void 0!==m&&this.ParentObject.addUsercontrolBinding(m,k,this)}else m=g,k=a,this.ParentObject.addUsercontrolBinding(m,
k,this),this.V2CFunctions.push(function(t,v,n){var w=k;n&&(v&&(w=k+"_"+v),f?t.ParentObject[m][f]=gx.fn.getControlValue(w)[f]:t.ParentObject[m]=gx.fn.getControlValue(w));v=f?t.ParentObject[m][f]:t.ParentObject[m];t.useGxDateForBindings&&(n=gx.fn.getVarControlMapForVar(m),"date"!==n.type&&"dtime"!==n.type||"string"!==typeof v||(v=t.IsPostBack?new gx.date.gxdate(v):new gx.date.gxdate(v,"Y4MD")));t[b](d(v))})};this.addC2VFunction=function(g){this.C2VFunctions.push(g)};this.setC2ShowFunction=function(g){this.C2ShowFunction=
g};this.execV2CFunctions=function(g){var a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var b,f=this.V2CFunctions,k=f.length;for(b=0;b<k;b++)try{f[b](this,this.GridRow,g)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=a};this.execC2VFunctions=function(){var g=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;var a,b=this.C2VFunctions,f=b.length;for(a=0;a<f;a++)try{b[a](this,this.GridRow)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=
g};this.sdtV2c=function(g,a,b,f,k){if(null!==a){if(a=parseInt(a,10)-1,void 0!==this.ParentObject[g][a])this[k](this.ParentObject[g][a][b])}else this.ParentObject[g]=gx.fn.getControlValue(f,null,this.ParentObject),this[k](this.ParentObject[g][b])};this.sdtC2v=function(g,a,b,f,k){null!==a?(a=parseInt(a,10)-1,this.ParentObject[g][a][b]=this[k]()):this.ParentObject[g][b]=this[k]();gx.fn.setControlValue(f,this.ParentObject[g])};this.execShowFunction=function(){!1===this.IsPostBack&&(this.IsPostBack=!0);
null===this.IsPostBack&&(this.IsPostBack=!1);var g=this.getContainerControl();try{null!=this.C2ShowFunction&&g&&this.C2ShowFunction(this)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execShowFunction")}if(g){if(this.autoToggleVisibility){var a=l(g).add("label[for='"+this.LabelForAttValue+"']");gx.lang.gxBoolean(this.Visible)?a.show():a.hide()}gx.plugdesign.applyTemplateObject({selector:"#"+g.id,templateSelector:function(b){return!0===b.onDemandInvoke}})}gx.uc.pushPostRenderScripts(this)};this.updateAndShow=
function(g){try{this.execV2CFunctions(g)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","updateAndShow")}g&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(g){var a=this.ParentObject,b=a.IsMasterPage?"_MPAGE":"";g=this.ControlName.toUpperCase()+b+"."+g.toUpperCase()+b;if(g=a.getClientEventName(g))return a.isServerEvent(g);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(g,a,b){gx.evt.setReady(!1,"eventHandler");
var f=gx.O;gx.setGxO(this.ParentObject);if(0<g){var k=this.DesignContainerName,m=(new RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$")).exec(this.DesignContainerName);m&&m[1]&&(k=m[1]);this.ParentObject[k]=this;(g=this.ParentObject.getGridById(g))&&g.instanciateRow(a)}this.execC2VFunctions();b.call(this.ParentObject,this.getEventRow()).always(function(t){gx.setGxO(t);gx.evt.setReady(!0,"eventHandler")}.closure(this,[f]));gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(g,a){this[g]=
function(b){var f=this.isServerEvent(g);f&&"function"===typeof b&&gx.fx.obs.addObserver("gx.onafterevent",this,b,{single:!0});this.eventHandler(this.GridId,this.GridRow,a);f||"function"!==typeof b||b.call(this)}.closure(this)};this.addProperty=function(g,a){this.Properties[g]=a};this.setProp=function(g,a,b,f){this.addProperty(g,a);this.PropTypes[g]=f;gx.lang.isBooleanType(f)?this[g]=gx.lang.gxBoolean(b):"color"==f?gx.lang.emptyObject(b)||(this[g]="number"==typeof b||"string"==typeof b?gx.color.html(b):
b):gx.lang.isNumericType(f)?gx.lang.emptyObject(b)||(this[g]=gx.num.parseFloat(b)):this[g]=b};this.setDynProp=function(g,a,b,f,k){this.addProperty(g,a);this.DynProperties.push(g);this.PropTypes[g]=f;var m=function(){var t=this.getDynPropertyValueFromHidden(g,a);void 0===t&&(t=b);this.setProp(g,a,t,f)};k?m.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(t){t===this.ParentObject&&m.call(this)}):gx.wr(m,this)};this.refreshDynProperties=function(){for(var g=
0,a=this.DynProperties.length;g<a;g++){var b=this.DynProperties[g];this[b]=this.getDynPropertyValueFromHidden(b,this.Properties[b])}};this.getDynPropertyValueFromHidden=function(g,a){var b=gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+a))||gx.fn.getHidden(this.getHiddenName("_gx_image_resource_"+a.toLowerCase()));if(b)try{b=gx.uc.getClientProperty("_gx_image_resource_"+g,b).value}catch(f){b=""}else b=gx.fn.getHidden(this.getHiddenName(a)),void 0===b&&(b=gx.fn.getHidden(this.getHiddenName(g)));
return b};this.setGridProperties=function(){for(var g,a=this.ParentObject.getGridUCProperties(this.ControlName),b=a.length,f=0;f<b;f++){var k=a[f],m=k.v;g=this.getHiddenName(k.h);g=gx.fn.getHidden(g);if(void 0===m||void 0!==g)m=g,"color"==k.t&&(m=gx.color.html(m));this.setProp(k.p,k.h,m,k.t)}};this.setGridEventHandlers=function(){for(var g=this.ParentObject.getGridUCEventHandlers(this.ControlName),a=g.length,b=0;b<a;b++){var f=g[b];this.addEventHandler(f.e,f.h)}};this.getHiddenName=function(g){var a=
"",b=this.ControlName.toUpperCase();""!=this.GridRow&&(a="_"+this.GridRow,this.ownerGrid&&(b=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+b+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+g+a};this.saveProperties=function(){for(var g in this.Properties)if(this.hasOwnProperty(g)){var a=this[g];"function"!=typeof this.Properties[g]&&("undefined"!=typeof a&&"undefined"!=typeof a.R&&"undefined"!=typeof a.G&&"undefined"!=typeof a.B&&(a=gx.color.rgb(a.R,a.G,a.B)),gx.lang.isBooleanType(this.PropTypes[g])&&
(a=a?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[g]),a))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));window.$.fn&&window.$.fn.jquery?gx.dbg.write("global $ is jquery"+window.$.fn.jquery):gx.dbg.write("Warning: $ is not a jQuery object instance");
(function(l,c,d){function g(){return"function"!==typeof c.createElement?c.createElement(arguments[0]):C?c.createElementNS.call(c,"http://www.w3.org/2000/svg",arguments[0]):c.createElement.apply(c,arguments)}function a(y){return y.replace(/([a-z])-([a-z])/g,function(B,E,I){return E+I.toUpperCase()}).replace(/^-/,"")}function b(y,B){return function(){return y.apply(B,arguments)}}function f(y){return y.replace(/([A-Z])/g,function(B,E){return"-"+E.toLowerCase()}).replace(/^ms-/,"-ms-")}function k(y,B,
E,I){var L=g("div");var M=c.body;M||(M=g(C?"svg":"body"),M.fake=!0);if(parseInt(E,10))for(;E--;){var O=g("div");O.id=I?I[E]:"modernizr"+(E+1);L.appendChild(O)}E=g("style");E.type="text/css";E.id="smodernizr";(M.fake?M:L).appendChild(E);M.appendChild(L);E.styleSheet?E.styleSheet.cssText=y:E.appendChild(c.createTextNode(y));L.id="modernizr";if(M.fake){M.style.background="";M.style.overflow="hidden";var R=x.style.overflow;x.style.overflow="hidden";x.appendChild(M)}y=B(L,y);M.fake?(M.parentNode.removeChild(M),
x.style.overflow=R):L.parentNode.removeChild(L);return!!y}function m(y,B){var E=y.length;if("CSS"in l&&"supports"in l.CSS){for(;E--;)if(l.CSS.supports(f(y[E]),B))return!0;return!1}if("CSSSupportsRule"in l){for(var I=[];E--;)I.push("("+f(y[E])+":"+B+")");I=I.join(" or ");return k("@supports ("+I+") { #modernizr { position: absolute; } }",function(L){if("getComputedStyle"in l){L=getComputedStyle.call(l,L,null);var M=l.console;null!==L?L=L.getPropertyValue("position"):M&&M[M.error?"error":"log"].call(M,
"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else L=L.currentStyle&&L.currentStyle.position;return"absolute"==L})}return d}function t(y,B,E,I){function L(){O&&(delete u.style,delete u.modElem)}I="undefined"===typeof I?!1:I;if("undefined"!==typeof E){var M=m(y,E);if("undefined"!==typeof M)return M}for(M=["modernizr","tspan","samp"];!u.style&&M.length;){var O=!0;u.modElem=g(M.shift());u.style=u.modElem.style}var R=y.length;for(M=0;M<R;M++){var P=y[M];var Y=
u.style[P];~(""+P).indexOf("-")&&(P=a(P));if(u.style[P]!==d){if(I||"undefined"===typeof E)return L(),"pfx"==B?P:!0;try{u.style[P]=E}catch(W){}if(u.style[P]!=Y)return L(),"pfx"==B?P:!0}}L();return!1}function v(y,B,E,I,L){var M=y.charAt(0).toUpperCase()+y.slice(1),O=(y+" "+G.join(M+" ")+M).split(" ");if("string"===typeof B||"undefined"===typeof B)return t(O,B,I,L);O=(y+" "+F.join(M+" ")+M).split(" ");a:{y=O;for(var R in y)if(y[R]in B){if(!1===E){B=y[R];break a}R=B[y[R]];if("function"===typeof R){B=
b(R,E||B);break a}B=R;break a}B=!1}return B}function n(y,B,E){return v(y,d,d,B,E)}var w=[],A=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(y,B){var E=this;setTimeout(function(){B(E[y])},0)},addTest:function(y,B,E){A.push({name:y,fn:B,options:E})},addAsyncTest:function(y){A.push({name:null,fn:y})}},q=function(){};q.prototype=r;q=new q;q.addTest("history",function(){var y=navigator.userAgent;return-1===y.indexOf("Android 2.")&&-1===
y.indexOf("Android 4.0")||-1===y.indexOf("Mobile Safari")||-1!==y.indexOf("Chrome")||-1!==y.indexOf("Windows Phone")||"file:"===location.protocol?l.history&&"pushState"in l.history:!1});var x=c.documentElement,C="svg"===x.nodeName.toLowerCase(),F=r._config.usePrefixes?["moz","o","ms","webkit"]:[];r._domPrefixes=F;var G=r._config.usePrefixes?["Moz","O","ms","Webkit"]:[];r._cssomPrefixes=G;var p={elem:g("modernizr")};q._q.push(function(){delete p.elem});var u={style:p.elem.style};q._q.unshift(function(){delete u.style});
r.testProp=function(y,B,E){return t([y],d,B,E)};r.testAllProps=v;r.testAllProps=n;q.addTest("flexbox",n("flexBasis","1px",!0));q.addTest("csstransitions",n("transition","all",!0));(function(){var y,B;for(B in A)if(A.hasOwnProperty(B)){var E=[];var I=A[B];if(I.name&&(E.push(I.name.toLowerCase()),I.options&&I.options.aliases&&I.options.aliases.length))for(y=0;y<I.options.aliases.length;y++)E.push(I.options.aliases[y].toLowerCase());I="function"===typeof I.fn?I.fn():I.fn;for(y=0;y<E.length;y++){var L=
E[y];L=L.split(".");1===L.length?q[L[0]]=I:(!q[L[0]]||q[L[0]]instanceof Boolean||(q[L[0]]=new Boolean(q[L[0]])),q[L[0]][L[1]]=I);w.push((I?"":"no-")+L.join("-"))}}})();(function(y){var B=x.className,E=q._config.classPrefix||"";C&&(B=B.baseVal);q._config.enableJSClass&&(B=B.replace(new RegExp("(^|\\s)"+E+"no-js(\\s|$)"),"$1"+E+"js$2"));q._config.enableClasses&&(B+=" "+E+y.join(" "+E),C?x.className.baseVal=B:x.className=B)})(w);delete r.addTest;delete r.addAsyncTest;for(r=0;r<q._q.length;r++)q._q[r]();
l.Modernizr=q})(window,document);
gx.spa=function(l){var c=/<head[^>]*>([\s\S]*?)<\/head>/i,d=/(<body[^>]*>[\s\S]*?<\/body>)/i,g=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,b=/#/,f=!1,k=!1,m=window.location.href,t=!0,v={},n,w;"state"in window.history&&(t=!1);gx.wpo(function(){gx.pO.fullAjax&&(gx.cache.exceptionsRegEx=/messages\..+\.js/)},this);var A=function(){f||k||this.notify("onnavigatecomplete")};return{timeout:-1,setTimeout:function(r){this.timeout=r},isSameApp:function(r,q){var x=r.port===q.port;x=(x=x||""===r.port&&"http:"===
r.protocol&&"80"===q.port)||""===r.port&&"https:"===r.protocol&&"443"===q.port;return r.protocol===q.protocol&&r.hostname===q.hostname&&x},handleClick:function(r){var q=this.getTarget(r),x;if(q&&"A"===q.tagName.toUpperCase()&&null!==q.getAttribute("href")&&void 0!==q.getAttribute("href")&&!(q.target&&("_blank"==q.target||"_parent"==q.target&&window.parent!=window||"_top"==q.target&&window.top!=window||"_"!=q.target.substr(0,1)&&window.name!=q.target)||1<r.which||r.metaKey||r.ctrlKey)){var C=this.parseUrl(q.href);
if(this.isSameApp(location,C)){var F="/"==C.pathname.charAt(0)?C.pathname:"/"+C.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===F.substring(0,F.lastIndexOf("/"))&&!(0<=C.href.search(b)&&C.href.replace(a,"")===location.href.replace(a,""))&&""!==q.getAttribute("href")&&0!==q.href.indexOf("javascript:"))if(this.ignoreClick)this.ignoreClick=!1;else{C=l(q);for(x in v)if(v.hasOwnProperty(x)&&C.is(x))return;this.navigate({url:q.href,push:!0,scrollTo:!0,direction:"forward"});
r.preventDefault()}}}},redirect:function(r,q){delete gx.referrer;q=void 0===q||q;var x=this.parseUrl(r),C="/"==x.pathname.charAt(0)?x.pathname:"/"+x.pathname;this.isSameApp(location,x)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==C.substring(0,C.lastIndexOf("/"))?window.location=r:(gx.referrer=location.href,this.navigate({url:r,push:q,scrollTo:!0,direction:"forward"})):window.location=r},setLocation:function(r){this.setStopNavigating(r);window.location=r},canNavigate:function(){return!f&&
!k},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return f},cancelNavigating:function(){f=!1},setStopNavigating:function(r){f=!1;this.notify("onnavigate",[r])},navigate:function(r){var q,x,C=r.url,F=!1;this.canNavigate()?(f=!0,this.notify("onbeforenavigate",[C]),(x=this.request)&&4>x.readyState&&(x.onreadystatechange=gx.emptyFn,gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+x.readyState),x.abort()),this.request=x=gx.http.doCall({method:"GET",
url:C,handler:function(G,p,u){G=u.getResponseHeader("X-SPA-REDIRECT-URL");var y=u.getResponseHeader("X-GXOBJECT");F||(q&&clearTimeout(q),530==u.status?this.setLocation(C):G?(this.setStopNavigating(G),setTimeout(gx.spa.redirect.closure(gx.spa,[G]),100)):(r.push&&0<x.readyState&&y&&(this.updateState(),this.state=this.createState(r),window.history.pushState(null,"",x.responseURL||C)),this.processResponse.call(this,p,u,r)))},beforeSend:function(G){this.notify("onbeforesend",[this.createEvent(G,C),"X-SPA-REQUEST",
"X-SPA-MP"]);0<this.timeout&&(q=setTimeout(this.timeoutHandler.closure(this,[G,C]),this.timeout));G.setRequestHeader("X-SPA-REQUEST","1")},offline:function(){q&&clearTimeout(q);F=!0;f=!1},error:function(G){G=this.createEvent(G,C);G.cancel=!0;this.notify("onerror",[G]);G.cancel&&this.setLocation(C)},ajaxHeader:!1,avoidCache:!1,handleAllStatusCodes:!0,obj:this}),this.notify("onnavigatestart",[C])):this.setLocation(C)},processResponse:function(r,q,x){try{var C=x.url;var F=this.parseUrl(C).hash,G=x.direction,
p=q.status,u=q.getResponseHeader("X-GXOBJECT"),y=q.getResponseHeader("X-SPA-RETURN"),B=q.getResponseHeader("X-SPA-RETURN-MD"),E=this.createEvent(q,C),I=gx.pO.MasterPage,L=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",M=q.getResponseHeader("X-SPA-MP")||"",O=!(""===L||L.toLowerCase()!=M.toLowerCase()),R=this.getContentPlaceholder();if(null!==y)gx.fn.closeWindowServerScript(y,B,!0);else if(500===p)window.history.pushState(null,"",C),this.cancelNavigating(),gx.dom.writeError(q.responseText,gx.getMessage("GXM_runtimeappsrv"),
p);else if(u){this.notify("onbeforeprocessresponse",[E,r,u,L,M,O]);var P=this.extractContents(q,!O),Y=O?R.firstChild:document.body,W=P.body;P.body?(this.state=this.createState(x),x.push&&window.history.replaceState(this.state,"",q.responseURL||C),P.title&&(document.title=P.title),this.notify("onbeforecontentreplace",[q,C,P]),gx.cache.removeRemoteFile(gx.getThemeElement().href),gx.dom.replaceWithFx(Y,W,{domRemove:!1,domAdd:O,enteringClass:"forward"==G?"entering":"leaving",leavingClass:"forward"==G?
"leaving":"entering",enterDurationClass:"forward"==G?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:"forward"==G?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){W=this.replaceContentCallback(q,C,F,r,R,P,Y,W,x,u,I,L,M,O);O||gx.html.processCode(P.rawHtml||P.head.innerHTML+P.body.innerHTML,!1,this.processCodeCallback.closure(this,[q,C,F,r,R,P,Y,W,x,u,I,L,M,O]),null,null,!1,!0);k=!1;this.notify("ontransitionend",[E,I,L,M,O]);this.recoverScrollPosition(x);
return W}.closure(this),beforeTransitionStart:function(Z){k=!0;if(O)return gx.html.processCode(r,!1,function(){Z&&Z();this.processCodeCallback(q,C,F,r,R,P,Y,W,x,u,I,L,M,O)}.closure(this),null,null,!1),!0}.closure(this)})):this.setLocation(C)}else this.setLocation(C)}catch(Z){gx.dbg.logEx(Z,"gxspa.js","processResponse"),this.setLocation(C)}},replaceContentCallback:function(r,q,x,C,F,G,p,u,y,B,E,I,L,M){if(M)p.parentNode&&(this.dettachContent(p),p.parentNode.removeChild(p));else{if(gx.util.browser.isWebkit()||
gx.util.browser.isFirefox()){this.dettachContent(document.body);l(document.body).remove();var O=document.createElement("body");r=l(u).prop("attributes");l.each(r,function(){l(O).attr(this.name,this.value)});document.documentElement.appendChild(O);O.innerHTML=u.innerHTML;u=O}else document.body=u,u=document.body;document.head=G.head}return u},processCodeCallback:function(r,q,x,C,F,G,p,u,y,B,E,I,L,M){r=this.createEvent(r,q);try{this.notify("oncontentreplace",[r,C,G,B,E,I,L,M])}catch(O){gx.dbg.logEx(O,
"gxspa.js","processCodeCallback"),this.setLocation(q)}C=!0;y.scrollTo&&(window.scrollTo(0,0),C=!1);y.push&&window._gaq&&_gaq.push(["_trackPageview"]);y.push&&window.ga&&window.ga("send","pageview",location.pathname);""!==x&&(G=this.parseUrl(q),G.hash=x,window.history.replaceState(this.state,"",G.href),x=gx.dom.el(G.hash))&&(x.scrollIntoView(!0),C=!1);this.setStopNavigating(q);C&&this.recoverScrollPosition(y)},timeoutHandler:function(r,q){var x=this.createEvent(r,q);x.cancel=!0;this.notify("ontimeout",
[x]);x.cancel&&(r.abort(),gx.dbg.logMsg("Request cancelled - timeout expired: "+r.readyState),this.setLocation(q))},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(r,q){var x=document.createElement("div"),C={},F,G;if(q){x=document.createElement("iframe");x.src="about:blank";x.style.display="none";document.body.appendChild(x);q=r.responseText.match(c);1<q.length&&(F=q[1]);q=r.responseText.match(d);0<q.length&&(G=q[0]);q=r.responseText.match(g);
1<q.length&&(C.title=q[1]);x.contentDocument&&null==x.contentDocument.body&&x.contentDocument.write("<body></body>");x.contentDocument.body.outerHTML=G;var p=x.contentDocument.head;p.innerHTML=F;l("head script").each(function(u,y){l(p).find("script").each(function(B,E){null===y.getAttribute("data-gx-external-script")?y.src==E.src&&p.removeChild(E):l(y).remove()})});C.body=x.contentDocument.body;C.head=p;C.rawHtml=p.innerHTML+G}else{gx.html.setInnerHtml(x,r.responseText,!1,!1,!1);r=gx.dom.byClass("gx-content-placeholder",
"div",x);if(0===r.length)return C;C.body=r[0].firstChild;r=gx.dom.byTag("title",x);0<r.length&&(C.title=r[0].innerText||r[0].textContent)}return C},handlePopState:function(r){if(r.state){r=r.state;this.getContentPlaceholder();if(r&&"gx-spa"==r.source){if(t&&m==r.url||this.state.url===r.url)return;this.navigate({id:r.id,url:r.url,push:!1,scrollPosition:r.scrollPosition,direction:this.state.id<r.id?"forward":"back"})}gx.popup.ispopup()&&gx.fn.cancelWindow()}},parseUrl:function(r){var q=document.createElement("a");
q.href=r;return q},createEvent:function(r,q){return{req:r,url:q,cancel:!1}},addIgnoredSelector:function(r){v[r]=!0},removeIgnoredSelector:function(r){delete v[r]},recoverScrollPosition:function(r){var q=r.scrollPosition;this.canNavigate()&&!r.scrollTo&&q&&window.scrollTo(q.x,q.y)},dettachContent:function(r){var q=gx.dom.getActiveElement();q&&l.contains(r,q)&&gx.dom.purgeElement(q)},updateState:function(){var r=this.state;r.url=location.href;r.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(r,
"",r.url)},createState:function(r){r=r||{};return{id:r.id||(new Date).getTime(),source:"gx-spa",url:r.url}},getTarget:function(r){return r.target&&"A"==r.target.tagName?r.target:gx.dom.findParentByTagName(r.target,"A")},applyConfig:function(r){if(r&&r.listeners)for(var q in r.listeners){var x=r.listeners[q];"function"==typeof x&&this.addObserver(q,r.listeners.scope||this,x)}},setBodyClass:function(){var r="Form",q=document.body;q.className&&(r=q.className.split(" ")[0]);gx.dom.hasClass(q,r+"-fx")||
gx.dom.addClass(q,r+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?!1:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(r){this.isSupported()&&!this.started&&(this.applyConfig(r),n=this.handleClick.closure(this),w=this.handlePopState.closure(this),document.addEventListener("click",n,!1),window.addEventListener("popstate",w,!1),this.state=this.createState({url:location.href}),window.history.replaceState(this.state,
document.title),this.setBodyClass(),this.started=!0,this.addObserver("onnavigate",this,A),this.addObserver("ontransitionend",this,A))},stop:function(){this.started&&(document.removeEventListener("click",n,!1),window.removeEventListener("popstate",w,!1),this.started=!1)}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};
gx.core.analytics=function(l){return{supported:function(){return"undefined"===typeof window.ga?(console.log("Google Analytics - GA not enabled on this webpage"),!1):!0},trackView:function(c){this.supported()&&window.ga("send","pageview",c)},trackEvent:function(c,d,g,a){this.supported()&&window.ga("send",{hitType:"event",eventCategory:c,eventAction:d,eventLabel:g,eventValue:a})},trackPurchase:function(c){var d=function(f,k,m,t,v){if(t&&gx.lang.emptyObject(m)&&null==v)return console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",
k),!1;gx.lang.emptyObject(m)&&t&&(m=v);return gx.lang.emptyObject(m)?!1:(f[k]=m,!0)};if(this.supported()){window.ga("require","ecommerce");var g={},a=0;if(d(g,"id",c.TransactionId,!0)){d(g,"affiliation",c.Affiliation);d(g,"revenue",c.Revenue);d(g,"shipping",c.Shipping);d(g,"tax",c.Tax);d(g,"currency",c.CurrencyCode);window.ga("ecommerce:addTransaction",g);for(a=0;a<c.Items.length;a++){g=c.Items[a];var b={};d(b,"id",c.TransactionId,!0)&&d(b,"name",g.Name,!0)&&(d(b,"sku",g.Id),d(b,"category",g.Category),
d(b,"price",g.Price),d(b,"quantity",g.Quantity),d(b,"currency",g.CurrencyCode),window.ga("ecommerce:addItem",b))}window.ga("ecommerce:send")}}},setUserId:function(c){this.supported()&&window.ga("set","userId",c)}}}(gx.$);
gx.core.audio=function(l){var c,d=[],g=[];return{supported:function(){return!(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion())},getSoundVar:function(a){return 2==a?g:d[a]},playBackground:function(a){this.play(a,1)},play:function(a,b){c=!0;2!=b&&this.stop(b);3==b&&(this.stop(2),this.pauseSound(this.getSoundVar(1)));2==b&&this.stop(3);this.playSound(b,a).always(function(){3==b&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(a,b){var f=l.Deferred();this.supported()?
(b=new Howl({src:[b],html5:!0,onplay:function(){},onend:function(){f.resolve()},onstop:function(){f.resolve()},onpause:function(){f.resolve()}}),b.play()):(b=l("<bgsound/>").attr({id:"gxIE7AudioSound_"+a,loop:"0",src:b}),l("body").append(b));d[a]=b;2==a&&g.push(b);return f.promise()},stop:function(a){if(a){var b=this.getSoundVar(a);this.stopSound(b);d[a]=null}else this.stopSound(this.getSoundVar(3)),this.stopSound(this.getSoundVar(2)),this.stopSound(this.getSoundVar(1))},stopSound:function(a){var b=
this.supported();a=gx.lang.isArray(a)?a:[a];l.map(a,function(f,k){f=a[k];!b&&f&&(l(f).attr("src",""),l(f).remove(),f=void 0);f&&f.stop&&f.stop()})},pauseSound:function(a){this.supported()&&a&&a.pause&&a.pause()},resumeSound:function(a){this.supported()&&a&&a.play&&a.play()},isPlaying:function(a){if(this.supported())return a?this.isPlaying_impl(this.getSoundVar(a)):this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1))},isPlaying_impl:function(a){var b,
f=!1;a=gx.lang.isArray(a)?a:[a];for(var k=0;k<a.length;k++)(b=a[k])&&(f=f||b.playing())},_deinit:function(){c&&(this.stop(3),this.stop(2));c=!1}}}(gx.$);gx.core.pwa=function(l){var c;window.addEventListener("beforeinstallprompt",function(d){c=d;c.userChoice.then(function(g){gx.fx.obs.notify("gx.pwa.onpromptchoice",[g.outcome]);c=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")});return{showPrompt:function(){c&&c.prompt()}}}(gx.$);
gx.core.ds=function(l){return{setOption:function(c,d){document.documentElement.setAttribute("gx-data-"+c,d)},clearOption:function(c){document.documentElement.removeAttribute("gx-data-"+c)}}}(gx.$);
gx.core.clientSocket=function(l){var c,d,g=0;window.addEventListener("unload",function(k){d&&d.close()});var a=function(k){gx.fx.obs.notify("gx.core.clientsocket.onmessagereceived",[k])},b=function(){g=1;gx.fx.obs.notify("gx.core.clientsocket.onconnect",[void 0])},f=function(){g=0;gx.fx.obs.notify("gx.core.clientsocket.onconnectfailed",[void 0])};return{open:function(k){if(1===g)gx.dbg.logDebug("gx.core.clientSocket - WebSocket already connected");else{c="clientSocket_"+k;try{if(this.attachHandlers(c),
k)d=new gx.webSocket({wsURL:k,namespace:c});else{var m=gx.fn.getHidden("GX_WEBSOCKET_PORT"),t=gx.basePath&&0<gx.basePath.length?"/":"";d=new gx.webSocket({port:m,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:m?location.hostname+":"+m+"/":location.host+"/",resourceUrl:t+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:c})}}catch(v){gx.dbg.logEx(v,"genexus-core.js","Could not initialize WebSocket Client")}}},
close:function(){this.detachHandlers(c);try{d&&d.close()}catch(k){}g=0},send:function(k){1===g?d.send(k):gx.dbg.logDebug("gx.core.clientSocket - WebSocket is disconnected")},attachHandlers:function(k){gx.fx.obs.addObserver("gx.ws.onMessage."+k,this,a,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onOpen."+k,this,b,{single:!1,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onError."+k,this,f,{single:!1,doNotDelete:gx.O.IsMasterPage})},detachHandlers:function(k){gx.fx.obs.deleteObserver("gx.ws.onMessage."+
k,this,a);gx.fx.obs.deleteObserver("gx.ws.onOpen."+k,this,b);gx.fx.obs.deleteObserver("gx.ws.onError."+k,this,f)}}}(gx.$);
(function(l){var c=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,d=function(r){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(r))},g=function(r,q){r=l(r).parent().find("span");gx.lang.gxBoolean(q)?r.parent("p").hide():(r.removeClass("form-control"),q=r.parent("p"),0===q.length?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",r[0],{checkInclusion:!0}):q.show())},a=function(r,q){var x=l(".gx-form-group[data-gx-for='"+gx.dom.id(r)+"']");0===x.length&&(x=l(r).parents("div.gx-attribute").first());
gx.lang.gxBoolean(q)?x.show():x.hide()},b=function(r,q){q=q.trim();r=gx.html.getFieldLabel(r);q=q.split(" ").join("Label ")+(q?"Label":"");if(r){var x=(x=r.className.match(c))?x.join(" ")||"":"";q=["gx-label",x,q,"control-label"].join(" ");r.className!==q&&(r.className=q)}};d({name:"labels",selector:"div.gx-form-group:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(r,q){q=l(q).find("label.gx-label").addClass("control-label");r.labelEl=q[0];return r},
listeners:{control:function(r){return l(r.labelEl).attr("for")},after:{Class:b}}});d({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(r){(r=l("#"+r.id)[0])&&b(r,r.className.replace("form-control",""))},listeners:{control:function(r){return r.id},after:{Enabled:g,Visible:a}}});d({name:"readonly-atts-vars",selector:'.gx-attribute span[data-gx-readonly],span[class^="Readonly"]:not(:has(input[type="radio"], input[type="checkbox"]))',
template:'<p class="form-control-static">{{{outerHTML}}}</p>',outerHTML:!0,listeners:{control:function(r){return r.id},after:{Visible:function(r,q){var x=l(r).parent("p");gx.lang.gxBoolean(q)?x.show():x.hide();a(r,q)}}}});d({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+
'"><span class="glyphicon glyphicon-eye-open"></span></button></span></div>',setContext:function(r,q){r.inputEl=q;return r},initialize:function(r){var q=l("#"+r.id),x=l("#"+r.id)[0];q.next().on("click",function(){gx.fn.setCtrlProperty(x.id,"Ispassword","password"!=x.type)})},listeners:{control:function(r){return r.id},after:{Visible:function(r,q){gx.lang.gxBoolean(q)&&gx.fn.isVisible(r,0)?l(r).next().show():l(r).next().hide();a(r,q)},Enabled:function(r,q){gx.lang.gxBoolean(q)?l(r).next().children().first().prop("disabled",
!1):l(r).next().children().first().prop("disabled",!0)},Ispassword:function(r,q){l("button",l(r).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(q)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});d({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(r,q){r.id=l(q)[0].id;return r},initialize:function(r){r=l("#"+r.id).get(0);l(r).closest("span").addClass("gx-checkbox-wrapper")},
listeners:{control:function(r){return r.id},after:{Visible:function(r,q){var x=l(r).parent().closest(".gx-checkbox-wrapper");gx.lang.gxBoolean(q)?(x.show(),x.children().show()):x.hide();a(r,q)}}}});d({name:"usercontrol",onDemandInvoke:!0,selector:".gx_usercontrol",setContext:function(r,q){r.id=l(q)[0].id;return r},listeners:{control:function(r){return r.id},after:{Visible:a}}});var f=function(r,q,x){r.visible=q;var C=l(r).parent().find(".input-group-btn");gx.lang.gxBoolean(q)&&gx.fn.isVisible(r,0)?
(this.enabled||void 0===this.enabled)&&C.show():C.hide();x||a(r,q)};d({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}</a></span></div></div>',outerHTML:!0,setContext:function(r,q){var x=l(q),C=x.attr("data-align");r.datePickerCt=q;r.inputEl=x.find("input")[0];r.imgEl=x.find("img")[0];r.inputElId=
r.inputEl.id;r.alignClass=C?"pull-"+C:"";r.nativeEl=x.find("#"+r.inputEl.id+"-picker")[0];q=l("#span_"+r.inputEl.id);0<q.length&&(x=q.parent("p")[0],r.spaneEl=x?x:q,x&&l(x).remove());return r},initialize:function(r){var q=l("#"+r.inputElId),x=q.parent().closest(".dp_container");r.nativeEl&&x.append(r.nativeEl);x.find("a").on("click",function(F){try{if("IMG"!=F.target.nodeName)return x.find("img")[0].click(),!1}catch(G){return!1}});var C=gx.fn.isVisible(q[0],0);r=l("#span_"+r.inputEl.id);0<r.length&&
(C=C||gx.fn.isVisible(r[0],0));f.call(this,q[0],C,!0)},listeners:{control:function(r){return r.inputEl.id},after:{Enabled:function(r,q){r.enabled=gx.lang.gxBoolean(q);var x=l(r).parent().find(".input-group-btn");if(gx.lang.gxBoolean(q)){var C=this.visible||gx.fn.isVisible(r);(C||void 0===C)&&x.show()}else x.hide();g(r,q)},Visible:f}}});var k=function(r){return l(r).parent().closest("span")},m=function(r){r.find(":checked").parent("label").button("toggle")},t=function(r,q){var x=r.find("label");gx.lang.gxBoolean(q)?
(x.prop("disabled",!1),x.removeClass("disabled"),r.find("input, label").css("pointer-events","")):(x.prop("disabled",!0),r.find("input, label").css("pointer-events","none"),x.addClass("disabled"))};d({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(r,q){var x=k(q);r.name=l(q).children("input").attr("name");r.spanEl=x;l(x).prop("initialized")||(x.children("label").addClass("gx-radio-label btn btn-default"),q=l(q).children().prop("disabled"),m(x),t(x,!(!0===
q||"disabled"===q)),x.find("script").remove(),x.attr("data-toggle","buttons"),q=x.hasClass("gx-radio-button-vertical")?"-vertical":"",x.addClass("btn-group"+q).removeClass("gx-radio-button-vertical").css("vertical-align","baseline"));return r},initialize:function(r){l(r.spanEl).prop("initialized")||(r.spanEl.prop("initialized",!0),r.spanEl.children("label").on("click",function(){var q=l(this).children("input");q.trigger("focus");q.attr("checked","");q.prop("checked",!0);gx.evt.onchange(q.get(0))}))},
listeners:{control:function(r){return r.name},after:{Visible:a,Enabled:function(r,q){t(k(r),q)},Value:function(r){m(k(r))}}}});d({name:"prompt",selector:function(r){return l('a:has(img[id*="PROMPT"])',r).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}</span></div>',setContext:function(r,q){r.inputEl=q;r.promptEl=l(q).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default");return r},listeners:{control:function(r){return r.inputEl.id},
before:{Visible:function(r,q){r=l(r).parent();gx.lang.gxBoolean(q)?r.show():r.hide()},Enabled:function(r,q){r=l(r).parent().find(".input-group-btn");gx.lang.gxBoolean(q)?r.show():r.hide()}}}});d({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(r,q){r.imgEl=q;return r},listeners:{control:function(r){return r.imgEl.id},before:{Enabled:function(r,q){r=l(r).closest(".input-group-btn");gx.lang.gxBoolean(q)?r.show():r.hide()}}}});var v=function(r,q){r=l(r).parent();r=r.add(r.find("img"));
gx.lang.gxBoolean(q)?r.show():r.hide()};d({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"></div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"></div></a></span></div>',setContext:function(r,q){r.inputEl=l(q).prev()[0];r.triggerEl=l(q)[0];return r},initialize:function(r){gx.evt.attach(r.el,"click",function(){gx.geolocation.getMyPosition(this)});l("#"+r.inputEl.id+"_hook").replaceWith(r.inputEl);
l("#"+r.inputEl.id+"_trigger_hook").replaceWith(r.triggerEl);v.call(this,r.inputEl,gx.fn.isVisible(r.inputEl,0))},listeners:{control:function(r){return r.inputEl.id},before:{Visible:v,Enabled:function(r,q){r=l(r).parent().find(".input-group-btn");gx.lang.gxBoolean(q)?r.show():r.hide()}}}});d({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}</div><div class="col-sm-12">{{$uriOptionLbl$}}</div></div></div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}</div></div><div class="row"><div class="col-sm-12">{{$button$}}</div></div>',
applyTo:"inner",setContext:function(r,q){q=l(q).parent().closest(".gx-multimedia-upload")[0];var x=gx.html.multimediaUpload.getElements(q);x.fileOptionLbl=x.fileOption.parentNode;x.uriOptionLbl=x.uriOption.parentNode;gx.lang.apply(r,x);r.container=q;return r},initialize:function(r){l(r.button).addClass("btn btn-default Button");l(r.uriField).addClass("form-control")},listeners:{control:function(r){return gx.html.multimediaUpload.CtrlId(r.container.id)},after:{Visible:function(r,q){a(r,q,7)}}}});d({name:"navbar",
selector:".gx-navbar",setContext:function(r,q){r.toggleBtn=l(q).find(".gx-navbar-toggle");r.navBarInner=l(q).find(".gx-navbar-inner");return r},initialize:function(r){r.toggleBtn.attr("data-target","#"+r.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var r=l(".navbar-collapse");r.collapse&&r.collapse("hide")});var n=function(r){r.anchor.get(0).href==location.href?r.anchor.parent().addClass("active"):r.anchor.parent().removeClass("active")};d({name:"navbar-textblock-link",
selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(r,q){var x=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"];q=l(q);var C;r.anchor=q.children("a");0===r.anchor.length&&q.is("a")&&(r.anchor=q);for(C=0;C<x.length;C++)r.anchor.attr(x[C],q.attr(x[C]));return r},reDraw:n,initialize:n,listeners:{control:function(r){return r.id},before:{Caption:function(r,q){l(r).text(q);return!0},Link:function(r,
q){l(r).attr("href",q);return!0}}}});d({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(r){l(r.el).addClass("navbar-text")},listeners:{control:function(r){return r.id},after:{Link:function(r,q){var x=l(r);q&&x.hasClass("navbar-text")&&(x.removeClass("navbar-text"),gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",r))}}}});d({name:"errorviewer",selector:".gx_ev div",initialize:function(r){r=l(r.el);var q=r.parent(".gx_ev"),x=q.css("position");
if("fixed"===x||"absolute"===x)q[0].effect&&q[0].effect.end(),r.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(l('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))}});d({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(r,q){r.el=l(q);return r},initialize:function(r){var q=r.el;r=q[0];var x=l(window),C=parseInt(q.attr("rows"),
10),F=parseInt(q.attr("data-gx-text-maxlines"),10);q.css("overflow-x","hidden");var G=function(p,u,y){u+=y;p.attr("rows",u);return u};q=function(){for(var p=x.scrollTop(),u=parseInt(l(this).attr("rows"),10),y=l(this);u>C&&this.scrollHeight>=this.clientHeight;)u=G(y,u,-1);for(;""!==l(this).val()&&u<F&&this.scrollHeight>this.clientHeight;)u=G(y,u,1);x.scrollTop(p)};gx.evt.attach(r,["input","keyup"],q.closure(r,[]));gx.evt.on_ready(r,q.closure(r,[]))}});var w=function(r){r=r.get(0);return"on"===gx.dom.getComputedStyle(r).getPropertyValue("--gx-image-scaling").trim()},
A=function(r){var q=r;w(r)&&(0<r.parent("a").length&&(q=r.parent("a")),q.parent("div[data-align-inner]").parent().parent().attr("data-align-image",""))};d({name:"image",selector:"img[data-gx-image]",setContext:function(r,q){r.el=l(q);return r},initialize:function(r){r=r.el;var q=r.get(0).currentSrc||r.attr("src");q&&w(r)&&r.css("background-image","url("+q+")");A(r)},listeners:{control:function(r){return r.id},after:{Bitmap:function(r,q){r=l(r);q&&w(r)?r.css("background-image","url("+q+")"):r.css("background-image",
"none")},Class:function(r){var q=l(r);r.src&&w(q)?q.css("background-image","url("+r.src+")"):q.css("background-image","none");A(q)}}}})})(gx.$);
gx.ui=function(l){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(d){this.gridContainer=d;this.DesignContainerName=this.ContainerName=gx.dom.id(d);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(d,g,a,b){this.refreshDynProperties();this.properties=[];for(var f=
0;f<this.rows.length;f++){this.properties[f]=[];for(var k=this.rows[f],m=0;m<this.columns.length;m++){var t=this.columns[m],v=k.gxProps[t.index],n=t.gxControl;n.grid=this.ownerGrid;n.row=k;n.gridId=this.gxId;n.gridRow=k.gxId;a?n.value=v[0]:n.setProperties.apply(n,v);this.setRenderProperties(k.gxRenderProps[m],n);!n.enabled&&n.type<=gx.html.controls.types.checkBox&&(n.cssClass=gx.fn.prefixROClass(n.cssClass));this.properties[f][m]=gx.lang.clone(n);this.addC2V(t,this.properties[f][m])}}this.firstTime=
d;this.autoRefreshing=g?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(w){w.show();b()}),this.autoRefreshing&&(this.show(),b()));this.autoRefreshing=!1};this.addC2V=function(d,g){this.addC2VFunction(function(a){if(""!==d.gxAttName){var b=a.ParentObject.getValidStruct(d.gxId);b&&(a.ParentObject[b.gxvar]=g.value);gx.fn.setHidden(g.id,g.value)}})};this.setRenderProperties=function(d,g){if(d)for(var a in d)g[a]=d[a]};this.selectRow=function(d){if(d=this.rows[d])this.instanciateSelectionVars(d.gxId),
this.instanciateSelectedRow(d)};this.getEventRow=function(){return gx.lang.emptyObject(this.GridRow)?"0001":this.GridRow};this.executeEvent=function(d,g){if(d<this.columns.length&&g<this.rows.length)if(d=this.properties[g][d],g=gx.html.controls.eventJSCode(d.jsScrCode,d.eventName,d.jsDynCode,d.grid,d.row),""!==g)gx.lang.emptyObject(d.usrOnclick)||(g="if("+d.usrOnclick+") { "+g+" }"),d=new Function(g),"function"==typeof d&&d();else if(d.clickEvent){g=this.parentGxObject;var a=d.row.gxId;this.ownerGrid.instanciateRow(a);
g[d.clickEvent].call(g,a)}};this.executeIsValid=function(d,g){if(d<this.columns.length&&g<this.rows.length){var a=this.parentGxObject;g=this.properties[g][d];d=g.vStruct||a.GXValidFnc[g.column.gxId];g=g.row.gxId;d&&d.isvalid&&(this.ownerGrid.instanciateRow(g),a[d.isvalid].call(a))}};this.addEventHandler=function(d,g){this[d]=function(a){var b=this.isServerEvent(d);b&&a&&gx.fx.obs.addObserver("gx.onafterevent",this,a,{single:!0});var f=gx.fn.currentGridRow(this.GridId);this.eventHandler(this.GridId,
f,g);!b&&a&&a.call(this)}.closure(this)};var c={};this.requestSuggest=function(d,g,a){var b=l.Deferred();if(d<this.columns.length&&g<this.rows.length){var f=this.parentGxObject;g=this.properties[g][d];d=g.vStruct||f.GXValidFnc[g.column.gxId];g=g.row.gxId;var k=c[g+"_"+d.id];!k&&d&&d.gxsgprm&&(this.ownerGrid.instanciateRow(g),k=new gx.fx.suggestProvider(f,d.gxsgprm[1],null,d.gxsgprm[0]),c[g+"_"+d.id]=k);k?(gx.fx.updateSuggestParms(d.gxsgprm[2]),k.requestSuggestions([],function(){b.resolve(k.values)},
function(){b.reject()},a)):b.reject()}else b.reject();return b.promise()};this.executeValidate=function(d,g){if(d<this.columns.length&&g<this.rows.length){var a=this.parentGxObject;g=this.properties[g][d];d=g.vStruct||a.GXValidFnc[g.column.gxId];g=g.row.gxId;d&&d.fnc&&(this.ownerGrid.instanciateRow(g),d.fnc.call(a))}}}}}(gx.$);
gx.ui.controls=function(l){var c=function(){var d="render selectTabPageByIndex hideTabPageByIndex showTabPageByIndex getTabPageIndexByControlName getTabPageControlNameByIndex".split(" ");return{show:function(){for(var g=this.ActivePage,a=0;a<d.length;a++)this[d[a]]||console.error("Missing required method",d[a],this);this.IsPostBack?this.update&&this.update():(this.beforeRender&&this.beforeRender(),this.render(),this.ActivePageControlName&&(g=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),
10)),g||(g=1),this.selectTabPageByIndex(g),this.tabPageSelected(g,!0,!1),this.HistoryManagement&&HistoryManager.Initialize(this),this.afterRender&&this.afterRender());this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(g,a,b){this.ActivePage!==g&&(this.ActivePage=g||1,this.ActivePageControlName=this.getTabPageControlNameByIndex(g)||"",this.HistoryManagement&&!1!==b&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,!0,null,!1),!a&&
this.TabChanged&&this.TabChanged())},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){if(!gx.grid.drawAtServer){var g=(g=0<document.location.hash.length?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(g):1;this.selectTabPageByIndex(g);this.tabPageSelected(g,!1,!1)}},SelectTab:function(g){this.selectTabPageByIndex(g);this.tabPageSelected(g,!1,void 0)},HideTab:function(g){this.hideTabPageByIndex(g)},
ShowTab:function(g){this.showTabPageByIndex(g)}}}();return{datePicker:function(d){this.$input=l("#"+d.inputId);this.$trigger=l("#"+d.triggerId);this.showInLine=d.inline;this.inputType=d.inputType;this.format=d.format;this.datePartLength=d.datePartLength;this.timePartLength=d.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=d.afterChange;this.opts=d;this.getInputType=function(){return 0<
this.timePartLength&&0===this.datePartLength?"time":0<this.datePartLength&&0===this.timePartLength?"date":"datetime-local"};this.getTimeStep=function(){return 6<this.timePartLength?1:60};this.resolveValue=function(g,a){gx.date.isNullDate(a)&&"time"!==g&&(a=new Date);if("date"==g)a.setMinutes(a.getMinutes()-a.getTimezoneOffset()),g=a.toISOString().slice(0,10);else{a.setMinutes(a.getMinutes()-a.getTimezoneOffset());var b=0,f=19;"time"==g&&(b=11,f=60==this.getTimeStep()?16:19);g=(new gx.date.gxdate(a)).Value.toISOString().slice(b,
f)}return g};this.render=function(){if(this.nativeSupport){var g=this.$input,a=this.getInputType(),b=l("<input>");b.attr("type",a);"time"!==a&&"datetime-local"!==a||b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",g.attr("id")+"-picker");this.dtPicker=b;g.parent().append(b);b.bind("touchstart touchend mousedown mouseup",function(){return!0!==g.prop("disabled")});var f=this,k=function(m){m=m.val();var t=new gx.date.gxdate(m,
"Y4MD");m=""!==m?t.Value:gx.date.nullDate();f.afterChange&&f.afterChange(null,m,g[0],f.opts.vStruct,f.opts.gxO)};this.$trigger.on("click",function(){var m=gx.date.dateObject(g.val());gx.date.isNullDate(m)||(m=f.resolveValue(a,m),b.val(m),k(b));b.trigger("click").trigger("focus")});gx.evt.attach(b[0],"change",function(){var m=l(this);k(m)})}else this.opts.showsTime="date"!==this.opts.inputType,gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts],0)};this.installCalendar=function(g){var a=
g.inputId,b=gx.dom.byId(a),f=l(b),k=g.inline,m=g.weeksNumbers,t=g.mondayFirst,v=g.showsTime,n=g.format;g=g.gxO;if(gx.lang.emptyObject(b)||"SELECT"!=b.nodeName)if(0===k){b=a+"_dp_trigger";if((k=gx.dom.byId(b))&&"none"!==f.css("display")&&"hidden"!==f.css("visibility")&&"none"===f.css("display")||"hidden"===f.css("visibility")||!k)b=a;f=f.parent().closest(".dp_container")[0];Calendar.setup({inputField:a,parentNode:f,showsTime:v,weekNumbers:m,mondayFirst:t,ifFormat:n,button:b,onSelect:gx.fn.datePickerChanged,
align:"Bl",singleClick:!0,displayRight:!1,gxO:g})}else gx.lang.emptyObject(b)||f.css("display","none"),Calendar.setup({inputField:a,showsTime:v,weekNumbers:m,mondayFirst:t,ifFormat:n,flat:a+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,gxO:g})}},actionGroup:function(){return{init:function(){0<l("[data-gx-base-lib='none']").length&&gx.fx.obs.addObserver("gx.onclick",this,function(d){d=d.event;var g=d.target;if(l(g).is(".gx-navbar .dropdown>a")){d.preventDefault();d=
g.getAttribute("aria-expanded");var a=function(b){var f=l(g).next(".gx-dropdown-menu");b=b.event.target;l(b).closest(f).length||b==g||"true"!==g.getAttribute("aria-expanded")||(g.setAttribute("aria-expanded","false"),gx.fx.obs.deleteObserver("gx.onclick",this,a))};"false"===d?(gx.fx.obs.addObserver("gx.onclick",this,a),g.setAttribute("aria-expanded","true")):(gx.fx.obs.deleteObserver("gx.onclick",this,a),g.setAttribute("aria-expanded","false"))}})},dynamicItems:function(){return function(d){this.preProcessItems=
function(g,a){var b;var f=0;for(b=g.length;f<b;f++){var k=(a?a+" ":"")+f.toString();g[f]._$Key=k;g[f].Children?this.preProcessItems(g[f].Children,k):g[f].Children=[]}};this.getItems=function(){return this.items};this.setItems=function(g){this.preProcessItems(g);this.items=g||[]};this.getItemPressed=function(){return this.itemPressed||{}};this.setItemPressed=function(g){this.itemPressed=g};this.assignItemPressed=function(g){g=g.split(" ");var a=this.getItems(),b;for(b=0;b<g.length;b++){var f=parseInt(g[b],
10);var k=k?k.Children[f]:a[f]}this.setItemPressed(k)};this.getType=function(g){var a;return function(){a||(a=d(g.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return a}}(this);this.renderMenu=function(g){this.IsPostBack?d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():d(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"></li>').css("display","none").appendTo(gx.dom.form());g.length&&(g=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",
{containerName:this.ContainerName,Children:g},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/EventName}}{{^EventName}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</span>{{/EventName}}</span>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'}),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(g))};this.renderToolbar=function(g){var a="";g.length&&
(a=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}',
{containerName:this.ContainerName,Children:g},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
d(this.getContainerControl()).attr("data-gx-dynitem-container","").html(a)};this.show=function(){if(this.getContainerControl()){var g=this.getType(),a=gx.lang.isArray(this.items)?this.items:[this.items],b=[];"menu"==g?(this.renderMenu(a),b=document.querySelectorAll("[data-gx-dynitem-source='"+this.ContainerName+"'] a[data-event-name]")):"toolbar"==g&&(this.renderToolbar(a),b=this.getContainerControl().querySelectorAll("a[data-event-name]"));for(g=0;g<b.length;g++)gx.evt.attach(b[g],"click",this.fireEvent,
this)}};this.destroy=function(){var g=this.getType();"menu"==g?(d('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove(),d('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()):"toolbar"==g&&d(this.getContainerControl()).html("")};this.fireEvent=function(g){g.preventDefault();g=g.currentTarget.dataset;var a=this.ParentObject,b=a.IsMasterPage?g.eventName.toUpperCase()+"_MPAGE":"'"+g.eventName.toUpperCase()+"'";if(b=a.getClientEventName(b))this.assignItemPressed(g.key),
this.execC2VFunctions(),gx.evt.dispatcher.dispatch(a.getServerEventName(b),a,0,0,a.isServerEvent(b),void 0,void 0,!0)}}}()}}(),defineTabControl:function(d){gx.lang.apply(d.prototype,c);return d}}}(gx.$);gx.setGxObyCtx=function(l,c){var d;void 0!=l&&(d=gx.getObj(l,c))&&gx.setGxO(l,c);return gx.O};gx.parentGridRow=function(l,c){var d=gx.fn.currentGridRowImpl(l);return d=(l=c.getGridById(l,d))&&l.parentGrid?gx.fn.currentGridRow(l.parentGrid.gridId):void 0};
gx.applyPicture=function(l,c,d){if(!gx.lang.emptyObject(l)&&!gx.lang.emptyObject(gx.rtPicture(l,d))&&!gx.lang.emptyObject(l.type))try{switch(l.type){case "int":case "decimal":return gx.num.formatNumber(c,l.dec,gx.rtPicture(l,d),l.len,l.sign,!0,l.emptyAsNull);case "char":return c;default:return c}}catch(g){}return c};gx.SetOld=function(l,c,d){var g=c;l=gx.fn.controlGridId(l);0<l&&(g=c+"_"+gx.fn.currentGridRow(l));gx.fn.setHidden(g,gx.getVar(d))};
gx.Old=function(l,c){try{var d=c,g=gx.fn.controlGridId(l);0<g&&(d=c+"_"+gx.fn.currentGridRow(g));var a=gx.fn.getHidden(d);"undefined"==typeof a&&""!=gx.O.CmpContext&&(a=gx.fn.getHidden(gx.O.CmpContext+d));return a}catch(b){gx.dbg.logEx(b,"gxapi.js","Old")}return""};gx.OldInteger=function(l,c){l=parseInt(gx.Old(l,c),10);return isNaN(l)?0:l};gx.OldDecimal=function(l,c){l=gx.num.parseFloat(gx.Old(l,c),gx.thousandSeparator,gx.decimalPoint);return isNaN(l)?0:l};
gx.OldDate=function(l,c){return(new gx.date.gxdate(gx.Old(l,c),"Y4MD")).getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(l,c){l=new gx.date.gxdate(gx.Old(l,c),"Y4MD");return l.getStringWithFmt(gx.dateFormat)+" "+l.getTimeString(!0,!0)};
gx.dom_i=function(l){return{el:function(c,d,g,a){if(c){if("string"===typeof c){a=this.byId(c);if(null!=a||!g&&(a=this.byId("span_"+c),null!=a))return a;if(d)return null;a=this.byName(c);return null!=a&&0<a.length?(a[0].id||(a[0].id=c),a[0]):null}return c}return null},matchesSelector:function(){var c;return function(d,g){d=gx.dom.byId(d);var a=d.matches||d.matchesSelector||d.msMatchesSelector||d.mozMatchesSelector||d.webkitMatchesSelector||d.oMatchesSelector;void 0===c&&(c=gx.util.browser.isIE()&&
8>=gx.util.browser.ieVersion());return c||!a?l(d).is(g):a?a.call(d,g):!1}}(),hasAttribute:function(c,d){return c.hasAttribute?c.hasAttribute(d):void 0!==c[d]},hasClass:function(c,d){if(c=gx.dom.el(c,!0))return c.classList?c.classList.contains(d):d&&-1!=(" "+c.className+" ").indexOf(" "+d+" ")},isRoundedBtnWrapper:function(c){return c.hasClass("BtnRight")||c.hasClass("BtnLeft")||c.hasClass("BtnBackground")},addPrefixClass:function(c,d){if(c){var g=l(c);c.className&&!g.attr("data-gx-unprefixed-class")&&
(g.attr("data-gx-unprefixed-class",c.className),g=c.className.split(" "),g.splice(0,0,""),c.className+=g.join(" "+d))}},removePrefixClass:function(c,d){if(c){var g=l(c);if(0<=c.className.search(new RegExp("(^|\\s)"+d))){var a=g.attr("data-gx-unprefixed-class");g.removeAttr("data-gx-unprefixed-class");c.className=a||c.className.substring(d.length)}}},addClass:function(c,d){var g=gx.dom.el(c,!0);g&&d&&(g.classList?0<d.indexOf(" ")?g.classList.add.apply(g.classList,d.split(" ")):g.classList.add(d):this.hasClass(c,
d)||(g.className=g.className+(g.className?" ":"")+d))},classReCache:{},removeClass:function(c,d){var g=gx.dom.el(c,!0);g&&(g.classList?g.classList.remove(d):this.hasClass(c,d)&&(c=this.classReCache[d],c||(c=new RegExp("(?:^|\\s+)"+d+"(?:\\s+|$)","g"),this.classReCache[d]=c),g.className=g.className.replace(c," ")))},hasTransition:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,g="transitionDuration";d.isIE()&&(g="msTransitionDuration");d.isWebkit()?g="webkitTransitionDuration":d.isFirefox()?
g="MozTransitionDuration":d.isOpera()&&(g="OTransitionDuration");c=parseFloat(gx.dom.getComputedStyle(c)[g],10);return 0!==c&&!isNaN(c)}return!1},hasAnimation:function(c){if(c&&Modernizr.csstransitions){var d=gx.util.browser,g="animationName";d.isIE()&&(g="msAnimationName");d.isWebkit()?g="webkitAnimationName":d.isFirefox()?g="MozAnimationName":d.isOpera()&&(g="OAnimationName");return(c=gx.dom.getComputedStyle(c)[g])&&"none"!=c}return!1},isMultimediaElement:function(c){return"SPAN"==c.tagName&&(gx.dom.hasClass(c,
"gx-video-placeholder")||gx.dom.hasClass(c,"gx-audio-placeholder")||gx.dom.hasClass(c,"gx-download-placeholder"))},purgeElement:function(c,d){d=d||c.attributes;var g;if(d){var a=d.length;for(g=0;g<a;g+=1){var b=d[g].name||d[g];"function"===typeof c[b]&&(c[b]=null)}}},purge:function(c,d){d||this.purgeElement(c);if(c=c.childNodes){d=0;for(var g=c.length;d<g;d++)gx.dom.purge(c[d],!1)}},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==this._form&&(this._form=
document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){try{for(var c=gx.fn.getFormElements(),d=c.length,g=0;g<d;g++)c[g].gxIndex=g}catch(a){gx.dbg.logEx(a,"gxapi.js","indexElements")}},setAttribute:function(c,d,g){var a=function(){try{var b=gx.dom.byName(c);if(null!=b&&0<b.length)for(var f=b.length,k=0;k<f;k++)b[k].setAttribute(d,g);else k=gx.dom.byId(c),null!=k&&k.setAttribute(d,g)}catch(m){gx.dbg.logEx(m,"gxapi.js","setAttribute")}};"loading"==
document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,a,{single:!0}):a.apply(this)},createInput:function(c,d){var g=document.createElement("input");g.type=d;g.id=c;g.name=c;gx.dom.form().appendChild(g);return g},hasSelectedFile:function(){var c=l('input[type="file"]'),d=c.length;if(!d)return!1;for(var g=0;g<d;g++)if(!gx.lang.emptyObject(c[g].value))return!0;return!1},hasSubmitControl:function(){var c=this.byTag("input"),d=c.length;if(!d)return!1;for(var g=0;g<d;g++){var a=c[g].getAttribute("type");
if("submit"==a||"image"==a)return!0}return!1},styles:function(){var c=[].concat($jscomp.arrayFromIterable(document.styleSheets)).map(function(g){return g.href}).filter(function(g){return!gx.lang.emptyObject(g)}),d=[].concat($jscomp.arrayFromIterable(document.querySelectorAll("style["+STYLE_ELEMENT_HREF+"]"))).map(function(g){return g.getAttribute(STYLE_ELEMENT_HREF)});return[].concat($jscomp.arrayFromIterable(c),$jscomp.arrayFromIterable(d))},getComputedStyle:function(c){try{return"#document"==c.nodeName?
null:"function"==typeof window.getComputedStyle?window.getComputedStyle(c):"undefined"!=typeof c.currentStyle?c.currentStyle:c.style}catch(d){return gx.dbg.logEx(d,"gxapi.js","getComputedStyle"),null}},getStyle:function(c,d){var g="";try{g="function"==typeof window.getComputedStyle?window.getComputedStyle(c,null)[d]:"undefined"!=typeof c.currentStyle?c.currentStyle[d]:c.style[d];var a=parseInt(g);isNaN(a)||(g=a)}catch(b){gx.dbg.logEx(b,"gxapi.js","getStyle")}return g},CSS_URL_REGEXP:/url\(["']?(?!(?:https?:|\/))([^"\)]+)["']?\)/ig,
CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(c,d){var g=c.href?c.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,a;this.cssRules||(this.cssRules=[]);try{if(a=c.cssRules||c.rules){c=0;for(var b=a.length;c<b;c++){var f=a[c].cssText;d&&!f.includes("@import")&&(f=f.replace(this.CSS_URL_REGEXP,'url("'+g+'$1")'));this.cssRules.push(f)}}}catch(k){}},getCssRules:function(c,d){var g=document.styleSheets;if(null===this.cssRules||c){this.cssRules=[];c=0;for(var a=
g.length;c<a;c++)try{g[c].disabled||this.cacheStyleSheet(g[c],d)}catch(b){}}return this.cssRules},setStyleElement:function(c,d,g){try{c.innerHTML=(g?c.innerHTML:"")+d}catch(a){c.styleSheet.cssText=(g?c.styleSheet.cssText:"")+d}},isButton:function(c){return void 0!=c&&null!=c?"submit"==c.type||"button"==c.type:!1},isRadio:function(c){return c&&"INPUT"==c.tagName&&"radio"==c.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,
tel:!0,month:!0,week:!0},isEditControl:function(c){return c&&"INPUT"==c.tagName?this.editControls[c.type]||!1:!1},isTextControl:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type||"TEXTAREA"===c.tagName},isDateControl:function(c){return"date"==c.type||"datetime"==c.type||"datetime-local"==c.type},isButtonLike:function(c){return c?this.isButton(c)||gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:c&&"INPUT"===c.nodeName?"file"===c.type||("image"===c.type||"checkbox"===c.type)&&
"function"==typeof c.onclick:!1:!1},iFrameDoc:function(c){try{if(c.contentDocument)return c.contentDocument;if(c.contentWindow)return c.contentWindow.document}catch(d){}return null},forEachChild:function(c,d,g){if(c&&c.childNodes&&"function"==typeof g)for(var a=c.childNodes.length,b=0;b<a&&!1!==g.call(d,c.childNodes[b]);b++);},isTextWithLink:function(c){return null!=c&&"A"==c.tagName&&c.childNodes&&0<c.childNodes.length&&this.innerChildIsText(c.firstChild)?!0:!1},isImageWithLink:function(c){return c&&
"A"===c.tagName&&c.href&&(c=c.firstElementChild,!gx.dom.hasClass(c,"gx-prompt")&&c&&"IMG"===c.tagName)?!0:!1},isChildNode:function(c,d){c.frameElement&&(c=c.frameElement);if(c==d)return!0;for(;c.parentNode;){if(c==d||c.parentNode==d)return!0;c=c.parentNode}return!1},NodeLevel:function(c){for(var d=0;c.parentNode;)(c.id||c.name)&&d++,c=c.parentNode;return d},findParentByTagName:function(c,d,g){c=c.parentNode;d=d.toUpperCase();for(i=0;c&&(!g||i!=g);){i++;if(c.tagName==d)return c;c=c.parentNode}},innerChildIsText:function(c){for(;null!=
c;){if(c.nodeName&&"#text"==c.nodeName)return!0;c=c.firstChild}return!1},allChildrenAreText:function(c){for(c=c.firstChild;c;){var d=c.nodeName.toLowerCase();if("#text"!==d&&"pre"!==d&&null!=c.offsetParent)return!1;c=c.nextSibling}return!0},position:function(c){c=l(c).offset();return{x:Math.floor(c.left),y:Math.floor(c.top)}},dimensions:function(c){c=l(c);return{w:c.outerWidth(),h:c.outerHeight()}},windowDimensions:function(c){var d=c.documentElement;c=c.body;return d&&d.scrollHeight?{scrollWidth:Math.max(d.scrollWidth,
c.scrollWidth),scrollHeight:Math.max(d.scrollHeight,c.scrollHeight),clientHeight:Math.max(d.clientHeight,c.clientHeight),clientWidth:Math.max(d.clientWidth,c.clientWidth)}:{scrollWidth:c.scrollWidth,scrollHeight:c.scrollHeight,clientHeight:c.clientHeight,clientWidth:c.clientWidth}},documentScroll:function(c){c=c||document;var d=-1,g=-1;try{d=c.documentElement.scrollTop||c.body.scrollTop,g=c.documentElement.scrollLeft||c.body.scrollLeft}catch(a){}return{scrollTop:d,scrollLeft:g}},documentScrollable:function(c){c=
c||document;var d={x:!1,y:!1};c=gx.dom.windowDimensions(c);c.scrollHeight>c.clientHeight&&(d.x=!0);c.scrollWidth>c.clientWidth&&(d.x=!0);return d},autofitIFrame:function(c){c=gx.evt.source(window.event||c);var d=window.frames[c.name].document;if(d&&""==c.width&&""==c.height){var g=gx.dom.windowDimensions(d);d=g.scrollWidth?g.scrollWidth+10:null;g=g.scrollHeight?g.scrollHeight+10:null;d&&g&&(c.style.width=d+"px",c.style.height=g+"px")}},fitToParent:function(c){if(!gx.util.browser.isIE()&&c&&c.childNodes){for(var d=
null,g=c.childNodes.length,a=0;a<g;a++){var b=c.childNodes[a];if("TABLE"==b.nodeName){d=b;break}}null!=d&&(-1!=d.style.width.indexOf("%")&&(c.style.width=gx.dom.addUnits(d.style.width)),-1!=d.style.height.indexOf("%")&&(c.style.height=gx.dom.addUnits(d.style.height)))}},redrawControl:function(c){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(c,c.outerHTML):setTimeout(function(){gx.html.setOuterHtml(c,c.outerHTML)},100)},setCaretPosition:function(c,d){null!=c&&(c.createTextRange?
(c=c.createTextRange(),c.move("character",d),c.select()):c.selectionStart?(c.focus(),c.setSelectionRange(d,d)):c.focus())},replaceAtCaretPosition:function(c,d){if(document.selection){var g=document.selection.createRange().getBookmark();c.selection=c.createTextRange();c.selection.moveToBookmark(g);c.selectLeft=c.createTextRange();c.selectLeft.collapse(!0);c.selectLeft.setEndPoint("EndToStart",c.selection);g=c.selectLeft.text.length+1;var a=c.selectLeft.text.length+(0==c.selection.text.length?1:c.selection.text.length)}else g=
c.selectionStart,a=c.selectionEnd;c.setRangeText?c.setRangeText(d,g,a,"end"):(c.value=c.value.substr(0,g)+d+c.value.substr(g,c.value.length),gx.dom.setCaretPosition(c,g+d.length))},spanValue:function(c){var d=c.nodeValue;gx.lang.emptyObject(d)&&(d=c.innerText||c.textContent);gx.lang.emptyObject(d)&&(d="");return d},removeControlSafe:function(c){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(c),gx.dom.purge(this._avoidLeaksDiv),
this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(c)},removeControl:function(c){if(null==document.createRange)c.removeNode(!0);else{var d=document.createRange();c&&(d.selectNode(c),d.deleteContents())}},radioToObj:function(c,d){d={s:"",v:[]};if(!c)return d;if(gx.dom.isRadio(c)){d.s=c.value;c=gx.dom.byName(c.name);for(var g=c.length,a=0;a<g;a++){var b=l(c[a]),f=l("label[for='"+c[a].id+"']").first();d.v.push([b.val(),f.text().trim()])}}return d},comboBoxToObj:function(c,
d){try{var g={s:"",v:[]};if(!c)return g;if("SELECT"===c.tagName){g.s=c.value;var a=c.options.length;for(d=0;d<a;d++){var b=l(c.options[d]);g.v.push([b.val(),b.text()])}}else if("SPAN"===c.tagName){if(c.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(c.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));var f=gx.fn.getControlValue_span(c);g.v.push([d,f]);g.s=d}return g}catch(k){gx.dbg.logEx(k,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,
addUnits:function(c,d){return""===c||"auto"==c?c:void 0===c?"":"number"!=typeof c&&this.unitPattern.test(c)?c:c+(d||"px")},getScrollbarWidth:function(){var c=document.createElement("div"),d=c.style;d.display="block";d.position="absolute";d.width="100px";d.height="100px";d.left="-999px";d.top="-999px";d.overflow="scroll";document.body.insertBefore(c,null);d=c.clientWidth;if(0===d)document.body.removeChild(c);else return document.body.removeChild(c),100-d},getActiveElement:function(c){c=c||document;
try{var d=c.activeElement;d&&d.nodeName||(d=c.body)}catch(g){d=c.body}return d},getCaretOffset:function(c){return c&&"INPUT"===c.tagName&&"text"===c.type&&"undefined"!==typeof c.selectionStart?{s:c.selectionStart,e:c.selectionEnd}:{s:0,e:0}},setCaretOffset:function(c,d){c&&"INPUT"==c.tagName&&"text"==c.type&&c.setSelectionRange&&c.setSelectionRange(d.s,d.e)},write:function(c,d){d=d||document;d.write(c)},writeError:function(c,d,g,a){gx.dbg.write(c);a=a||document;a.head.innerHTML="";a.body.innerHTML=
c},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASK_ZINDEX:2,MASKED_CLASS:"gx-masked",isMaskElement:function(c){return this.hasClass(c,this.MASK_CLASS)},mask:function(c){if((c=this.el(c))&&!this.hasClass(c,this.MASK_RELATIVE_CLASS)){var d=gx.util.browser,g=d.ieVersion(),a=6==g||d.isIE&&d.isCompatMode(),b=!!c.style.setExpression,f=l(c);f.css("caret-color","transparent");f.is("body")&&"static"==this.getComputedStyle(c).position||this.addClass(c,this.MASK_RELATIVE_CLASS);
var k=document.createElement("div");k.className=this.MASK_CLASS;k.style.zIndex=this.MASK_ZINDEX;if("TABLE"==c.tagName){var m=l(k);f=l(c);m.width(f.width());m.insertAfter(f);m.parent().addClass(this.MASK_RELATIVE_CLASS)}else c.appendChild(k);this.addClass(c,this.MASKED_CLASS);if(a&&b)try{k.style.setExpression("height","this.parentNode."+(c==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(t){}else c=this.getComputedStyle(c).height,d.isIE&&(7!=d.ieVersion||d.isCompatMode())&&"auto"==c&&
(k.style.height=c);d.isIE()&&(7>=g||d.isCompatMode())&&(l(k),(d=this.getComputedStyle(k).opacity)&&l(k).css("opacity",d));return k}},unmask:function(c){c=this.el(c);var d;l(c).css("caret-color","");if("TABLE"==c.tagName){var g=c.nextSibling;g&&"DIV"==g.tagName&&this.hasClass(g,this.MASK_CLASS)&&(d=g)}else{g=0;for(var a=c.childNodes.length;g<a;g++)if("DIV"==c.childNodes[g].tagName&&this.hasClass(c.childNodes[g],this.MASK_CLASS)&&!this.hasClass(c.childNodes[g],this.UNMASK_CLASS)){d=c.childNodes[g];
break}}d&&!d.removed?(d.removed=!0,d.style.clearExpression&&(d.style.clearExpression("width"),d.style.clearExpression("height")),this.removeClass(c,this.MASKED_CLASS),g=gx.dom.hasTransition(d)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(d)?gx.dom.ANIMATION_END_EVENT:!1,a=function(){"TABLE"==c.tagName?d.parentNode&&(gx.dom.removeClass(d.parentNode,this.MASK_RELATIVE_CLASS),d.parentNode.removeChild(d)):d.parentNode==c&&c.removeChild(d);gx.dom.removeClass(c,this.MASK_RELATIVE_CLASS)}.closure(this),
g?gx.evt.attach(d,g,a,!1,{single:!0,useCapture:!0,timeout:300}):a(),this.addClass(d,this.UNMASK_CLASS)):(this.removeClass(c,this.MASKED_CLASS),this.removeClass(c,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(c,d,g){g=g||{};var a=g.enteringClass||"entering",b=g.leavingClass||"leaving",f=g.enterDurationClass||"enter-fx-duration",k=g.leaveDurationClass||"leave-fx-duration",m=g.transitioningClass||"transitioning",t=g.transitionTimeout||1500,v=function(P){return 0<P.childNodes.length&&(gx.dom.hasAnimation(P)||
gx.dom.hasTransition(P))&&!gx.dom.hasClass(P.parentNode,m)},n=function(P){return gx.dom.hasAnimation(P)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(P)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==c.tagName&&(gx.dom.addClass(c,c.className+"-fx"),c.style.position="static");"BODY"==d.tagName&&gx.dom.addClass(d,d.className+"-fx");var w=c.parentNode,A=v(c),r=v(d),q="BODY"!=c.tagName;if(A||r){v=document.createElement("iframe");var x=document.createElement("div"),C=this.getComputedStyle(c),F=C.width;C=C.height;
var G=n(c),p=n(d),u,y,B,E,I,L=0;gx.dom.addClass(w,m);if("BODY"!=c.tagName&&"BODY"!=d.tagName)if(A){v.setAttribute("scrolling","no");v.setAttribute("frameborder","0");v.style.width=gx.dom.addUnits(window.innerWidth);v.style.height=gx.dom.addUnits(window.innerHeight);v.style.display="none";x.appendChild(v);x.style.width=F;x.style.height=C;x.style.overflow="hidden";gx.spa.dettachContent(c);c.insertBefore(x,c.firstChild);n=v.contentDocument;try{n.open(),n.write(this.getDocTypeDeclaration(document)),n.write("<html>"),
n.write("<head></head>"),n.write("<body><div></div></body>"),n.write("</html>"),n.close()}catch(P){gx.dbg.logEx(P,"gxapi.js","replaceWithFx"),x=n.createElement("div"),n.body.appendChild(x)}n.documentElement&&(n.documentElement.className="gx-fx-iframe");n.body.style.margin="0";n.body.className=gx.dom.form().className;n.head.appendChild(document.createElement("style"));var M=n.styleSheets[0];x=gx.dom.getCssRules(!0,!0);var O=[];x=x.filter(function(P,Y){if(P.includes("@import"))return P;O.push(P)});
var R=function(P){P.forEach(function(Y){try{M.insertRule(Y,M.cssRules.length)}catch(W){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+Y)}})};R(x);R(O);n.body.firstChild.style.width=F;for(n.body.firstChild.style.height=C;c.childNodes[1];)n.body.firstChild.appendChild(c.childNodes[1]);v.style.display="block"}else r&&(c.style.display="none");gx.dom.addClass(d,a);gx.dom.addClass(d,f);gx.dom.addClass(c,k);!1!==g.domAdd&&w.appendChild(d);k=function(){B=function(){2===L?(gx.dom.removeClass(w,m),
q&&(g.transitionEndCallback&&(d=g.transitionEndCallback(c,d)),!1!==g.domRemove&&c.parentNode==w&&w.removeChild(c)),gx.dom.removeClass(d,f)):q||(g.transitionEndCallback&&(d=g.transitionEndCallback(c,d)),gx.dom.removeClass(d,a),r&&(I=setTimeout(y,t)))};A?(u=function(){clearTimeout(E);L++;g.leavingTransCallback&&g.leavingTransCallback(c,d);B()},gx.evt.attach(c,G,u,!1,{single:!0,useCapture:!0})):(L++,B());r?(y=function(){2<=L?gx.evt.detach(d,p,y):(clearTimeout(I),L++,g.enteringTransCallback&&g.enteringTransCallback(c,
d),B())},gx.evt.attach(d,p,y,!1,{single:!0,useCapture:!0})):(L++,B());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(c,b);q&&(gx.dom.removeClass(d,a),r&&(I=setTimeout(y,t)));A&&(E=setTimeout(u,t))})};g.beforeTransitionStart?!0!==g.beforeTransitionStart(k)&&k():k()}else!1!==g.domRemove&&w.removeChild(c),!1!==g.domAdd&&(c.parentNode==w?w.replaceChild(d,c):w.appendChild(d)),g.beforeTransitionStart&&g.beforeTransitionStart(),g.leavingTransCallback&&g.leavingTransCallback(c,d),g.enteringTransCallback&&
g.enteringTransCallback(c,d),g.transitionEndCallback&&(d=g.transitionEndCallback(c,d))},getDocTypeDeclaration:function(c){c=c||document;c=c.doctype;parts=["!DOCTYPE"];if(!c)return"";parts.push(c.name||"html");c.publicId&&(parts.push("PUBLIC"),parts.push('"'+c.publicId+'"'));c.systemId&&parts.push('"'+c.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(c){c=this.el(c);return c.createShadowRoot?c.createShadowRoot():c.webkitCreateShadowRoot?c.webkitCreateShadowRoot():!1},fixes:function(){var c=
/gx-tab-padding-fix-\d+/ig,d=/gx-tab-spacing-fix-\d+/ig,g={},a={},b,f,k,m={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){g={};a={};l("#gx-dom-fixes").empty()},getFixesStyleElement:function(){var t=l("#gx-dom-fixes")[0];if(!t){t=document.createElement("style");
t.id="gx-dom-fixes";var v=gx.getThemeElement();l("head")[0].insertBefore(t,v);gx.util.browser.isIE()&&l(v).insertAfter(t)}return t},html5:function(t){var v=gx.util.browser,n=v.isIE(),w=gx.O.DSO?["@layer gx-dom-fixes {"]:[];l("TABLE",t||document.body).each(function(){var r=l(this);r.attr({align:r.data("align")})});if(!t){if(!k){for(A in m)gx.lang.apply(m[A],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",
contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});k=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";Mustache.parse(k)}for(A in m)w.push(Mustache.render(k,m[A]));
gx.O.DSO&&w.push("}");var A=this.getFixesStyleElement();gx.dom.setStyleElement(A,w.join(""),!0)}(n||v.isOpera())&&l("td[data-align]",t||document.body).each(function(){var r=l(this),q=r.attr("data-align").toLowerCase(),x=m[q].className,C=r.attr("class")||"";C&&(C=" "+C);r.attr("align",q);r.hasClass(x)||r.attr("class",x+C);r.children("div."+m[q].contHolderClassName).children("div."+m[q].contHolderBodyClassName).addClass(x);r.children("div."+m[q].wcClassName).children("div."+m[q].wcBodyClassName).addClass(x)})},
setPopupMinWidth:function(){var t=gx.popup.getPopup();if(t){var v=!0;if(gx.runtimeTemplates){try{v=window.parent.gx.runtimeTemplates}catch(n){}v||(v=this.getPopupMinWidth(),l(document.documentElement).css("min-width",gx.dom.addUnits(v)));l(document.documentElement).addClass("gx-popup-document")}(t.autoresize||void 0===t.autoresize)&&l(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var t=gx.popup.getPopup(),v=n;if(!t)return v;v=t.width;if(t.autoresize||void 0===t.autoresize){var n=
600;t=l(t.window).width();v=800;1200<=t&&(v=900);768<=t&&992>t&&(v=n);768>t&&(v=t-20)}return v},fixTableResets:function(t){var v=[],n=[],w=this.getFixesStyleElement();b||(b="{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(b));f||(f="{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(f));l("table[data-cellpadding], table[data-cellspacing]",t||document.body).each(function(){var A=this.getAttribute("data-cellpadding");void 0!==
A&&(g[A]||(g[A]=A,v.push(A)),l("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+A+" "+this.className.replace(c,"").trim()}));var r=this.getAttribute("data-cellspacing");void 0!==r&&(a[r]||(a[r]=r,n.push(r)),this.className="gx-tab-spacing-fix-"+r+" "+this.className.replace(d,"").trim())});t=""+Mustache.render(b,v)+Mustache.render(f,n);0<t.length&&(gx.O.DSO?gx.dom.setStyleElement(w," @layer gx-dom-fixes { "+t+" }",!0):gx.dom.setStyleElement(w,
t,!0))},createLegacyNotification:function(){l("div#gx_ajax_notification").length||l('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(c,d){var g=l(d)[0].offsetTop-l(c)[0].offsetTop-l(c).scrollTop();return c&&l(d)[0]?g<l(c).height():
!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);
gx.evt_i=function(l){return{eachKeyAutorefreshType:function(c){return!gx.lang.isNumericType(c)&&!gx.lang.isDateType(c)},waitGridRefresh:function(c){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(c):c.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var c=gx.evt.refreshGridCallback.pop();"function"==typeof c&&c.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var c=
this.hooks.length,d=0;d<c;d++){var g=this.hooks[d];try{this.detach(g.c,g.e,g.f),g.c=null,g.f=null}catch(a){gx.dbg.logEx(a,"gxapi.js","clearHooks")}this.hooks[d]=null}this.hooks=[]},source:function(c){return c.target||c.currentTarget||c.srcElement},createEvent:function(c,d,g,a){d=void 0===d?!0:d;g=void 0===g?!0:g;a=a||{};if(window.CustomEvent)var b=new CustomEvent(c,{bubbles:d,cancelable:g,detail:a});else b=document.createEvent("CustomEvent"),b.initCustomEvent(c,d,g,a);return b},dispatch:function(c,
d){return c.dispatchEvent?c.dispatchEvent(d):c.fireEvent("on"+d.type,d)},fireEvent:function(c,d){gx.evt.dispatch(c,gx.evt.createEvent(d))},detach:function(c,d,g,a){try{if(a=a||{},"string"==typeof d)c.removeEventListener?c.removeEventListener(d,g,a.useCapture||!1):c.detachEvent?c.detachEvent("on"+d,g):c["on"+d]=null;else if(gx.lang.isArray(d))for(var b=0,f=d.length;b<f;b++)this.detach(c,d[b],g,a)}catch(k){gx.dbg.logEx(k,"gxapi.js","detach")}},stopPropagation:function(c){c&&(c.stopPropagation?c.stopPropagation():
c.cancelBubble=!0)},cancel:function(c,d){if(d&&gx.util.browser.isIE()&&typeof("undefined"!=c.keyCode))try{c.keyCode=0}catch(g){}"undefined"==typeof c.preventDefault?(c.cancelBubble=d,c.returnValue=!d):d&&(c.preventDefault(),c.stopPropagation())},checkCtrlFocus:function(c){try{if(gx.evt.fixWebKitOnFocus()&&"button"==c.type&&gx.fn.isAccepted(c)&&void 0!=c.onfocus)c.onfocus()}catch(d){gx.dbg.logEx(d,"gxapi.js","checkCtrlFocus")}},doClick:function(c,d){if(gx.isInputEnabled()&&(d=gx.evt.source(d),"button"!=
d.type&&"submit"!=d.type&&(c=gx.dom.el(c),gx.fn.isAccepted(c)))){if(void 0!=c.onfocus)c.onfocus();if(void 0!=c.onclick)c.onclick();"INPUT"==c.nodeName&&"submit"==c.type&&gx.dom.form().submit()}},executeOnblur:function(c,d){var g=gx.csv.lastId,a=gx.O.focusControl;gx.O.focusControl=c;this.onblur(d,gx.O.focusControl);gx.O.focusControl=a;gx.csv.lastId=g},onblur:function(c,d){if(gx.O&&!0!==gx.csv.IgnoreBlur){c=gx.fn.controlRowId(c);gx.csv.lastId=d;try{var g=gx.fn.validStruct(d);g&&null!=g.gxgrid&&g.gxgrid.updateControlValue(g,
!1,c);var a=gx.csv.lastControl;if(a){var b=a.getAttribute("maxlength");0<b&&a.value.length>b&&(a.value=a.value.substring(0,b));if(g&&"bits"==g.type&&0==g.ro){var f=gx.fn.getControlGridRef(g.fld,g.gxgrid?g.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>a.id.indexOf(g.fld)&&(a=f);var k=gx.html.multimediaUpload.getContainer(f);gx.html.multimediaUpload.refreshPreviewImg(k,a)}}}catch(m){gx.dbg.logEx(m,"gxapi.js","onblur")}}},onfocus:function(){var c=function(){var d=l.Deferred();gx.fx.obs.notify("gx.onbeforefocus",
arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");d.resolve()});return d.promise()};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,arguments)},onfocus_impl:function(c,d,g,a,b,f,k){var m=l.Deferred();b=gx.fn.controlRowIndex(c)||b;try{gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return m.resolve(!1).promise();gx.evt.setReady(!1,
"onfocus_impl");if(!gx.fn.checkPopupFocus(c))return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!1).promise();var t=!1;gx.csv.cmpCtx!=g&&(t=!0,gx.O.fromValid=0);gx.setGxO(g,a);gx.fn.refreshControlOldValue(c);t&&gx.fn.changeCmpContext();gx.fn.initOld(c);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=c;0!=f&&""==b||gx.fn.setCurrentGridRow(f,b);gx.fx.installSuggest(c);
var v=!1;if(gx.csv.lastGrid!=f){gx.csv.lastRow[f]=null;if(!k){if(gx.csv.lastGrid<f){var n=gx.fn.firstGridControl(f);gx.O.fromValid>n&&(gx.O.fromValid=n)}gx.csv.lastGrid=f}v=!0}0<d&&(gx.O.focusControl=d);if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise();if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(c)}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}try{var w=gx.fn.getControlValue("Mode");if("DLT"==w||"DSP"==w||gx.O.isTransaction()&&gx.dom.isButton(c)&&
!gx.evt.isEnterEvtCtrl(c)&&!gx.evt.isCheckEvtCtrl(c)&&!k)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&c.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(c)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise();gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!0).promise()}if(gx.csv.invalidForcedCtrl){var A=
gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.Ctrl.id);gx.csv.invalidForcedCtrl=null;if(A)return gx.evt.setReady(!0,"onfocus_impl"),m.resolve(!0).promise()}if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=c&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==c)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1,gx.O,b).done(function(p){p&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));m.resolve(!0)}),m.promise();k?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),
gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0==gx.csv.lastRow[f]||gx.csv.lastRow[f]==b||v||gx.O.fromValid!=gx.O.toValid||(gx.csv.lastId=gx.O.fromValid);var r=gx.fn.controlIds();0<r.length&&gx.O.fromValid<r[0]&&(gx.O.fromValid=r[0]);gx.lang.emptyObject(gx.csv.lastRow[f])&&0!=f&&(gx.csv.rowChanged=!0,gx.csv.lastRow[f]=b);var q=gx.O,x=gx.csv.lastId,
C=gx.fn.validStruct(x,q);if(C)var F=gx.csv.lastRow[C.grid];gx.csv.checkRowChange(x,v,q,F).done(function(p){var u=!1,y=!1,B=function(){null==gx.csv.invalidControl&&c===document.activeElement&&("SELECT"===c.nodeName||gx.dom.isTextControl(c)&&c.selectionStart===c.selectionEnd)&&gx.fn.setSelection(c);gx.csv.disableFocusCondition();m.resolve(!0)};!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length>b.length&&(u=F.substring(F.length-b.length),u=parseInt(u)<parseInt(b));gx.csv.backwardGridValidation&&
(!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length==b.length&&parseInt(F)>parseInt(b)&&(y=q.focusControl>gx.fn.firstGridControl(f)),!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(b)&&F.length==b.length&&parseInt(F)<parseInt(b)&&(y=q.focusControl<x&&q.focusControl>gx.fn.firstGridControl(f)));p&&null==gx.csv.invalidControl&&y?(q.fromValid=gx.fn.firstGridControl(f),gx.csv.validControls(q.fromValid,q.focusControl,!0,gx.O)):p&&!v||!(q.focusControl>=x||u)?(q.toValid=q.focusControl,B()):(gx.fn.lastMainLevelCtrlId(x,
f)&&(p=gx.fn.getControlRefById(x))&&1===p.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&(q.fromValid=x+1),gx.csv.validateAll(q).done(B))});if(f&&b){var G=gx.O.getGridById(f,b);G&&G.allowSelection&&G.setSelection(parseInt(b,10)-1)}gx.evt.setReady(!0,"onfocus_impl");return m.promise()}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}gx.evt.setReady(!0,"onfocus_impl");return m.resolve(!1).promise()},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(c){gx.dbg.logEx(c,"gxapi.js",
"userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(c,d,g){gx.pO.MasterPage&&c.req.setRequestHeader(g,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(c,d,g,a,b,f){gx.reinit(!f)},oncontentreplace:function(c,d,g,a,b,f,k,m){c=gx.lang.getType(a);f=(f=f==k?f:k)?gx.lang.getType(f.toLowerCase()):
!1;var t=gx.ajax.getJsonResponse();t&&gx.fn.setJsonHiddens(null,t.gxHiddens,!1);c.prototype=new gx.GxObject;gx.setParentObj(new c);m?gx.setMasterPage(b):f&&gx.setMasterPage(new f);gx.ajax.clearJsonResponse();t?gx.ajax.setJsonResponse({response:t,isPostBack:!1,afterCmpLoaded:function(){m&&(b.restoreTargetComponents(),b.restoreExoEventHandlers());gx.objectLoad(t.gxGrids,t.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onunload:function(c){gx.objectUnload(c);
gx.spa.stop()},onclick:function(c){var d={event:c};gx.fx.obs.notify("gx.onclick",[d]);d.cancel||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(c)||gx.evt.cancel(c,!0),gx.evt.mouse.update(c),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,"onclick"))},ontouchstart:function(c){c=gx.evt.onmousedown.closure(this,[c]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(c,150):c()},onmousedown:function(c){var d=window.event||c,g=gx.evt.source(d);
if(g&&8>=gx.util.browser.ieVersion()&&l(g).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(g);gx.evt.mouse.update(c);c=gx.fx.dnd;c.deleteClonControl();g=c.getSource(d);gx.dom.isMaskElement(d.target)||null==g||(gx.evt.cancel(d,!0),gx.setGxO(g.obj),c.drag(g.obj,g.types,g.hdl))},onmousemove:function(c){gx.evt.mouse.update(c);var d=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()&&gx.popup.ext.compatMode()){var g=gx.popup.ext;g.movepopup();if(null!=g.currIDb||null!=g.currRS)return!1}null!=
d.obj&&(c=window.event||c,gx.evt.cancel(c,!0),null!=gx.fx.dnd.getTarget(c,d.obj.gxDragTypes)&&d.over(),d.moveControl(d.dragCtrl))},onmouseup:function(c){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(c);var d=gx.fx.dnd;if(null!=d.dragCtrl){var g=window.event||c;g=d.getTarget(g,d.obj.gxDragTypes);null!=g?(d.deleteClonControl(),gx.setGxO(g.obj),d.drop(d.dropCtrl,g.obj,g.hdl)):d.restoreControl();g=window.event||c;gx.evt.cancel(g,!0)}d.out();d.dragCtrl=null;
d.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(c){gx.evt.mouse.update(c);var d=window.event||c;!gx.util.browser.isOldIE()&&gx.fx.dom.delayedDispatch(c)||gx.fx.dom.raiseEvent("dblclick",d)},onwindowblur:function(c){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(c,d,g){g=window.event||g;var a=gx.util.browser.isIE(),b=g.keyCode;if(a){if("keydown"==g.type&&229==b)return c.value.length<=d?c.ImeKey=!0:!1;if("keyup"==g.type&&8==b&&c.ImeKey&&c.value.length+1>=d)return c.value=
c.value.substring(0,c.value.length-1),c.ImeKey=!1,!0}if("keyup"==g.type||a)return c.value.length+1<=d||8==b||9==b||46==b||35<=b&&40>=b},fireControlValueChange:function(c,d,g){var a=l.Deferred();if(!c||!d)return a.resolve();var b=c.getValidStructFld(d);if(b&&b.evt_cvc){gx.evt.startValidation(b.gxgrid);gx.evt.stopPropagation(g);if(b.grid){gx.evt.setEventRow(c,d);var f=gx.fn.controlRowIndex(d)}gx.fn.disableKeys();return c[b.evt_cvc].call(c,f).always(function(){gx.evt.endValidation(b.gxGrid,gx.evt.types.VALUECHANGED);
gx.fn.enableKeys()})}return l.Deferred().resolve()},fireControlValueChanging:function(c){var d=gx.fn.getControlContext(c)||gx.O,g=l.Deferred();if(!d||!c)return g.resolve();var a=d.getValidStructFld(c);if(a){var b=a.gxgrid&&a.gxgrid.isFreestyle,f=a.evt_cvcing&&!a.gxsgprm;f&&gx.evt.startValidation(a.gxgrid);if(f||b)b=gx.O,gx.setGxO(d),"function"==typeof a.c2v&&a.c2v(),"function"==typeof a.v2bc&&a.v2bc.call(d),gx.setGxO(b);if(f)return a.grid&&gx.evt.setEventRow(d,c),d[a.evt_cvcing].call(d).always(function(){gx.evt.endValidation(a.gxGrid,
gx.evt.types.VALUECHANGING)})}return g.resolve()},oncontrolvaluechanging:function(c){var d=c.keyCode;8!=d&&32>d||33<=d&&46>d||112<=d&&123>=d&&121!=d||(c=gx.evt.source(c))&&gx.evt.fireControlValueChanging(c)},oncontrolpasting:function(c){(c=gx.evt.source(c))&&gx.lang.doCallTimeout(gx.evt.fireControlValueChanging,gx.evt,[c],0)},onkeypress:function(c,d,g){if(c=c||window.event){var a=13===c.keyCode;27===c.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(c,!0);var b=gx.fn,f=gx.util.browser;d={event:c,
hasEnter:d,skipOnEnter:g,cancel:!1};if(27===c.keyCode&&gx.popup.ispopup())b.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",[d]),!d.cancel){a&&!gx.isInputEnabled()&&this.cancel(c,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(c))return this.cancel(c,!0),!1;this.lastKey=c.keyCode;this.shiftPressed=c.shiftKey;var k=c.ctrlKey;d=gx.evt.source(c)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(d,c)||this.cancel(c,!0);9!==c.keyCode&&gx.csv.invalidateCtrl(d,
c);if(!(this.isEnterEvtCtrl(d)&&this.isTriggerKey(c)&&this.cancelAndRefresh(c))&&(this.checkFuncKey(c,d),(32==c.charCode||32==c.keyCode||a&&!g)&&gx.dom.hasClass(d,"gx_newrow")&&l(d).find("span").trigger("click"),a&&g||!gx.grid.handleKeyPressEvt(c)))switch(c.keyCode){case 13:a=this.triggersEvt(d),g?b.enterHasFocus()||this.shiftPressed&&"TEXTAREA"===d.nodeName||(k&&"TEXTAREA"===d.nodeName?(gx.dom.replaceAtCaretPosition(d,"\n"),this.cancel(c,!0)):(f.isIE()&&"file"!=d.type?(gx.evt.isEnterEvtCtrl(d)&&
gx.O.executeEnterEvent(c,d),this.lastKey=9,c.keyCode=this.lastKey,this.cancel(c,!0),b.skipFocus(g,d)):(d.value&&f.isIE()&&"SELECT"!=d.tagName&&(f=d.value,d.value="",d.value=f),b.skipFocus(g),this.cancel(c,!0)),this.enter=!1)):a||gx.O.executeEnterEvent(c,d)}}}},onkeyup:function(c){var d=window.event?window.event:c;c=gx.evt.source(d);var g=c.getAttribute("maxlength")||(c.getAttribute("max")?c.getAttribute("max").length:0),a="undefined"==typeof c.value?"":c.value;gx.evt.isComposing&&!d.isComposing&&
gx.fx.obs.notify("gx.endcomposing");gx.evt.isComposing=d.isComposing;if(""==c.type&&9==d.keyCode||this.autoSkip&&""!=c.type&&!this.isControlKey(this.lastKey)&&a.length>=g&&0<g){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(c)||gx.dom.isImageWithLink(c)){if(g=c.id||("A"==c.tagName&&c.parentNode?c.parentNode.id:""))g=gx.O.getValidStructId(g),gx.evt.onfocus(c,g,"",!1,"",0);return}c=c.getAttribute("gxfocusable");if(null!=c&&"1"==c)return;c=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:
gx.csv.lastControl);if(-1==c)return!0;var b=gx.fn.searchFocus(this.shiftPressed?c-1:c+1,!this.shiftPressed);c=b.value;gx.fn.setFocus(b);gx.lang.doCallTimeout(function(f){d.isComposing&&(b.value=f)},this,[c],50)}gx.grid.handleKeyUpEvt(d)},shouldIgnoreEscKey:function(){var c=gx.popup.getPopup();return gx.evt.processing||c&&"opening"==c.state},validKeypressForCtrl:function(c,d){if(!c||"text"!==c.type&&"number"!==c.type)return!0;var g=gx.O.getValidStructFld(c);if(g){var a=gx.rtPicture(g,c),b=gx.numericLenDec(a),
f=b.Decimals;b=b.Integers;var k=g.type;g=c.value;if("int"==k||"decimal"==k){if("e"===d.key)return!1;a:{try{if(null!==c.selectionStart&&void 0!==c.selectionStart){var m=c.selectionEnd-c.selectionStart;break a}else if(window.getSelection){m=window.getSelection().toString().length;break a}}catch(t){}m=void 0}if(void 0===m)return!0;if(gx.util.browser.isFirefox()&&"number"==c.type&&0===f)!c.gxoninput&&c.max&&c.min&&(c.gxoninput=!0,gx.evt.attach(c,"input",function(t){if(t.max&&t.min){var v=Number(t.value);
if(v>t.max||v<t.min)t.value=t.value.substr(0,t.max.length)}}.closure(this,[c])));else{if(1<d.key.length)return!0;if(/[^\+\-\.,]/.test(d.key)&&/\D/.test(d.key)&&!d.ctrlKey&&isNaN(Number(d.key)))return!1;if(d.key===gx.thousandSeparator)return!0;if(d.key===gx.decimalPoint)return c=g.substring(c.selectionStart,c.selectionEnd),0<c.length&&gx.text.contains(c,d.key)?!0:!gx.text.contains(g,d.key);if(/[\+\-]/.test(d.key))return!gx.text.contains(g,d.key);digits=g.split("").filter(function(t){return"0"<=t&&
"9">=t}).length;g=gx.num.normalize_decimal_sep(a,gx.thousandSeparator,gx.decimalPoint,g);picinputs=b+(-1==g.indexOf(gx.decimalPoint)?0:f);return digits-m<picinputs}}}return!0},setEventRow:function(c,d){var g=gx.fn.rowGridId(d),a=g&&(gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(g)||"0001");g&&a&&(void 0!=d.gxGridName&&gx.fn.setHidden(c.CmpContext+d.gxGridName.toUpperCase()+"_ROW",a),gx.evt.setCurrentGridRows(g,a));gx.csv.lastEvtRow=a},ctrlOnchange:function(c,d,g,a,b){gx.csv.pkDirty=g;"UPD"==c.value?
"1"==d.value?(g?null!=a&&(a.value=gx.getMessage("GXM_captionadd")):null!=a&&(a.value=gx.getMessage("GXM_captionupdate")),d.value="0"):g&&null!=a&&(a.value=gx.getMessage("GXM_captionadd")):"INS"==c.value&&"1"==d.value&&(null!=a&&(a.value=gx.getMessage("GXM_captionadd")),d.value="0")},onchange:function(){var c=function(){return gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,c.closure(this,arguments),{single:!0,async:!0}):c.apply(gx.evt,
arguments)},onchange_impl:function(c,d,g){var a=gx.fn.getControlContext(c)||gx.O,b=a.getValidStructFld(c),f=b&&b.hasRVFmt,k=l.Deferred();if(c.GXFormatError&&!f)k.resolve();else{gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=c;f=gx.fn.getControlValue("radio"==c.type?c.name:gx.dom.id(c));if(gx.evt.fixWebKitOnFocus()&&"radio"===c.type)c.onfocus();var m=!1,t=gx.O.focusControl,v=function(){delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");var r=gx.util.browser.isWebkit()&&("radio"==
c.type||"checkbox"==c.type||"file"==c.type),q="radio"==c.type||"checkbox"==c.type;m&&b&&(gx.fn.lastMainLevelCtrlId(t,b.grid)||b.gxsgprm)&&(q=r=!0);g&&(q=!1);if(r&&c.onblur)c.onblur();r=function(){gx.evt.execUsrOnchange(c);gx.fx.obs.notify("gx.validation");k.resolve()};!q||"undefined"!=typeof c.GXFormatError&&0!=c.GXFormatError?r():gx.csv.validControls(t,t+1,!0,a).then(r)};if(gx.csv.controlValueHasChanged(c,f,b)){m=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");
gx.csv.invalidateGXCtrl(c);var n=!0;if(b){var w=b.grid?gx.fn.controlRowIndex(c):void 0;"function"==typeof b.c2v&&b.c2v(w);"function"==typeof b.v2bc&&b.v2bc.call(a,w)}g||gx.fn.setControlOldValue(c,f);var A=function(){var r=l.Deferred();if("select-one"==c.type||"checkbox"==c.type||"radio"==c.type){n=!1;gx.evt.setReady(!1,"validationCallback");var q=b?gx.fn.currentGridRowImpl(b.grid):null;gx.csv.validate(c,b.id||t,!0,a,q).done(function(x){x&&gx.csv.invalidControl==c&&(gx.csv.invalidControl=null);gx.evt.execOnchange(c,
x);gx.evt.setReady(!0,"validationCallback");r.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");r.resolve()})}n&&(gx.evt.execOnchange(c,!1),r.resolve());return r.promise()};f=function(){A.call(this).then(v.closure(this))}.closure(this);gx.evt.fireControlValueChange(a,c,d).always(f)}else v.call(this);return k.promise()}},execOnchange:function(c,d,g){var a="";if(c.attributes["data-gxoch1"])try{a+=c.attributes["data-gxoch1"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(c)&&
c.attributes["data-gxoch2"])try{a+=c.attributes["data-gxoch2"].value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}try{""!=a&&eval(a)}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}d||gx.fn.setControlGxValid(c,"0");g||(c.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==g&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(c){var d="";try{d=c.attributes["data-gxoch0"].value}catch(g){return!0}return(new Function(d)).call(c)},jsEvent:function(c){if(!gx.isInputEnabled())return!1;
c=c.getAttribute?c.getAttribute("data-jsevent")||c.getAttribute("jsevent"):c.jsevent;return gx.lang.emptyObject(c)?!0:eval(c)},isEnterEvtCtrl:function(c){if(gx.O.EnterCtrl){var d=gx.dom.id(c);d||"A"!=c.tagName||(d=c.parentNode.id);d&&0==d.indexOf("span_")&&(d=d.substring(5));if(!d)return!1;var g=gx.O.EnterCtrl;c=gx.fn.rowGridId(c);for(var a=0,b=g.length;a<b;a++){var f=gx.csv.ctxControlId(g[a]);if(c&&-1!=d.search(new RegExp(".*"+f+"_[0-9]{4}$"))||f==d)return!0}}return!1},isCheckEvtCtrl:function(c){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){c=
gx.dom.id(c);for(var d in gx.O.CheckCtrl)if(gx.O.CheckCtrl[d]==c||gx.O.CmpContext+gx.O.CheckCtrl[d]==c)return!0}return!1},isTriggerKey:function(c){for(var d=this.triggerKeys.length,g=0;g<d;g++)if(c.keyCode==this.triggerKeys[g]||c.charCode==this.triggerKeys[g])return!0;return!1},isControlKey:function(c){for(var d=this.controlKeys.length,g=0;g<d;g++)if(c==this.controlKeys[g])return!0;return!1},invalidDSPKey:function(c){var d=c.keyCode-111;c.shiftKey&&(d+=12);return this.keyListeners[d]&&"ENTER"==this.keyListeners[d][gx.O.CmpContext]||
13==c.keyCode?!0:!1},addKeyListener:function(c,d,g){1==d&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[d]&&(this.keyListeners[d]=[]);this.keyListeners[d][c]=g},setEvtName:function(c,d){gx.fn.setHidden("_EventName",c)},cancelAndRefresh:function(c){var d=gx.O;if(d&&d.conditionsChanged){this.cancel(c,!0);d.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(d.Grids||[]);if(d.autoRefresh||d.hasEnterEvent||d.anyGridBaseTable)d.executeServerEvent("RFR",!1);else return!1;return!0}return!1},
resetGridsPagingVarsIfConditionsChanged:function(c){var d=!1;l.each(c,function(g,a){a.conditionsChanged&&a.conditionsChanged()&&(a.setPagingVars(0,0),d=!0)});return d},setGridEvt:function(c,d){if(gx.isInputEnabled()&&!gx.lang.emptyObject(c)){if(gx.lang.emptyObject(d)){var g=gx.fn.getGridObj(c);g&&(d=gx.fn.getHidden(gx.O.CmpContext+g.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",c);gx.fn.setHidden("_EventRowId",d);d&&gx.fn.setCurrentGridRow(c,d)}},checkFuncKey:function(c,d){var g=
this.lastKey-111;c.shiftKey&&(g+=12);if(0<g&&24>=g&&void 0!=this.keyListeners[g]){var a=this.keyListeners[g][gx.O.CmpContext];if("undefined"!=typeof a)this.execFnKeyEvt(c,gx.O,a,d);else for(var b in this.keyListeners[g])if(a=this.keyListeners[g][b],"undefined"!=typeof a){var f=gx.getObj(b,!1);if(null!=f){this.execFnKeyEvt(c,f,a,d);break}}}},execFnKeyEvt:function(c,d,g,a){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(c,!0),"PROMPT"==g){if((c=d.getValidStructFld(a))&&c.attachedCtrls){g=
c.attachedCtrls;for(var b=0,f=g.length;b<f;b++)if((a=g[b])&&a.info&&a.info.isPrompt){var k=g[b].id;"function"==typeof d.promptKeyHandlers[k]&&(a=0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",a=gx.dom.el(d.CmpContext+k+a),d.promptKeyHandlers[k].call(d,a))}}}else d.isTransaction()&&"SELECT"==g?(d=gx.dom.byId(d.CmpContext+"BTN_SELECT"))&&"function"==typeof d.click&&d.click():d.executeEvent(g,!1)},keyModifiesValue:function(c){c=window.event?c.keyCode:c.which;return 32<=c&&127>=c||229==c?!0:!1},triggersEvt:function(c){if(!gx.lang.emptyObject(c)){if(c==
gx.evt.dummyCtrl)return!0;var d=gx.config.evt.triggersEvtNodes||{};if("A"===c.nodeName||"TEXTAREA"===c.nodeName||d[c.nodeName])return!0;if("INPUT"===c.nodeName){if("button"===c.type||"image"===c.type)return!0}else if("IMG"===c.tagName&&gx.dom.hasAttribute(c,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(c){var d=c.status;c=c.cond;"undefined"!=typeof c&&!c||gx.evt.redirecting||(gx.evt.processing=d,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),
console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing"))},doAfterProcessing:function(c,d){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",d,c,{single:!0}):c.call(d)},doAfterComposing:function(c,d){gx.evt.isComposing?gx.fx.obs.addObserver("gx.endcomposing",d,c,{single:!0}):c.call(d)},doAfterValidating:function(c,d){gx.csv.isvalidating()?gx.fx.obs.addObserver("gx.onaftervalidatecompleted",d,c,{single:!0}):
c.call(d)},startValidation:function(c,d){if(c||d)gx.csv.validatingGrid=c,gx.csv.validating+=1},endValidation:function(c,d){c&&c!==gx.csv.validatingGrid||(--gx.csv.validating,0===gx.csv.validating&&(gx.csv.validatingGrid=null,gx.fx.obs.notify("gx.onaftervalidatecompleted")),0>gx.csv.validating&&gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",[d]))},userReadyThresholdWait:function(){gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=
Date.now());return Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(c,d){gx.evt.userReadyCnt+=c?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;0==gx.evt.userReadyCnt?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,
setCurrentGridRows:function(c,d){for(;0<c&&d&&d.length&&4<=d.length;){var g=d.substr(0,4),a=d.substr(4);gx.fn.setCurrentGridRow(c,g);if(c=gx.O.getGridById(c,a))c=c.parentGrid;c=c?c.gridId:0;d=d.substr(4,d.length)}},canExecuteEvent:function(c,d){return!(!d&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&(gx.lang.emptyObject(c)||gx.evt.processing)))},execEvt:function(c,d,g,a,b,f,k,m,t,v,n,w){gx.dbg.logPerf("execEvt");gx.text.contains(g,"EENTER")&&gx.ajax.saveFormForAutoComplete();
if(this.canExecuteEvent(g,v)){var A=gx.setGxObyCtx(c,d),r=b,q=this.EVT_ROW_ID_REGEXP.exec(g),x=q&&1<q.length?q[1]:null;q&&2<q.length&&gx.evt.setCurrentGridRows(r,x);x||(x=gx.fn.currentGridRowImpl(r));q=function(){gx.fx.obs.notify("gx.validation",null,function(){if(!v&&A&&A.inputHasFormatErrors(g,b,x))n&&n.call();else{gx.setGxObyCtx(c,d);k&&(gx.evt.srvCommand=!0,a&&(r=gx.fn.rowGridId(a),x=gx.fn.controlRowId(a),gx.lang.emptyObject(r)||gx.lang.emptyObject(x)||(gx.csv.lastGrid=r,gx.fn.setCurrentGridRow(r,
x))));if(0<gx.csv.lastId&&!gx.csv.validatingAll){var C=gx.O.getValidStruct(gx.csv.lastId);if((gx.evt.isEnterEvtCtrl(a)&&0<a.id?gx.O.getValidStructId(a.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(a)||C&&C.isuc)||w)gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1}this.setEvtName(g,a);this.lastEvent=g;if(!k&&(gx.grid.drawAtServer||a&&"INPUT"==a.nodeName&&"submit"==a.type))this.execEvtSubmit(g,a);else{gx.evt.setProcessing({status:!0,
ctx:"notifyValidation"});var F=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})};C=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),f,m,b,x,t);F()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(g,gx.O,r,x,!0,void 0,m).done(function(G){G||n&&n.call();t&&t(G);F()}).fail(C):gx.evt.execNonFullAjaxEvent(C)}}}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(a)&&a!=gx.csv.lastControl&&void 0!=
a.onfocus?(gx.fx.obs.addObserver("gx.onafterfocus",this,q,{single:!0}),a.onfocus()):q.call(this)}else n&&n.call()},execEvtSubmit:function(c,d){if(gx.isInputEnabled()){gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"});gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,d]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);c=gx.dom.form();var g=gx.popup.getPopup();if(null!=g&&(d=c.action,g=g.window.gx.popup.lvl,-1!=g)){var a=gx.http.urlParameterPrefix(d);a+=encodeURIComponent("gxPopupLevel="+
g+";");c.action=d+a}c.submit()}},execCliEvt:function(c,d,g,a,b,f){var k=l.Deferred();if(!this.canExecuteEvent(!0,!1))return k.reject();gx.fx.obs.notify("gx.validation");f=void 0!=f?f:[];var m=gx.getObj(c,d);if(null!=m){gx.setGxO(c,d);if("string"==typeof a&&""!=a&&4<arguments.length){var t=m.getGrid(a);t.instanciateRow(b);t=t.gridId}if(m.inputHasFormatErrors(m.getServerEventName(g),t,b))return k.reject();var v=m.isServerEvent(g);gx.evt.setProcessing({status:!0,cond:!v,ctx:"execCliEvt"});m.execC2VFunctions();
var n=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!v,ctx:"execCliEvt"})});m.conditionsChanged?m.executeServerEvent("RFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);k.resolve()},w=function(){m[g](f);n();gx.fx.obs.notify("gx.afterNonFullajax")};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(m.getServerEventName(g),m,t,b,!1,f).done(n).fail(w):gx.evt.execNonFullAjaxEvent(w);return k.promise()}return k.reject()},execNonFullAjaxEvent:function(c){gx.evt.NonFullAjaxserialRunner=
gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(c)},fixWebKitOnFocus:function(){var c=gx.util.browser;return c.isWebkit()&&!c.isChrome()||c.isChrome()&&30>c.chromeVersion()?!0:!1},dispatcherTimeout:30,dispatcher:function(){var c=function(d,g){g=[];var a,b={};for(a=0;a<d.length;a++){var f=d[a];b[f.eventName]||(b[f.eventName]=[]);b[f.eventName].push(f.deferred);
0!==g.length&&f.eventName===g[g.length-1].eventName||g.push(f)}for(a=0;a<g.length;a++){f=g[a];var k=b[f.eventName];for(d=0;d<k.length;d++)f.deferred!==k[d]&&f.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(k[d]))}return g};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(d,g,a,b){return b+(d.CmpContext+d.ServerClass)+(g||"")+(a||"")},getEventParmsMetadata:function(d,g,a){return g.EvtParms[d]["input"==a?0:1]},eventDepends:function(d,g,a){g=
this.getEventParmsMetadata(g,a,"output");d=this.getEventParmsMetadata(d,a,"input");for(var b,f=0,k=g.length;f<k;f++){a=gx.ajax.resolveParmKey(g[f]);for(var m=0,t=d.length;m<t;m++)if(b=gx.ajax.resolveParmKey(d[m]),a==b)return!0}return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents={}},beforeDispatch:function(d){var g=gx.ajax.getSecurityToken(d);g&&(d.InternalParms[g.id]=g.value)},types:{event:"event",validation:"validation"},dispatch:function(d,
g,a,b,f,k,m,t){t=t||gx.evt.dispatcher.types.event;f=void 0===f||f;var v=l.Deferred();if("object"===typeof d){var n=d.fn;d=d.eventName}g.cleanEventName(d);g.getClientEventName(d);if(t===gx.evt.dispatcher.types.validation){var w=d.toUpperCase();var A=d}else w=g.cleanEventName(d),A=g.getClientEventName(d);this.beforeDispatch(g);if(!g.EvtParms[w])return v.reject(),v.promise();d=this.getContextKey(g,a,b,t);var r=this.dispatchedEvents[d];f={eventName:w,clientSideEventName:A,clientSideFunction:f?null:(n||
g[A]).closure(g,k||[]),serverSide:f,deferred:v,arguments:k,disableForm:m};r?r.events.push(f):(r={gxO:g,grid:a,row:b,type:t,events:[f]},this.dispatchedEvents[d]=r,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[d])]),gx.evt.dispatcherTimeout));return v.promise()},dispatchTimeoutCallback:function(d){var g=this.dispatchedEvents[d],a=g.type,b=g.gxO,f=g.grid,k=g.row,m=[],t=[],v=[],n={};delete this.dispatchedEvents[d];if(a!==gx.evt.dispatcher.types.validation){d=
0;for(var w=g.events.length;d<w;d++){var A=g.events[d];if(A.serverSide)t.push(A);else{var r=!0;for(var q=0;q<d;q++)if(this.eventDepends(A.eventName,g.events[q].eventName,b)){r=!1;break}r?m.push(A):t.push(A)}}}else t=g.events;g=c(m,a).concat(c(t,a));m=!1;d=0;for(w=g.length;d<w;d++){t=g[d].eventName;n[t]||(n[t]=[]);n[t].push(g[d].deferred);if(m&&g[d].serverSide)x.addMethod(t);else{var x=this.createMessage(a,t,b,f,k,g[d].serverSide,g[d].disableForm);g[d].serverSide||(x.callback=g[d].clientSideFunction);
v.push(x)}m=g[d].serverSide}var C=function(p,u,y){for(var B=0,E=p.methods.length;B<E;B++)for(var I=n[p.methods[B]],L=0;L<I.length;L++){var M=I[L];M&&(u?M.resolve(y):M.reject(y))}};runCount=0;var F=this.serialRunner,G=function(){if(runCount<v.length){var p=v[runCount++],u=runCount==v.length;p.call().done(function(y){C(p,!0,y);G();u&&F.signalEndTask()}).fail(function(y){C(p,!1,y);for(var B=runCount;B<v.length;B++)C(v[B],!1,y);F.signalEndTask()})}};G()},createMessage:function(d,g,a,b,f,k,m){return d===
gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(g,a,b,f,k,m):new gx.ajax.message(g,a,b,f,k,m)}}}(),mouse:{x:-1,y:-1,update:function(c){try{gx.lang.emptyObject(c.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=c.pageX,this.y=c.pageY):0<c.touches.length&&(this.x=c.touches[0].pageX,this.y=c.touches[0].pageY)}catch(d){gx.dbg.logEx(d,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=
this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);
gx.csv_i=function(l){var c=function(d,g,a,b){b=[];for(var f=0;f<d.length;f++)b.push(g.validControl.apply(g,d[f]));l.when.apply(l,b).done(a)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,
validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return 0<gx.csv.validating},validateAll:function(d){var g=l.Deferred();d=d||gx.O;this.validControls(d.fromValid,d.toValid,!1,d).done(function(a,b){try{null!=this.invalidControl&&gx.csv.stopOnError||
(d.fromValid=b||d.toValid)}catch(f){gx.dbg.logEx(f,"gxapi.js","validateAll")}g.resolve()}.closure(this));return g.promise()},validControls:function(d,g,a,b,f){var k=l.Deferred(),m=[],t=0,v=0,n=0,w=gx.csv.fullGridValidation&&1<=g-d&&gx.O.isTransaction();b=b||gx.O;b.startFeedback();var A=function(P,Y){gx.csv.stopOnError&&(-1!=Y?(P=gx.fn.validStruct(Y,b),P=gx.fn.getControlGridRef(P.fld,P.grid),gx.csv.disableFocus=document.activeElement!==P,gx.fn.isAccepted(P,b)?gx.fn.setFocus(P):gx.fn.setFocus(gx.evt.lastControl)):
gx.dom.isButton(gx.csv.lastControl)||null==gx.csv.validActivatedControl||gx.fn.setFocus(gx.csv.validActivatedControl))};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;var r=null;if(g>d){w&&(r=gx.fn.validStruct(d),void 0!=r&&void 0!=r.lvl&&(t=r.lvl),r=gx.fn.validStruct(g),void 0!=r&&void 0!=r.lvl&&(v=r.lvl));m=[];for(var q=d;q<g;q++){r=gx.fn.validStruct(q);var x=null;if(r){var C=gx.fn.currentGridRowImpl(r.grid);var F=!!r.hasRVFmt;x=1==r.isuc?r.uc.getRealControl():
gx.fn.getControlGridRef(r.fld,r.grid)}else F=!1;if(x&&x.GXFormatError&&!0===x.GXFormatError&&!F){var G=q;break}m.push([q,a,b,C,f]);if(w&&q>d&&q<g&&void 0!=r&&void 0!=r.lvl&&(n=r.lvl,n!=t&&n!=v&&r&&r.grid)){var p=gx.fn.getGridObj(r.grid),u=p.grid.rows.length,y=gx.fn.currentGridRowImpl(r.grid),B=gx.fn.lastGridControl(r.grid);if(q==B){var E=gx.fn.firstGridControl(r.grid);for(x=0;x<u;x++){var I=p.grid.rows[x],L=I.gxDeleted(),M=I.gxExists(),O=I.gxIsMod();if(!L&&(M||O)&&I.gxId!=y)for(var R=E;R<=B;R++)m.push([R,
a,b,y,I.gxId])}}}}if(0<m.length)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),c(m,this,function(){for(var P=!0,Y=-1,W=0,Z=arguments.length;W<Z;W++){var aa=arguments[W].ret;if(P&&!aa){Y=arguments[W].ctrl;P=!1;break}}A(P,Y);gx.evt.setProcessing({status:!1,ctx:"validControls"});b.endFeedback();k.resolve(P,G)}),k.promise()}A(!0,-1);b.endFeedback();k.resolve(!0,G)}catch(P){gx.dbg.logEx(P,"gxapi.js","validControls")}return k.promise()},validControl:function(d,g,a,b,f){var k=l.Deferred();
a=a||gx.O;var m=gx.fn.validStruct(d,a),t=!0;if(void 0!=m){if(0!=m.grid){var v=b?b:gx.fn.currentGridRowImpl(m.grid);gx.lang.emptyObject(v)||gx.fn.setCurrentGridRow(m.grid,v)}1==m.isuc?(v=0!=m.grid?b?b:gx.fn.currentGridRowImpl(m.grid):null,m.getUCInstance(v),m.uc.execC2VFunctions()):"function"==typeof m.c2v&&m.c2v();"function"==typeof m.v2bc&&m.v2bc.call(a);try{if(0==m.lvl||0!=m.grid&&gx.fn.gridRowIsMod(m.lvl,gx.fn.currentGridRow(m.grid))||!a.isTransaction()){var n=null;if(n=1==m.isuc?m.uc.getRealControl():
gx.fn.getControlGridRef(m.fld,m.grid))return this.validate(n,d,g,a,b,f).done(function(w){try{var A=!1,r=!0,q=-1;0!=m.grid&&(A=gx.fn.rowIsRemoved(m.grid,gx.fn.currentGridRow(m.grid)));w||A||(gx.csv.invalidControl=n,gx.csv.invalidId=d,r=!1,q=d);gx.csv.lastId=d;0==gx.fn.isAccepted(n)&&(gx.evt.executeOnblur(d,n),n.getAttribute("data-gxhiddenonchange")!=n.value&&(n.setAttribute("data-gxhiddenonchange",n.value),gx.evt.execOnchange(n,!1,!0)))}catch(x){gx.dbg.logEx(x,"gxapi.js","validControl - callback")}k.resolve({ret:r,
ctrl:q})}),t=!1,k.promise()}}catch(w){gx.dbg.logEx(w,"gxapi.js","validControl")}}t&&k.resolve({ret:!0,ctrl:-1});return k.promise()},validate:function(d,g,a,b,f,k){var m=l.Deferred();b=b||gx.O;var t=!0;gx.csv.anyError=!1;var v=gx.fn.validStruct(g,b);if(void 0==v)return m.resolve(!0),m.promise();gx.csv.refreshVars(v,b);if(null==v.fnc&&null==v.isvalid){if("SELECT"!=d.tagName&&"checkbox"!=d.type&&!gx.evt.eachKeyAutorefreshType(v.type)&&!gx.lang.emptyObject(v.rgrid)){t=v.rgrid.length;for(var n=0;n<t;n++)v.rgrid[n].filterVarChanged()}m.resolve(!0);
return m.promise()}try{-1==g||!a&&"1"==d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||(gx.csv.currentId=g,gx.evt.startValidation(v.gxgrid,!0),gx.csv.refreshVars(v),a=function(w){1==b.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=d),gx.csv.anyError=!0,b.AnyError=0);gx.csv.anyError&&(w=!gx.csv.anyError);if(!w)return gx.evt.endValidation(),m.resolve(!1),m.promise();gx.csv.refreshControls(v,b,f);gx.csv.invalidateDeps(g,b);if(!gx.lang.emptyObject(v.rgrid)&&!gx.lang.emptyObject(v.hc)){w=
v.rgrid.length;for(var A=0;A<w;A++)v.rgrid[A].filterVarChanged()}var r=gx.fn.isAccepted(d,!1,b),q=function(){m.resolve(!0);try{if(!k){var F=gx.dom.byId(d.id);r?gx.fn.setControlGxValid(F,"1"):gx.fn.setControlGxValid(F,"0")}gx.evt.endValidation()}catch(G){gx.dbg.logEx(G,"gxapi.js","validate")}};if(null!=v.isvalid&&r&&"1"!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!k)if(A=v.gxgrid?v.gxgrid:null,w=v.isvalid,gx.pO.supportAjaxEvents){A=v.gxgrid?v.gxgrid.gridId:!1;var x=b.isServerEvent(w);w?gx.evt.dispatcher.dispatch(b.getServerEventName(w),
b,A,f,x).done(q).fail(q):b[w](f).then(q)}else{var C=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=A;b[w](f).then(function(){gx.csv.instanciatedRowGrid=C;q()})}else q()},t=!1,v.isuc?a.call(this,v.fnc.call(v.uc)):null!=v.fnc?(n=v.fnc.call(b))&&n.done?n.done(a.closure(this)):a.call(this,n):a.call(this,!0))}catch(w){gx.dbg.logEx(w,"gxapi.js","validate")}t&&m.resolve(!0);return m.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var d=gx.fn.controlIds(),g=d.length,a=0;a<g;a++){var b=
gx.fn.validStruct(d[a]);b&&b.fld&&!b.isuc&&(b=gx.fn.getControlGridRef(b.fld,b.grid),this.invalidateGXCtrl(b,!1))}},invalidateGXCtrl:function(d,g){"undefined"===typeof g&&(g=!0);d&&(1!=d.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||g&&!gx.csv.controlValueHasChanged(d)||gx.fn.setControlGxValid(d,"0"))},invalidateCtrl:function(d,g){try{this.invalidateGXCtrl(d);var a=gx.fn.validStruct(gx.O.focusControl);if(a&&0!=a.grid&&(!0===g||gx.evt.keyModifiesValue(g))){var b=gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(a.grid)||
"0001";a.gxgrid.setRowModified(b)}}catch(f){gx.dbg.logEx(f,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(d,g){for(var a=gx.fn.controlIds(g),b=a.length,f=0;f<b;f++){var k=a[f];if(k>d){k=gx.fn.validStruct(k,g);for(var m=k.ip?k.ip.length:0,t=0;t<m;t++)if(k.ip[t]==d)if(0==k.grid){var v=gx.fn.getControlGridRef(k.fld,k.grid);v&&gx.fn.setControlGxValid(v,"0")}else{var n=gx.fn.getGridObj(k.grid);if(n)for(var w=n.grid.rows.length,A=0;A<w;A++){v=n.grid.rows[A];var r=v.gxDeleted(),q=v.gxExists();!r&&
q&&(n.setRowModified(v.gxId),(v=gx.fn.getControlRef(k.fld+"_"+v.gxId))&&gx.fn.setControlGxValid(v,"0"))}}}}},controlValueHasChanged:function(d,g,a){if(!d)return!1;"undefined"===typeof g&&(g=d.value);var b=d.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),f=gx.applyPicture(a,b,d);return null===b||f!==gx.applyPicture(a,g,d)||gx.evt.fixWebKitOnFocus()&&"radio"===d.type},setFormatError:function(d,g){d=gx.dom.el(d);if(d.id){var a=void 0!==this.gxFormatErrors[d.id];g||"undefined"==typeof g?(a||(this.gxFormatErrors[d.id]=
this.gxFormatErrors.push(d.id)-1),d.GXFormatError=!0):(a&&this.gxFormatErrors.splice(this.gxFormatErrors[d.id],1),delete this.gxFormatErrors[d.id],d.GXFormatError=!1)}},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var d=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var g=gx.fn.validStruct(gx.O.focusControl);
if(g&&g.nac&&1==g.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var a=gx.fn.searchFocusFwd(cn);null!=a&&gx.fn.setFocus(a);gx.setVar("Gx_mode",d);return!0}gx.setVar("Gx_mode",d)}catch(b){}return!1},loadScreen:function(d){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,void 0,void 0,d,!1))}catch(g){gx.dbg.logEx(g,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(d,
g){var a=g||gx.O;return a&&a.IsMasterPage&&0!=d.indexOf("MP")&&(a=this.CTRL_ROW_INDEX_REGEXP.exec(d))&&1<a.length?(d=a[1],g=2<a.length?"_"+a[2]:"",d+(-1===d.indexOf("_MPAGE")?"_MPAGE":"")+g):(g=(g?g.CmpContext:this.cmpCtx)||"")&&0==d.indexOf(g)||0<=d.search(gx.GxObject.CONTROL_CMP_REGEX)?d:g+d},isProperty:function(d){return d instanceof Array&&2==d.length||"object"==typeof d&&"undefined"!=typeof d[0]&&"undefined"!=typeof d[1]?!0:!1},checkGridChange:function(d,g,a,b){if(d){var f=d.gridId;d=gx.fn.currentGridRowImpl(f);
gx.csv.validGridRowChange(f,d,a,d).done(function(){var k=a.getGridById(f,b);gx.csv.checkGridChange(k.parentGrid,!0,a,b)})}},checkRowChange:function(d,g,a,b){var f=l.Deferred();try{var k=gx.fn.validStruct(d,a);if("undefined"!=typeof k){var m=k.grid;if(0!=m){var t=gx.fn.currentGridRowImpl(m);if(t&&(t!=b||g)&&1<t.length&&b&&1<b.length){gx.csv.rowChanged=!0;var v=a.Gx_BScreen;a.Gx_BScreen=1;gx.csv.validGridRowChange(m,t,a,b).done(function(n){n&&(n=a.getGridById(m,b))&&(n.instanciateRow(t),n.parentGrid&&
gx.csv.checkGridChange(n.parentGrid,!0,a,b));a.Gx_BScreen=v;f.resolve(!0)})}else f.resolve(!1);void 0!=t&&gx.fn.setCurrentGridRow(m,t)}else f.resolve(!1)}else f.resolve(!1)}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","checkRowChange")}return f.promise()},validGridRow:function(d,g){void 0!=g&&gx.fn.setCurrentGridRow(d,g);g=gx.fn.firstGridControl(d);d=gx.fn.lastGridControl(d);gx.csv.validControls(g,d+1,!0,gx.O)},validGridRowChange:function(d,g,a,b){var f=l.Deferred();void 0!=b&&gx.fn.setCurrentGridRow(d,
b);var k=gx.fn.firstGridControl(d,a),m=gx.fn.lastGridControl(d,a);b=!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(g)&&b.length==g.length&&parseInt(b)>parseInt(g);gx.csv.anyFormatError()?(a=gx.csv.gxFormatErrors,gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{},gx.csv.invalidForcedCtrl.Ctrl=gx.dom.el(a[0]),gx.csv.invalidForcedCtrl.ForceFocus=!0,gx.fn.setFocus(gx.csv.invalidForcedCtrl.Ctrl),f.resolve(!1)):gx.csv.validControls(k,m+1,!0,a,b).done(function(t){!t&&gx.csv.stopOnError||gx.csv.changeGridRow(d,
k,g);f.resolve(t)});return f.promise()},changeGridRow:function(d,g,a){gx.csv.lastId=g;gx.O.fromValid>g&&(gx.O.fromValid=g);gx.csv.lastRow[d]=a;Gx_BScreen=1},targetRowIsMod:function(d){return(d=gx.fn.validStruct(d))?gx.fn.gridRowIsMod(d.lvl,gx.fn.currentGridRow(d.grid)):!1},refreshVars:function(d,g){for(var a=d.ip?d.ip.length:0,b=0;b<a;b++)try{"function"==typeof gx.fn.validStruct(d.ip[b],g).c2v&&gx.fn.validStruct(d.ip[b],g).c2v()}catch(f){gx.dbg.logEx(f,"gxapi.js","refreshVars")}},refreshControls:function(d,
g,a){for(var b=d.op?d.op.length:0,f=0;f<b;f++)try{var k=gx.fn.validStruct(d.op[f],g),m=null;if(0==k.grid)gx.fn.v2c(k),m=gx.dom.el(gx.csv.ctxControlId(k.fld));else{var t=gx.fn.currentGridRowImpl(k.grid);gx.text.endsWith(a,t)&&(gx.fn.v2c(k),m=gx.fn.getControlGridRef(k.fld,k.grid))}m&&gx.fn.setControlGxValid(m,"0")}catch(v){gx.dbg.logEx(v,"gxapi.js","refreshControls")}b=d.ucs?d.ucs.length:0;for(f=0;f<b;f++)try{gx.fn.validStruct(d.ucs[f],g).uc.execV2CFunctions(!0)}catch(v){gx.dbg.logEx(v,"gxapi.js","refreshControls")}},
setValidValues:function(d,g,a){var b=[];if(1<a.length-g.length){var f=gx.json.evalJSON(a[a.length-1]);for(h in f)gx.fn.setHidden(h,f[h]);b=gx.json.evalJSON(a[a.length-2])}f={};d={fields:d,msgs:b};gx.O.cmpCtx?f[gx.O.cmpCtx]=d:f.MAIN=d;gx.fn.setErrorViewer(f);if(!gx.O.AnyError){var k=!1;d=g.length;for(f=0;f<d;f++){var m=g[f];b=a[f];if(this.isProperty(m)){var t=gx.fn.vStructForVar(m[0])||gx.O.getValidStructFld(m[0]);null!=t&&gx.fn.setCtrlProperty(t.fld,m[1],b)}else if(t=gx.fn.validStruct(this.currentId),
gx.lang.emptyObject(t)||gx.lang.emptyObject(t.hc)||(t.hc==m?(gx.O[t.hc]=b,gx.fn.setHidden(this.cmpCtx+"GXH_"+t.fld,b)):t.hd==m&&(gx.O[t.hd]=b)),t=gx.fn.vStructForVarWId(m,this.currentId),gx.lang.emptyObject(t)){t=gx.fn.vStructForHC(m);if(null!=t){var v="";0!=t.grid&&(v="_"+gx.fn.currentGridRow(t.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+t.fld+v,b)}t=gx.fn.gridObjFromGxO(m);void 0!=t?(k=!0,t.loadGrid({rowProps:b})):gx.fn.saveLvlOldParm(m,b)&&(gx.setVar(m,b),gx.fn.setGridHidden(m,b))}else m=gx.fn.screen_CtrlRef(t.fld),
!gx.lang.emptyObject(m)&&b instanceof Object&&("SELECT"==m.tagName?(-1!=m.selectedIndex&&gx.fn.invalidEmptyValue(b)&&(b.s=m.options[m.selectedIndex].value),v=gx.dom.id(m),gx.fn.loadComboBox(v,b.v),gx.fn.setComboBoxValue(v,b.s)):gx.lang.emptyObject(b.s)||(b.s=gx.fn.trimSelectValue(b.s,t.type)),v=gx.fn.selectedDescription(b,t.type),b=gx.lang.emptyObject(b.s)&&!gx.lang.emptyObject(m.value)?m.value:"SPAN"!=m.tagName||gx.lang.emptyObject(b.s)||gx.lang.emptyObject(v)?b.s:v,gx.fn.setControlValue_span_safe(this.cmpCtx+
t.fld,b,0)),t.v2v&&(t.v2v(b),gx.fn.v2c(t,b,"bits"==t.type))}}gx.O.refreshOlds();gx.fn.enableDisableDelete(gx.O);k&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);
gx.http_i=function(l){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(c,d){return"{"!=d[0]&&200==c.status&&0!=c.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+
c.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(c,d,g){null!=gx.dom.el(c,!1,!0,!0)?gx.fn.setControlValue_impl(c,d):g&&(gx.dom.createInput(c,"hidden"),gx.fn.setControlValue_impl(c,d))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;l(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,
"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var c=gx.dom.el("GXState");if(c){var d=c=c.value;this.useBase64State&&(d=gx.base64.decode(c));this.viewState=gx.json.evalJSON(d);this.viewStateLoaded=!0;this.applyWellKnownPtys()}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(c){if(this.viewState){var d=gx.json.serializeJson(this.viewState,c);c=d;this.useBase64State&&(c=gx.base64.encode(d));d=
gx.dom.el("GXState");null==d?gx.dom.createInput("GXState","hidden"):this.oldState=d.value;gx.fn.setControlValue_impl("GXState",c);this.useStateSignature&&(gx.http.setStateHsh(c),gx.http.setHsh())}},setStateHsh:function(c){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");c=gx.MD5.getHsh(c);gx.fn.setControlValue_impl("GXHSH12",c)},setHsh:function(){for(var c=gx.pO.WebComponents.length,d=0;d<c;d++)gx.http.setObjectHsh(gx.pO.WebComponents[d]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(c){var d=
c.getControlIdsh();if(null!=d){var g="";c.IsComponent&&null!=c.CmpContext&&(g=c.CmpContext);for(var a="",b=0;b<d.length;b++)if((validStruct=c.getValidStruct(d[b]))&&"function"==typeof validStruct.val){var f=gx.fn.getControlValue_impl(g+validStruct.fld);a="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?a+validStruct.val():a+f}gx.http.createHsh(g+"GXHSH11",a)}},createHsh:function(c,d){null==gx.dom.el(c)&&gx.dom.createInput(c,"hidden");d=gx.MD5.getHsh(d);gx.fn.setControlValue_impl(c,d)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(c){c+="=";for(var d=document.cookie.split(";"),g=d.length,a=0;a<g;a++){for(var b=d[a];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(c))return b.substring(c.length,b.length)}return null},setCookie:function(c,d,g,a,b){g=g||1;var f=[];g=new Date((new Date).getTime()+864E5*g);f.push(c+"="+escape(d));b&&f.push("path="+b);f.push(a?"session":"expires="+g.toGMTString());"https:"===location.protocol&&
(f.push("secure"),f.push("samesite=none"));document.cookie=f.join(";");return this.getCookie(c)==d},checkResponseStatus:function(c,d){return c.status==this.STATUS_FORBIDDEN?!1:c.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(d),!0):this.isBadResponse(c)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",c.status)),!0):c.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&
gx.http.reloadOnTimeout(d),!0):!1},isSessionTimeoutError:function(c,d){return!gx.gen.isDotNet()&&d&&c&&gx.pO.AjaxSecurity&&c.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==d.name&&2147500037==d.result||"Error"==d.name&&-2146697209==d.number||"NETWORK_ERR"==d.name&&101==d.code)?!0:!1},reloadOnTimeout:function(c){if((c||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(c){""==document.location.hash?
this.redirect(location.href,!1,c):document.location.reload()},redirect:function(c,d,g,a,b){b=void 0===b?!0:b;a=a||gx.O;var f=gx.popup.getPopup();if(null!=f&&gx.util.sameAppUrl(c)&&(f=f.window.gx.popup.lvl,-1!=f)){var k=gx.http.urlParameterPrefix(c);k+=encodeURIComponent("gxPopupLevel="+f+";");c+=k}b&&!gx.isabsoluteurl(c)&&(c=gx.absoluteurl(c));d?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=a?a.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!g?(gx.spa.redirect(c),gx.pO!=a?a.endFeedback():
gx.ajax.enableForm()):location.href=c},getRequest:function(){var c=null;window.XMLHttpRequest&&(c=new XMLHttpRequest);if(!c)try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}}return c},postDataFormat:{HTTP:0,JSON:1},getPostData:function(c,d){d=d||gx.http.postDataFormat.HTTP;var g=d==gx.http.postDataFormat.HTTP?[]:{};if(c.reqData)g=c.reqData;else{c=c.formNode;c="Form"==c.tagName?c.elements:l("input[type!=file],textarea,select");for(var a=c.length,
b=0;b<a;b++){var f=gx.http.elementPostData(c[b],d);null!=f&&(d==gx.http.postDataFormat.HTTP?g.push(f):g[f[0]]=f[1])}}gx.lang.isArray(g)&&d==gx.http.postDataFormat.HTTP&&(g=g.join("&")+"&");return g},elementPostData:function(c,d){if(gx.json.isNonSerializable(c.name)||"FIELDSET"==c.tagName)return null;var g="";if("select-multiple"==c.type)for(var a=c.options.length,b=0;b<a;b++)c.options[b].selected&&(g=c.options[b].value);else if("radio"==c.type||"checkbox"==c.type)if(c.checked)g=c.value;else{if("radio"==
c.type)return null}else g="image"===c.type?c.src:this.element_gxvalue(c);return d==gx.http.postDataFormat.HTTP?encodeURIComponent(c.name)+"="+encodeURIComponent(g):[c.name,g]},element_gxvalue:function(c){return c.gxtype&&"dtime"==c.gxtype.type?(dt=new gx.date.gxdate(c.value,gx.dateFormat),dt.HasTimePart=0<c.gxtype.dec,dt.HasDatePart=0<c.gxtype.len,gx.date.dttoc(dt,c.gxtype.len,c.gxtype.dec)):c.value},doHandleRequest:function(c,d){if(c.readyState==this.STATE_DONE){if(c.status==this.STATUS_OK||d.handleAllStatusCodes){var g=
new gx.util.Url(c.responseURL);if(gx.text.endsWith(g.path,".html")){window.location.href=c.responseURL;return}this.isOffline(c)&&(this.handleOffline(c),d.offline&&d.offline.call(d.obj||window,c,d));this.doCallHandler(c,d)}else gx.http.checkResponseStatus(c,d.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[c.responseText,gx.getMessage("GXM_runtimeappsrv"),c.status],50);d.always&&d.always.call(d.obj||window,c,d);window.gx&&(gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog())}},
onRequestError:function(c,d){d.error&&d.error.call(d.obj||window,c,d);d.always&&d.always.call(d.obj||window,c,d);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});c.readyState==this.STATE_DONE?gx.http.checkResponseStatus(c,d.warnOnTimeout):this.isBadResponse(c)&&gx.http.reloadOnTimeout(d.warnOnTimeout)},isBadResponse:function(c){return c.status==this.STATE_UNSENT&&gx.lang.emptyObject(c.responseText)?!0:!1},doCall:function(c){c.gxInitiator=gx.util.executionContext.getContext();
gx.util.alert.hide();c.handler||"function"!=typeof c.load||(c.handler=c.load);"boolean"!=typeof c.sync&&(c.sync=!1);c.method||(c.method="POST");if(c.multipart&&"POST"==c.method)this.doMultipartPost(c);else{var d=this.getRequest();if(null!=d){if("function"==typeof c.handler&&!c.sync){var g=gx.http.doHandleRequest.closure(this,[d,c]),a=gx.http.onRequestError.closure(this,[d,c]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?d.onreadystatechange=g:(d.onload=g,d.onerror=a)}g=null;"POST"==c.method&&
(g=gx.http.getPostData(c));a=!1!==c.avoidCache?this.uncache(c.url):c.url;d.open(c.method,a,!c.sync);!1!==c.ajaxHeader&&d.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==c.method&&d.setRequestHeader("Content-Type",c.contentType?c.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&d.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(d,c.gxO);c.beforeSend&&c.beforeSend.call(c.obj||window,d);try{d.send(g)}catch(b){gx.dbg.logEx(b,
"gxapi.js","doCall")}"function"==typeof c.handler&&c.sync&&gx.http.doHandleRequest(d,c);return d}}return null},doCallHandler:function(c,d){if(!d.gxInitiator||!gx.util.executionContext.changedContext(d.gxInitiator))if(d.obj?d.handler.call(d.obj,null,c.responseText,c):d.handler(null,c.responseText,c),window.gx&&"function"===typeof d.onReady)d.onReady()},doMultipartPost:function(c){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=c;var d=c.formNode;c.oldAction=d.getAttribute("action");d.setAttribute("action",
c.url);c.oldTarget=d.getAttribute("target");d.setAttribute("target",this.iframeName);c.reqData&&(gx.http.saveHidden("GXAjaxMultipart",c.reqData,!0),this.setSecurityToken(null,c.gxO));d.submit()},setSecurityToken:function(c,d){(d=gx.ajax.getSecurityToken(d))&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",d.value,!0):c.setRequestHeader("X-GXAUTH-TOKEN",d.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?
"readystatechange":"load"},getPostIFrame:function(){var c=this.iframeName,d=gx.dom.byId(c);d&&d.frameElement&&(d=d.frameElement);d||(d=document.createElement("div"),d.innerHTML='<iframe id="'+c+'" name="'+c+'" src="about:blank">',document.body.appendChild(d),d=d.firstChild,document.body.appendChild(d),window[c]=d,d.name=c,d.setAttribute("name",c),d.id=c,d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.style.height="1px",d.style.width="1px",d.style.visibility="hidden");gx.evt.attach(d,
this.iFrameloadEventName(),gx.http.iframeOnload);return d},iFrameJsonResponse:function(c){return l(c).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(c){var d=/HTTP Status (\d\d\d)/gi,g=0;c.title&&(c=d.exec(c.title),0<c.length&&(g=Number(c[1])));return{status:g}},iframeOnload:function(){var c=gx.dom.byId(gx.http.iframeName);if(!gx.http.useReadyStateEvent()||"complete"==c.readyState)if(c||(c=window.frames[gx.http.iframeName]),c&&c.frameElement&&
(c=c.frameElement),c)try{gx.http.useReadyStateEvent()&&(c.src="about:blank",gx.evt.detach(c,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var d=c.gxPostInfo,g=d.formNode;g.setAttribute("action",d.oldAction);g.setAttribute("target",d.oldTarget);var a=c.contentDocument?c.contentDocument:c.contentWindow.document;if(a){var b=a.body,f=gx.http.iFrameJsonResponse(b),k=!gx.lang.emptyObject(f);k||(k=gx.dom.allChildrenAreText(b))&&(f=gx.http.multipartResponse(b));if(k){var m=gx.base64.decode(f);gx.http.clearMultipartHidden();
d.handler(null,m,d);if(window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d)}else{var t=gx.http.captureIframeHTTPStatusCode(a);gx.http.checkResponseStatus(t,d.warnOnTimeout)||document.write(a.documentElement.innerHTML)}}}catch(v){c="Unknown error";g=gx.getMessage("GXM_NetworkError").replace("%1","NoStatusCode");gx.text.startsWith(v.message,"Blocked a frame with origin")&&(c="Upload File Changed",g=gx.getMessage("GXM_FileUploadFileChanged"),l('input[type="file"]').val(""));
gx.dbg.logEx(v,"gxapi.js","FileUpload error: "+c);if(d.error)d.error.call(d.obj||window,null,d);else if(gx.fx.obs.notify("gx.afterNonFullajax"),window.gx&&"function"===typeof d.onReady)d.onReady();d.always&&d.always.call(d.obj||window,null,d);gx.util.alert.showError(g)}},multipartResponse:function(c){var d="";try{d=l(c).text()}catch(g){gx.dbg.logEx(g,"gxapi.js","multipartResponse")}return d},uncache:function(c){var d=(new Date).getTime();return c+gx.http.urlParameterPrefix(c)+"gx-no-cache="+d},callBackend_simple:function(c,
d,g,a,b,f,k,m){gx.http.callBackend_impl(void 0,c,d,gx.http.modes.none,g,a,b,f,k,m)},callBackend:function(c,d,g,a,b,f,k,m,t,v,n){gx.http.callBackend_impl(c,d,a,b,f,k,m,t,v,n)},callBackend_impl:function(c,d,g,a,b,f,k,m,t,v,n){var w=this.getRequest();v=v||{};if(w){try{var A=gx.O;b||A.startFeedback();f="undefined"!=typeof f?f:"GET";k="undefined"!=typeof k?k:null;t="undefined"!=typeof t?t:!1;m||(d=this.uncache(d));w.open(f,d,t);w.setRequestHeader(gx.ajax.reqHeader,"2");for(var r in v)w.setRequestHeader(r,
v[r]);try{"POST"==f?w.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&w.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(x){gx.dbg.logEx(x,"gxapi.js","callBackend_impl: gx.O cannot be null")}var q=function(){b||A.endFeedback();this.lastStatus=w.status;this.lastResponse=w.responseText;if(w.readyState!=this.STATE_DONE||w.status!=this.STATUS_OK)gx.http.checkResponseStatus(w)||(window.status=
"GXAjax HTTP error: ("+w.status+") - "+w.statusText,gx.dbg.logEx(w.responseText),n&&n());else if(a!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(a==this.modes.full)this.handleFull(this.lastResponse);else if(a==this.modes.call)return this.handleCall(this.lastResponse,c);return this.handleRetVal(this.lastResponse,c,g)}catch(x){gx.dbg.logEx(x,"gxapi.js","callBackend"),n&&n()}}else window.status="GXAjax HTTP error: (bad response format)",
n&&n()}.closure(this);t&&(gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?w.onreadystatechange=q:w.onload=q);w.send(k);t||q()}catch(x){window.status="GXAjax HTTP error: "+x.message}window.status=""}},handleFull:function(c){gx.http.postHandler(null,c,{status:200,responseText:""})},handleCall:function(c,d){if(d){var g=l.parseJSON(c);if(gx.lang.isArray(g))return d(g);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+c)}},handleRetVal:function(c,d,g){var a=
gx.json.evalJSON(c),b=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(d&&(g||null==this.lastStatus||0==this.lastStatus)){g=l.parseJSON(c);if(gx.lang.isArray(g))return d(g);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+c)}else return b},postHandler:function(c,d,g,a){try{if(gx.csv.lastEvtResponse=null,200>g.status||299<g.status)gx.dom.writeError(g.responseText,gx.getMessage("GXM_runtimeappsrv"),g.status);else if(gx.http.validJsonResponse(g,
d)){var b=gx.json.evalJSON(d);null==b?gx.dom.writeError(d.toString(),gx.getMessage("GXM_runtimeappsrv"),g.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=b,gx.fn.forceEnableControls(!0),b.rowId=this.rowId,b.gridId=this.gridId,gx.ajax.setPostResponse(b,gx.O,a).done(function(f){f||(gx.fx.obs.notify("gx.onafterevent",[b]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(f){gx.dbg.logEx(f,"gxapi.js","postHandler")}},encodeUriSegment:function(c){return encodeURIComponent(c).replace(/%20/g,"+")},
formatLink:function(c,d,g){c=gx.ajax.objectUrl(c);if(d&&0<d.length){var a=",",b="";g&&(a="&");c+="?";for(var f=d.length,k=0;k<f;k++)0<k&&(c+=a),g&&(b=g[k]+"="),c+=b+gx.http.encodeUriSegment("function"==typeof d[k].getUrlVal?d[k].getUrlVal():d[k])}return c},loadScripts:function(c,d,g,a){"undefined"==typeof g&&(g=0);g>=c.length?d():gx.http.loadScript(c[g],function(b,f,k){gx.http.loadScripts(b,f,k+1,a)}.closure(this,[c,d,g]),a)},loadStyle:function(c,d,g,a,b){if(a=b?document.querySelector('style[data-gx-href="'+
a+'"]'):a?gx.dom.byId(a):null)a.href=c;else{var f=gx.dom.byTag("head")[0];b?(a||(a=document.createElement("style"),a.setAttribute("data-gx-href",c)),a.innerHTML='@import url("'+c+'") layer('+b+")"):(a=document.createElement("link"),a.rel="stylesheet",a.type="text/css",a.href=c);"function"==typeof d&&(a.onload=d);g?(c=gx.getThemeElement(),l(a).insertBefore(c),gx.util.browser.isIE()&&l(c).insertAfter(a)):f.appendChild(a)}},applyDeferredStyles:function(){l("link[rel='preload'][as='style']").each(function(c,
d){d.rel="stylesheet"})},layerNaming:function(c){return c.replace(/\?\w*$/,"").replace(/[\/\.]/g,"_")},loadStyles:function(){var c=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(c))for(var d=0;d<c.length;d++){var g=c[d];g=gx.util.resolveUrl(g);gx.cache.fileLoaded(g)||(gx.cache.addRemoteFile(g),this.loadStyle(g,void 0,!0,void 0,this.layerNaming(g)))}},doCommands:function(){var c=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(c)||gx.ajax.dispatchCommands(c)},isOffline:function(c){return"1"===
c.getResponseHeader("X-GX-OFFLINE")},handleOffline:function(c){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(c){return!1===gx.csv.useNamedParameters?!1:-1<c.indexOf("=")},urlParameterSeparator:function(c){return this.useNamedParameters(c)?"&":","},urlParameterPrefix:function(c){var d=c.indexOf("?");return-1<d?d==c.length-1?"":this.urlParameterSeparator(c):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);
var defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},csv:{scrollTopOnError:!1}};gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});var GlobalEvents=function(l){return{executeMethod:function(c,d){gx.fx.obs.notify(c,d);try{for(var g=window;null!=g&&g.parent!==g;)g=g.parent,g!=window&&g.gx&&g.gx.fx.obs.notify(c,d)}catch(a){}}}}(jQuery);
gx.util.browser.isIE()&&function(){function l(c,d){d=d||{bubbles:!1,cancelable:!1,detail:void 0};var g=document.createEvent("CustomEvent");g.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return g}if("function"===typeof window.CustomEvent)return!1;l.prototype=window.Event.prototype;window.CustomEvent=l}();
gx.fx.obs.addObserver("gx.onload",gx,function(){var l={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(l={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,l).then(function(c){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",c.scope)}))});
(function(l){function c(p,u){p=l(p);var y=p.is("SPAN,DIV");return p.attr(u)||(y?p.find("> a").first().attr(u):"")}var d=gx.GxObject.prototype;d.sPrefix=function(){return this.CmpContext};d.declareDomainHdlr=function(p,u){this.GXValidFnc[p].dom_hdl=u};d.setVCMap=function(p,u,y,B,E,I){this.VarControlMap[p]={id:u,grid:y,type:B,length:E,decimals:I}};d.setSDTMapping=function(p,u){this.SDTMap=this.SDTMap||{};this.SDTMap[p]=u;p={};for(var y in u)u[y].extr&&(p[u[y].extr]=y);u.extrn=p};d.applySDTVarMapping=
function(p,u){if(this.VarControlMap[u]&&this.VarControlMap[u].type)var y=this.VarControlMap[u].type;return this.applySDTMapping(p,y,!0)};d.applySDTMapping=function(p,u,y){if(p&&u){u=this.SDTMap?this.SDTMap[u]:void 0;var B;if(u){for(B in u.extrn)y?(p[u.extrn[B]]=p[B],delete p[B]):(p[B]=p[u.extrn[B]],delete p[u.extrn[B]]);for(B in u)if(u[B].sdt){var E=p[B]?p[B].length:0;if(E)for(var I=0;I<E;I++)this.applySDTMapping(p[B][I],u[B].sdt,y);else this.applySDTMapping(p[B],u[B].sdt,y)}}}return p};d.Initialize=
function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};d.InitStandaloneVars=function(){var p=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=p&&gx.setGxO(p)};d.getCmpType=function(p){p=this.cmpRegex.exec(p);this.cmpRegex.lastIndex=0;return p};d.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return l(".gx-content-placeholder").get(0)||document.body;var p,u=this.getCmpType(this.CmpContext);
u&&(p=gx.dom.byId(u[1]+"gxHTMLWrp"+u[2]+(u[3]||"")));if(p)return p};d.setContainer=function(p){this.containerControl=p};d.setObjectType=function(p){this.ObjectType=p};d.getObjectType=function(){return this.ObjectType};d.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};d.setAjaxSecurity=function(p){this.AjaxSecurity=p};d.setOnAjaxSessionTimeout=function(p){switch(p){case "Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=
gx.timeoutActions.callObj}};d.addKeyListener=function(p,u){gx.evt.addKeyListener(this.CmpContext,p,u)};d.clearMessages=function(){this.MsgList.length=0};d.addMessage=function(p){this.MsgList.push(p)};d.showMessages=function(p){for(var u=[],y=this.MsgList.length,B=0;B<y;B++){var E=this.MsgList[B];"string"===typeof E?u.push({att:"",type:2,text:this.MsgList[B]}):u.push(E)}y={};y[""==this.CmpContext?"MAIN":this.CmpContext]=u;p?gx.fn.setErrorViewer(y,!1):gx.fn.setErrorViewer(y);this.clearMessages()};d.setPrompt=
function(p,u){gx.fn.attachCtrl(this.CmpContext+p,{id:p,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:u,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[p]=function(y){if((y=(y||gx.dom.el(p)).parentNode)&&y.href&&(y=y.href.match("javascript:(.+)"))&&1<y.length){y=decodeURIComponent(y[1]);try{eval(y)}catch(B){gx.dbg.logEx(B,"gxfrmutl.js","setPrompt")}}}};d.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var p=[],u=gx.csv.lastEvtResponse.gxValues,
y=u.length,B=0;B<y;B++){var E=u[B];if(E.CmpContext==this.CmpContext&&gx.lang.booleanValue(E.IsMasterPage)==this.IsMasterPage){p.push(E);break}}gx.fn.setJsonValues(p)}};d.call=function(p,u,y,B){gx.nav.willRedirect(p)?(!1===gx.csv.useNamedParameters&&(B=void 0),this.postEventRedirect={url:gx.http.formatLink(p,u,B),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};d.callUrl=function(p,u){gx.nav.willRedirectByUrl(p)?this.postEventRedirect={url:p,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,
arguments)};d.popupOpen=function(p){this.postEventPopupCommands.push({popup:gx.lang.clone(p)})};d.popupOpenUrl=function(p,u){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(p,u)})};d.refreshInputs=function(p){for(var u=p.length,y=0;y<u;y++){var B=this.getValidStructFld(p[y][1]);null!=B&&"function"==typeof B.c2v&&B.c2v()}};d.refreshOutputs_impl=function(p){for(var u=[],y=0,B=p.length;y<B;y++){var E=p[y];if(E.fld){var I=this.getValidStructFld(E.fld);if(null!=I)gx.fn.v2c(I),
E=gx.fn.getControlGridRef(I.fld,I.grid),gx.csv.invalidateGXCtrl(E),gx.fn.setControlOldValue(E,I.val());else{I=this.getVariable(E.av);if(null!=I&&"object"==typeof I){var L=this.getFormBCForVar(E.av);null!=L&&this.bcToScreen(L,I);(L=this.getGridForColl(E.av))&&L.refreshCollection(I)}gx.fn.setHidden(gx.csv.ctxControlId(E.fld,this),I)}}else E.ctrl&&u.push(E)}gx.uc.StartRender();y=0;for(B=u.length;y<B;y++)E=u[y],gx.uc.isUserControl(E.ctrl)&&(E.ctrl.execV2CFunctions(!1),E.ctrl.execShowFunction());gx.uc.EndRender()};
d.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};d.refreshOutputs=function(p){var u=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(u.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<u.length&&gx.ajax.dispatchCommands(u);this.refreshOutputs_impl(p);this.showMessages()};d.refreshRowOutputs=function(p){this.refreshOutputs_impl(p)};d.refreshServerOutputs=function(p){for(var u=p.length,y=0;y<u;y++){var B=p[y],E=gx.fn.getHidden(this.CmpContext+
B.fld);void 0!=E&&((B=this.getValidStructFld(B.fld))&&B.v2v?(B.v2v(E),gx.fn.v2c(B,E)):this.setVariable(p[y].av,E))}};d.getContextObject=function(p){return null!=this.getValidStructFld(p)&&(p=gx.fn.getControlValue_impl(this.CmpContext+p),null!=p)?p:""};d.getValidStructId=function(p){if(!gx.lang.emptyObject(p))for(var u=this.getControlIds(),y=0;y<u.length;y++){var B=this.getValidStruct(u[y]);if(this.isSameField(B,p))return u[y]}return-1};d.getValidStructFld=function(p){if("function"==typeof p||"object"==
typeof p&&p.tagName)p="object"==typeof p&&"radio"===p.type&&p.name?p.name:gx.dom.id(p);var u=this.getValidStructFld_cache[p];if(u)return u;if(!gx.lang.emptyObject(p)){u=this.getControlIds();for(var y=u.length,B=0;B<y;B++){var E=this.getValidStruct(u[B]);if(this.isSameField(E,p))return this.getValidStructFld_cache[p]=E}}return this.getValidStructFld_cache[p]=null};d.isSameField=function(p,u){var y=p.fld;if(y==u)return!0;this.IsComponent&&0==u.indexOf(this.CmpContext)&&(u=u.substring(this.CmpContext.length));
0!=p.grid&&(u=u.replace(this.rowPatternRegex,""));this.IsMasterPage&&(y=y.replace(/_MPAGE$/,""),u=u.replace(/_MPAGE$/,""));return y==u};d.getUserFocus=function(){var p=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(p)&&"notset"!=p){var u=gx.dom.byId(p);if(!gx.lang.emptyObject(u)&&!gx.fn.isAccepted(u)){p=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var y=gx.O;gx.O=this;u=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=y;gx.csv.cmpCtx=p;p=gx.lang.emptyObject(u)?"":u.id}}if(gx.lang.emptyObject(p)){if(this.hasMasterPage()&&
(p=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(p)))return p;u=[];for(y=0;y<this.WebComponents.length;y++)if(0==this.WebComponents[y].CmpContext.indexOf("MP"))u.push(this.WebComponents[y]);else if(p=this.WebComponents[y].getUserFocus(),!gx.lang.emptyObject(p))return p;for(y=0;y<u.length&&(p=u[y].getUserFocus(),gx.lang.emptyObject(p));y++);}return p};d.getGridColumn=function(p,u){var y=null,B=gx.fn.controlGridId(p);0!=B&&(u=gx.O.getGridById(B,u))&&(y=u.grid.getColumnByHtmlName(p));return y};
d.hasMasterPage=function(){return null!=this.MasterPage};d.setComponent=function(p){this.CmpControls[p.id.toLowerCase()]=p};d.getComponentByPrefix=function(p){var u=l.map(this.CmpControls,function(y,B){return y.Prefix==p?y:null});return 1==u.length?u[0]:null};d.refreshGrid=function(p){(p=this.getGrid(p))&&p.doRefresh()};d.refreshComponent=function(p){var u=this.getWebComponent(this.CmpContext+this.getComponentData(p).Prefix);u?gx.evt.dispatcher.dispatch("REFRESH",u):(u=gx.fn.controlGridId(p),0!==
u&&(u=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(p).Prefix+gx.fn.currentGridRow(u)))&&gx.evt.dispatcher.dispatch("REFRESH",u))};d.getComponentPrefix=function(p){return(p=this.getComponentData(p))?p.Prefix||"":""};d.getComponentData=function(p){return this.CmpControls[p.toLowerCase()]};d.createWebComponent=function(p,u,y,B,E,I,L){I=I||this.getComponentPrefix(p);B||(p=gx.fn.controlGridId(p),B=0!==p?gx.fn.currentGridRow(p):"");E=E||this.CmpContext+"gxHTMLWrp"+I+B;I=this.CmpContext+I;
var M=gx.getObj(I,!1);M?M.startFeedback():(p=gx.dom.byId(E),p.firstChild&&gx.dom.mask(E));p=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(u,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(p+u,y,I,B).done(function(O){O.DynComponentMap||(O.DynComponentMap={});O.DynComponentMap[I+B]=E;gx.ajax.setJsonResponse({response:O,isPostBack:!0,gxObject:M||gx.O,afterCmpLoaded:function(){L&&L(I)}});M?M.endFeedback():gx.dom.unmask(E)})};d.registerComponent=function(p){this.WebComponents[p.CmpContext]=
p;this.WebComponents.push(p)};d.setWebComponent=function(p,u){this.deleteComponent(p.CmpContext,p,!1);u&&this.restoreComponentHiddens(p.CmpContext,u);this.registerComponent(p);p.JustCreated=!0;gx.fn.setHidden(p.CmpContext,p.ServerClass);gx.fx.obs.notify("webcom.render",[p])};d.getWebComponent=function(p){return this.WebComponents[p]};d.deleteComponent=function(p,u,y){y="undefined"==typeof y?!0:y;var B=this.getWebComponent(p);if(B){var E=gx.gen.isJava()&&B.PackageName?B.PackageName+".":"";gx.cache.deleteInlineCode(p+
E+B.ServerClass.toLowerCase());y&&this.deleteComponentHiddens(p);gx.lang.emptyObject(u)||gx.fn.setHidden(u.CmpContext,u.ServerClass);B.ondestroy();delete this.WebComponents[p];u=this.WebComponents.length;for(y=0;y<u;y++)if(this.WebComponents[y].CmpContext==p){this.WebComponents.splice(y,1);break}for(u=gx.attachedControls.length;u--;)gx.attachedControls[u].info.wc===p&&gx.attachedControls.splice(u,1);u=this.WebComponents;for(var I in u)isNaN(parseInt(I))&&0===I.indexOf(p)&&this.deleteComponent(I)}};
d.deleteComponentHiddens=function(p){if(gx.lang.isArray(p)){if(0==p.length)return;p=gx.fn.getCmpRegex("("+p.join("|")+")")}else p=gx.fn.getCmpRegex(p);p=gx.fn.filterHiddens(p,gx.http.viewState);for(var u in p)u&&gx.fn.deleteHidden(u)};d.restoreComponentHiddens=function(p,u){p=gx.fn.getCmpRegex(p);u=gx.fn.filterHiddens(p,u);for(var y in u)y&&gx.fn.setHidden(y,u[y])};d.setCmpContext=function(p){void 0!=p&&(this.IsTypeComponent=!0,""!==p&&(this.IsComponent=!0),this.CmpContext=p)};d.getOldLvl=function(p){for(var u in this.LvlOlds)for(var y=
this.LvlOlds[u],B=y.length,E=0;E<B;E++)if(y[E]==p)return u;return-1};d.refreshDependantGrids=function(p){for(var u=this.Grids.length,y=0;y<u;y++)for(var B=this.Grids[y],E=B.refreshVars,I=E.length,L=0;L<I;L++)if(E[L].fld==p.fld){B.filterVarChanged();break}};d.getCtrlPropertyValue=function(p,u){var y=gx.fn.getCtrlProperty(p,u);void 0===y&&(y=gx.fn.getHidden(p+"_"+u));return y};d.setGrid=function(p){this.Grids[p.gridName]=p;this.GridsUpper[p.gridName.toUpperCase()]=p;var u=this.getGridIdxByName(p.gridName);
-1!=u?this.Grids[u]=p:this.Grids.push(p)};d.getGrid=function(p){p=p||"";return this.Grids[p]||this.GridsUpper[p.toUpperCase()]};d.getGridIdxByProp=function(p){for(var u=this.Grids.length,y=0;y<u;y++)if(p(this.Grids[y]))return y;return-1};d.getGridIdxByName=function(p){return this.getGridIdxByProp(function(u){return u.gridName===p})};d.getGridByBaseName=function(p){var u=this.getGridIdxByProp(function(y){return y.gridName===p||y.grid.GridBaseName===p});return-1===u?null:this.Grids[u]};d.getGridIdx=
function(p){for(var u=this.Grids.length,y=0;y<u;y++)if(this.Grids[y].gridId==p)return y;return-1};d.getGridById=function(p,u){u=u||"";for(var y=this.Grids.length,B=0;B<y;B++){var E=this.Grids[B];if(E.gridId==p&&(!E.parentRow||gx.text.endsWith(u,E.parentRow.gxId)))return E}return null};d.getGridForColl=function(p){p=this.getAllGridsForColl(p);return 0===p.length?null:p[0]};d.getAllGridsForColl=function(p){for(var u=this.Grids.length,y=[],B=0;B<u;B++){var E=this.Grids[B];E.boundedCollName==p&&y.push(E)}return y};
d.getFormBCForVar=function(p){for(var u in this.FormBCs){var y=this.FormBCs[u];if(y&&y.gxvar==p)return y}return null};d.getGridBC=function(p){var u=p;this.IsComponent&&0===p.indexOf(this.CmpContext)&&(u=p.substring(this.CmpContext.length));return this.GridBCs[u]};d.getFormBC=function(p){var u=p;this.IsComponent&&0===p.indexOf(this.CmpContext)&&(u=p.substring(this.CmpContext.length));return this.FormBCs[u]};d.addGridBCProperty=function(p,u,y,B){var E=this.getGridBC(p);"undefined"==typeof E&&(E={},
E.gxvar=B,this.GridBCs[p]=E);this.addBCProperties(E,u,y,B)};d.addBCProperty=function(p,u,y,B){var E=this.getFormBC(p);"undefined"==typeof E&&(E={},E.gxvar=B,this.FormBCs[p]=E);this.addBCProperties(E,u,y,B)};d.addBCProperties=function(p,u,y,B){if(p&&y)if(u instanceof Array)for(var E=u.length,I=function(M){var O=this[y.gxvar];gx.lang.emptyObject(y.hc)||(O=this[y.hc]);if("date"==y.type)O=(new gx.date.gxdate(O)).getString("Y4MD");else if("bitstr"===y.type&&gx.pO.fullAjax){var R=gx.fn.getControlGridRef(y.fld,
y.grid,M);R&&l(R).val()&&(O="gxformdataref:"+R.id)}this.valueToBCProp(this[B],u,y,O,M)},L=0;L<E;L++){if("undefined"==typeof p[u[L]])if(L<E-1)p[u[L]]={};else{p[u[L]]=y;"object"==typeof this[B]&&(y.v2bc=I);break}p=p[u[L]]}else"string"==typeof u&&(p[u]=y)};d.valueToBCProp=function(p,u,y,B,E){try{if(p){var I=u.length,L=E||"",M=E=0,O,R=function(P){if(gx.lang.isArray(P)&&y&&y.grid){var Y=gx.fn.getGridObj(y.grid,L&&4===L.length?L:void 0);Y=Y&&Y.grid&&!Y.InfiniteScrolling?Y.grid.firstRecordOnPage:0;O=L?L:
gx.fn.currentGridRow(y.grid);3<O.length&&(M+=1,O=O.substr(-4*M,4),P=P[Number(Y||0)+Number(O)-1])}return P};for(p=R(p);p&&E<I-1;E++)p=R(p[u[E]]);p&&(E=u.length-1,p[u[E]]=B,void 0!==p[u[E]+"_N"]&&(p[u[E]+"_N"]=0))}}catch(P){gx.dbg.logEx(P,"gxfrmutl.js","valueToBCProp")}};d.bcToScreen=function(p,u){for(var y in p)if("gxvar"!=y)try{if("object"==typeof u[y])this.bcToScreen(p[y],u[y]);else{var B=p[y];(0==B.grid||gx.csv.validatingGrid&&B.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(B.hc)&&void 0!=
u[y]&&B.v2v&&(B.v2v(u[y]),gx.fn.v2c(B,u[y]))}}catch(E){gx.dbg.logEx(E,"gxfrmutl.js","bcToScreen")}};d.addGridUCEventHandler=function(p,u,y){gx.lang.emptyObject(this.GridUCsEvts[p])&&(this.GridUCsEvts[p]=[]);this.GridUCsEvts[p].push({e:u,h:y})};d.getGridUCEventHandlers=function(p){p=this.GridUCsEvts[p];return gx.lang.emptyObject(p)?[]:p};d.setGridUCDynProp=function(p,u,y,B,E){this.setGridUCProp(p,u,y,B,E)};d.setGridUCProp=function(p,u,y,B,E){gx.lang.emptyObject(this.GridUCsProps[p])&&(this.GridUCsProps[p]=
[]);this.GridUCsProps[p].push({p:u,h:y,v:B,t:E});"InternalTitle"==u&&(this.GridUCsProps[p].title=B)};d.getGridUCProperties=function(p){p=this.GridUCsProps[p];return gx.lang.emptyObject(p)?[]:p};d.addUsercontrolBinding=function(p,u,y){this.UCBindings[p]||(this.UCBindings[p]={fld:u,uc:[]},this.UCBindingsHiddens[u]=this.UCBindings[p]);gx.util.inArray(y,this.UCBindings[p].uc)||this.UCBindings[p].uc.push(y)};d.setUserControl=function(p){p.ContainerName&&(this.UserControls[p.ContainerName]=p)};d.getUserControl=
function(p){var u=this.UserControls[p];u||""==this.CmpContext||(u=this.UserControls[this.CmpContext+p]);return u};d.getUserControlGrids=function(){return l.map(this.Grids,function(p){if(p.grid&&p.isUsercontrol)return p.grid})};d.execV2CFunctions=function(p,u,y,B){y=void 0===y||y;u||(u=this.UserControls);var E=this;gx.uc.StartRender();l.each(u,function(I,L){!L||E!=L.ParentObject||!y&&L.GridId&&!L.gxGridName||B&&!B(L)||L.updateAndShow(p)});gx.uc.EndRender()};d.execC2VFunctions=function(){l.each(this.UserControls,
function(p,u){try{u.execC2VFunctions()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","execC2VFunctions")}try{u.saveProperties()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","execC2VFunctions")}})};d.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};d.setVariable=function(p,u){var y=this[p]=u;0!=p.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+p,u);if(void 0!=this.VarControlMap[p]){var B=this.VarControlMap[p].type;if("date"==
B||"dtime"==B)"string"==typeof u&&(u=new gx.date.gxdate(u),this[p]=u),"date"==B?y=u.getStringWithFmt("Y4MD"):(y=this.VarControlMap[p].decimals,y=u.getStringWithFmt("Y4MD")+" "+u.getTimeString(!0,!0,1<y,12<=y));"decimal"==B&&"."!=gx.decimalPoint?(y=u.toString().replace(".",gx.decimalPoint),"string"==typeof u&&(this[p]=gx.num.parseFloat(u))):"int"==B&&"string"==typeof u&&(this[p]=gx.num.parseInt(u));gx.fn.setHidden(this.CmpContext+this.VarControlMap[p].id,y)}"Gx_mode"==p&&this.setMode();void 0!=this.UCBindings[p]&&
gx.fn.setHidden(this.CmpContext+this.UCBindings[p].fld,u)};d.getVariable=function(p){return this[p]};d.isServerEvent=function(p){return this.Events[p][1]||!1};d.getServerEventName=function(p){return this.Events[p][0]||""};d.getClientEventName=function(p){for(var u in this.Events)if(this.Events[u][0]==p)return u;return""};var g={RFR:"REFRESH",RFR_MPAGE:"REFRESH"},a=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],b=function(p){for(var u=0;u<a.length;u++)if(0<=p.indexOf(a[u]))return!1;return!0};d.cleanEventName=
function(p){p=p.replace(new RegExp("^"+this.CmpContext),"");var u=(gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/).exec(p);p=u&&u.length&&1<u.length?u[1].replace(/\.\d*$/,""):p;return g[p]||p};d.inputHasFormatErrors=function(p,u,y){var B=this;u=this.cleanEventName(p);var E,I,L=!1;p=gx.csv.anyFormatError();var M;if(!this.fullAjax&&p)return!0;if(!p||!this.EvtParms[u]||!b(u))return!1;y=this.EvtParms[u][0];var O=this,R=function(Z,aa,ba){var ia=aa||ia,ma=ba||ma;if(Z)if(ia&&ma&&Z.grid==ia){if((E=
gx.fn.getControlGridRef(Z.fld,ia,ma))&&E.id&&void 0!==gx.csv.gxFormatErrors[E.id])return!0}else if((E=gx.fn.getControlGridRef(Z.fld,Z.grid))&&E.id)for(M in gx.csv.gxFormatErrors)if(Z==O.getValidStructFld(M))return!0;return!1};u=0;for(len=y.length;u<len&&!L;u++){var P=y[u];if(P.postForm)return p;if(P.fld)if(I=this.getValidStructFld(P.fld))L=L||R(I);else{var Y=this.getFormBCForVar(P.av);if(null!=Y)for(var W in Y)I=Y[W],"object"===typeof I&&(L=L||R(I));(P=gx.O.getAllGridsForColl(P.av))&&P.some(function(Z){var aa=
Z.gridId;gx.O.GXValidFnc.filter(function(ba){return ba.grid===aa}).forEach(function(ba){(I=B.getValidStructFld(ba.fld))&&Z.grid.rows.forEach(function(ia){L=L||R(I,aa,ia.gxId)});return L})})}}return L};d.setEventParameters=function(p,u){gx.csv.lastEvtRow=null;gx.O=this;var y=!0,B=-1;gx.csv.cmpCtx=this.CmpContext;for(var E=p.length,I=0;I<E;I++){var L=p[I][0],M=p[I][1],O=p[I][2],R=!1;if(u instanceof r)this.setVariable(O,u.parms[I]),R=!0;else for(var P in u)if(P.toLowerCase()==L.toLowerCase()){this.setVariable(O,
u[P]);R=!0;break}R||this.setVariable(O,u);L=this.getValidStructFld(M);null!=L?(0!=L.grid&&-1==B?B=L.grid:0!=L.grid&&L.grid!=B&&(y=!1),gx.fn.v2c(L)):gx.fn.setHidden(this.CmpContext+M,this.getVariable(O))}y&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(B))};d.executeEvent=function(p,u,y,B,E){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var I=this.getClientEventName(p);(I?this.isServerEvent(I):1)?(E?(I=this.getGrid(E))&&y?I.instanciateRow(y):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,
p=this.executeServerEvent(p,u,y,B,this.fullAjax&&!y&&!E)):p=gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,I,E,y,"");gx.csv.instanciatedRowGrid=null;return p};d.executeServerEvent=function(p,u,y,B,E){var I=l.Deferred();gx.O=this;gx.csv.cmpCtx=this.CmpContext;var L=!0;void 0!=u&&0==u&&(L=!1);(u=null!=y&&(gx.csv.validatingGrid||gx.csv.instanciatedRowGrid))&&u.parentObject!=this&&(u=null);var M=gx.lang.emptyObject(u)?!1:u.gridId;y=y||gx.csv.lastEvtRow||"";E?(y="",M=null):(""==y&&M&&(y=gx.csv.lastRow[M]),
"undefined"==typeof y&&(y=gx.fn.currentGridRowImpl(u.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+p+"."+(y||""),gx.evt.dummyCtrl,M,L,null,null,function(){I.resolve()},B,function(){I.resolve()},!1);return I.promise()};d.executeEnterEvent=function(p,u,y){var B=this.gxOWithEnter(u),E=!1;if(u&&u.onblur)u.onblur();if((gx.pO.fullAjax||null==B)&&p&&gx.evt.cancelAndRefresh(p)){if(null==B||B.autoRefresh||!B.hasEnterEvent||B.anyGridBaseTable)return;E=!0}p?(gx.dom.hasSubmitControl()&&
gx.evt.cancel(p,!0),u&&"INPUT"==u.nodeName&&gx.dom.isEditControl(u)&&gx.evt.cancel(p,!0)):E=!0;if(null!=B){var I="ENTER";B.IsMasterPage&&(I+="_MPAGE");I=B.CmpContext+"E"+I+".";if(u&&gx.evt.isEnterEvtCtrl(u)){var L=gx.fn.controlRowId(u);var M=gx.fn.controlGridId(u.id);L&&(I+=L)}gx.evt.execEvt(B.CmpContext,B.IsMasterPage,I,gx.evt.dummyCtrl,M,!1,null,y,null,E,void 0,null!=B);p&&gx.evt.cancel(p,!0)}};d.gxOWithEnter=function(p){if(p&&(p=gx.fn.getControlContext(p))&&p.hasEnterEvent)return p;if(this.hasEnterEvent)return this;
if(this.IsComponent){p=this.getCmpType(this.CmpContext);var u=""==p[1]&&0==p[0].indexOf("MP");p=gx.getObj(p[1],u);if(!gx.lang.emptyObject(p))return p.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};d.getLastControlId=function(){return this.GXLastCtrlId};d.getValidStruct=function(p){return this.GXValidFnc[p]};d.getControlIds=function(){return this.GXCtrlIds};d.getControlIdsh=function(){return this.GXCtrlIdsh};d.getUsercontrolFromChild=function(p){l.each(this.UserControls,
function(u,y){u=y.getContainerControl();if(gx.dom.isChildNode(p,u))return y});return null};d.installFlatLevelDatePickers=function(){for(var p,u=this.getControlIds(),y=u.length,B=0;B<y;B++)p=this.getValidStruct(u[B]),void 0!=p&&0==p.grid&&void 0!=p.dp&&gx.fn.installDatePicker(this.CmpContext+p.fld,p,this,p.dp.f,p.dp.st,p.dp.wn,p.dp.mf,gx.fn.datePickerFormat(p.dp.pic,p.dp.dec,p.len),p.len,p.dp.dec)};d.installImageControls=function(){for(var p=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),u=0,
y=p.length;u<y;u++)gx.html.multimediaUpload.createControl(p[u]);p={};this.IsComponent&&(u=gx.pO.getWebComponent(this.CmpContext),p.observerKey=u&&u.getContainer()&&u.getContainer().id);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue,p)};d.initControlsEnabledFlag=function(p){if("bits"!=p.type&&"audio"!=p.type&&"video"!=p.type&&(p=gx.fn.getControlRef(p.fld))){var u=gx.http.viewState[gx.dom.id(p)+"_Enabled"];void 0!==u&&gx.fn.setEnabledProperty(p,gx.lang.gxBoolean(u),!1)}};
d.initControlsBehaviour=function(){var p=this;l.each(gx.O.GXValidFnc,function(u,y){y&&y.fld&&(p.initControlsEnabledFlag(y),y.gxsgprm&&(u=gx.fn.getControlRef(y.fld))&&gx.fx.installSuggest(u))})};var f=function(p){if(gx.lang.emptyObject(p))return!1;try{var u=new Function(gx.text.contains(p.toLowerCase(),"return")?p:"return "+p)}catch(y){return gx.lang.doEval(p)}try{return u()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","evaluateCode")}return!1},k=function(p){var u=p.tagName.toLowerCase();return"img"==u||
"input"==u?l(p).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):l("a["+gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",p).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},m=function(){var p={select:!0,textarea:!0},u=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(y){if(!y)return!1;var B=y.tagName.toLowerCase();return"input"==B?u[y.type.toLowerCase()]:p[B]}}(),t=function(p){return p&&"label"==p.tagName.toLowerCase()&&(p=p.getAttribute("for"))?(p=gx.dom.el(p),m(p)&&gx.fn.isVisible(p,
0)):!1},v=function(p){if("keypress"!==p.type||13===p.keyCode||32===p.keyCode&&gx.dom.isButton(p))if("keypress"===p.type&&(gx.evt.processing||gx.evt.redirecting))p.preventDefault();else{var u=p.target,y=l(u),B=l(p.currentTarget);gx.dom.isRoundedBtnWrapper(y)&&(y=y.find("input"),B=B.find("input"));var E=gx.fn.getControlContext(B);if(!u||"A"!==u.tagName.toUpperCase()||void 0!==l(u).attr(gx.GxObject.GX_EVENT_DATA_ATTR)||!u.href)if(!E)p.preventDefault();else if(!B.hasClass("gx-disabled")&&(!m(u)&&!t(u)||
l(u).is(B))&&!gx.dom.hasAttribute(u,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)){p.stopPropagation();var I=function(){var L=B.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?w.apply(this,[p,y,E,L]):n.apply(this,[p,y,E,L])};gx.wr(function(){gx.evt.doAfterProcessing(I,this)},this)}}},n=function(p,u,y,B){var E=function(){gx.csv.resetRow();var L=y.getValidStructFld(B);L&&L.grid&&gx.evt.setEventRow(y,u.get(0))},I=function(){E();u.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);
y.handleControlEvent(p,B,this)}.closure(this);gx.fx.dom.delayedDispatch(p)?u.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?(E(),gx.fx.dom.raiseEvent("dblclick",p)):(I=setTimeout(I,gx.config.evt.dblclick.delay),u.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,I)):I.call()},w=function(p,u,y,B){if(!u.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var E=function(){gx.csv.resetRow();var I=y.getValidStructFld(B);I&&I.grid&&gx.evt.setEventRow(y,u.get(0));u.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);
y.handleControlEvent(p,B,this)}.closure(this);gx.fx.dom.delayedDispatch(p)?(E=setTimeout(E,gx.config.evt.dblclick.delay),u.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,E)):E.call()}},A=function(p,u,y){try{y&&p.preventDefault(),u&&p.stopPropagation()}catch(B){}};d.handleControlEvent=function(p,u,y){var B=this.controlEventMap;if(B[u]){var E=B[u],I=B[u].evt;u=this.Events[I]?this.Events[I][0]:B[u].std;var L=c(y,gx.GxObject.GX_EVENT_DATA_ATTR),M=c(y,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),O=k(y);B=0<E.grid?
gx.fn.controlRowId(p.currentTarget):null;var R=this.getGridById(E.grid,B);I=!0;var P=!1,Y=l(p.target);if(!gx.util.inArray(E.ctrltype,gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES))switch(L){case "1":A(p,!0,!0);O&&!f(O)||gx.fn.closeWindow();break;case "3":case "4":A(p,!0,!0);M&&f(M);break;case "8":gx.ajax.doRefresh(this);break;default:if(!O||f(O)){if(R)var W=R.gridName;"checkbox"===E.ctrltype&&(gx.fn.checkboxClick(E,y,E.values[0],E.values[1]),I=!1,P=!0);if(u){E=u.substring(u.indexOf(".")+1,u.length).toLowerCase();
L=p.type.toLowerCase();if(E.includes("click")&&!L.includes("click")&&p.currentTarget&&"textarea"===p.currentTarget.type)break;Y.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0);this.executeEvent(u,!1,B,!1,W).always(function(Z){var aa=function(){l(Z).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.evt.redirecting?aa():gx.spa.isNavigatingRaw()?gx.spa.addObserver("onnavigate",this,aa,{single:!0}):aa()}.closure(this,[Y]))}if(P)gx.evt.onchange(y)}A(p,!0,I)}}};d.registerCtrlsEventHandlers=function(){var p,
u=this.GXCtrlIds,y=this.GXValidFnc,B=this.IsMasterPage,E=this.CmpContext,I=B?"_MPAGE":"",L="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",M=!E&&!B;void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1);this.controlEventMap||(this.controlEventMap={});var O=this.controlEventMap;var R=0;for(p=u.length;R<p;R++){var P=y[u[R]];var Y=gx.fn.controlFiresEvent(P);var W=this.hasEnterEvent&&!gx.lang.emptyObject(P.ctrltype)||P.evt_cvc||P.evt_cvcing;if(Y||W)if(Y&&(O[P.fld]=P),0===P.grid){var Z=
E+P.fld+(P.gxvar?"":I);W="#span_"+Z;Z="#"+Z;W=P.gxvar&&0<l(W).length?l(W):l(Z);Y&&(W.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,P.fld),W.is("img")&&W.attr("tabindex","0"),m(W.get(0))||W.attr("tabindex","0"));W.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([E,B]))}}M&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,l(document.body).on("click keypress",L,v),l(L).each(function(){for(var aa=l(this).parent().first();gx.dom.isRoundedBtnWrapper(aa);)aa.on("click keypress",
null,v),aa=aa.parent().first()}))};d.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&l(document.body).off("click keypress",v);this.listeningControlEvents=!1};d.clearMultimediaValue=function(p){p=gx.html.multimediaUpload.getElements(p);p.fileField.onchange(p.fileField);gx.fn.setHidden(p.fileField.id,"");gx.fn.setHidden(p.uriField.id,"");gx.fn.setHidden(p.fileField.id+"_gxBlob","")};d.refreshOlds=function(){for(var p in this.LvlOlds){var u=this.LvlOlds[p];if("function"!=typeof u){var y=
gx.fn.lvlGrid(parseInt(p,10));if(0!=y){var B=gx.fn.currentGridRow(y);if("9999"===B)continue}y=u.length;for(var E=0;E<y;E++){var I=u[E],L=I,M="",O=gx.fn.vStructForOld(L);if(O){if(!O.gxgrid||0<O.gxgrid.grid.rows.length)M=gx.typedOld(O.fld,L,O.type)}else gx.lang.emptyObject(B)||(I+="_"+B),M=gx.fn.getHidden(this.CmpContext+I);"undefined"!=typeof M&&(O||(window[L]=M),this[L]=M)}}}};var r=function(p){this.parms=p;return this};d.addExoEventHandler=function(p,u){var y=function(){var B=gx.O;gx.setGxO(this);
u.call(this,null,null,new r(Array.prototype.slice.call(arguments,0)));gx.setGxO(B)};gx.fx.obs.addObserver(p,this,y);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[p]=y};d.deleteExoEventHandlers=function(){for(var p in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(p)&&gx.fx.obs.deleteObserver(p,this,this.exoEventHandlers[p])};d.restoreExoEventHandlers=function(){for(var p in this.exoEventHandlers)gx.fx.obs.addObserver(p,this,this.exoEventHandlers[p])};d.deleteEventHandlers=
function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","deleteEventHandlers")}};d.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),l.each(this.UserControls,function(p,u){if(!gx.lang.emptyObject(u.destroy))try{u.destroy()}catch(y){gx.dbg.logEx(y,"gxfrmutl.js","ondestroy")}}),this.UserControls=[],delete this.containerControl}catch(p){gx.dbg.logEx(p,
"gxfrmutl.js","ondestroy")}};d.onpost=function(){var p=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var u=this.WebComponents.length,y=0;y<u;y++)this.WebComponents[y].onpost();this.ReadonlyForm&&this.IsComponent&&p!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(p)};d.roControlsAsHidden=function(){for(var p=this.getControlIds(),u=p.length,y=0;y<u;y++){var B=this.getValidStruct(p[y]);if(0==B.grid&&"function"==typeof B.val){B=this.CmpContext+B.fld;var E=
gx.dom.el(B);E&&!gx.fn.isAccepted(E)&&gx.fn.setHidden(B,gx.fn.getControlValue(B))}}};d.onload=function(p,u){l.Deferred();var y=[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},this);var B=this.Grids.length;if(!1!==p)for(var E=0;E<B;E++)y.push(this.Grids[E].loadGrid());B=this.WebComponents.length;for(E=0;E<B;E++)y.push(this.WebComponents[E].onload(p));u?this.afterLoad():
gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var I=this;l.when.apply(l,y).done(function(){I.execV2CFunctions(!0,void 0,!1,function(L){return L.ownerGrid&&L.ownerGrid.parentGrid});I.onLoadDeferred.resolve()})};d.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,
void 0,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",this.getContainer()),function(p,u){gx.fn.disableCtrl(p.getAttribute("data-gx-disable"));p.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};d.onunload=function(p){if(this.hasMasterPage()&&!1!==p)this.MasterPage.onunload();
p=this.Grids.length;for(--p;0<=p;p--)delete this.Grids[this.Grids[p].gridName],this.Grids[p].cleanup(),this.Grids.splice(p,1);p=this.WebComponents.length;for(--p;0<=p;p--)delete this.WebComponents[this.WebComponents[p].CmpContext],this.WebComponents[p].onunload(),this.WebComponents.splice(p,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};d.clean=function(p){this.cleanHiddens();this.onunload(p)};d.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};
d.screenToVars=function(){try{for(var p=this.getControlIds(),u=p.length,y=0;y<u;y++){var B=this.getValidStruct(p[y]);B&&0==B.lvl&&"function"==typeof B.c2v&&B.c2v()}}catch(E){gx.dbg.logEx(E,"gxfrmutl.js","screenToVars")}};d.postbackLoad=function(p,u){var y=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(p);for(var B=this.WebComponents.length,E=0;E<B;E++)this.WebComponents[E].postbackLoad(p);y&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());
this.execV2CFunctions(!0,y?!1:p);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(u);gx.goOnload();this.onLoadDeferred.resolve()};d.addDragSource=function(p,u,y,B){gx.fx.dnd.addSource(this,p,u,y,B)};d.addDropTarget=function(p,u,y,B){gx.fx.dnd.addTarget(this,p,u,y,B)};d.addContextSetter=function(p,u,y,B){gx.fx.ctx.addSetter(this,p,u,y,B)};d.addContextTracker=function(p,u,y,B){gx.fx.ctx.addTracker(this,y,B)};d.addOnMessage=function(p,u,y,B,E){gx.fx.notifications.addTracker(this,
p,u,y,B,E)};d.addEventHandler=function(p,u,y){gx.fx.dom.addEventHandler(this,p,u,y)};d.updateBitmapValue=function(p,u,y,B){p=gx.html.multimediaUpload.getContainer(p);"file"==gx.html.multimediaUpload.getOptionValue(p)?this[u]=B:this[y]=B};d.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};d.startFeedback=function(p,u){this.feedbackCallCounter++;u&&gx.fn.disableKeys();var y=!0===p?0:void 0===gx.NotificationDelay?1E3:gx.NotificationDelay,B=function(){var E=this.getFeedbackContainer();
E&&gx.dom.mask(E)};1==this.feedbackCallCounter&&(0===y?B.call(this):this.feedbackTimeoutId||(y=gx.lang.doCallTimeout(B,this,arguments,y),this.feedbackTimeoutId=y.t))};d.endFeedback=function(){gx.fn.enableKeys();0<this.feedbackCallCounter&&this.feedbackCallCounter--;if(0==this.feedbackCallCounter){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var p=this.getFeedbackContainer();p&&gx.dom.unmask(p)}};d.isFeedbackOn=function(){return 0<this.feedbackCallCounter};
(function(){var p=9996,u=this;return function(y){var B="MPW"+p++,E=u.CmpContext+"gxHTMLWrp"+B;u.setComponent({id:q(y),GXClass:null,Prefix:B,lvl:1});return l('<div class="gx-call-target '+y+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+E+'"></div></div>')}}).call(this);var q=function(p){return"GX-"+p.toUpperCase()+"-TARGET"};d.initSingleTarget=function(p){var u="MPW"+this.targetsCounter++,y=this.CmpContext+"gxHTMLWrp"+u;this.setComponent({id:q(p),GXClass:null,Prefix:u,lvl:1});
return l('<div class="gx-call-target '+p+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+y+'"></div></div>')};d.initTargets=function(){if(gx.pO&&gx.pO.fullAjax&&this.IsMasterPage){var p=l(gx.dom.form());var u=p.children("[data-abstract-form]").first();u.length||(u=l("<div></div>"),u.append(p.children()),p.append(u));p=u.addClass("gx-center-target");u=this.initSingleTarget("top");var y=this.initSingleTarget("right");var B=this.initSingleTarget("bottom");var E=this.initSingleTarget("left");
l('<div id="gx-column-targets"></div>').insertBefore(p).append(E).append(p).append(y).before(u).after(B)}};d.createObjectInTarget=function(p,u,y){p=p.toLowerCase();var B=x(p);this.createWebComponent(q(p),u,y,void 0,void 0,void 0,function(E){this.targetComponents=this.targetComponents||{};(E=gx.pO.getWebComponent(E))&&(this.targetComponents[p]=E)});l(B.selector).removeClass("empty")};d.restoreTargetComponents=function(){var p;this.targetComponents=this.targetComponents||{};for(p in this.targetComponents)targetComponents.hasOwnProperty(p)&&
gx.pO.registerComponent(this.targetComponents[p])};var x=function(p){return{selector:".gx-call-target."+p,centerSelector:".gx-center-target"}},C,F={useCapture:!0};d.showTarget=function(p,u){p=p.toLowerCase();var y=x(p),B=y.selector,E=y.centerSelector;l(y.selector).removeClass("empty");l(B).removeClass("off");l(E).addClass("slideout "+p);l(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[p]);if(!1!==u){C=function(L){l(L.target).closest(B).length||l(L.target).is(B)||
!l(B).is(":visible")||(I.call(this),L.stopImmediatePropagation(),L.preventDefault())}.closure(this);var I=function(){this.hideTarget(p)};gx.evt.attach(document,"click",C,!1,F);gx.spa.addObserver("onnavigate",this,I)}};d.hideTarget=function(p){p=p.toLowerCase();var u=x(p),y=u.centerSelector;l(u.selector).addClass("off");l(y).removeClass("slideout "+p);l(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",C,F);gx.fx.obs.notify("gx.targethidden",[p])};d.collapseTarget=
function(p){p=p.toLowerCase();var u=x(p),y=u.selector;u=u.centerSelector;this.showTarget(p,!1);l(y).addClass("collapsed");l(u).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[p])};d.expandTarget=function(p){p=p.toLowerCase();var u=x(p),y=u.selector;u=u.centerSelector;this.showTarget(p,!1);l(y).removeClass("collapsed");l(u).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[p])};var G=function(p,u){p=Array.prototype.slice.call(p,0);p.push(u);return p};d.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,
G(arguments,this))};d.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,G(arguments,this))}})(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);
gx.printing=function(l){return{IFrameId:"gxprintHelper_Iframe",print:function(c){this.printDirect(c)},printDirect:function(c){c&&(gx.printing._deinit(),$iframe=l("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),l(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",c.reportFile))},_deinit:function(){l("#"+gx.printing.IFrameId).remove()}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(l,c){this.map[l]=c};this.remove=function(l){delete this.map[l]};this.get=function(l){return null==l?null:this.map[l]};this.first=function(){return this.get(this.nextKey())};this.next=function(l){return this.get(this.nextKey(l))};this.nextKey=function(l){for(i in this.map){if(!l)return i;l==i&&(l=null)}return null}},Command:function(l,c,d){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){c.apply(l,
d)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(l,c,d,g){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof g)try{g.call(l,retVal)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(l,c,d);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var l=gx.fn.getHidden(this.keyName);gx.lang.emptyObject(l)?this.key=null:this.key=l;null!=this.key&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var l=gx.fn.getHidden(this.secTokenName);gx.lang.emptyObject(l)?this.secToken=null:this.secToken=l},encrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);
var g=null!=this.iv?d.rijndaelEncrypt(l,c,"CBC",d.hexToByteArray(this.iv)):d.rijndaelEncrypt(l,c);return d.byteArrayToHex(g)}}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","encrypt")}return l},decrypt:function(l,c){try{if(c=null==c?this.key:c,null!=c){var d=this.rijndael;c=d.hexToByteArray(c);var g=d.hexToByteArray(l),a=d.rijndaelDecrypt(g,c,"CBC");return d.byteArrayToString(a)}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","decrypt")}return l},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(l,c){return l<<c|l>>>32-c},AddUnsigned:function(l,c){var d=l&2147483648;var g=c&2147483648;var a=l&1073741824;var b=c&1073741824;l=(l&1073741823)+(c&1073741823);return a&b?l^2147483648^d^g:a|b?l&1073741824?l^3221225472^d^g:l^1073741824^d^g:l^d^g},F:function(l,c,d){return l&c|~l&d},G:function(l,c,d){return l&d|c&~d},H:function(l,c,d){return l^c^d},I:function(l,c,d){return c^(l|~d)},FF:function(l,c,d,g,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(c,
d,g),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},GG:function(l,c,d,g,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(c,d,g),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},HH:function(l,c,d,g,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(c,d,g),a),f));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},II:function(l,c,d,g,a,b,f){l=gx.MD5.AddUnsigned(l,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(c,d,g),a),f));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(l,b),c)},ConvertToWordArray:function(l){var c=l.length;var d=c+8;for(var g=16*((d-d%64)/64+1),a=Array(g-1),b,f=0;f<c;)d=(f-f%4)/4,b=f%4*8,a[d]|=l.charCodeAt(f)<<b,f++;d=(f-f%4)/4;a[d]|=128<<f%4*8;a[g-2]=c<<3;a[g-1]=c>>>29;return a},WordToHex:function(l){var c="",d;for(d=0;3>=d;d++){var g=l>>>8*d&255;g="0"+g.toString(16);c+=g.substr(g.length-2,2)}return c},Utf8Encode:function(l){l=l.replace(/\r\n/g,"\n");for(var c="",d=0;d<l.length;d++){var g=l.charCodeAt(d);
128>g?c+=String.fromCharCode(g):(127<g&&2048>g?c+=String.fromCharCode(g>>6|192):(c+=String.fromCharCode(g>>12|224),c+=String.fromCharCode(g>>6&63|128)),c+=String.fromCharCode(g&63|128))}return c},getHsh:function(l){var c;l=gx.MD5.Utf8Encode(l);l=gx.MD5.ConvertToWordArray(l);var d=1732584193;var g=4023233417;var a=2562383102;var b=271733878;for(c=0;c<l.length;c+=16){var f=d;var k=g;var m=a;var t=b;d=gx.MD5.FF(d,g,a,b,l[c+0],7,3614090360);b=gx.MD5.FF(b,d,g,a,l[c+1],12,3905402710);a=gx.MD5.FF(a,b,d,
g,l[c+2],17,606105819);g=gx.MD5.FF(g,a,b,d,l[c+3],22,3250441966);d=gx.MD5.FF(d,g,a,b,l[c+4],7,4118548399);b=gx.MD5.FF(b,d,g,a,l[c+5],12,1200080426);a=gx.MD5.FF(a,b,d,g,l[c+6],17,2821735955);g=gx.MD5.FF(g,a,b,d,l[c+7],22,4249261313);d=gx.MD5.FF(d,g,a,b,l[c+8],7,1770035416);b=gx.MD5.FF(b,d,g,a,l[c+9],12,2336552879);a=gx.MD5.FF(a,b,d,g,l[c+10],17,4294925233);g=gx.MD5.FF(g,a,b,d,l[c+11],22,2304563134);d=gx.MD5.FF(d,g,a,b,l[c+12],7,1804603682);b=gx.MD5.FF(b,d,g,a,l[c+13],12,4254626195);a=gx.MD5.FF(a,b,
d,g,l[c+14],17,2792965006);g=gx.MD5.FF(g,a,b,d,l[c+15],22,1236535329);d=gx.MD5.GG(d,g,a,b,l[c+1],5,4129170786);b=gx.MD5.GG(b,d,g,a,l[c+6],9,3225465664);a=gx.MD5.GG(a,b,d,g,l[c+11],14,643717713);g=gx.MD5.GG(g,a,b,d,l[c+0],20,3921069994);d=gx.MD5.GG(d,g,a,b,l[c+5],5,3593408605);b=gx.MD5.GG(b,d,g,a,l[c+10],9,38016083);a=gx.MD5.GG(a,b,d,g,l[c+15],14,3634488961);g=gx.MD5.GG(g,a,b,d,l[c+4],20,3889429448);d=gx.MD5.GG(d,g,a,b,l[c+9],5,568446438);b=gx.MD5.GG(b,d,g,a,l[c+14],9,3275163606);a=gx.MD5.GG(a,b,d,
g,l[c+3],14,4107603335);g=gx.MD5.GG(g,a,b,d,l[c+8],20,1163531501);d=gx.MD5.GG(d,g,a,b,l[c+13],5,2850285829);b=gx.MD5.GG(b,d,g,a,l[c+2],9,4243563512);a=gx.MD5.GG(a,b,d,g,l[c+7],14,1735328473);g=gx.MD5.GG(g,a,b,d,l[c+12],20,2368359562);d=gx.MD5.HH(d,g,a,b,l[c+5],4,4294588738);b=gx.MD5.HH(b,d,g,a,l[c+8],11,2272392833);a=gx.MD5.HH(a,b,d,g,l[c+11],16,1839030562);g=gx.MD5.HH(g,a,b,d,l[c+14],23,4259657740);d=gx.MD5.HH(d,g,a,b,l[c+1],4,2763975236);b=gx.MD5.HH(b,d,g,a,l[c+4],11,1272893353);a=gx.MD5.HH(a,b,
d,g,l[c+7],16,4139469664);g=gx.MD5.HH(g,a,b,d,l[c+10],23,3200236656);d=gx.MD5.HH(d,g,a,b,l[c+13],4,681279174);b=gx.MD5.HH(b,d,g,a,l[c+0],11,3936430074);a=gx.MD5.HH(a,b,d,g,l[c+3],16,3572445317);g=gx.MD5.HH(g,a,b,d,l[c+6],23,76029189);d=gx.MD5.HH(d,g,a,b,l[c+9],4,3654602809);b=gx.MD5.HH(b,d,g,a,l[c+12],11,3873151461);a=gx.MD5.HH(a,b,d,g,l[c+15],16,530742520);g=gx.MD5.HH(g,a,b,d,l[c+2],23,3299628645);d=gx.MD5.II(d,g,a,b,l[c+0],6,4096336452);b=gx.MD5.II(b,d,g,a,l[c+7],10,1126891415);a=gx.MD5.II(a,b,
d,g,l[c+14],15,2878612391);g=gx.MD5.II(g,a,b,d,l[c+5],21,4237533241);d=gx.MD5.II(d,g,a,b,l[c+12],6,1700485571);b=gx.MD5.II(b,d,g,a,l[c+3],10,2399980690);a=gx.MD5.II(a,b,d,g,l[c+10],15,4293915773);g=gx.MD5.II(g,a,b,d,l[c+1],21,2240044497);d=gx.MD5.II(d,g,a,b,l[c+8],6,1873313359);b=gx.MD5.II(b,d,g,a,l[c+15],10,4264355552);a=gx.MD5.II(a,b,d,g,l[c+6],15,2734768916);g=gx.MD5.II(g,a,b,d,l[c+13],21,1309151649);d=gx.MD5.II(d,g,a,b,l[c+4],6,4149444226);b=gx.MD5.II(b,d,g,a,l[c+11],10,3174756917);a=gx.MD5.II(a,
b,d,g,l[c+2],15,718787259);g=gx.MD5.II(g,a,b,d,l[c+9],21,3951481745);d=gx.MD5.AddUnsigned(d,f);g=gx.MD5.AddUnsigned(g,k);a=gx.MD5.AddUnsigned(a,m);b=gx.MD5.AddUnsigned(b,t)}return(gx.MD5.WordToHex(d)+gx.MD5.WordToHex(g)+gx.MD5.WordToHex(a)+gx.MD5.WordToHex(b)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(l){try{if(window.atob)return decodeURIComponent(atob(l).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(c){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(l)))},encode:function(l){try{if(window.btoa)return btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,function(c,d){return String.fromCharCode("0x"+d)}))}catch(c){}return this.encodeImpl(this.UTF8BytesFromString(l))},bytesFromUTF8Bytes:function(l){var c=
[],d=0;c1=c2=0;for(var g=l.length;d<g;){var a=l[d];128>a?(c.push(a),d++):191<a&&224>a?(c2=l[d+1],c.push((a&31)<<6|c2&63),d+=2):(c2=l[d+1],c3=l[d+2],c.push((a&15)<<12|(c2&63)<<6|c3&63),d+=3)}return c},UTF8BytesFromString:function(l){l=l.replace(/\r\n/g,"\n");for(var c=[],d=l.length,g=0;g<d;g++){var a=l.charCodeAt(g);128>a?c.push(a):(127<a&&2048>a?c.push(a>>6|192):(c.push(a>>12|224),c.push(a>>6&63|128)),c.push(a&63|128))}return c},bytesToString:function(l){for(var c=gx.util.browser.isChrome()?32765:
5E4,d=[];l.length>=c;)d.push(eval("String.fromCharCode("+l.slice(0,c).join(",")+");")),l=l.slice(c);0!=l.length&&d.push(eval("String.fromCharCode("+l.join(",")+");"));return d.join("")},decodeImpl:function(l){var c=this.f64,d=[],g=0;l=l.replace(/\n|\r/g,"");l=l.replace(/=/g,"");for(var a=l.length;g<a;)d[d.length]=c[l.charAt(g)]<<2|c[l.charAt(g+1)]>>4,d[d.length]=(c[l.charAt(g+1)]&15)<<4|c[l.charAt(g+2)]>>2,d[d.length]=(c[l.charAt(g+2)]&3)<<6|c[l.charAt(g+3)],g+=4;2==l.length%4&&(d=d.slice(0,d.length-
2));3==l.length%4&&(d=d.slice(0,d.length-1));return d},encodeImpl:function(l){var c=this.b64,d=[],g=0,a=l.length;1==a%3&&(l[l.length]=0,l[l.length]=0);2==a%3&&(l[l.length]=0);for(var b=l.length;g<b;)d[d.length]=c[l[g]>>2],d[d.length]=c[(l[g]&3)<<4|l[g+1]>>4],d[d.length]=c[(l[g+1]&15)<<2|l[g+2]>>6],d[d.length]=c[l[g+2]&63],g+=3;1==a%3&&(d[d.length-1]=d[d.length-2]="=");2==a%3&&(d[d.length-1]="=");return d.join("")},_init:function(){for(var l=0;64>l;l++){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(l);
this.b64[l]=c;this.f64[c]=l}}};
gx.webSocket=function(l){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=l.maxRetries||6;this.retryDelay=l.retryDelay||2500;this._init=function(g){if(!this.initialized&&"WebSocket"in window){g=g||{};g.clientId=g.clientId||"";g.basePath=g.basePath||"";this.namespace="."+g.namespace;try{var a=g.wsProtocol+g.host+g.basePath+g.resourceUrl+g.clientId;this.create(g.wsURL||a);this.initialized=!0;this.wsOpts=g}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Could not initialize WebSocket")}}};
var c=this,d=function(){this.initialized=this.opened=!1;this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries)&&(this.retryCount++,this.retryHandle=gx.lang.doCallTimeout(this._init,this,[this.wsOpts],this.retryDelay*this.retryCount))};this.create=function(g){try{this.ws=new WebSocket(g),this.ws.onopen=function(){c.opened=!0;c.retryCount=0;c.stopRetry=!1;gx.fx.obs.notify("gx.ws.onOpen"+c.namespace,[])},this.ws.onerror=function(a){gx.dbg.logDebug("gx.webSocket - Error: "+a.data);gx.fx.obs.notify("gx.ws.onError"+
c.namespace,[a.data]);c.stopRetry||d.apply(c);c.stopRetry=!1},this.ws.onmessage=function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage"+c.namespace,[a.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");c.opened?(c.retryCount=0,d.apply(c)):gx.fx.obs.notify("gx.ws.OnClose"+c.namespace,[])}}catch(a){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+c.namespace,[a]],100)}};window.onbeforeunload=function(){c.opened&&
c.ws.close()};this.close=function(){c.opened&&(c.opened=!1,c.ws.close());c.stopRetry=!0;c.retryHandle&&clearInterval(c.retryHandle.t)};this.send=function(g){c.ws?c.ws.send(g):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(l)};
gx.util.alert=function(l){var c=!1,d=!1,g=function(b){b=b||{};var f=b.message||"",k=b.cssClass||"",m=b.cssDisBtnClass||"",t=b.dataDisAtt;b=b.dismissmitAt;c&&0!=l("#gx-main-error").length||(l(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),c=!0);a();var v=l("#gx-main-error");v.html('<div class="'+k+'"><button type="button" class="'+m+'" data-dismiss="'+t+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+f+"</span></div>");v.slideDown();
d=!0;b&&window.setTimeout(function(){a()},b)},a=function(){d&&(l("#gx-main-error").fadeOut(500,function(){l(this).empty()}),d=!1)};return{showMessage:function(b,f){l("#gx-main-error");g(l.extend({message:b,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},showError:function(b,f){l("#gx-main-error");g(l.extend({message:b,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},f))},hide:a}}(gx.$);
gx.geolocation=function(l){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(c){c.attachedCtrl=l("#"+c.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(c);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(c){var d=attachedCtrls.shift(),g=gx.fn.validStruct(gx.O.getValidStructId(d.attachedCtrl.id));
c=c.coords.latitude+","+c.coords.longitude;gx.evt.setEventRow(gx.pO,d.attachedCtrl);g.v2v&&(g.v2v(c),g.v2c());g.gxgrid&&g.gxgrid.updateControlValue(g,!0)},handle_errors:function(c){attachedCtrls.shift();switch(c.code){case c.PERMISSION_DENIED:c="user did not share geolocation data";break;case c.POSITION_UNAVAILABLE:c="could not detect current position";break;case c.TIMEOUT:c="retrieving position timed out";break;default:c="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(c);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(l,c){var d=l.slice(0,c);return l=l.slice(c).concat(d)},xtime:function(l){l<<=1;return l&256?l^283:l},mult_GF256:function(l,c){var d,g=0;for(d=1;256>d;d*=2,c=this.xtime(c))l&d&&(g^=c);return g},byteSub:function(l,c){c="encrypt"==c?this.SBox:this.SBoxInverse;for(var d=0;4>d;d++)for(var g=0;g<this.Nb;g++)l[d][g]=c[l[d][g]]},shiftRow:function(l,c){for(var d=
1;4>d;d++)l[d]="encrypt"==c?this.cyclicShiftLeft(l[d],this.shiftOffsets[this.Nb][d]):this.cyclicShiftLeft(l[d],this.Nb-this.shiftOffsets[this.Nb][d])},mixColumn:function(l,c){for(var d=[],g=0;g<this.Nb;g++){for(var a=0;4>a;a++)d[a]="encrypt"==c?this.mult_GF256(l[a][g],2)^this.mult_GF256(l[(a+1)%4][g],3)^l[(a+2)%4][g]^l[(a+3)%4][g]:this.mult_GF256(l[a][g],14)^this.mult_GF256(l[(a+1)%4][g],11)^this.mult_GF256(l[(a+2)%4][g],13)^this.mult_GF256(l[(a+3)%4][g],9);for(a=0;4>a;a++)l[a][g]=d[a]}},addRoundKey:function(l,
c){for(var d=0;d<this.Nb;d++)l[0][d]^=c[d]&255,l[1][d]^=c[d]>>8&255,l[2][d]^=c[d]>>16&255,l[3][d]^=c[d]>>24&255},keyExpansion:function(l){var c=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var d=0;d<this.Nk;d++)c[d]=l[4*d]|l[4*d+1]<<8|l[4*d+2]<<16|l[4*d+3]<<24;for(d=this.Nk;d<this.Nb*(this.Nr+1);d++)l=c[d-1],0==d%this.Nk?l=(this.SBox[l>>8&255]|this.SBox[l>>16&255]<<8|this.SBox[l>>24&255]<<16|this.SBox[l&255]<<24)^this.Rcon[Math.floor(d/
this.Nk)-1]:6<this.Nk&&4==d%this.Nk&&(l=this.SBox[l>>24&255]<<24|this.SBox[l>>16&255]<<16|this.SBox[l>>8&255]<<8|this.SBox[l&255]),c[d]=c[d-this.Nk]^l;return c},Round:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.mixColumn(l,"encrypt");this.addRoundKey(l,c)},InverseRound:function(l,c){this.addRoundKey(l,c);this.mixColumn(l,"decrypt");this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},FinalRound:function(l,c){this.byteSub(l,"encrypt");this.shiftRow(l,"encrypt");this.addRoundKey(l,
c)},InverseFinalRound:function(l,c){this.addRoundKey(l,c);this.shiftRow(l,"decrypt");this.byteSub(l,"decrypt")},encrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.addRoundKey(l,c);for(d=1;d<this.Nr;d++)this.Round(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.FinalRound(l,c.slice(this.Nb*this.Nr));return this.unpackBytes(l)}},decrypt:function(l,c){var d;if(l&&8*l.length==this.blockSizeInBits&&c){l=this.packBytes(l);this.InverseFinalRound(l,c.slice(this.Nb*this.Nr));
for(d=this.Nr-1;0<d;d--)this.InverseRound(l,c.slice(this.Nb*d,this.Nb*(d+1)));this.addRoundKey(l,c);return this.unpackBytes(l)}},byteArrayToString:function(l){for(var c="",d=l.length,g=0;g<d;g++)0!=l[g]&&(c+=String.fromCharCode(l[g]));return c},stringToByteArray:function(l){for(var c=[],d=l.length,g=0;g<d;g++)c[c.length]=l.charCodeAt();return c},byteArrayToHex:function(l){var c="";if(l){for(var d=l.length,g=0;g<d;g++)c+=(16>l[g]?"0":"")+l[g].toString(16);return c}},hexToByteArray:function(l){var c=
[];if(!(l.length%2)){if(0==l.indexOf("0x")||0==l.indexOf("0X"))l=l.substring(2);for(var d=l.length,g=0;g<d;g+=2)c[Math.floor(g/2)]=parseInt(l.slice(g,g+2),16);return c}},packBytes:function(l){var c=[];if(l&&!(l.length%4)){c[0]=[];c[1]=[];c[2]=[];c[3]=[];for(var d=l.length,g=0;g<d;g+=4)c[0][g/4]=l[g],c[1][g/4]=l[g+1],c[2][g/4]=l[g+2],c[3][g/4]=l[g+3];return c}},unpackBytes:function(l){for(var c=[],d=l[0].length,g=0;g<d;g++)c[c.length]=l[0][g],c[c.length]=l[1][g],c[c.length]=l[2][g],c[c.length]=l[3][g];
return c},formatPlaintext:function(l){var c=this.blockSizeInBits/8,d;if("string"==typeof l||l.indexOf){l=l.split("");var g=l.length;for(d=0;d<g;d++)l[d]=l[d].charCodeAt(0)&255}for(d=c-l.length%c;0<d&&d<c;d--)l[l.length]=0;return l},rijndaelEncrypt:function(l,c,d,g){var a,b=this.blockSizeInBits/8;if(l&&c&&8*c.length==this.keySizeInBits){"CBC"!=d&&(d="ECB",g=[]);l=this.formatPlaintext(l);c=this.keyExpansion(c);for(var f=0;f<l.length/b;f++){var k=l.slice(f*b,(f+1)*b);if("CBC"==d)for(a=0;a<b;a++)k[a]^=
g[f*b+a];g=g.concat(this.encrypt(k,c))}return g}},rijndaelDecrypt:function(l,c,d){var g=this.blockSizeInBits/8,a=[],b;if(l&&c&&"string"!=typeof l&&8*c.length==this.keySizeInBits){d||(d="ECB");c=this.keyExpansion(c);for(b=l.length/g-1;0<b;b--){var f=this.decrypt(l.slice(b*g,(b+1)*g),c);if("CBC"==d)for(var k=0;k<g;k++)a[(b-1)*g+k]=f[k]^l[(b-1)*g+k];else a=f.concat(a)}"ECB"==d&&(a=this.decrypt(l.slice(0,g),c).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.popup=function(l){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var c=function(d){0===l(this.getEl()).find(d.target).length&&(l(document.body).off("click",c),this.close())}.closure(this);this.open=function(d){this.state=
"opening";this.id=d.id||"gxdialog";this.callbacks=d.callbacks;var g=void 0===d.resizable||d.resizable,a="PopupBorder gx-popup gx-popup-default";this.cssClass&&(a=a.replace("gx-popup-default",""),a+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,d.w,d.h,d.contentHtml,"white",d.title,"black","black","black","black",void 0===d.isModal||d.isModal,!0,!0,g,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",a,"PopupShadow",
d.showParentPopups,!1,d.callbacks,d.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){l(document.body).on("click",c)},1)};this.close=function(){l(document.body).off("click",c);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,d){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=d?d:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(c)?(this.url=c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=
c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[],this.cssClass=c[9]):c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=typeof c.Class&&(this.cssClass=c.Class),"undefined"!=
typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms&&(this.ReturnParms=c.ReturnParms))};this.open=function(){this.state="opening";var g=gx.popup.gxOpener();this.lvl=-1;this.lvl=g&&g.gx&&g.gx.popup.ext.win&&g.gx.popup.ext.win.gx?g.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;g=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var a="?",b,f,k=this.ReturnParms.length,m=0;m<k;m++){b="";if(gx.lang.emptyObject(this.ReturnParms[m].Ctrl))if("string"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m])+",";else if("number"==typeof this.ReturnParms[m])b=gx.util.urlValue(this.ReturnParms[m].toString())+",";else if(this.CustomRenderGrid)f=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[m].id))continue;
else f=gx.fn.getHidden(this.ReturnParms[m].id),gx.lang.emptyObject(f)||(b=gx.util.urlValue(f)),b+=",";else b=gx.util.urlValue(this.ReturnParms[m].Ctrl)+",";a="out"==this.ReturnParms[m].IOType?a+",":a+b;this.ReturnParms[m].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[m])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);g+=a}a=document.activeElement;gx.csv.lastControl&&a&&gx.util.inArray(a.tagName,["BODY",
"FORM"])&&(a=gx.csv.lastControl);a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,g,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var g=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,b=0;b<a;b++){var f=this.ReturnParms[b];gx.fn.isOutputParm(f)&&g.push(f)}else return this.ReturnParms;return g};this.close=function(g,a,b){a=a||{};this.state="closing";g&&(this.RawReturnedParms=g);var f=window;
gx.popup.ext.win?(f=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var k=function(){var v=l.Deferred();this.setCellValue.apply(this,arguments);return v.resolve()},m=function(){var v;this.beforeClose&&this.beforeClose(g);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(null==this.parentPopup?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null),
this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameWindow=this.frameDocument=null);gx.popup.ext.close(this);var n=this.getOutputParms(),w=function(){a&&!0===a.ignoreCmds&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:n});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(g);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",
[this])}.closure(this),A=!0;gx.csv.lastId=0;if(null!=g&&this.IsPrompt){if(b&&a.parmsMetadata&&a.updateParms){var r=a.parmsMetadata.length;for(v=0;v<r;v++)A=a.parmsMetadata[v],gx.util.inArray(A,a.updateParms)&&(g[v]=b[A])}r=g.length;var q=gx.popup.assignPromptFields,x=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(q=k,x=this.CustomRenderGrid.grid);A=!1;q.call(x,n,g).then(function(){var C=null;r=n.length;for(v=0;v<r;v++){var F=n[v].Ctrl;gx.fn.isAccepted(F)&&(C=F)}C&&gx.TabOnPrompSelect&&(F=gx.fn.getControlIndex(C),
-1!=F&&(C=gx.fn.searchFocus(F+1,!0)));gx.fn.setFocus(C);if(this.PromptIsGet)if(this.Opener.fullAjax){var G;(F=gx.csv.ctxControlId(C.id))&&(G=gx.O.getValidStructFld(F));G&&gx.csv.validControls(G.id,G.id+1,!0,this.Opener)}else{gx.csv.loadScreen(function(){gx.fn.setFocus(C);w()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),"undefined"==typeof window.GXPkIsDirty?!1:window.GXPkIsDirty,null,"eng")}catch(p){gx.dbg.logEx(p,
"gxpopup.js","close")}w()}.closure(this))}else g&&n&&n instanceof Array&&0<n.length&&gx.fn.setReturnParms(this.Opener,n,g,this.CustomRenderGrid);A&&w()},t=gx.util.browser;t.isFirefox()||t.isIE()?f.setTimeout(m.closure(this),10):m.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,
this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(g){gx.dbg.logEx(g,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(c){var d;c=c.document.getElementsByTagName("iframe");for(var g=0;g<c.length&&!d;g++){var a=c[g];a.contentWindow===window&&(d=a)}return d},gxOpener:function(){try{parent.gxTestAvailable=1;var c=this.getWindowIframeElement(parent);return c&&void 0!==l(c).attr("data-gx-popup-ct")?parent:window}catch(d){}return null},
setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var d=gx.popup.getPopup();d?"opened"==d.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(d){}return null},setPopup:function(c){this.currentPopup=
c},open:function(c,d){return this.openPopup(c,d)},openUrlToOpenPopupParms:function(c,d,g){var a=1,b=0,f=0,k=0,m=0,t=0;g&&(a=g[0],b=g[1],f=g[2],k=g[3],m=g[4],t=g[5]);return[c,a,b,f,k,m,t,[],d]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(c,d){var g=this.getPopup(),a,b;if(g&&g.Opener===gx.O&&gx.lang.isArray(c))g.OncloseCmds.push({popup:c});else{c=new this.Popup(c,!1);c.Opener=d||gx.O;d=0;for(g=c.ReturnParms.length;d<g&&!((b=gx.fn.vStructForVar(c.ReturnParms[d]))&&
b.grid&&(a=gx.O.getGridById(b.grid)));d++);a&&a.isUsercontrol&&(c.CustomRenderGrid=a);c.open();return c}},openDialog:function(c){var d=new this.Dialog;d.Opener=gx.O;d.open(c);return d},openPrompt:function(c,d,g,a,b,f){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,b);var k=d[0].Ctrl,m=!1,t;if(k){var v=gx.fn.rowGridId(k);k=gx.fn.controlRowId(k);gx.lang.emptyObject(v)||gx.lang.emptyObject(k)||(gx.csv.lastGrid=v,gx.fn.setCurrentGridRow(v,k))}else{k=0;for(var n=d.length;k<n;k++)if(d[k].IOType){v=d[k].id;
break}v&&(v=gx.O.getValidStructFld(v),!gx.lang.emptyObject(v)&&(t=gx.O.getGridById(v.grid)))&&(m=t.isUsercontrol)&&(v=t.gridId+"",k=gx.lang.emptyObject(t.grid.getSelectedRow)?void 0:gx.text.padl(t.grid.getSelectedRow()+"",4,"0"),gx.lang.emptyObject(v)||gx.lang.emptyObject(k)||(gx.csv.lastGrid=v,gx.fn.setCurrentGridRow(v,k)))}if(f||this.outParmsAccepted(d)||m)c=new this.Popup([c,1,0,0,0,0,0,[],d],!0),c.IsMod=g,c.Opener=gx.getObj(a,b),m&&(c.CustomRenderGrid=t),c.open()}},outParmsAccepted:function(c){for(var d=
c.length,g=!1,a=0;a<d;a++){var b=c[a];gx.fn.isOutputParm(b)&&(g=!0);if(gx.fn.isOutputParm(b)&&b.Ctrl&&gx.fn.isAccepted(b.Ctrl))return!0}return!g},gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=gx.popup.getPopup();return c&&c.window?c.window.gx.popup.lvl:-1},assignPromptFields:function(c,d){var g=[],a=gx.O,b=[],f=99999,k=d.length,m=0;for(m=0;m<k;m++){var t=c[m],v=d[m];if(t.Ctrl&&!gx.lang.emptyObject(t)){gx.csv.pkDirty=
t.isKey;"checkbox"==t.Ctrl.type&&t.Ctrl.value!=v&&(t.Ctrl.checked=!t.Ctrl.checked);t.Ctrl.value!=v&&t.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var n=gx.csv.ctxControlId(this.parmId(t.Ctrl)),w=a.getValidStructFld(n);b.push({idx:w?w.id:f++,ParmCtrl:t.Ctrl,ControlId:n,VStruct:w,PValue:v})}}b.sort(function(A,r){return A.idx<r.idx?-1:A.idx>r.idx?1:0});for(m=0;m<b.length;m++)this.assignPromptFieldValue(b[m],a);for(m=0;m<b.length;m++)g.push(this.assignAndValidatePromptField(b[m],a));return l.when.apply(l,
g)},assignPromptFieldValue:function(c,d){var g=c.VStruct,a=c.ParmCtrl;c=c.PValue;gx.lang.emptyObject(g)||gx.lang.emptyObject(g.v2c)||"date"!=g.type&&"dtime"!=g.type?(gx.fn.setControlValue(this.parmId(a),c,0),g.c2v(),"function"===typeof g.v2bc&&g.v2bc.call(d)):(g.v2v(c),"function"===typeof g.v2bc&&g.v2bc.call(d),gx.fn.v2c(g,c));gx.fn.setControlGxValid(a,"0");gx.evt.execOnchange(a);d=gx.dom.byId("span_"+a.name);null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),
d.childNodes[0].nodeValue=c);g&&g.gxgrid&&g.gxgrid.updateControlValue(g,!1)},assignAndValidatePromptField:function(c,d){var g=l.Deferred(),a=!0,b=c.ControlId,f=c.VStruct,k,m=function(){gx.popup.assignPromptFieldValue(c,d);gx.util.balloon.clear(b);k&&(gx.O.toValid=k+1,gx.csv.validateAll().done(function(){if(!gx.lang.emptyObject(f.rgrid)){for(var t=f.rgrid.length,v=0;v<t;v++)f.rgrid[v].filterVarChanged();g.resolve()}}));g.resolve()}.closure(this);!gx.lang.emptyObject(f)&&(k=d.getValidStructId(f.fld))&&
(k>gx.O.toValid&&(d.toValid=k),a=!1,gx.csv.validateAll().done(m));a&&g.resolve();return g.promise()},autofit:function(){var c=this.getPopup();gx.lang.emptyObject(c)||"opened"!=c.state||this.ext.autofit(c,null,!1)},Impl:function(c,d,g,a,b,f,k,m){var t="PopupBorder gx-popup gx-popup-default";c.cssClass&&(t=t.replace("gx-popup-default",""),t+=" "+c.cssClass);return new this.ext.popUp(c,g,f,m,k,a,b,"gxp",d,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,
!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",t,"PopupShadow",void 0)},setZIndex:function(c){c=gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},
hide:function(c){var d=gx.dom.byId;gx.popup.ext.compatMode()&&(d(c+"_t").style.visibility="hidden",d(c+"_c").style.visibility="hidden",d(c+"_rs").style.visibility="hidden");d(c+"_b").style.visibility="hidden"},show:function(c){var d=gx.dom.byId,g=l("#"+c+"_b");gx.popup.ext.compatMode()?(d(c+"_t").style.visibility="visible",d(c+"_c").style.visibility="visible",d(c+"_rs").style.visibility="visible"):l(document.body).toggleClass("gx-popup-opened",!0);g.css("visibility","visible")},close:function(c,d){l(document.body).toggleClass("gx-popup-opened",
!1);if(!d||"function"!=typeof d||!1!==d()){c.draggable&&c.draggable.deinit();c.resizable&&c.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var g=c.id;d=document.getElementById(g+"_b");g=document.getElementById(g+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);var a=c.callerActiveElement;a&&a.focus&&a.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",
[c]);g&&(g.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?d.parentNode.removeChild(d):gx.dom.removeControlSafe(d)}},move:function(c,d,g){c=l("#"+c+"_b");c.toggleClass("gx-popup-centered",!1);void 0!==d?c.css({left:Math.max(d,0)}).toggleClass("gx-popup-horizontal-center",!1):c.toggleClass("gx-popup-horizontal-center",!0);void 0!==g&&c.css({top:Math.max(g,0)})},resize:function(c,d,g){var a=gx.dom.byId;if(a(c+"_rs").rsEnable){var b=a(c+"_rs"),f=a(c+"_b"),k=a(c+
"_t");a=a(c+"_c");gx.popup.ext.compatMode()?(b.style.left=Math.max(d,92)+"px",b.style.top=Math.max(g,72)+"px",f.style.width=Math.max(d+8,100)+"px",f.style.height=Math.max(g+8,80)+"px",k.style.width=Math.max(d+3,92)+"px",a.style.width=Math.max(d-5,87)+"px",a.style.height=Math.max(g-28,44)+"px"):(c=document.getElementById(c+"_ifrm"),l(c).css({width:d,height:g}));this.resizePopupContent(d,g)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+
this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(c,d){var g=gx.popup.ext,a=c.pageX;c=c.pageY;var b=l(d);gx.popup.ext.compatMode()?(g.rsxoff=parseInt(d.style.left,0)-a,g.rsyoff=parseInt(d.style.top,0)-c):(g.rsxoff=b.position().left-a,g.rsyoff=b.position().top-c);g.currRS=d;return!1},changez:function(c){c=null!=c?c:this;var d=gx.popup.ext,g=gx.dom.byId;c.style.zIndex=
++d.zdx;g(c.cid+"_rs").style.zIndex=++d.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(c,d){var g=gx.popup.ext,a=gx.dom.byId;d=a(d.cid+"_b");gx.evt.mouse.update(c);c=gx.evt.mouse.x;a=gx.evt.mouse.y;gx.popup.ext.compatMode()?(g.xoff=parseInt(d.style.left,0)-c,g.yoff=parseInt(d.style.top,0)-a):(g.xoff=l(d).position().left-c,g.yoff=l(d).position().top-a);g.currIDb=d;return!1},subBox:function(c,d,g,a,b,f){b=document.createElement("div");b.setAttribute("id",f);b.style.position="absolute";
b.style.left=c+"px";b.style.top=d+"px";b.style.width=g+"px";b.style.height=a+"px";b.style.visibility="visible";b.style.padding="0px";b.style.width=g+"px";return b},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(c,d,g,a,b,f,k,m,t,v,n,w,A,r,q,x,C,F,G,p,u,y,B,E,I,L,M,O){I=void 0!==I?I:gx.popup.showParentPopups;d=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);a=this.win.gx.dom.byId.closure(this.win.gx.dom);
g=l("<div/>",{id:d+"_b",style:q?"":"visibility:hidden;"})[0];l(g).addClass("gx-responsive-popup gx-popup-centered "+B+" gx-popup-initial");B=l("<div/>",{id:d+"_t"})[0];B.className=p;B.innerHTML='<span id="'+d+'_gxtitle" class="PopupTitle">'+t+'</span><span class="'+u+'"; id="'+d+'_cls"></span>';t=l("<div/>",{id:d+"_c"})[0];t.className=y;"string"==typeof k?t.innerHTML=k:t.appendChild(k);g.appendChild(B);g.appendChild(t);O=gx.dom.byId(O)||this.doc.body;O.appendChild(g);q||this.hide(d);k=a(d+"_b");q=
a(d+"_cls");k.cid=d;k.isExt=F?!0:!1;F=a(d+"_t");F.cid=d;C&&(c.resizable=new gx.popup.ext.resizable(k,d,G,g));x&&(c.draggable=new gx.popup.ext.draggable(k,F));gx.evt.attach(q,"click",M.close||this.close.closure(this,[c,M.beforeClose]));(r||I)&&this.initmodal(c,I,L)},resizable:function(c,d,g,a){var b,f=!1,k,m,t,v,n;this.init=function(w,A,r,q){var x=l("<div/>",{id:A+"_rs"})[0];x.className+="gx-popup-resize";x.innerHTML='<img src="'+r+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';
x.rsEnable=!0;x.style.cursor="se-resize";x.cid=A;q.appendChild(x);t=w;x.firstChild.addEventListener("dragstart",function(C){gx.evt.cancel(C,!0)},!0);v=this.onMouseup.closure(this);n=this.onMousemove.closure(this);x.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",v);document.addEventListener("mousemove",n);b=!0};this.deinit=function(){b&&(document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",n),b=t=null)};this.onMousemove=
function(w){if(f){var A=l(t).find("iframe");l("iframe").css("pointer-events","none");var r=l(t).hasClass("gx-popup-centered")?2:1,q=w.clientX-k,x=w.clientY-m;q=l(A).width()+q*r;r=l(A).height()+x*r;l(A).css({width:q,height:r});k=w.clientX;m=w.clientY}};this.onMousedown=function(w){k=w.clientX;m=w.clientY;f=!0};this.onMouseup=function(){f&&(l("iframe").css("pointer-events",""),f=!1)};this.init(c,d,g,a)},draggable:function(c,d){var g,a=!1,b,f,k=0,m=0,t,v,n,w,A;this.init=function(r,q){t=r;v=q;A=this.onMousedown.closure(this);
w=this.onMousemove.closure(this);n=this.onMouseup.closure(this);t.addEventListener("mousedown",A);t.addEventListener("mouseup",n);document.addEventListener("mousemove",w);g=!0};this.deinit=function(){g&&(t.removeEventListener("mousedown",A),t.removeEventListener("mouseup",n),document.removeEventListener("mousemove",w),g=t=v=null)};this.onMousemove=function(r){if(a){l("iframe").css("pointer-events","none");var q=r.clientY-f;t.style.left=k+(r.clientX-b)+"px";t.style.top=m+q+"px"}};this.onMousedown=
function(r){if(r.target===v){var q=l(t);k=q.position().left;m=q.position().top;q.css({left:k,top:m}).toggleClass("gx-popup-centered gx-popup-horizontal-center",!1);b=r.clientX;f=r.clientY;a=!0}};this.onMouseup=function(){a&&(l("iframe").css("pointer-events",""),a=!1,k=parseInt(t.style.left,10)||0,m=parseInt(t.style.top,10)||0)};this.init(c,d)},window_compat:function(c,d,g,a,b,f,k,m,t,v,n,w,A,r,q,x,C,F,G,p,u,y,B,E,I,L,M,O){I=void 0!==I?I:gx.popup.showParentPopups;w=c.id;this.win||(this.win=window);
this.doc||(this.doc=this.win.document);A=this.win.gx.dom.byId.closure(this.win.gx.dom);b=Math.max(b,100);f=Math.max(f,80);d=new this.subBox(b-8,f-8,7,7,"",w+"_rs");C&&(d.className+="gx-popup-resize",d.innerHTML='<img src="'+G+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',d.style.cursor="se-resize");d.rsEnable=C;g=new this.subBox(g,a,b,f,n,w+"_b");g.className=B;g.style.display="block";g.style.boxSizing="content-box";g.style.zIndex=++this.zdx;q||
(g.style.visibility="hidden");v=new this.subBox(2,2,b-5,20,v,w+"_t");v.style.overflow="hidden";v.style.boxSizing="content-box";v.className=p;v.innerHTML='<span id="'+w+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+t+'</span><span class="'+u+'" style="z-index:'+ ++this.zdx+';" id="'+w+'_cls"></span>';b=new this.subBox(2,24,b-13,f-36,m,w+"_c");b.className=y;"string"==typeof k?b.innerHTML=k:b.appendChild(k);b.style.overflow="hidden";b.style.boxSizing=
"content-box";q||(g.style.visibility="hidden",v.style.visibility="hidden",b.style.visibility="hidden");g.appendChild(v);g.appendChild(b);g.appendChild(d);O=gx.dom.byId(O)||this.doc.body;O.appendChild(g);q||this.hide(w);var R=A(w+"_b");R.cid=w;R.isExt=F?!0:!1;var P=A(w+"_t");P.cid=w;C&&(k=A(w+"_rs"),k.cid=w,k.style.boxSizing="content-box",gx.evt.attach(k,"mousedown",this.startRS.closure(this,[k],!0)),gx.evt.attach(k,"mouseup",this.stopRS.closure(this,[k],!0)));k=A(w+"_cls");gx.evt.attach(k,"click",
M.close||this.close.closure(this,[c,M.beforeClose]));x&&(gx.evt.attach(P,"mousedown",function(Y){this.grab_id(Y,P);gx.evt.attach(R,"mouseup",this.stopdrag.closure(this,[P],!0),this,{single:!0})},this),C&&gx.evt.attach(d.firstChild,"dragstart",function(Y){gx.evt.cancel(Y,!0)},!0));(r||I)&&this.initmodal(c,I,L)},popUp:function(c,d,g,a,b,f,k,m,t,v,n,w,A,r,q,x,C,F,G,p,u,y,B,E,I,L,M,O,R,P,Y,W,Z,aa,ba){n=gx.popup.ext;null!=c.parentPopup?(w=c.parentPopup.window,n=w.gx.popup.ext,n.win=w,n.doc=w.document,
gx.popup.ext=n):(n.win=window,n.doc=n.win.document);n.win.gx.popup.setPopup(c);c.window=n.win;c.document=n.doc;n.win.gx.popup.lvl++;m+=n.win.gx.popup.lvl;c.id=m;c.IsPrompt||gx.util.sameAppUrl(t)?(t+=gx.http.urlParameterPrefix(t),t+=encodeURIComponent("gxPopupLevel="+n.win.gx.popup.lvl+";"),g=gx.util.getFileName(t),g=g.charAt(0).toUpperCase()+g.slice(1),gx.popup.ext.compatMode()?(w=gx.HTML5?"auto":"100%",t='<iframe id="'+m+'_ifrm" src="'+t+'" width="'+w+'" height="'+w+'" frameborder="0" style="overflow:auto;" title="'+
g+'" data-gx-popup-ct=""></iframe>'):(w=!d&&0<f?f:gx.dom.fixes.getPopupMinWidth(),t=l("<iframe/>",{id:m+"_ifrm",src:t,title:g,style:"width:"+gx.dom.addUnits(w)}),t.attr("data-gx-popup-ct",""),t=t[0].outerHTML,gx.util.browser.isIPad()&&(t='<div class="iframe-container">'+t+"</div>")),g={close:c.close.closure(c,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},n.window(c,d,a,b,f,k,t,v,A,r,x,C,F,G,p,u,y,E,R,P,Y,W,Z,aa,ba,!0,g),d=n.win.gx.dom.byId(m+"_ifrm"),n.iFrame=d,gx.lang.doCallTimeout(n.showIfLoaded,
n,[c,d,1],50)):(gx.popup.setPopup(null),c=new Date,c=c.getTime(),m="",1==g&&(m="left="+a+",top="+b),a="",d||(a=",width="+f+",height="+k),window.open(E?t:"","gx"+c,"status=no,menubar=no"+a+",resizable="+(y?"yes":"no")+",scrollbars=yes,"+m))},initmodal:function(c,d,g){c.showParentPopups=d;null==c.parentPopup?gx.ajax.disableForm(g,!0):d||this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{this.show(c.parentPopup.id);var d=c.parentPopup.frameWindow;d&&
d.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(c){return c.contentType||l(c.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(c,d){if(void 0===d.isPdf){var g=c.src;if(gx.util.getContentTypeFromExt(g)==gx.util.contentTypes.pdf)return d.isPdf=!0;var a=gx.util.contentTypes.html;try{var b=c.contentDocument;b=c.contentWindow.document;a=this.getDocumentContentType(b);if(a==gx.util.contentTypes.pdf)return d.isPdf=!0}catch(k){a=
null}if(gx.lang.emptyObject(a)){var f;c={};c.url=g;c.method="HEAD";c.sync=!0;c.ajaxHeader=!1;c.handler=function(k,m,t){f=t.getResponseHeader("Content-Type")};c.obj=!0;gx.http.doCall(c);if(f&&0<=f.indexOf(gx.util.contentTypes.pdf))return d.isPdf=!0}return!1}return d.isPdf},showIfLoaded:function(c,d,g){try{if(c.isActive()&&(this.docReady(d,g)||10<g&&this.isPDFPopup(d,c))){var a=gx.dom.iFrameDoc(d),b=!1;try{b=a&&"about:blank"!=a.URL}catch(k){}var f=this.isPDFPopup(d,c);if(b||f){c.state="opened";this.autofit(c,
a,!0);return}}}catch(k){gx.dbg.logEx(k,"gxpopup.js","showIfLoaded")}g++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,d,g],50*g)},docReady:function(c,d){if("complete"==c.readyState)return!0;if(c=gx.dom.iFrameDoc(c)){try{var g="undefined"!=typeof c.gxReadyState?c.gxReadyState:c.readyState}catch(a){return!0}if("complete"==g)return!0}return!gx.util.browser.isIE()&&50<=d&&c&&c.body&&0!==c.body.childNodes.length?!0:!1},resizePopupContentLegacy:function(c,d){var g=gx.dom.iFrameDoc(this.iFrame);
d=0<d?d:"100%";c=0<c?c:"100%";var a=l(this.iFrame);g&&(c=d="100%");a.width(c);void 0===d&&(d=Math.max(Math.max(g.body.scrollHeight,g.documentElement.scrollHeight),Math.max(g.body.offsetHeight,g.documentElement.offsetHeight)));a.height(d)},resizePopupContent:function(c,d){gx.HTML5&&this.iFrame&&(gx.popup.ext.compatMode()?this.resizePopupContentLegacy(c,d):this.resizePopupContentImpl(c,d))},resizePopupContentImpl:function(c,d){var g=gx.dom.iFrameDoc(this.iFrame),a=l(this.iFrame);if(0<c&&0<d)a.width(c),
a.height(d);else if(g){try{var b=a[0].contentWindow.gx&&a[0].contentWindow.gx.runtimeTemplates}catch(f){}b||a.width(50);c=Math.max(g.body.scrollWidth,g.body.getBoundingClientRect().width,g.documentElement.scrollWidth,g.documentElement.getBoundingClientRect().width);try{c+=a.height()<g.body.offsetHeight?gx.dom.getScrollbarWidth():0}catch(f){}1<Math.abs(a.width()-c)&&a.width(c);g=Math.max(g.body.scrollHeight,g.body.getBoundingClientRect().height,g.documentElement.scrollHeight,g.documentElement.getBoundingClientRect().height);
a.height(g)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(c,d,g){if(!gx.lang.emptyObject(c)){var a=c.id,b=c.isPdf,f=l("#"+a+"_c");this.doc||(this.doc=c.document);var k=this.doc;var m=k.getElementById(a+"_ifrm"),t=l(k.getElementById(a+"_gxtitle"));!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(m));this.iFrame=this.iFrame||m;t.text(d&&!b?d.title:"");c.frameDocument=d;c.frameWindow=m.contentWindow;
d&&!b&&(d.gxPopup=c);gx.util.browser.isIPad()&&(f.css("overflow-y","auto"),f.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var v=this.getiFrameSizeInfo(k);v.accessParentFrame&&(t=v.scrollTop,m=v.maxHeight+Math.min(window.top.document.body.scrollTop-v.y,0)-50,f.css("max-height",m).parent().css("margin-top","0px"),this.move(a,void 0,Math.max(window.top.document.body.scrollTop-v.y,0)+t+(m-Math.min(d.body.offsetHeight,m))/2))}if(b){f.addClass("gx-popup-pdf");var n=.5*k.body.clientWidth;
var w=.85*k.body.clientHeight}c.autoresize||(n=c.width,w=c.height);this.resizePopupContent(n,w);g&&(c.position&&(d=parseInt(c.top,0),c=parseInt(c.left,0),this.move(a,c,d)),this.show(a))}},autofit_comp:function(c,d,g){if(!gx.lang.emptyObject(c)){var a=document;c.zindex=null!=a.gxPopup?this.zdx+a.gxPopup.zindex:this.zdx;var b=c.id,f=c.isPdf;this.doc||(this.doc=c.document);a=this.doc;var k=a.getElementById(b+"_ifrm");!d&&gx.popup.ispopup()&&(d=gx.dom.iFrameDoc(k));c.frameDocument=d;c.frameWindow=k.contentWindow;
d&&!f&&(d.gxPopup=c);k=a.getElementById(b+"_rs");var m=a.getElementById(b+"_t"),t=a.getElementById(b+"_b"),v=a.getElementById(b+"_c"),n=a.getElementById(b+"_gxtitle");n.innerHTML=d&&!f?d.title:"";n.style.width="auto";var w=gx.dom.getComputedStyle(v),A=gx.dom.getComputedStyle(m),r=gx.dom.getComputedStyle(t),q=gx.dom.getComputedStyle(k),x=parseInt(w.height,0),C=parseInt(w.width,0),F=this.getiFrameSizeInfo(a),G=F.maxWidth,p=F.maxHeight,u=F.scrollTop,y=F.scrollLeft,B=F.x;F=F.y;var E=gx.dom.dimensions(t);
c.autoresize||(x=c.height-x+E.h,C=c.width-C+E.w);var I=c.width-C,L=c.height-x;c.autoresize&&(!f&&d?(d=gx.HTML5?d.documentElement||d.body:d.body,a=g&&gx.util.browser.isEdge()?l.position.scrollbarWidth():0,d?(d.gxwidth||(d.gxwidth=d.scrollWidth),I=d.gxwidth+a,a=d.gxwidth+30-G,L=d.scrollHeight+30-p,I=Math.max(I,n.clientWidth+15)-C-(0<a?a:0),L=d.scrollHeight-x-(0<L?L:0)):gx.util.browser.isIE()&&(0>I&&(I=0),0>L&&(L=0))):f&&(I=a.body.clientWidth/2,L=a.body.clientHeight/2));n=parseInt(c.top,0);x=parseInt(c.left,
0);c.position||(n=(p-L)/2-E.h/2+u-F,x=(G-I)/2-E.w/2+y-B,0>n&&(n=5,L-=5),0>x&&(x=5,I-=5));t.style.top=parseInt(n,0)+"px";t.style.left=parseInt(x,0)+"px";c.autoresize?(c=function(M,O){O=parseInt(M,0)+O;return 0<O?O:M},m.style.width=c(A.width,I)+"px",t.style.height=c(r.height,L)+"px",t.style.width=c(r.width,I)+"px",v.style.height=c(w.height,L)+"px",v.style.width=c(w.width,I)+"px",c=gx.util.browser.isIE()?4:2,k.style.top=parseInt(r.height,0)-parseInt(q.height,0)-c+"px",k.style.left=parseInt(r.width,0)-
parseInt(q.width,0)-c+"px"):(x=c.height,C=c.width,k.style.left=Math.max(C,92)+"px",k.style.top=Math.max(x,72)+"px",t.style.width=Math.max(C+8,100)+"px",t.style.height=Math.max(x+8,80)+"px",m.style.width=Math.max(C+3,92)+"px",v.style.width=Math.max(C-5,87)+"px",v.style.height=Math.max(x-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(v.style["overflow-y"]="auto",v.style["-webkit-overflow-scrolling"]="touch"):v.style.overflow="hidden";f&&gx.util.browser.isIE()?this.resizePopupContent("100%",
"100%"):this.resizePopupContent(parseInt(v.offsetWidth,10),parseInt(v.offsetHeight,10));g&&this.show(b)}},getiFrameSizeInfo:function(c){var d=gx.util.getWindowInfo().canAccessFrame,g={x:0,y:0,accessParentFrame:d};!d||window==window.top||gx.lang.emptyObject(window.top)?(g.maxWidth=window.innerWidth||c.documentElement.clientWidth||c.body.offsetWidth,g.maxHeight=window.innerHeight||c.documentElement.clientHeight||c.body.offsetHeight,g.scrollTop=gx.dom.documentScroll(c).scrollTop,g.scrollLeft=gx.dom.documentScroll(c).scrollLeft):
(d=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>c.body.clientHeight?g.maxHeight=c.body.clientHeight:(g.maxHeight=window.top.document.body.clientHeight,g.y=d.y),g.scrollTop=c.body.scrollTop,g.scrollLeft=c.body.scrollLeft,g.maxWidth=Math.min(window.top.document.body.clientWidth,c.body.clientWidth),window.top.document.body.clientWidth>c.body.clientWidth?g.maxWidth=c.body.clientWidth:(g.maxWidth=window.top.document.body.clientWidth,g.x=d.x));return g},_init:function(){}},
_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&(gx.util.browser.isIE()?c.frameDocument=c.frameWindow.document:c.frameDocument.gxPopup=c)}catch(d){c.frameDocument=c.frameWindow.document,gx.dbg.logEx(d,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(d,g,a){g<a&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",
c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(l){function c(a,b,f){0<a&&(f=f||gx.O,gx.fn.setCurrentGridRow(a,b),(a=f.getGridById(a))&&a.instanciateRow(b))}var d=/\?(.*)/,g=function(a,b,f){gx.dbg.logMsg("Unable to execute external object "+a+" - "+b+"("+f+")")};return{reqHeader:"GxAjaxRequest",dfTimer:null,resolveParmKey:function(a){var b=!1;a.av?b=a.av:a.ctrl&&a.prop?b=a.ctrl+a.prop:a.ctrl&&(b=a.ctrl);return b},serviceUrl:function(a){var b=gx.ajax.selfUrl();a&&(b=d.test(b)?b.replace(d,"?"+a+gx.http.urlParameterSeparator(b)+"$1"):
b+("?"+a));return b},validationMessage:function(a,b,f,k,m,t){a=new gx.ajax.message(a,b,f,k,m,t);return gx.lang.apply(a,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(v){v.warnOnTimeout=!0;v.beforeSend=function(n){n.setRequestHeader("X-FULL-AJAX-REQUEST","1")}},beforeProcesResponse:function(v){var n,w=[],A=this.getParmsMetadata("input");for(n=0;n<A.length;n++)A[n].av&&w.push(A[n].av);v.isValidation=!0;v.validationInput=w}})},message:function(a,b,f,k,m,t){var v;return{disableForm:t,
gxO:b,grid:f,row:k,methods:[a],isValidation:!1,addMethod:function(n){this.methods.push(n)},gridsData:function(){var n=this.gxO.getGridById(this.grid,this.row),w={},A=function(q,x){x[q.gridName]={id:q.gridId,lastRow:Math.max(0,Number(q.lastRowId)),pRow:q.parentRow?q.parentRow.gxId:""}};if(n){var r=function(q,x){if(q){A(q,x);var C=gx.fn.currentGridRowImpl(q.gridId);C&&(x[q.gridName].lastRow=Math.max(0,Number(C.substr(-4,4))-1));r(q.parentGrid,x)}};(function(q,x,C,F){var G=function(p,u){return p?u.parentGrid===
p&&gx.text.startsWith(u.parentRow.gxId,F)?u:G(p.parentGrid,u):null};C=l.map(gx.O.Grids,function(p){return G(q,p)});l.each(C,function(p,u){A(u,x)})})(n,w,this.gxO,this.row);r(n,w)}else l.each(this.gxO.Grids,function(q,x){A(x,w)});return w},to_json:function(){var n={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(n.fullPost=this.fullPost);this.addGXStateParms(n);
this.grid&&(n.grid=this.grid);n.grids=this.gridsData();this.row&&(n.row=this.row.substring(0,4),n.pRow=this.row.substring(4));return gx.json.serializeJson(n)},getParmsMetadata:function(n){for(var w=[],A={},r=0,q=this.methods.length;r<q;r++){var x=this.methods[r];if(this.gxO.EvtParms[x]){x=this.gxO.EvtParms[x]["input"==n?0:1];for(var C=0;C<x.length;C++)if(x[C].postForm||x[C].sPrefix||x[C].sSFPrefix||x[C].sCompEvt)w.push(x[C]);else{var F=gx.ajax.resolveParmKey(x[C]);F&&(void 0===A[F]?(A[F]=w.length,
w.push(x[C])):void 0===w[A[F]].grid&&void 0!==x[C].grid&&(w[A[F]]=x[C]))}}}return w},parmFromHidden:function(n,w){var A=gx.O;gx.setGxO(w);if(!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(w)&&n.v2v){var r=gx.fn.getHidden(this.gxO.IsMasterPage?n.fld+"_MPAGE":gx.O.CmpContext+n.fld);n.v2v(r);r=w[n.gxvar]}gx.setGxO(A);return r},getInputParms:function(){for(var n=this.getParmsMetadata("input"),w=this.gxO.CmpContext,A=[],r=[],q,x,C,F,G,p,u=0,y=n.length;u<y;u++)if(x=C=void 0,p="",q=n[u],q.postForm){F={};
F.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(F,gx.http.postDataFormat.JSON);for(var B in gx.http.viewState)this.fullPost[B]||void 0===gx.http.viewState[B]||(this.fullPost[B]=gx.http.viewState[B])}else if(this.gxO.isTransaction()&&0<this.grid&&this.row&&"Gx_mode"===q.av&&"vMODE"===q.fld)A.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row));else if("Referrer"==q.prop)A.push(gx.referrer?gx.referrer:document.referrer);else if(q.sPrefix)A.push(this.gxO.sPrefix());
else if(q.sSFPrefix)A.push("");else if(q.sCompEvt)A.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else{if(q.ctrl)if(q.prop)"GridRC"==q.prop?(F=(F=gx.parentGridRow(q.grid,this.gxO))?"_"+F:"",x={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+q.av+F),rowSuffix:F,grid:q.grid}):x="GridCurrRow"==q.prop?gx.fn.currentGridRowImpl(q.grid):this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+q.ctrl,q.prop);else{if(C=this.gxO.getValidStructFld(q.ctrl))F=gx.fn.getControlGridRef(C.fld,C.grid),gx.html.controls.isMultiSelection(C.ctrltype)?
p=gx.dom.comboBoxToObj(F,x):"radio"===C.ctrltype&&(p=gx.dom.radioToObj(F,x)),p&&(x=p)}else if((C=this.getParmVarVStruct(q))&&"function"==typeof C.c2v&&"function"==typeof C.val&&(F=C.grid===this.grid?this.row:gx.fn.currentGridRowImpl(C.grid),void 0!==C.val(F)&&C.c2v(F)),C&&!0===C.isuc&&(G=this.row||(C&&C.grid?gx.fn.currentGridRowImpl(C.grid):void 0),(C.getUCInstance(G)||C.uc).execC2VFunctions()),x="function"==typeof this.gxO[q.av]?this.gxO[q.av](this.row):void 0===this.gxO[q.av]?q.fld?gx.fn.getControlValue(q.fld):
"":this.gxO[q.av],F=gx.fn.vStructForOld(q.av),!F||"date"!=F.type&&"dtime"!=F.type||"string"===typeof x&&(x=new gx.date.gxdate(x)),this.isValidation&&x instanceof gx.date.gxdate&&!x.HasDatePart&&(F=new gx.date.gxdate(""),F.assign_date(x),F.JsonNullFormat=gx.date.jsonNullFormat.YearOne,x=F),void 0!==q.grid){var E=x,I=[];l.each(this.gxO.Grids,function(L,M){if(M.gridId===q.grid){L=M.parentRow?M.parentRow.gxId:"";if(C){x={pRow:L,c:[],hc:[],hsh:[],v:E};for(var O=1;O<=M.lastRowId;O++){G=gx.grid.getPaddedRowId(O);
var R=C.isuc?gx.fn.getControlValue(C.fld+"_"+G+L):C.val(G+L);x.c.push(R);q.hsh&&x.hsh.push(gx.fn.getHash(w,C.fld,G+L));gx.lang.emptyObject(C.hc)||x.hc.push(gx.fn.getControlValue("GXHC"+C.fld+"_"+G+L))}}else gx.lang.isArray(x)&&(x={pRow:L,c:x,v:x[Number(gx.fn.currentGridRowImpl(q.grid))-1]});I.push(x)}});x=I}else q.hsh&&(C&&C.grid?(G=gx.fn.currentGridRowImpl(C.grid)||"",""===G&&(x=this.parmFromHidden(C,this.gxO))):G="",r.push({hsh:gx.fn.getHash(this.gxO.CmpContext,q.fld,G),row:G}));A.push(void 0!==
x?x:null)}return{input:A,hashed:r}},refreshOutputParms:function(){for(var n=this.getParmsMetadata("output"),w,A,r=0,q=n.length;r<q;r++)w=n[r],(w=this.getParmVarVStruct(w))&&w.grid&&"function"==typeof w.c2v&&"function"==typeof w.val&&(A=gx.fn.currentGridRowImpl(w.grid),void 0!==w.val(A)&&w.v2c(A))},getParmVarVStruct:function(n){var w;if(void 0!==n.fld)return n.fld?this.gxO.getValidStructFld(n.fld):null;if(this.grid&&this.row&&(w=this.gxO.getGridById(this.grid,this.row))&&(n=w.grid.getColumnForVar(n.av)))return this.gxO.getValidStruct(n.gxId)},
addGXStateParms:function(n){var w={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(w.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(w)||(n.gxstate=w)},beforeCall:function(){m&&gx.fn.objectOnpost()},call:function(){v=l.Deferred();var n=gx.O;gx.setGxO(this.gxO);if(this.grid&&this.row){var w=gx.fn.currentGridRowImpl(this.grid);gx.fn.setCurrentGridRow(this.grid,this.row)}this.beforeCall();var A=this.getInputParms();m?(this.parms=A.input,
this.hashedParms=A.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms());this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,w);gx.setGxO(n);return v.promise()},doAjaxCall:function(n,w){var A=this.to_json();gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});!1!==w&&this.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[A,n]);n=gx.ajax.getPostInfo(this.gxO,A,n);n.handler=this.ajaxCallHandler.closure(this);n.error=this.ajaxCallError.closure(this);n.handleAllStatusCodes=
!0;n.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));n.reqData=A;n.always=this.callback;n.contentType="application/json";this.beforeAjaxCall(n);gx.http.doCall(n)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var n=this.callback();v.resolve(n)},ajaxCallError:function(){v.resolve(!1);b.endFeedback()},afterAjaxCallHandler:function(n,w,A){A=A||gx.O;gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});
v.resolve(!n);n&&(A.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[w]))},ajaxCallHandler:function(n,w,A){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=A.status;n=!1;if(A.status==gx.http.STATUS_FORBIDDEN)gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+A.status+" "+A.statusText+")"),n=!0;else if(gx.http.checkResponseStatus(A,this.isValidation))n=!0;else if(200>A.status||299<A.status)gx.dom.writeError(A.responseText,gx.getMessage("GXM_runtimeappsrv"),A.status),n=!0;
else if(gx.http.validJsonResponse(A,w)){var r=gx.json.evalJSON(w);null==r?gx.dom.writeError(w.toString(),gx.getMessage("GXM_runtimeappsrv"),A.status):(gx.csv.lastEvtResponse=r,w={response:r,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(w),gx.ajax.setJsonResponse(w).done(function(){gx.fx.obs.notify("gx.onafterevent",[r])}))}else n=!0;this.afterAjaxCallHandler(n,r,this.gxO)},beforeProcesResponse:gx.emptyFn,startFeedback:function(){this.gxO.startFeedback(!1,
this.isValidation)}}},maxGETLength:function(a){return a.AjaxSecurity?600:1350},getImageUrl:function(a,b){var f=a[b];if(gx.lang.emptyObject(f))return"";"object"==typeof f&&(a[b]=gx.ajax.resolveImageUrl(f));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a[b],!0)},resolveImageUrl:function(a){var b;for(b=0;b<a.length;b++){var f=a[b];if(f.l==gx.languageCode&&f.t==gx.theme)return(f.i?"Resources/":"")+f.p}},encryptParms:function(a,b){return a.AjaxSecurity?gx.sec.encrypt(b):b},doPost:function(a,
b,f,k,m,t){!1!==f&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);b=this.getPostInfo(gx.O,a,b);b.rowId=m;b.gridId=k;b.url=gx.ajax.serviceUrl(a);var v=gx.O;b.always=function(){!1!==f&&v.endFeedback();t&&t()};gx.http.doCall(b)},getPostInfo:function(a,b,f){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=a;!0===f&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);return b},
multipartInfo:function(a){gx.dom.hasSelectedFile()&&(a.multipart=!0,a.mimetype="text/html",a.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(a,b){var f=void 0!==a.refresh_form;a=a.refresh||a.refresh_form;gx.util.balloon.clearAll();if("GET"==a)gx.http.reload(!0);else return a="RFR",b.IsMasterPage&&(a+="_MPAGE"),b=f||!gx.pO.fullAjax?gx.pO:b,f=b.fullAjax,b.executeServerEvent(a,!gx.pO.fullAjax,null,!0,f);return l.Deferred().resolve()},doRefresh:function(a){var b=a.IsMasterPage?
"RFR_MPAGE":"RFR";a=gx.pO.fullAjax?a:gx.pO;a.executeServerEvent(b,!0,null,!0,a.fullAjax)},dispatchCommands:function(a,b,f,k){f=f||{};var m,t=f.ignoreCmds||[];k=void 0===k?0:k;b=b||gx.O;if(a&&0<a.length){for(var v=a.length,n=k;n<v;n++){k=a[n];var w=Object.keys?Object.keys(k)[0]:"";if(!gx.util.inArray(w,t)){k.set_focus&&gx.fn.usrSetFocus(k.set_focus);k.print&&gx.printing.print(k.print);k.close&&(w=[],k.close.values instanceof Array&&(w=k.close.values),gx.fn.closeWindow(w,{parmsMetadata:k.close.metadata,
updateParms:f.updateParms},b));if(void 0!==k.refresh||void 0!==k.refresh_form||""===k.cmp_refresh){gx.ajax.dispatchRefreshCommand(k,b).then(function(){gx.ajax.dispatchCommands(a,b,f,n+1)});return}k.redirect&&(w=k.redirect,w.url=gx.ajax.removeGXParms(w.url),gx.http.redirect(w.url,1===w.forceDisableFrm,2===w.forceDisableFrm,b,!1));k.calltarget&&gx.nav.callFromServerRedirect(k.calltarget.url,k.calltarget.target);k.callback&&k.callback.apply(k.callback.scope,k.args||[]);k.cmp_refresh&&(w=gx.pO.getWebComponent(k.cmp_refresh),
gx.evt.dispatcher.dispatch("REFRESH",w));if(k.popup){a.length>n+1&&(gx.lang.isArray(k.popup)?k.popup[7]=a.slice(n+1):k.popup.OncloseCmds=a.slice(n+1));gx.popup.open(k.popup,b);break}if(k.ucmethod&&(m=gx.getObj(k.ucmethod.CmpContext,k.ucmethod.IsMasterPage))){w=gx.O;gx.setGxO(m);if((m=gx.O.getUserControl(k.ucmethod.Control))&&"function"==typeof m[k.ucmethod.Method])try{m[k.ucmethod.Method].apply(m,k.ucmethod.Parms);var A=!0}catch(r){gx.dbg.logEx(r,"gxcallrpc.js","Failed to execute usercontrol method: "+
k.ucmethod.Method)}gx.setGxO(w)}k.exomethod&&(gx.ajax.dispatchExoMethod(k.exomethod),A=!0);k.exoprop&&gx.ajax.dispatchExoProperty(k.exoprop)}}A&&b.showMessages(!0)}gx.fn.usrSetFocus_commit()},resolveExoObject:function(a,b){a=a[b];var f;if(!a){b=b.split(".");a=window;var k=0;for(f=b.length;k<f;k++)if(a=a[b[k]],void 0===a)return}return a},dispatchExoMethod:function(a){var b=gx.getObj(a.CmpContext,a.IsMasterPage),f,k;if(b){var m=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))&&"GlobalEvents"===
a.ObjectName?f.executeMethod(a.Method,a.Parms):a.IsEvent?gx.fx.obs.notify(a.Method,a.Parms):f?(k=f[a.Method])?k.apply(f,a.Parms):g("method","Method not found",a.Method):g("method","Object not found",a.ObjectName)}catch(t){gx.dbg.logEx(t,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(m)}}},dispatchExoProperty:function(a){var b=gx.getObj(a.CmpContext,a.IsMasterPage),f;if(b){var k=gx.O;gx.setGxO(b);try{(f=this.resolveExoObject(b,a.ObjectName))?f[a.PropertyName]=a.Value:g("property","Object not found",
a.ObjectName)}catch(m){gx.dbg.logEx(m,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(k)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(a,b,f,k,m,t,v,n){b=b||gx.O;if(a&&0<a.length)for(f=a.length,t=0;t<f;t++){var w=a[t];if(w.load){if(k=b.getGridById(w.load.grid,n))w.load.props.values=w.load.values,k.loadNewRows(w.load.props)}else w.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,m),gx.lang.doCall(gx.fn.setJsonProperties,v,n),(k=b.getGridById(w.addlines.grid,n))&&k.getNewRows(w.addlines.count))}},
willLeavePage:function(a){if(a)for(var b=a.length,f=0;f<b;f++)if(a[f].close)return!0;return!1},getRedirectCommand:function(a){if(a)for(var b=a.length,f=0;f<b;f++){var k=a[f];if(k.popup)break;if(k.redirect)return k}return null},saveJsonResponse:function(a){this.lastJsonResponse=JSON.parse(gx.lang.htmlDecode(a))},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(a,
b,f){return this.setJsonResponse({gridId:a.gridId,row:a.rowId,response:a,isPostBack:!0,gxObject:b||gx.O,context:f})},setJsonResponse:function(a){var b=l.Deferred(),f=a.response,k,m=a.isPostBack,t=a.afterCmpLoaded,v=a.gxObject,n=a.gridId,w=a.row,A=a.context||{},r=!!a.isValidation,q=gx.fn,x=gx.lang.doCall,C=this.willLeavePage(f.gxCommands),F=this.getShouldUpdatePropertyFunction(f);if(v){var G=gx.O;gx.O=v}if(n&&w){var p=gx.fn.currentGridRow(n);gx.fn.setCurrentGridRow(n,w)}if(gx.evt.srvCommand)gx.evt.srvCommand=
!1,x(gx.ajax.dispatchCommands,f.gxCommands,v),b.resolve(C);else{var u=this.getRedirectCommand(f.gxCommands);if(u&&1===u.redirect.forceDisableFrm)x(gx.ajax.dispatchCommands,f.gxCommands,v,{ignoreCmds:["refresh","cmp_refresh"]}),b.resolve(C);else if(C)x(gx.ajax.dispatchCommands,f.gxCommands,v),b.resolve(C);else{x(gx.ajax.dispatchPreCommands,f.gxCommands,v,f.gxComponents,f.gxHiddens,f.gxValues,f.gxGrids,f.gxProps,w);x(q.clearCompontHiddens,f.gxComponents);var y=x(q.setJsonHiddens,v,f.gxHiddens);x(q.setJsonComponents,
f.gxComponents,f.DynComponentMap,f.gxHiddens,function(B){gx.http.loadStyles();gx.updateTheme();m&&gx.fn.installComponents(!1);"function"==typeof t&&t();G&&(gx.O=G);var E=[],I=x(q.setJsonValues,f.gxValues,r,n,w,F),L=x(q.setJsonProperties,f.gxProps,w),M=l.map(B,function(Y){Y=q.cmpContextFromCtrl(Y);if(Y=gx.pO.WebComponents[Y])return gx.lang.objToArray(Y.UserControls).concat(Y.getUserControlGrids())});r||!v.isTransaction()&&v.fullAjax||gx.util.balloon.clearAll();q.enableDisableDelete(v);m&&(k=x(q.loadJsonGrids,
f.gxGrids,m,E));r&&gx.ajax.transformValidationMessages(a,v,f.gxMessages);x(q.setErrorViewer,f.gxMessages);var O=function(Y){Y=Y||[];var W;gx.pO.supportAjaxEvents&&(W=gx.lang.arrayUnique(L.concat(I,M,Y,y),function(Z,aa){return Z.ControlName===aa.ControlName}));q.objectPostback(W,B);r||q.setFocusAfterLoad(!0);return l.Deferred().resolve()}.closure(this),R=function(){!A.fullAjaxCall||A.autoRefreshing||!m&&gx.popup.currentPopup||v.endFeedback();x(gx.ajax.dispatchCommands,f.gxCommands,v);p&&gx.fn.setCurrentGridRowSafe(n,
p);b.resolve(C)}.closure(this),P=[];m&&(v.execV2CFunctions(!0,E,!1),k&&P.push(k.done(O)),B&&B.length&&P.push(O.apply(this,[])));l.when.apply(l,P).done(R)},m)}}return b.promise()},getShouldUpdatePropertyFunction:function(a){var b,f,k,m={};if(a.gxGrids)for(b=0;b<a.gxGrids.length;b++){var t=a.gxGrids[b];for(f=0;f<t.Count;f++)for(k=0;k<t[f].Props.length;k++)m[t[f].Props[k][0]]=!0}return function(v){return!m[v]}},transformValidationMessages:function(a,b,f){b=b.cmpCtx||"MAIN";"undefined"!=typeof f[b]&&
(f[b]={fields:a.validationInput,msgs:f[b]})},disableForm:function(a,b){gx.pO.startFeedback(b,void 0===a||a)},enableForm:function(a){a=a||gx.O;gx.pO&&gx.pO.endFeedback();a!=gx.pO&&a.endFeedback()},isFormEnabled:function(){var a=gx.getActiveContext();return a==top&&null!=gx.popup.getPopup()?!0:gx.pO?!a.gx.pO.isFeedbackOn()&&!a.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(!(!gx.ajax.formAutocomplete||gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||
7>=gx.util.browser.ieVersion()))){var a=gx.dom.form(),b=document.createElement("iframe");b.id="gx_iframe_force_ajax_autocomplete";b.name="gx_iframe_force_ajax_autocomplete";b.style.cssText="display: none";b.src="/content/blank";document.body.appendChild(b);var f=document.createElement("input");f.type="submit";f.style.cssText="display: none";a.appendChild(f);var k=a.target,m=a.action;a.target=b.name;a.action=b.src;var t=l(f);gx.evt.attach(f,"click",function(v){v.stopPropagation();return!0});t.trigger("click");
setTimeout(function(){a.target=k;a.action=m;a.removeChild(f);document.body.removeChild(b)})}},suggest:function(a,b,f,k,m,t,v){a=new gx.fx.suggestProvider(a,b,f,k);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(f),a,f,m,t,v)},hideCode:function(a,b,f){var k=this.objectUrl()+"?";b="gxajaxHideCode_"+b;for(var m=a.length,t=0;t<m;t++)b+=","+encodeURIComponent(eval(a[t]));k+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend_impl(function(v){gx.fn.setVarValues(f,v)},k,!0,gx.http.modes.retval);return this.lastStatus},
callCrl:function(a,b,f){var k=f?gx.fn.setGridComboValues:gx.fn.setComboValues,m=f?b:gx.fn.screen_CtrlRef(b).name;f=this.objectUrl()+"?";a="gxajaxCallCrl_"+b+","+this.arrayToUrl(a);f+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(t){k(m,t)},f,!0,gx.http.modes.retval)},refreshGrid:function(a,b){var f=gx.O;gx.setGxO(a.parentObject);var k="GET",m=gx.ajax.gxObjectUrl(a.parentObject)+"?",t="gxajaxGridRefresh_"+a.gridName+","+b;gx.fx.obs.notify("grid.onbeforerefresh",[a]);a.autoRefreshing=
!0;gx.csv.autoRefreshing=a;var v=a.grid.rows.length;a.setPagingVars(0,0);if(t.length>gx.ajax.maxGETLength(gx.O)){k="POST";var n=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+a.gridName)];b=b.split(",");t=0;for(var w=b.length;t<w;t++)n.push("GXParm"+t+"="+b[t])}else m+=gx.ajax.encryptParms(gx.O,t);a.grid.mask();gx.http.doCall({method:k,url:m,reqData:n,handler:function(A,r,q){gx.http.postHandler(A,r,q,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[a,v,a.grid.rows.length])},
always:function(){gx.csv.autoRefreshing=null;a.autoRefreshing=!1;a.grid.unmask();gx.setGxO(f)}})},newRows:function(a,b,f,k,m,t,v,n){var w=this.objectUrl()+"?",A=[],r=gx.O;a=gx.fn.gridObj(a,v?f+"_"+v:f,b);b="GET";f="gxajaxNewRow_"+f;A.push(f);A.push(k);A.push(m);A.push(t);(r.IsComponent||r.IsTypeComponent)&&A.push(r.CmpContext);A=A.concat(a.getParmsValues(!1,a.postingVariables,!1));k=A.join(",");if(k.length>gx.ajax.maxGETLength(r)){b="POST";r=["GXEvent="+gx.ajax.encryptParms(r,f)];k=1;for(m=A.length;k<
m;k++)r.push("GXParm"+(k-1)+"="+A[k]);k=r.join("&")}else w+=gx.ajax.encryptParms(r,k),k=null;gx.http.callBackend_simple(w,!0,null,b,k);if(w=gx.http.lastResponse)w=gx.json.evalJSON(w),n.call(a,w),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[w])},loadCrl:function(a,b,f){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var k=this.objectUrl()+"?";a="gxajaxExecAct_"+a+","+this.arrayToUrl(b);k+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,
m)},k,!0,gx.http.modes.retval)}},udp:function(a,b,f){var k=this.objectUrl()+"?";a=a+","+this.arrayToUrl(b);k+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(m){gx.fn.setVarValues(f,m)},k,!0,gx.http.modes.retval)},srvEvt:function(a,b,f,k){var m=this.objectUrl()+"?";a=a+","+b+","+this.arrayToUrl(f);m+=gx.ajax.encryptParms(gx.O,a);gx.http.callBackend_impl(function(t){gx.fn.setVarValues(k,t)},m,!0,gx.http.modes.full)},validSrvEvt:function(a,b,f){var k=gx.fn.currentGridRowImpl(b);if(0<
b){var m=gx.fn.currentGridRowImpl(b);c(b,k,f)}if(gx.fx.delayedValidation){var t=l.Deferred(),v=arguments;gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,v).then(function(n){t.resolve(n);c(b,m,f)})},{single:!0,async:!0});return t.promise()}return this.validSrvEvt_impl.apply(this,arguments).then(function(n){c(b,m,f);return n})},validCliEvt:function(a,b,f,k){k=k||gx.O;return gx.evt.dispatcher.dispatch({eventName:a,fn:f},k,b,gx.fn.currentGridRowImpl(b),!1,
void 0,void 0,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(a,b,f){f=f||gx.O;var k=gx.fn.currentGridRowImpl(b);return gx.evt.dispatcher.dispatch(a,f,b,k,!0,void 0,void 0,gx.evt.dispatcher.types.validation).then(function(m){f.refreshOlds();return m})},getParmsPostData:function(a){for(var b="",f=0;f<a.length;f++)0<f&&(b+="&"),b+="GXParm"+f+"="+this.parmToUrl(a[f],!0);return b},getCallerUrl:function(a){if(gx.stackSupported()){a=(a=gx.call_stack_storage.get(gx.stackId(a)))||[];var b=
1==a.length&&a[0]!=gx.ajax.selfUrl()?a[0]:"";return b=1<a.length?a[a.length-2]:b}return gx.fn.getHidden("sCallerURL")},pushReferer:function(a,b){b="undefined"==typeof b?location.href:gx.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof a&&(a=gx.popup.popuplvl());var f=gx.call_stack_storage.get(gx.stackId(a));f=f||[];b!=gx.util.lastArray(f)&&f.push(b);gx.call_stack_storage.set(gx.stackId(a),f)}else a=this.objectUrl()+"?",b="dyncall,PushReferer,"+encodeURIComponent(b),a+=gx.ajax.encryptParms(gx.O,
b),gx.http.callBackend_simple(a,!0,!0)},windowClosed:function(a){if(gx.stackSupported())if(-1==a){a=gx.stackId(gx.popup.popuplvl());var b=gx.call_stack_storage.get(a);b=b||[];b.pop();gx.call_stack_storage.set(a,b)}else gx.call_stack_storage.remove(gx.stackId(a));else a=-1==a?",PopReferer":",DeleteReferer,"+a.toString(),b=this.objectUrl()+"?",b+=gx.ajax.encryptParms(gx.O,"dyncall"+a),gx.http.callBackend_simple(b,!0,!0)},aggSel:function(a,b,f){var k=this.objectUrl()+"?";a="gxajaxAggSel"+b+"_"+a+","+
this.arrayToUrl(f);k+=gx.ajax.encryptParms(gx.O,a);return gx.http.callBackend_impl(null,k,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(a,b,f,k,m){return gx.num.parseFloat(this.aggSel(a,b,m),f,k)},aggSelInteger:function(a,b,f){return parseInt(this.aggSel(a,b,f),10)},dynComponent:function(a,b,f,k){var m=l.Deferred();a=gx.util.removeBaseUrl(a).toLowerCase();gx.gen.isDotNet()&&(a+=".aspx");a=gx.ajax.objectUrl(a);f="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(f)+
"&GXParm0="+encodeURIComponent(k);for(k=0;k<b.length;k++)f+="&GXParm"+(k+1).toString()+"="+encodeURIComponent("function"==typeof b[k].getUrlVal?b[k].getUrlVal():b[k]);gx.http.doCall({method:"POST",url:a,reqData:f,handler:function(t,v){m.resolve(gx.json.evalJSON(v))},error:function(){m.reject()}});return m.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(a){return a.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(a){if(a&&a.ajaxSecurityToken){var b=
"GX_AUTH_"+(a.CmpContext?a.CmpContext:"")+a.ServerClass;b=b.toUpperCase();a=gx.fn.getHidden(b)||a.InternalParms[b];return{id:b,value:a}}},arrayToUrl:function(a,b){for(var f="",k=a.length,m=0;m<k;m++)f+=this.parmToUrl(a[m],b)+",";return f},ControlValuesObject:function(a,b){a=gx.fn.vStructForVar(gx.unprefixVar(a));return null!=a&&gx.html.controls.isMultiSelection(a.ctrltype)?(a=gx.fn.getControlGridRef(a.fld,a.grid),gx.dom.comboBoxToObj(a,b)):null},parmToUrl:function(a,b){var f=eval(a);if(f instanceof
Array&&2==f.length&&"string"==typeof f[0]&&"string"==typeof f[1]){var k=gx.fn.vStructForVar(f[0]);null!=k&&(f=gx.fn.getGridCtrlProperty(k.grid,k.fld,f[1]))}b&&(b=gx.ajax.ControlValuesObject(a,f))&&(f=b);"object"==typeof f&&(f=gx.json.serializeJson(f));if("undefined"==typeof f||null==f)b=!1,a&&0===a.indexOf("gx.O.")&&(a=gx.unprefixVar(a),a=gx.fn.getHidden(gx.O.CmpContext+a),null!=a&&"undefined"!=typeof a&&(f=a,b=!0)),b||(f="");return encodeURIComponent(f)},gxObjectUrl:function(a){return this.objectUrl(a.serviceUrl,
a&&a.fullAjax?a.CmpContext:void 0)},objectUrl:function(a,b){b=void 0!==b?b:gx.csv.cmpCtx;a||(a=b?gx.fn.getControlValue(b+"_CMPPGM"):gx.ajax.selfUrl(),null!=a&&(a=a.replace(/\?.*/,""),a=a.replace(/#[\s\S]*$/,"")),a=this.objnameFromUrl(a));return gx.absoluteurl(this.objToRelativeUrl(a))},objToRelativeUrl:function(a){return null==a||gx.isabsoluteurl(a)?a:""===gx.servletBasePath?a:gx.servletBasePath+"/"+a},objnameFromUrl:function(a){0<=a.indexOf("?")&&(a=a.split("?")[0]);var b=a.split("/"),f=b.length;
return 0===f?a:b[f-1]},_init:function(){if(gx.stackSupported()){var a=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(a)for(var b=0;b<a.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),a[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function l(c,d){var g=$("#"+c.id+"_dp_trigger");if(0<g.length)return g.get(0);if(d&&0<d.length&&(g=$("[data-gx-attached-ctrl~='"+c.id+"']"),0<g.length))return g.parent().get(0)}this.init=function(c,d){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=d||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr=
"";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(c,d,g,a){var b=document.createElement("span");b.id=c;b.className=g;c=document.createElement("div");
c.style.position="absolute";c.style.zIndex=100;c.style.display="none";c.classList.add("gx-error__message-container");a=document.createTextNode(a);b.appendChild(a);c.appendChild(b);"right"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition?(a=$(d).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<a.length?a.append(c):(a=l(d))?0<=a.id.indexOf("_dp_trigger")?$(a).closest(".dp_container").append(c):$(a).after(c):$(d).after(c)):!0===gx.csv.overlap?$(d).after(c):$(d).before(c);
!0===gx.csv.overlap?(b.style.position="static",b.style.zIndex="1"):(c.style.position="relative",b.style.position="relative");return b};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],d=0,g=this.sourceElements.length;d<g;d++)c.push(gx.fn.getControlValue(this.sourceElements[d]));return c.join(";")};this.groupControl=function(c){(c=gx.dom.el(c))&&"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,
"table"));return c};this.hideBalloon=function(c){c=c.parentNode;try{c&&(c.style.display="none")}catch(d){gx.dbg.logEx(d,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var d=gx.csv.messagePosition,g=gx.dom.el(this.id),a=c.parentNode,b=$(a),f,k,m=gx.popup.ispopup()?"flipfit":"none",t=g,v=l(g,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(this.active)if(!0===gx.csv.overlap){switch(d){case "top":f="left bottom";k="left top";break;case "right":f="left center";k="right center";
t=v||t;break;case "bottom":f="left top";k="left bottom";break;case "left":f="right center",k="left center"}b.fadeIn({queue:!1}).css("display","block");b.position({my:f,at:k,of:t,collision:m})}else a.style.display="top"!=d&&"bottom"!=d||!1!==gx.csv.overlap?"inline":"block"},this)}catch(n){gx.dbg.logEx(n,"gxballoon.js","showBalloon")}};this.show=function(c){var d,g,a;if(void 0===document.readyState||"complete"==document.readyState){try{if(!1===this.hasMessage)return!0;var b=gx.dom.el(this.id);null===
b&&null!==gx.csv.validatingUC&&(b=gx.csv.validatingUC.getContainerControl());if("hidden"==b.type){var f=gx.dom.byId("span_"+this.id);null!==f&&(b=f)}else if("INPUT"===b.nodeName&&"radio"===b.type){var k=gx.dom.byName(gx.dom.id(b));if(b.parentNode&&"SPAN"==b.parentNode.tagName)b=b.parentNode;else{var m=k[0];b=gx.dom.findParentByTagName(b,"table")}}if(k){f=[];var t=0;for(a=k.length;t<a;t++)f.push(k[t]);k=f}else for(k=[b],t=0,a=this.sourceElements.length;t<a;t++)k.push(gx.dom.el(this.sourceElements[t]));
this.active=d=!0;if(0<this.messageErr.length){var v="Error";var n=this.messageErr}else 0<this.messageWar.length&&(v="Warning",n=gx.html.encode(this.messageWar));""!==v&&(f=v+"Messages",gx.dom.addPrefixClass(b,v),(g=gx.dom.byId(this.balloonid))?(g.innerHTML=n,g.className=f,d=!1):g=this.create(this.balloonid,m?m:b,f,n));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=g;!0===c?gx.csv.oneAtAtime||this.showBalloon(g):this.showBalloon(g);if(!1===
gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(d)for(gx.csv.oneAtAtime&&(gx.evt.attach(b,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(b,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),a=k.length,t=0;t<a;t++)"INPUT"===k[t].nodeName&&"radio"===k[t].type?gx.evt.attach(k[t],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(k[t],
"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(w){gx.dbg.logEx(w,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){try{var l=this.groupControl(this.id);var c=this.getControlValue();if(c!=this.errorValue){this.errorValue=c;var d=gx.dom.byId(this.balloonid);null!=d&&(l&&(gx.dom.removePrefixClass(l,"Error"),gx.dom.removePrefixClass(l,"Warning")),this.hideBalloon(d),this.active=!1)}}catch(g){}},cvsMouseOutHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);
null!=l&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=l.id&&this.hideBalloon(l):this.hideBalloon(l))}},cvsMouseOverHandler:function(){if(this.active){var l=gx.dom.byId(this.balloonid);null!=l&&this.showBalloon(l)}},clearAll:function(){var l;this.timerOn=!1;for(l in this.balloons){var c=this.balloons[l];var d=gx.util.balloon.cvsHide.closure(c);c.clear();d()}},clear:function(l){try{var c=gx.csv.ctxControlId(l);if(this.balloons[c]){var d=this.balloons[c];var g=gx.util.balloon.cvsHide.closure(d);
d.clear();g()}}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(l,c,d){d=d||[];var g,a=d.length;"undefined"!=typeof c&&(l=l+"_"+c);try{var b=gx.fn.screen_CtrlRef(l);var f=gx.dom.id(b);l=gx.csv.ctxControlId(f);for(g=0;g<a;g++)b=gx.fn.screen_CtrlRef(d[g]),f=gx.dom.id(b),d[g]=gx.csv.ctxControlId(f)}catch(k){gx.dbg.logEx(k,"gxballoon.js","getNew")}this.balloons[l]?(c=this.balloons[l],c.sourceElements=d||[],c.clear()):(c=new this.impl,this.balloons[l]=c,c.init(l,d));return c}};
(function(l){var c=function(){var d={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],
"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk",
"Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},g=function(v){v=-v.getTimezoneOffset();return null!==v?v:0},a=function(){var v=g(new Date(2014,0,2)),n=g(new Date(2014,5,2)),w=v-n;return 0>w?v+",1":0<w?n+",1,s":v+",0"},b=function(){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat){var v=Intl.DateTimeFormat();if("undefined"!==typeof v&&"undefined"!==typeof v.resolvedOptions&&(v=v.resolvedOptions().timeZone)&&(-1<v.indexOf("/")||
"UTC"===v))return v}},f=function r(n,w,A){"undefined"===typeof w&&(w=864E5,A=36E5);var q=(new Date(n.getTime()-w)).getTime();n=n.getTime()+w;for(var x=(new Date(q)).getTimezoneOffset(),C=null;q<n-A;){var F=new Date(q);if(F.getTimezoneOffset()!==x){C=F;break}q+=A}return 864E5===w?r(C,36E5,6E4):36E5===w?r(C,6E4,1E3):C},k=function(n,w,A,r){if("N/A"!==A)return A;if("Asia/Beirut"===w){if("Africa/Cairo"===r.name&&13983768E5===n[6].s&&14116788E5===n[6].e||"Asia/Jerusalem"===r.name&&13959648E5===n[6].s&&
14118588E5===n[6].e)return 0}else if("America/Santiago"===w){if("America/Asuncion"===r.name&&14124816E5===n[6].s&&1397358E6===n[6].e||"America/Campo_Grande"===r.name&&14136912E5===n[6].s&&13925196E5===n[6].e)return 0}else if("America/Montevideo"===w){if("America/Sao_Paulo"===r.name&&14136876E5===n[6].s&&1392516E6===n[6].e)return 0}else if("Pacific/Auckland"===w&&"Pacific/Fiji"===r.name&&14142456E5===n[6].s&&13961016E5===n[6].e)return 0;return A},m=function(n,w){for(var A={},r=c.olson.dst_rules.zones,
q=r.length,x=d[w],C=0;C<q;C++){for(var F=r[C],G=r[C],p=0,u=0;u<n.length;u++)if(G.rules[u]&&n[u]){if(n[u].s>=G.rules[u].s&&n[u].e<=G.rules[u].e)p=0,p+=Math.abs(n[u].s-G.rules[u].s),p+=Math.abs(G.rules[u].e-n[u].e);else{p="N/A";break}if(864E6<p){p="N/A";break}}G=k(n,w,p,G);"N/A"!==G&&(A[F.name]=G)}for(var y in A)if(A.hasOwnProperty(y))for(n=0;n<x.length;n++)if(x[n]===y)return y;return w},t=function(n){var w=function(){for(var A=[],r=0;r<c.olson.dst_rules.years.length;r++){var q=c.olson.dst_rules.years[r],
x=(new Date(q,0,1,0,0,1,0)).getTime();q=(new Date(q,12,31,23,59,59)).getTime();for(var C=(new Date(x)).getTimezoneOffset(),F=null,G=null;x<q-864E5;){var p=new Date(x),u=p.getTimezoneOffset();u!==C&&(u<C&&(F=p),u>C&&(G=p),C=u);x+=864E5}q=F&&G?{s:f(F).getTime(),e:f(G).getTime()}:!1;A.push(q)}return A}();return function(A){for(var r=0;r<A.length;r++)if(!1!==A[r])return!0;return!1}(w)?m(w,n):n};return{determine:function(){var n=navigator.userAgent.toLowerCase(),w=b();w||(-1!=n.indexOf("firefox")&&"undefined"!==
typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(n=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=n.indexOf("montevideo")||-1!=n.indexOf("uruguay"))&&(w="America/Montevideo"),w||(w=c.olson.timezones[a()]),"undefined"!==typeof d[w]&&(w=t(w)));return{name:function(){return w}}}}}();c.olson=c.olson||{};c.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas",
"-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires",
"-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata",
"345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea",
"690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};c.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572E5,s:12090744E5},{e:1250802E6,s:1240524E6},{e:12858804E5,s:12840696E5},!1,!1,!1,{e:14116788E5,s:1406844E6}]},{name:"Africa/Casablanca",rules:[{e:12202236E5,s:12122784E5},{e:12508092E5,s:12438144E5},{e:1281222E6,
s:12727584E5},{e:13120668E5,s:13017888E5},{e:13489704E5,s:1345428E6},{e:13828392E5,s:13761E8},{e:14142888E5,s:14069448E5}]},{name:"America/Asuncion",rules:[{e:12050316E5,s:12243888E5},{e:12364812E5,s:12558384E5},{e:12709548E5,s:12860784E5},{e:13024044E5,s:1317528E6},{e:1333854E6,s:13495824E5},{e:1364094E6,s:1381032E6},{e:13955436E5,s:14124816E5}]},{name:"America/Campo_Grande",rules:[{e:12032172E5,s:12243888E5},{e:12346668E5,s:12558384E5},{e:12667212E5,s:1287288E6},{e:12981708E5,s:13187376E5},{e:13302252E5,
s:1350792E6},{e:136107E7,s:13822416E5},{e:13925196E5,s:14136912E5}]},{name:"America/Goose_Bay",rules:[{e:122559486E4,s:120503526E4},{e:125704446E4,s:123648486E4},{e:128909886E4,s:126853926E4},{e:13205556E5,s:129998886E4},{e:13520052E5,s:13314456E5},{e:13834548E5,s:13628952E5},{e:14149044E5,s:13943448E5}]},{name:"America/Havana",rules:[{e:12249972E5,s:12056436E5},{e:12564468E5,s:12364884E5},{e:12885012E5,s:12685428E5},{e:13211604E5,s:13005972E5},{e:13520052E5,s:13332564E5},{e:13834548E5,s:13628916E5},
{e:14149044E5,s:13943412E5}]},{name:"America/Mazatlan",rules:[{e:1225008E6,s:12074724E5},{e:12564576E5,s:1238922E6},{e:1288512E6,s:12703716E5},{e:13199616E5,s:13018212E5},{e:13514112E5,s:13332708E5},{e:13828608E5,s:13653252E5},{e:14143104E5,s:13967748E5}]},{name:"America/Mexico_City",rules:[{e:12250044E5,s:12074688E5},{e:1256454E6,s:12389184E5},{e:12885084E5,s:1270368E6},{e:1319958E6,s:13018176E5},{e:13514076E5,s:13332672E5},{e:13828572E5,s:13653216E5},{e:14143068E5,s:13967712E5}]},{name:"America/Miquelon",
rules:[{e:12255984E5,s:12050388E5},{e:1257048E6,s:12364884E5},{e:12891024E5,s:12685428E5},{e:1320552E6,s:12999924E5},{e:13520016E5,s:1331442E6},{e:13834512E5,s:13628916E5},{e:14149008E5,s:13943412E5}]},{name:"America/Santa_Isabel",rules:[{e:12250116E5,s:1207476E6},{e:12564612E5,s:12389256E5},{e:12885156E5,s:12703752E5},{e:13199652E5,s:13018248E5},{e:13514148E5,s:13332744E5},{e:13828644E5,s:13653288E5},{e:1414314E6,s:13967784E5}]},{name:"America/Santiago",rules:[{e:1206846E6,s:1223784E6},{e:1237086E6,
s:12552336E5},{e:127035E7,s:12866832E5},{e:13048236E5,s:13138992E5},{e:13356684E5,s:13465584E5},{e:1367118E6,s:13786128E5},{e:13985676E5,s:14100624E5}]},{name:"America/Sao_Paulo",rules:[{e:12032136E5,s:12243852E5},{e:12346632E5,s:12558348E5},{e:12667176E5,s:12872844E5},{e:12981672E5,s:1318734E6},{e:13302216E5,s:13507884E5},{e:13610664E5,s:1382238E6},{e:1392516E6,s:14136876E5}]},{name:"Asia/Amman",rules:[{e:1225404E6,s:12066552E5},{e:12568536E5,s:12381048E5},{e:12883032E5,s:12695544E5},{e:13197528E5,
s:13016088E5},!1,!1,{e:14147064E5,s:13959576E5}]},{name:"Asia/Damascus",rules:[{e:12254868E5,s:120726E7},{e:125685E7,s:12381048E5},{e:12882996E5,s:12701592E5},{e:13197492E5,s:13016088E5},{e:13511988E5,s:13330584E5},{e:13826484E5,s:1364508E6},{e:14147028E5,s:13959576E5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572E5,s:12066552E5},{e:12520152E5,s:12381048E5},{e:1281474E6,s:126964086E4},{e:1312146E6,s:130160886E4},{e:13481784E5,s:13330584E5},{e:13802292E5,s:1364508E6},
{e:1414098E6,s:13959576E5}]},{name:"Asia/Irkutsk",rules:[{e:12249576E5,s:12068136E5},{e:12564072E5,s:12382632E5},{e:12884616E5,s:12697128E5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612E5,s:12066624E5},{e:1254006E6,s:1238112E6},{e:1284246E6,s:12695616E5},{e:131751E7,s:1301616E6},{e:13483548E5,s:13330656E5},{e:13828284E5,s:13645152E5},{e:1414278E6,s:13959648E5}]},{name:"Asia/Kamchatka",rules:[{e:12249432E5,s:12067992E5},{e:12563928E5,s:12382488E5},{e:12884508E5,s:12696984E5},!1,!1,!1,!1]},
{name:"Asia/Krasnoyarsk",rules:[{e:12249612E5,s:12068172E5},{e:12564108E5,s:12382668E5},{e:12884652E5,s:12697164E5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648E5,s:12068208E5},{e:12564144E5,s:12382704E5},{e:12884688E5,s:126972E7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504E5,s:12068064E5},{e:12564E8,s:1238256E6},{e:12884544E5,s:12697056E5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954E6,s:120681E7},{e:12564036E5,s:12382596E5},{e:1288458E6,s:12697092E5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",
rules:[{e:12249684E5,s:12068244E5},{e:1256418E6,s:1238274E6},{e:12884724E5,s:12697236E5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972E6,s:1206828E6},{e:12564216E5,s:12382776E5},{e:1288476E6,s:12697272E5},{e:13199256E5,s:13011768E5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076E5,s:12231342E5},{e:12388572E5,s:12545838E5},{e:12703068E5,s:12860334E5},{e:13017564E5,s:1317483E6},{e:1333206E6,s:13495374E5},{e:13652604E5,s:1380987E6},{e:139671E7,s:14124366E5}]},{name:"Australia/Perth",
rules:[{e:12068136E5,s:12249576E5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]},{name:"Europe/Minsk",rules:[{e:12249792E5,s:12068352E5},{e:12564288E5,s:12382848E5},{e:12884832E5,s:12697344E5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756E5,s:12068316E5},{e:12564252E5,s:12382812E5},{e:12884796E5,
s:12697308E5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528E5,s:13168728E5},{e:13332024E5,s:13489272E5},{e:13652568E5,s:13803768E5},{e:13967064E5,s:14118264E5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984E5,s:12878424E5},{e:13271544E5,s:1319292E6},{e:1358604E6,s:13507416E5},{e:139005E7,s:1382796E6},{e:14215032E5,s:14148504E5}]},{name:"Europe/London",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,
s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]}]};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=c:"undefined"!==typeof define&&null!==define&&null!=define.amd?define([],function(){return c}):"undefined"===typeof l?window.jstz=c:l.jstz=c})();gx.livePrev=function(l){gx.ajax.getPostInfo("",!1);postInfo=gx.ajax.getPostInfo("",!1);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5E3})},
onMessage:function(l){var c=function(b){var f=$.map(document.styleSheets,function(k){return k.href==b?k:null});return 0<f.length?f[0]:void 0},d=function(b,f,k){return k((b||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(f||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},g=function(b,f,k){var m=b.cssRules,t=m.length,v=!1,n=!1;$.each(m,function(w,A){A&&A.selectorText&&d(A.selectorText,f.replace(":","::"),function(r,q){return r==q})&&(b.deleteRule(w),t=w,v=!0)});v||$.each(m,function(w,A){A&&A.selectorText&&
d(A.selectorText,f.replace(":","::")+",",function(r,q){return 0==r.indexOf(q)})&&(b.deleteRule(w),t=w,b.insertRule(A.selectorText+k.replace(/.*{/,"{"),t),n=!0)});n||b.insertRule(k,t)},a=function(b){var f=gx.getThemeElement();if(f=c(f.href))for(var k=0==b.indexOf("@media",0),m=b.split(/{|}/),t=0;t<m.length-1;t+=2){var v=m[t].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(v)||(k?$.each(f.cssRules,function(n,w){k&&!w.selectorText&&(n=w.cssText.split(/{/)[0],d(n.replace(/ all and/gm,""),v)&&(v=
m[t+1].replace(/(\r\n|\r|\n| )/gm,""),g(w,v,v+" {"+m[t+2]+"}")))}):g(f,v,v+" {"+m[t+1]+"}"))}};l=gx.json.evalJSON(l);if("KBOK"===l.Type)gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if("KBDoesNotMatchGUID"===l.Type)gx.livePrevWS.onError();else"ThemeStyleChanged"===l.Type&&a(l.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},
onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var l={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;
l.port=gx.livePrev.port;l.wsProtocol="https:"===location.protocol?"wss://":"ws://";l.host=gx.livePrevWS.host+":"+l.port;l.resourceUrl="/live/";l.namespace="livepreview";l.maxRetries=10;l.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(l);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,
{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});if(!gx.livePrevWS.clientGUID){var l=gx.livePrevWS,c=gx.http.getCookie("GXClientID");c=c||gx.guid.generate();gx.http.setCookie("GXClientID",c,1,!1);l.clientGUID=c}l="";c=[];var d=gx.livePreviewUri.split("?");
0<d.length&&(d=d[1],d=d.split(":"),2<d.length&&(l=d[1],c=d[2].substring(1,d[2].length-1).split(","),d=d[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=c;gx.livePrevWS.KBName=l;gx.livePrevWS.KBUUID=d;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};
gx.nav=function(){var l=function(){var a={top:!0,right:!0,bottom:!0,left:!0};return function(b){return!!a[b.toLowerCase()]}}(),c=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName)&&(b=a.substring(gx.pO.PackageName.length+1));return b},d=function(a){var b=a.split("?"),f;if(0<b.length){var k=2==b.length?b[1].split(gx.http.urlParameterSeparator(a)):[];var m=0;for(f=k.length;m<f;m++)k[m]=gx.http.useNamedParameters(a)?
decodeURIComponent(k[m].split("=")[1]):decodeURIComponent(k[m]);return{obj:b[0],args:k}}return!1},g={};return{setCallTarget:function(a,b){g[a.toLowerCase()]=b.toLowerCase()},willRedirect:function(a){return gx.pO&&!gx.pO.fullAjax?!0:!l(g[c(a).toLowerCase()]||"")},willRedirectByUrl:function(a){a=d(a);return this.willRedirect(a.obj,a.args)},call:function(a,b,f){var k=c(a),m=gx.pO.MasterPage;f=f||g[k.toLowerCase()]||"";delete g[k.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(a,
b),!1,!1,gx.pO):l(f)?m&&m.createObjectInTarget(f,k,b):gx.http.redirect(gx.http.formatLink(a,b),!1,!1,gx.pO)},callUrl:function(a,b){(a=d(a))&&this.call(a.obj,a.args,b)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
(function(l){"function"===typeof define&&define.amd?define(["jquery"],l):l(jQuery)})(function(l){(function(){function c(r,q,x){return[parseFloat(r[0])*(w.test(r[0])?q/100:1),parseFloat(r[1])*(w.test(r[1])?x/100:1)]}function d(r){var q=r[0];return 9===q.nodeType?{width:r.width(),height:r.height(),offset:{top:0,left:0}}:null!=q&&q===q.window?{width:r.width(),height:r.height(),offset:{top:r.scrollTop(),left:r.scrollLeft()}}:q.preventDefault?{width:0,height:0,offset:{top:q.pageY,left:q.pageX}}:{width:r.outerWidth(),
height:r.outerHeight(),offset:r.offset()}}l.ui=l.ui||{};var g,a,b=Math.max,f=Math.abs,k=Math.round,m=/left|center|right/,t=/top|center|bottom/,v=/[\+\-]\d+(\.[\d]+)?%?/,n=/^\w+/,w=/%$/,A=l.fn.position;l.position={scrollbarWidth:function(){if(void 0!==g)return g;var r=l("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var q=r.children()[0];l("body").append(r);var x=q.offsetWidth;r.css("overflow","scroll");q=q.offsetWidth;
x===q&&(q=r[0].clientWidth);r.remove();return g=x-q},getScrollInfo:function(r){var q=r.isWindow||r.isDocument?"":r.element.css("overflow-x"),x=r.isWindow||r.isDocument?"":r.element.css("overflow-y");q="scroll"===q||"auto"===q&&r.width<r.element[0].scrollWidth;return{width:"scroll"===x||"auto"===x&&r.height<r.element[0].scrollHeight?l.position.scrollbarWidth():0,height:q?l.position.scrollbarWidth():0}},getWithinInfo:function(r){var q=l(r||window);var x=q[0];x=null!=x&&x===x.window;var C=!!q[0]&&9===
q[0].nodeType;return{element:q,isWindow:x,isDocument:C,offset:x||C?{left:0,top:0}:l(r).offset(),scrollLeft:q.scrollLeft(),scrollTop:q.scrollTop(),width:x||C?q.width():q.outerWidth(),height:x||C?q.height():q.outerHeight()}}};l.fn.position=function(r){if(!r||!r.of)return A.apply(this,arguments);r=l.extend({},r);var q=l(r.of),x=l.position.getWithinInfo(r.within),C=l.position.getScrollInfo(x),F=(r.collision||"flip").split(" "),G={},p=q[0];var u=d(q);q[0].preventDefault&&(r.at="left top");var y=u.width;
var B=u.height;var E=u.offset;0!==E.top+E.left||q.is(":visible")||(E=l(p.parentElement).offset(),y=l(p.parentElement).width());var I=l.extend({},E);l.each(["my","at"],function(){var M=(r[this]||"").split(" ");1===M.length&&(M=m.test(M[0])?M.concat(["center"]):t.test(M[0])?["center"].concat(M):["center","center"]);M[0]=m.test(M[0])?M[0]:"center";M[1]=t.test(M[1])?M[1]:"center";var O=v.exec(M[0]);var R=v.exec(M[1]);G[this]=[O?O[0]:0,R?R[0]:0];r[this]=[n.exec(M[0])[0],n.exec(M[1])[0]]});1===F.length&&
(F[1]=F[0]);"right"===r.at[0]?I.left+=y:"center"===r.at[0]&&(I.left+=y/2);"bottom"===r.at[1]?I.top+=B:"center"===r.at[1]&&(I.top+=B/2);var L=c(G.at,y,B);I.left+=L[0];I.top+=L[1];return this.each(function(){var M,O=l(this),R=O.outerWidth(),P=O.outerHeight(),Y=parseInt(l.css(this,"marginLeft"),10)||0,W=parseInt(l.css(this,"marginTop"),10)||0,Z=R+Y+(parseInt(l.css(this,"marginRight"),10)||0)+C.width,aa=P+W+(parseInt(l.css(this,"marginBottom"),10)||0)+C.height,ba=l.extend({},I),ia=c(G.my,O.outerWidth(),
O.outerHeight());"right"===r.my[0]?ba.left-=R:"center"===r.my[0]&&(ba.left-=R/2);"bottom"===r.my[1]?ba.top-=P:"center"===r.my[1]&&(ba.top-=P/2);ba.left+=ia[0];ba.top+=ia[1];a||(ba.left=k(ba.left),ba.top=k(ba.top));var ma={marginLeft:Y,marginTop:W};l.each(["left","top"],function(pa,ka){if(l.ui.position[F[pa]])l.ui.position[F[pa]][ka](ba,{targetWidth:y,targetHeight:B,elemWidth:R,elemHeight:P,collisionPosition:ma,collisionWidth:Z,collisionHeight:aa,offset:[L[0]+ia[0],L[1]+ia[1]],my:r.my,at:r.at,within:x,
elem:O})});r.using&&(M=function(pa){var ka=E.left-ba.left,fa=ka+y-R,da=E.top-ba.top,oa=da+B-P,z={target:{element:q,left:E.left,top:E.top,width:y,height:B},element:{element:O,left:ba.left,top:ba.top,width:R,height:P},horizontal:0>fa?"left":0<ka?"right":"center",vertical:0>oa?"top":0<da?"bottom":"middle"};y<R&&f(ka+fa)<y&&(z.horizontal="center");B<P&&f(da+oa)<B&&(z.vertical="middle");b(f(ka),f(fa))>b(f(da),f(oa))?z.important="horizontal":z.important="vertical";r.using.call(this,pa,z)});O.offset(l.extend(ba,
{using:M}))})};l.ui.position={fit:{left:function(r,q){var x=q.within,C=x.isWindow?x.scrollLeft:x.offset.left,F=x.width,G=r.left-q.collisionPosition.marginLeft;x=C-G;var p=G+q.collisionWidth-F-C;q.collisionWidth>F?0<x&&0>=p?(q=r.left+x+q.collisionWidth-F-C,r.left+=x-q):r.left=0<p&&0>=x?C:x>p?C+F-q.collisionWidth:C:r.left=0<x?r.left+x:0<p?r.left-p:b(r.left-G,r.left)},top:function(r,q){var x=q.within,C=x.isWindow?x.scrollTop:x.offset.top,F=q.within.height,G=r.top-q.collisionPosition.marginTop;x=C-G;
var p=G+q.collisionHeight-F-C;q.collisionHeight>F?0<x&&0>=p?(q=r.top+x+q.collisionHeight-F-C,r.top+=x-q):r.top=0<p&&0>=x?C:x>p?C+F-q.collisionHeight:C:r.top=0<x?r.top+x:0<p?r.top-p:b(r.top-G,r.top)}},flip:{left:function(r,q){var x=q.within,C=x.offset.left+x.scrollLeft,F=x.width,G=x.isWindow?x.scrollLeft:x.offset.left,p=r.left-q.collisionPosition.marginLeft;x=p-G;var u=p+q.collisionWidth-F-G;p="left"===q.my[0]?-q.elemWidth:"right"===q.my[0]?q.elemWidth:0;var y="left"===q.at[0]?q.targetWidth:"right"===
q.at[0]?-q.targetWidth:0,B=-2*q.offset[0];if(0>x){if(q=r.left+p+y+B+q.collisionWidth-F-C,0>q||q<f(x))r.left+=p+y+B}else 0<u&&(q=r.left-q.collisionPosition.marginLeft+p+y+B-G,0<q||f(q)<u)&&(r.left+=p+y+B)},top:function(r,q){var x=q.within,C=x.offset.top+x.scrollTop,F=x.height,G=x.isWindow?x.scrollTop:x.offset.top,p=r.top-q.collisionPosition.marginTop;x=p-G;var u=p+q.collisionHeight-F-G;p="top"===q.my[1]?-q.elemHeight:"bottom"===q.my[1]?q.elemHeight:0;var y="top"===q.at[1]?q.targetHeight:"bottom"===
q.at[1]?-q.targetHeight:0,B=-2*q.offset[1];if(0>x){if(q=r.top+p+y+B+q.collisionHeight-F-C,0>q||q<f(x))r.top+=p+y+B}else 0<u&&(q=r.top-q.collisionPosition.marginTop+p+y+B-G,0<q||f(q)<u)&&(r.top+=p+y+B)}},flipfit:{left:function(){l.ui.position.flip.left.apply(this,arguments);l.ui.position.fit.left.apply(this,arguments)},top:function(){l.ui.position.flip.top.apply(this,arguments);l.ui.position.fit.top.apply(this,arguments)}}};(function(){var r,q=document.getElementsByTagName("body")[0];var x=document.createElement("div");
var C=document.createElement(q?"div":"body");var F={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};q&&l.extend(F,{position:"absolute",left:"-1000px",top:"-1000px"});for(r in F)C.style[r]=F[r];C.appendChild(x);F=q||document.documentElement;F.insertBefore(C,F.firstChild);x.style.cssText="position: absolute; left: 10.7432222px;";x=l(x).offset().left;a=10<x&&11>x;C.innerHTML="";F.removeChild(C)})()})()});
