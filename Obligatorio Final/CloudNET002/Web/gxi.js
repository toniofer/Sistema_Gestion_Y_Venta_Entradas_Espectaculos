/*
 jQuery UI - v1.11.4 - 2016-07-07
 http://jqueryui.com
 Includes: position.js
 Copyright jQuery Foundation and other contributors; Licensed MIT  jQuery UI Position 1.11.4
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(g){return g.raw=g};$jscomp.createTemplateTagFirstArgWithRaw=function(g,a){g.raw=a;return g};$jscomp.arrayIteratorImpl=function(g){var a=0;return function(){return a<g.length?{done:!1,value:g[a++]}:{done:!0}}};$jscomp.arrayIterator=function(g){return{next:$jscomp.arrayIteratorImpl(g)}};$jscomp.makeIterator=function(g){var a="undefined"!=typeof Symbol&&Symbol.iterator&&g[Symbol.iterator];return a?a.call(g):$jscomp.arrayIterator(g)};
$jscomp.arrayFromIterator=function(g){for(var a,b=[];!(a=g.next()).done;)b.push(a.value);return b};$jscomp.arrayFromIterable=function(g){return g instanceof Array?g:$jscomp.arrayFromIterator($jscomp.makeIterator(g))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(g,a,b){if(g==Array.prototype||g==Object.prototype)return g;g[a]=b.value;return g};$jscomp.getGlobal=function(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<g.length;++a){var b=g[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(g,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return g[a];b=g[b];return void 0!==b?b:g[a]};
$jscomp.polyfill=function(g,a,b,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(g,a,b,d):$jscomp.polyfillUnisolated(g,a,b,d))};$jscomp.polyfillUnisolated=function(g,a,b,d){b=$jscomp.global;g=g.split(".");for(d=0;d<g.length-1;d++){var c=g[d];if(!(c in b))return;b=b[c]}g=g[g.length-1];d=b[g];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(b,g,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(g,a,b,d){var c=g.split(".");g=1===c.length;d=c[0];d=!g&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<c.length-1;f++){var l=c[f];if(!(l in d))return;d=d[l]}c=c[c.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?d[c]:null;a=a(b);null!=a&&(g?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:a}):a!==b&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):$jscomp.POLYFILL_PREFIX+c,c=
$jscomp.propertyToPolyfillSymbol[c],$jscomp.defineProperty(d,c,{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Object.is",function(g){return g?g:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(g){return g?g:function(a,b){var d=this;d instanceof String&&(d=String(d));var c=d.length;b=b||0;for(0>b&&(b=Math.max(b+c,0));b<c;b++){var f=d[b];if(f===a||Object.is(f,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(g,a,b){if(null==g)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return g+""};$jscomp.polyfill("String.prototype.includes",function(g){return g?g:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.findInternal=function(g,a,b){g instanceof String&&(g=String(g));for(var d=g.length,c=0;c<d;c++){var f=g[c];if(a.call(b,f,c,g))return{i:c,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(g){return g?g:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(g){return g?g:function(a,b){var d=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===b&&(b=d.length);b=Math.max(0,Math.min(b|0,d.length));for(var c=a.length;0<c&&0<b;)if(d[--b]!=a[--c])return!1;return 0>=c}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(g){return g?g:function(a,b){var d=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var c=d.length,f=a.length;b=Math.max(0,Math.min(b|0,d.length));for(var l=0;l<f&&b<c;)if(d[b++]!=a[l++])return!1;return l>=f}},"es6","es3");$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(g){if(g)return g;var a=function(c,f){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};a.prototype.toString=function(){return this.$jscomp$symbol$id_};var b=0,d=function(c){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(c||"")+"_"+b++,c)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<a.length;b++){var d=$jscomp.global[a[b]];"function"===typeof d&&"function"!=typeof d.prototype[g]&&$jscomp.defineProperty(d.prototype,g,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return g},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(g){g={next:g};g[Symbol.iterator]=function(){return this};return g};$jscomp.iteratorFromArray=function(g,a){g instanceof String&&(g+="");var b=0,d={next:function(){if(b<g.length){var c=b++;return{value:a(c,g[c]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(g){return g?g:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");gx.setGxObyCtx=function(g,a){var b;void 0!=g&&(b=gx.getObj(g,a))&&gx.setGxO(g,a);return gx.O};gx.parentGridRow=function(g,a){var b=gx.fn.currentGridRowImpl(g);return b=(g=a.getGridById(g,b))&&g.parentGrid?gx.fn.currentGridRow(g.parentGrid.gridId):void 0};
gx.applyPicture=function(g,a,b){if(!gx.lang.emptyObject(g)&&!gx.lang.emptyObject(gx.rtPicture(g,b))&&!gx.lang.emptyObject(g.type))try{switch(g.type){case "int":case "decimal":return gx.num.formatNumber(a,g.dec,gx.rtPicture(g,b),g.len,g.sign,!0,g.emptyAsNull);case "char":return a;default:return a}}catch(d){}return a};gx.SetOld=function(g,a,b){var d=a;g=gx.fn.controlGridId(g);0<g&&(d=a+"_"+gx.fn.currentGridRow(g));gx.fn.setHidden(d,gx.getVar(b))};
gx.Old=function(g,a){try{var b=a,d=gx.fn.controlGridId(g);0<d&&(b=a+"_"+gx.fn.currentGridRow(d));var c=gx.fn.getHidden(b);"undefined"==typeof c&&""!=gx.O.CmpContext&&(c=gx.fn.getHidden(gx.O.CmpContext+b));return c}catch(f){gx.dbg.logEx(f,"gxapi.js","Old")}return""};gx.OldInteger=function(g,a){g=parseInt(gx.Old(g,a),10);return isNaN(g)?0:g};gx.OldDecimal=function(g,a){g=gx.num.parseFloat(gx.Old(g,a),gx.thousandSeparator,gx.decimalPoint);return isNaN(g)?0:g};
gx.OldDate=function(g,a){return(new gx.date.gxdate(gx.Old(g,a),"Y4MD")).getStringWithFmt(gx.dateFormat)};gx.OldDateTime=function(g,a){g=new gx.date.gxdate(gx.Old(g,a),"Y4MD");return g.getStringWithFmt(gx.dateFormat)+" "+g.getTimeString(!0,!0)};
gx.dom_i=function(g){return{el:function(a,b,d,c){if(a){if("string"===typeof a){c=this.byId(a);if(null!=c||!d&&(c=this.byId("span_"+a),null!=c))return c;if(b)return null;c=this.byName(a);return null!=c&&0<c.length?(c[0].id||(c[0].id=a),c[0]):null}return a}return null},matchesSelector:function(){var a;return function(b,d){b=gx.dom.byId(b);var c=b.matches||b.matchesSelector||b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector;void 0===a&&(a=gx.util.browser.isIE()&&
8>=gx.util.browser.ieVersion());return a||!c?g(b).is(d):c?c.call(b,d):!1}}(),hasAttribute:function(a,b){return a.hasAttribute?a.hasAttribute(b):void 0!==a[b]},hasClass:function(a,b){if(a=gx.dom.el(a,!0))return a.classList?a.classList.contains(b):b&&-1!=(" "+a.className+" ").indexOf(" "+b+" ")},isRoundedBtnWrapper:function(a){return a.hasClass("BtnRight")||a.hasClass("BtnLeft")||a.hasClass("BtnBackground")},addPrefixClass:function(a,b){if(a){var d=g(a);a.className&&!d.attr("data-gx-unprefixed-class")&&
(d.attr("data-gx-unprefixed-class",a.className),d=a.className.split(" "),d.splice(0,0,""),a.className+=d.join(" "+b))}},removePrefixClass:function(a,b){if(a){var d=g(a);if(0<=a.className.search(new RegExp("(^|\\s)"+b))){var c=d.attr("data-gx-unprefixed-class");d.removeAttr("data-gx-unprefixed-class");a.className=c||a.className.substring(b.length)}}},addClass:function(a,b){var d=gx.dom.el(a,!0);d&&b&&(d.classList?0<b.indexOf(" ")?d.classList.add.apply(d.classList,b.split(" ")):d.classList.add(b):this.hasClass(a,
b)||(d.className=d.className+(d.className?" ":"")+b))},classReCache:{},removeClass:function(a,b){var d=gx.dom.el(a,!0);d&&(d.classList?d.classList.remove(b):this.hasClass(a,b)&&(a=this.classReCache[b],a||(a=new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g"),this.classReCache[b]=a),d.className=d.className.replace(a," ")))},hasTransition:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,d="transitionDuration";b.isIE()&&(d="msTransitionDuration");b.isWebkit()?d="webkitTransitionDuration":b.isFirefox()?
d="MozTransitionDuration":b.isOpera()&&(d="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[d],10);return 0!==a&&!isNaN(a)}return!1},hasAnimation:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,d="animationName";b.isIE()&&(d="msAnimationName");b.isWebkit()?d="webkitAnimationName":b.isFirefox()?d="MozAnimationName":b.isOpera()&&(d="OAnimationName");return(a=gx.dom.getComputedStyle(a)[d])&&"none"!=a}return!1},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,
"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder")||gx.dom.hasClass(a,"gx-download-placeholder"))},purgeElement:function(a,b){b=b||a.attributes;var d;if(b){var c=b.length;for(d=0;d<c;d+=1){var f=b[d].name||b[d];"function"===typeof a[f]&&(a[f]=null)}}},purge:function(a,b){b||this.purgeElement(a);if(a=a.childNodes){b=0;for(var d=a.length;b<d;b++)gx.dom.purge(a[b],!1)}},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==this._form&&(this._form=
document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){try{for(var a=gx.fn.getFormElements(),b=a.length,d=0;d<b;d++)a[d].gxIndex=d}catch(c){gx.dbg.logEx(c,"gxapi.js","indexElements")}},setAttribute:function(a,b,d){var c=function(){try{var f=gx.dom.byName(a);if(null!=f&&0<f.length)for(var l=f.length,n=0;n<l;n++)f[n].setAttribute(b,d);else n=gx.dom.byId(a),null!=n&&n.setAttribute(b,d)}catch(q){gx.dbg.logEx(q,"gxapi.js","setAttribute")}};"loading"==
document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,c,{single:!0}):c.apply(this)},createInput:function(a,b){var d=document.createElement("input");d.type=b;d.id=a;d.name=a;gx.dom.form().appendChild(d);return d},hasSelectedFile:function(){var a=g('input[type="file"]'),b=a.length;if(!b)return!1;for(var d=0;d<b;d++)if(!gx.lang.emptyObject(a[d].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),b=a.length;if(!b)return!1;for(var d=0;d<b;d++){var c=a[d].getAttribute("type");
if("submit"==c||"image"==c)return!0}return!1},styles:function(){var a=[].concat($jscomp.arrayFromIterable(document.styleSheets)).map(function(d){return d.href}).filter(function(d){return!gx.lang.emptyObject(d)}),b=[].concat($jscomp.arrayFromIterable(document.querySelectorAll("style["+STYLE_ELEMENT_HREF+"]"))).map(function(d){return d.getAttribute(STYLE_ELEMENT_HREF)});return[].concat($jscomp.arrayFromIterable(a),$jscomp.arrayFromIterable(b))},getComputedStyle:function(a){try{return"#document"==a.nodeName?
null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(b){return gx.dbg.logEx(b,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,b){var d="";try{d="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[b]:"undefined"!=typeof a.currentStyle?a.currentStyle[b]:a.style[b];var c=parseInt(d);isNaN(c)||(d=c)}catch(f){gx.dbg.logEx(f,"gxapi.js","getStyle")}return d},CSS_URL_REGEXP:/url\(["']?(?!(?:https?:|\/))([^"\)]+)["']?\)/ig,
CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,cacheStyleSheet:function(a,b){var d=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,c;this.cssRules||(this.cssRules=[]);try{if(c=a.cssRules||a.rules){a=0;for(var f=c.length;a<f;a++){var l=c[a].cssText;b&&!l.includes("@import")&&(l=l.replace(this.CSS_URL_REGEXP,'url("'+d+'$1")'));this.cssRules.push(l)}}}catch(n){}},getCssRules:function(a,b){var d=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];a=0;for(var c=
d.length;a<c;a++)try{d[a].disabled||this.cacheStyleSheet(d[a],b)}catch(f){}}return this.cssRules},setStyleElement:function(a,b,d){try{a.innerHTML=(d?a.innerHTML:"")+b}catch(c){a.styleSheet.cssText=(d?a.styleSheet.cssText:"")+b}},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},isRadio:function(a){return a&&"INPUT"==a.tagName&&"radio"==a.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,
tel:!0,month:!0,week:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isTextControl:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type||"TEXTAREA"===a.tagName},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return a?this.isButton(a)||gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:a&&"INPUT"===a.nodeName?"file"===a.type||("image"===a.type||"checkbox"===a.type)&&
"function"==typeof a.onclick:!1:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(b){}return null},forEachChild:function(a,b,d){if(a&&a.childNodes&&"function"==typeof d)for(var c=a.childNodes.length,f=0;f<c&&!1!==d.call(b,a.childNodes[f]);f++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&a.childNodes&&0<a.childNodes.length&&this.innerChildIsText(a.firstChild)?!0:!1},isImageWithLink:function(a){return a&&
"A"===a.tagName&&a.href&&(a=a.firstElementChild,!gx.dom.hasClass(a,"gx-prompt")&&a&&"IMG"===a.tagName)?!0:!1},isChildNode:function(a,b){a.frameElement&&(a=a.frameElement);if(a==b)return!0;for(;a.parentNode;){if(a==b||a.parentNode==b)return!0;a=a.parentNode}return!1},NodeLevel:function(a){for(var b=0;a.parentNode;)(a.id||a.name)&&b++,a=a.parentNode;return b},findParentByTagName:function(a,b,d){a=a.parentNode;b=b.toUpperCase();for(i=0;a&&(!d||i!=d);){i++;if(a.tagName==b)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=
a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},allChildrenAreText:function(a){for(a=a.firstChild;a;){var b=a.nodeName.toLowerCase();if("#text"!==b&&"pre"!==b&&null!=a.offsetParent)return!1;a=a.nextSibling}return!0},position:function(a){a=g(a).offset();return{x:Math.floor(a.left),y:Math.floor(a.top)}},dimensions:function(a){a=g(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var b=a.documentElement;a=a.body;return b&&b.scrollHeight?{scrollWidth:Math.max(b.scrollWidth,
a.scrollWidth),scrollHeight:Math.max(b.scrollHeight,a.scrollHeight),clientHeight:Math.max(b.clientHeight,a.clientHeight),clientWidth:Math.max(b.clientWidth,a.clientWidth)}:{scrollWidth:a.scrollWidth,scrollHeight:a.scrollHeight,clientHeight:a.clientHeight,clientWidth:a.clientWidth}},documentScroll:function(a){a=a||document;var b=-1,d=-1;try{b=a.documentElement.scrollTop||a.body.scrollTop,d=a.documentElement.scrollLeft||a.body.scrollLeft}catch(c){}return{scrollTop:b,scrollLeft:d}},documentScrollable:function(a){a=
a||document;var b={x:!1,y:!1};a=gx.dom.windowDimensions(a);a.scrollHeight>a.clientHeight&&(b.x=!0);a.scrollWidth>a.clientWidth&&(b.x=!0);return b},autofitIFrame:function(a){a=gx.evt.source(window.event||a);var b=window.frames[a.name].document;if(b&&""==a.width&&""==a.height){var d=gx.dom.windowDimensions(b);b=d.scrollWidth?d.scrollWidth+10:null;d=d.scrollHeight?d.scrollHeight+10:null;b&&d&&(a.style.width=b+"px",a.style.height=d+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var b=
null,d=a.childNodes.length,c=0;c<d;c++){var f=a.childNodes[c];if("TABLE"==f.nodeName){b=f;break}}null!=b&&(-1!=b.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(b.style.width)),-1!=b.style.height.indexOf("%")&&(a.style.height=gx.dom.addUnits(b.style.height)))}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,b){null!=a&&(a.createTextRange?
(a=a.createTextRange(),a.move("character",b),a.select()):a.selectionStart?(a.focus(),a.setSelectionRange(b,b)):a.focus())},replaceAtCaretPosition:function(a,b){if(document.selection){var d=document.selection.createRange().getBookmark();a.selection=a.createTextRange();a.selection.moveToBookmark(d);a.selectLeft=a.createTextRange();a.selectLeft.collapse(!0);a.selectLeft.setEndPoint("EndToStart",a.selection);d=a.selectLeft.text.length+1;var c=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)}else d=
a.selectionStart,c=a.selectionEnd;a.setRangeText?a.setRangeText(b,d,c,"end"):(a.value=a.value.substr(0,d)+b+a.value.substr(d,a.value.length),gx.dom.setCaretPosition(a,d+b.length))},spanValue:function(a){var b=a.nodeValue;gx.lang.emptyObject(b)&&(b=a.innerText||a.textContent);gx.lang.emptyObject(b)&&(b="");return b},removeControlSafe:function(a){gx.dom.shouldPurge()?(this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV")),this._avoidLeaksDiv.appendChild(a),gx.dom.purge(this._avoidLeaksDiv),
this.removeControl(this._avoidLeaksDiv),this._avoidLeaksDiv=null):this.removeControl(a)},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var b=document.createRange();a&&(b.selectNode(a),b.deleteContents())}},radioToObj:function(a,b){b={s:"",v:[]};if(!a)return b;if(gx.dom.isRadio(a)){b.s=a.value;a=gx.dom.byName(a.name);for(var d=a.length,c=0;c<d;c++){var f=g(a[c]),l=g("label[for='"+a[c].id+"']").first();b.v.push([f.val(),l.text().trim()])}}return b},comboBoxToObj:function(a,
b){try{var d={s:"",v:[]};if(!a)return d;if("SELECT"===a.tagName){d.s=a.value;var c=a.options.length;for(b=0;b<c;b++){var f=g(a.options[b]);d.v.push([f.val(),f.text()])}}else if("SPAN"===a.tagName){if(a.hasAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR))return gx.json.evalJSON(a.getAttribute(gx.GxObject.GX_DATA_RAW_VALUE_ATTR));var l=gx.fn.getControlValue_span(a);d.v.push([b,l]);d.s=b}return d}catch(n){gx.dbg.logEx(n,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,
addUnits:function(a,b){return""===a||"auto"==a?a:void 0===a?"":"number"!=typeof a&&this.unitPattern.test(a)?a:a+(b||"px")},getScrollbarWidth:function(){var a=document.createElement("div"),b=a.style;b.display="block";b.position="absolute";b.width="100px";b.height="100px";b.left="-999px";b.top="-999px";b.overflow="scroll";document.body.insertBefore(a,null);b=a.clientWidth;if(0===b)document.body.removeChild(a);else return document.body.removeChild(a),100-b},getActiveElement:function(a){a=a||document;
try{var b=a.activeElement;b&&b.nodeName||(b=a.body)}catch(d){b=a.body}return b},getCaretOffset:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type&&"undefined"!==typeof a.selectionStart?{s:a.selectionStart,e:a.selectionEnd}:{s:0,e:0}},setCaretOffset:function(a,b){a&&"INPUT"==a.tagName&&"text"==a.type&&a.setSelectionRange&&a.setSelectionRange(b.s,b.e)},write:function(a,b){b=b||document;b.write(a)},writeError:function(a,b,d,c){gx.dbg.write(a);c=c||document;c.head.innerHTML="";c.body.innerHTML=
a},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASK_ZINDEX:2,MASKED_CLASS:"gx-masked",isMaskElement:function(a){return this.hasClass(a,this.MASK_CLASS)},mask:function(a){if((a=this.el(a))&&!this.hasClass(a,this.MASK_RELATIVE_CLASS)){var b=gx.util.browser,d=b.ieVersion(),c=6==d||b.isIE&&b.isCompatMode(),f=!!a.style.setExpression,l=g(a);l.css("caret-color","transparent");l.is("body")&&"static"==this.getComputedStyle(a).position||this.addClass(a,this.MASK_RELATIVE_CLASS);
var n=document.createElement("div");n.className=this.MASK_CLASS;n.style.zIndex=this.MASK_ZINDEX;if("TABLE"==a.tagName){var q=g(n);l=g(a);q.width(l.width());q.insertAfter(l);q.parent().addClass(this.MASK_RELATIVE_CLASS)}else a.appendChild(n);this.addClass(a,this.MASKED_CLASS);if(c&&f)try{n.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(r){}else a=this.getComputedStyle(a).height,b.isIE&&(7!=b.ieVersion||b.isCompatMode())&&"auto"==a&&
(n.style.height=a);b.isIE()&&(7>=d||b.isCompatMode())&&(g(n),(b=this.getComputedStyle(n).opacity)&&g(n).css("opacity",b));return n}},unmask:function(a){a=this.el(a);var b;g(a).css("caret-color","");if("TABLE"==a.tagName){var d=a.nextSibling;d&&"DIV"==d.tagName&&this.hasClass(d,this.MASK_CLASS)&&(b=d)}else{d=0;for(var c=a.childNodes.length;d<c;d++)if("DIV"==a.childNodes[d].tagName&&this.hasClass(a.childNodes[d],this.MASK_CLASS)&&!this.hasClass(a.childNodes[d],this.UNMASK_CLASS)){b=a.childNodes[d];
break}}b&&!b.removed?(b.removed=!0,b.style.clearExpression&&(b.style.clearExpression("width"),b.style.clearExpression("height")),this.removeClass(a,this.MASKED_CLASS),d=gx.dom.hasTransition(b)?gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(b)?gx.dom.ANIMATION_END_EVENT:!1,c=function(){"TABLE"==a.tagName?b.parentNode&&(gx.dom.removeClass(b.parentNode,this.MASK_RELATIVE_CLASS),b.parentNode.removeChild(b)):b.parentNode==a&&a.removeChild(b);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),
d?gx.evt.attach(b,d,c,!1,{single:!0,useCapture:!0,timeout:300}):c(),this.addClass(b,this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},replaceWithFx:function(a,b,d){d=d||{};var c=d.enteringClass||"entering",f=d.leavingClass||"leaving",l=d.enterDurationClass||"enter-fx-duration",n=d.leaveDurationClass||"leave-fx-duration",q=d.transitioningClass||"transitioning",r=d.transitionTimeout||1500,v=function(H){return 0<H.childNodes.length&&(gx.dom.hasAnimation(H)||
gx.dom.hasTransition(H))&&!gx.dom.hasClass(H.parentNode,q)},t=function(H){return gx.dom.hasAnimation(H)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(H)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==a.tagName&&(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==b.tagName&&gx.dom.addClass(b,b.className+"-fx");var y=a.parentNode,B=v(a),u=v(b),w="BODY"!=a.tagName;if(B||u){v=document.createElement("iframe");var z=document.createElement("div"),C=this.getComputedStyle(a),F=C.width;C=C.height;
var G=t(a),k=t(b),m,p,x,A,D,E=0;gx.dom.addClass(y,q);if("BODY"!=a.tagName&&"BODY"!=b.tagName)if(B){v.setAttribute("scrolling","no");v.setAttribute("frameborder","0");v.style.width=gx.dom.addUnits(window.innerWidth);v.style.height=gx.dom.addUnits(window.innerHeight);v.style.display="none";z.appendChild(v);z.style.width=F;z.style.height=C;z.style.overflow="hidden";gx.spa.dettachContent(a);a.insertBefore(z,a.firstChild);t=v.contentDocument;try{t.open(),t.write(this.getDocTypeDeclaration(document)),t.write("<html>"),
t.write("<head></head>"),t.write("<body><div></div></body>"),t.write("</html>"),t.close()}catch(H){gx.dbg.logEx(H,"gxapi.js","replaceWithFx"),z=t.createElement("div"),t.body.appendChild(z)}t.documentElement&&(t.documentElement.className="gx-fx-iframe");t.body.style.margin="0";t.body.className=gx.dom.form().className;t.head.appendChild(document.createElement("style"));var I=t.styleSheets[0];z=gx.dom.getCssRules(!0,!0);var J=[];z=z.filter(function(H,L){if(H.includes("@import"))return H;J.push(H)});
var K=function(H){H.forEach(function(L){try{I.insertRule(L,I.cssRules.length)}catch(N){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+L)}})};K(z);K(J);t.body.firstChild.style.width=F;for(t.body.firstChild.style.height=C;a.childNodes[1];)t.body.firstChild.appendChild(a.childNodes[1]);v.style.display="block"}else u&&(a.style.display="none");gx.dom.addClass(b,c);gx.dom.addClass(b,l);gx.dom.addClass(a,n);!1!==d.domAdd&&y.appendChild(b);n=function(){x=function(){2===E?(gx.dom.removeClass(y,q),
w&&(d.transitionEndCallback&&(b=d.transitionEndCallback(a,b)),!1!==d.domRemove&&a.parentNode==y&&y.removeChild(a)),gx.dom.removeClass(b,l)):w||(d.transitionEndCallback&&(b=d.transitionEndCallback(a,b)),gx.dom.removeClass(b,c),u&&(D=setTimeout(p,r)))};B?(m=function(){clearTimeout(A);E++;d.leavingTransCallback&&d.leavingTransCallback(a,b);x()},gx.evt.attach(a,G,m,!1,{single:!0,useCapture:!0})):(E++,x());u?(p=function(){2<=E?gx.evt.detach(b,k,p):(clearTimeout(D),E++,d.enteringTransCallback&&d.enteringTransCallback(a,
b),x())},gx.evt.attach(b,k,p,!1,{single:!0,useCapture:!0})):(E++,x());gx.lang.requestAnimationFrame(function(){gx.dom.addClass(a,f);w&&(gx.dom.removeClass(b,c),u&&(D=setTimeout(p,r)));B&&(A=setTimeout(m,r))})};d.beforeTransitionStart?!0!==d.beforeTransitionStart(n)&&n():n()}else!1!==d.domRemove&&y.removeChild(a),!1!==d.domAdd&&(a.parentNode==y?y.replaceChild(b,a):y.appendChild(b)),d.beforeTransitionStart&&d.beforeTransitionStart(),d.leavingTransCallback&&d.leavingTransCallback(a,b),d.enteringTransCallback&&
d.enteringTransCallback(a,b),d.transitionEndCallback&&(b=d.transitionEndCallback(a,b))},getDocTypeDeclaration:function(a){a=a||document;a=a.doctype;parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?a.webkitCreateShadowRoot():!1},fixes:function(){var a=
/gx-tab-padding-fix-\d+/ig,b=/gx-tab-spacing-fix-\d+/ig,d={},c={},f,l,n,q={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{resetFixesStyleElement:function(){d={};c={};g("#gx-dom-fixes").empty()},getFixesStyleElement:function(){var r=g("#gx-dom-fixes")[0];if(!r){r=document.createElement("style");
r.id="gx-dom-fixes";var v=gx.getThemeElement();g("head")[0].insertBefore(r,v);gx.util.browser.isIE()&&g(v).insertAfter(r)}return r},html5:function(r){var v=gx.util.browser,t=v.isIE(),y=gx.O.DSO?["@layer gx-dom-fixes {"]:[];g("TABLE",r||document.body).each(function(){var u=g(this);u.attr({align:u.data("align")})});if(!r){if(!n){for(B in q)gx.lang.apply(q[B],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",
contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});n=".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}";Mustache.parse(n)}for(B in q)y.push(Mustache.render(n,q[B]));
gx.O.DSO&&y.push("}");var B=this.getFixesStyleElement();gx.dom.setStyleElement(B,y.join(""),!0)}(t||v.isOpera())&&g("td[data-align]",r||document.body).each(function(){var u=g(this),w=u.attr("data-align").toLowerCase(),z=q[w].className,C=u.attr("class")||"";C&&(C=" "+C);u.attr("align",w);u.hasClass(z)||u.attr("class",z+C);u.children("div."+q[w].contHolderClassName).children("div."+q[w].contHolderBodyClassName).addClass(z);u.children("div."+q[w].wcClassName).children("div."+q[w].wcBodyClassName).addClass(z)})},
setPopupMinWidth:function(){var r=gx.popup.getPopup();if(r){var v=!0;if(gx.runtimeTemplates){try{v=window.parent.gx.runtimeTemplates}catch(t){}v||(v=this.getPopupMinWidth(),g(document.documentElement).css("min-width",gx.dom.addUnits(v)));g(document.documentElement).addClass("gx-popup-document")}(r.autoresize||void 0===r.autoresize)&&g(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var r=gx.popup.getPopup(),v=t;if(!r)return v;v=r.width;if(r.autoresize||void 0===r.autoresize){var t=
600;r=g(r.window).width();v=800;1200<=r&&(v=900);768<=r&&992>r&&(v=t);768>r&&(v=r-20)}return v},fixTableResets:function(r){var v=[],t=[],y=this.getFixesStyleElement();f||(f="{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}",Mustache.parse(f));l||(l="{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}",Mustache.parse(l));g("table[data-cellpadding], table[data-cellspacing]",r||document.body).each(function(){var B=this.getAttribute("data-cellpadding");void 0!==
B&&(d[B]||(d[B]=B,v.push(B)),g("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+B+" "+this.className.replace(a,"").trim()}));var u=this.getAttribute("data-cellspacing");void 0!==u&&(c[u]||(c[u]=u,t.push(u)),this.className="gx-tab-spacing-fix-"+u+" "+this.className.replace(b,"").trim())});r=""+Mustache.render(f,v)+Mustache.render(l,t);0<r.length&&(gx.O.DSO?gx.dom.setStyleElement(y," @layer gx-dom-fixes { "+r+" }",!0):gx.dom.setStyleElement(y,
r,!0))},createLegacyNotification:function(){g("div#gx_ajax_notification").length||g('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(a,b){var d=g(b)[0].offsetTop-g(a)[0].offsetTop-g(a).scrollTop();return a&&g(b)[0]?d<g(a).height():
!1}}}(gx.$);$.extend(gx.dom,gx.dom_i);
gx.evt_i=function(g){return{eachKeyAutorefreshType:function(a){return!gx.lang.isNumericType(a)&&!gx.lang.isDateType(a)},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=
this.hooks.length,b=0;b<a;b++){var d=this.hooks[b];try{this.detach(d.c,d.e,d.f),d.c=null,d.f=null}catch(c){gx.dbg.logEx(c,"gxapi.js","clearHooks")}this.hooks[b]=null}this.hooks=[]},source:function(a){return a.target||a.currentTarget||a.srcElement},createEvent:function(a,b,d,c){b=void 0===b?!0:b;d=void 0===d?!0:d;c=c||{};if(window.CustomEvent)var f=new CustomEvent(a,{bubbles:b,cancelable:d,detail:c});else f=document.createEvent("CustomEvent"),f.initCustomEvent(a,b,d,c);return f},dispatch:function(a,
b){return a.dispatchEvent?a.dispatchEvent(b):a.fireEvent("on"+b.type,b)},fireEvent:function(a,b){gx.evt.dispatch(a,gx.evt.createEvent(b))},detach:function(a,b,d,c){try{if(c=c||{},"string"==typeof b)a.removeEventListener?a.removeEventListener(b,d,c.useCapture||!1):a.detachEvent?a.detachEvent("on"+b,d):a["on"+b]=null;else if(gx.lang.isArray(b))for(var f=0,l=b.length;f<l;f++)this.detach(a,b[f],d,c)}catch(n){gx.dbg.logEx(n,"gxapi.js","detach")}},stopPropagation:function(a){a&&(a.stopPropagation?a.stopPropagation():
a.cancelBubble=!0)},cancel:function(a,b){if(b&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(d){}"undefined"==typeof a.preventDefault?(a.cancelBubble=b,a.returnValue=!b):b&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(b){gx.dbg.logEx(b,"gxapi.js","checkCtrlFocus")}},doClick:function(a,b){if(gx.isInputEnabled()&&(b=gx.evt.source(b),"button"!=
b.type&&"submit"!=b.type&&(a=gx.dom.el(a),gx.fn.isAccepted(a)))){if(void 0!=a.onfocus)a.onfocus();if(void 0!=a.onclick)a.onclick();"INPUT"==a.nodeName&&"submit"==a.type&&gx.dom.form().submit()}},executeOnblur:function(a,b){var d=gx.csv.lastId,c=gx.O.focusControl;gx.O.focusControl=a;this.onblur(b,gx.O.focusControl);gx.O.focusControl=c;gx.csv.lastId=d},onblur:function(a,b){if(gx.O&&!0!==gx.csv.IgnoreBlur){a=gx.fn.controlRowId(a);gx.csv.lastId=b;try{var d=gx.fn.validStruct(b);d&&null!=d.gxgrid&&d.gxgrid.updateControlValue(d,
!1,a);var c=gx.csv.lastControl;if(c){var f=c.getAttribute("maxlength");0<f&&c.value.length>f&&(c.value=c.value.substring(0,f));if(d&&"bits"==d.type&&0==d.ro){var l=gx.fn.getControlGridRef(d.fld,d.gxgrid?d.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>c.id.indexOf(d.fld)&&(c=l);var n=gx.html.multimediaUpload.getContainer(l);gx.html.multimediaUpload.refreshPreviewImg(n,c)}}}catch(q){gx.dbg.logEx(q,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){var b=g.Deferred();gx.fx.obs.notify("gx.onbeforefocus",
arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments).then(function(){gx.fx.obs.notify("gx.onafterfocus");b.resolve()});return b.promise()};!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0,async:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,b,d,c,f,l,n){var q=g.Deferred();f=gx.fn.controlRowIndex(a)||f;try{gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return q.resolve(!1).promise();gx.evt.setReady(!1,
"onfocus_impl");if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0,"onfocus_impl"),q.resolve(!1).promise();var r=!1;gx.csv.cmpCtx!=d&&(r=!0,gx.O.fromValid=0);gx.setGxO(d,c);gx.fn.refreshControlOldValue(a);r&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;0!=l&&""==f||gx.fn.setCurrentGridRow(l,f);gx.fx.installSuggest(a);
var v=!1;if(gx.csv.lastGrid!=l){gx.csv.lastRow[l]=null;if(!n){if(gx.csv.lastGrid<l){var t=gx.fn.firstGridControl(l);gx.O.fromValid>t&&(gx.O.fromValid=t)}gx.csv.lastGrid=l}v=!0}0<b&&(gx.O.focusControl=b);if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0,"onfocus_impl"),q.resolve(!0).promise();if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}try{var y=gx.fn.getControlValue("Mode");if("DLT"==y||"DSP"==y||gx.O.isTransaction()&&gx.dom.isButton(a)&&
!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!n)return gx.evt.setReady(!0,"onfocus_impl"),q.resolve(!0).promise()}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0,"onfocus_impl"),q.resolve(!0).promise();gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0,"onfocus_impl");return q.resolve(!0).promise()}if(gx.csv.invalidForcedCtrl){var B=
gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.Ctrl.id);gx.csv.invalidForcedCtrl=null;if(B)return gx.evt.setReady(!0,"onfocus_impl"),q.resolve(!0).promise()}if(null!=gx.csv.invalidControl&&gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1,gx.O,f).done(function(k){k&&(gx.csv.invalidControl=null,gx.evt.setReady(!0,"onfocus_impl"));q.resolve(!0)}),q.promise();n?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),
gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0==gx.csv.lastRow[l]||gx.csv.lastRow[l]==f||v||gx.O.fromValid!=gx.O.toValid||(gx.csv.lastId=gx.O.fromValid);var u=gx.fn.controlIds();0<u.length&&gx.O.fromValid<u[0]&&(gx.O.fromValid=u[0]);gx.lang.emptyObject(gx.csv.lastRow[l])&&0!=l&&(gx.csv.rowChanged=!0,gx.csv.lastRow[l]=f);var w=gx.O,z=gx.csv.lastId,
C=gx.fn.validStruct(z,w);if(C)var F=gx.csv.lastRow[C.grid];gx.csv.checkRowChange(z,v,w,F).done(function(k){var m=!1,p=!1,x=function(){null==gx.csv.invalidControl&&a===document.activeElement&&("SELECT"===a.nodeName||gx.dom.isTextControl(a)&&a.selectionStart===a.selectionEnd)&&gx.fn.setSelection(a);gx.csv.disableFocusCondition();q.resolve(!0)};!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(f)&&F.length>f.length&&(m=F.substring(F.length-f.length),m=parseInt(m)<parseInt(f));gx.csv.backwardGridValidation&&
(!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(f)&&F.length==f.length&&parseInt(F)>parseInt(f)&&(p=w.focusControl>gx.fn.firstGridControl(l)),!gx.lang.emptyObject(F)&&!gx.lang.emptyObject(f)&&F.length==f.length&&parseInt(F)<parseInt(f)&&(p=w.focusControl<z&&w.focusControl>gx.fn.firstGridControl(l)));k&&null==gx.csv.invalidControl&&p?(w.fromValid=gx.fn.firstGridControl(l),gx.csv.validControls(w.fromValid,w.focusControl,!0,gx.O)):k&&!v||!(w.focusControl>=z||m)?(w.toValid=w.focusControl,x()):(gx.fn.lastMainLevelCtrlId(z,
l)&&(k=gx.fn.getControlRefById(z))&&1===k.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&(w.fromValid=z+1),gx.csv.validateAll(w).done(x))});if(l&&f){var G=gx.O.getGridById(l,f);G&&G.allowSelection&&G.setSelection(parseInt(f,10)-1)}gx.evt.setReady(!0,"onfocus_impl");return q.promise()}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}gx.evt.setReady(!0,"onfocus_impl");return q.resolve(!1).promise()},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js",
"userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,b,d){gx.pO.MasterPage&&a.req.setRequestHeader(d,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,d,c,f,l){gx.reinit(!l)},oncontentreplace:function(a,b,d,c,f,l,n,q){a=gx.lang.getType(c);l=(l=l==n?l:n)?gx.lang.getType(l.toLowerCase()):
!1;var r=gx.ajax.getJsonResponse();r&&gx.fn.setJsonHiddens(null,r.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);q?gx.setMasterPage(f):l&&gx.setMasterPage(new l);gx.ajax.clearJsonResponse();r?gx.ajax.setJsonResponse({response:r,isPostBack:!1,afterCmpLoaded:function(){q&&(f.restoreTargetComponents(),f.restoreExoEventHandlers());gx.objectLoad(r.gxGrids,r.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onunload:function(a){gx.objectUnload(a);
gx.spa.stop()},onclick:function(a){var b={event:a};gx.fx.obs.notify("gx.onclick",[b]);b.cancel||(gx.evt.setReady(!1,"onclick"),gx.isInputEnabled(a)||gx.evt.cancel(a,!0),gx.evt.mouse.update(a),setTimeout(function(){gx.fx.ctx.notify()},10),gx.evt.setReady(!0,"onclick"))},ontouchstart:function(a){a=gx.evt.onmousedown.closure(this,[a]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(a,150):a()},onmousedown:function(a){var b=window.event||a,d=gx.evt.source(b);
if(d&&8>=gx.util.browser.ieVersion()&&g(d).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(d);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();d=a.getSource(b);gx.dom.isMaskElement(b.target)||null==d||(gx.evt.cancel(b,!0),gx.setGxO(d.obj),a.drag(d.obj,d.types,d.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var b=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()&&gx.popup.ext.compatMode()){var d=gx.popup.ext;d.movepopup();if(null!=d.currIDb||null!=d.currRS)return!1}null!=
b.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,b.obj.gxDragTypes)&&b.over(),b.moveControl(b.dragCtrl))},onmouseup:function(a){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var b=gx.fx.dnd;if(null!=b.dragCtrl){var d=window.event||a;d=b.getTarget(d,b.obj.gxDragTypes);null!=d?(b.deleteClonControl(),gx.setGxO(d.obj),b.drop(b.dropCtrl,d.obj,d.hdl)):b.restoreControl();d=window.event||a;gx.evt.cancel(d,!0)}b.out();b.dragCtrl=null;
b.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);var b=window.event||a;!gx.util.browser.isOldIE()&&gx.fx.dom.delayedDispatch(a)||gx.fx.dom.raiseEvent("dblclick",b)},onwindowblur:function(a){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,b,d){d=window.event||d;var c=gx.util.browser.isIE(),f=d.keyCode;if(c){if("keydown"==d.type&&229==f)return a.value.length<=b?a.ImeKey=!0:!1;if("keyup"==d.type&&8==f&&a.ImeKey&&a.value.length+1>=b)return a.value=
a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==d.type||c)return a.value.length+1<=b||8==f||9==f||46==f||35<=f&&40>=f},fireControlValueChange:function(a,b,d){var c=g.Deferred();if(!a||!b)return c.resolve();var f=a.getValidStructFld(b);if(f&&f.evt_cvc){gx.evt.startValidation(f.gxgrid);gx.evt.stopPropagation(d);if(f.grid){gx.evt.setEventRow(a,b);var l=gx.fn.controlRowIndex(b)}gx.fn.disableKeys();return a[f.evt_cvc].call(a,l).always(function(){gx.evt.endValidation(f.gxGrid,gx.evt.types.VALUECHANGED);
gx.fn.enableKeys()})}return g.Deferred().resolve()},fireControlValueChanging:function(a){var b=gx.fn.getControlContext(a)||gx.O,d=g.Deferred();if(!b||!a)return d.resolve();var c=b.getValidStructFld(a);if(c){var f=c.gxgrid&&c.gxgrid.isFreestyle,l=c.evt_cvcing&&!c.gxsgprm;l&&gx.evt.startValidation(c.gxgrid);if(l||f)f=gx.O,gx.setGxO(b),"function"==typeof c.c2v&&c.c2v(),"function"==typeof c.v2bc&&c.v2bc.call(b),gx.setGxO(f);if(l)return c.grid&&gx.evt.setEventRow(b,a),b[c.evt_cvcing].call(b).always(function(){gx.evt.endValidation(c.gxGrid,
gx.evt.types.VALUECHANGING)})}return d.resolve()},oncontrolvaluechanging:function(a){var b=a.keyCode;8!=b&&32>b||33<=b&&46>b||112<=b&&123>=b&&121!=b||(a=gx.evt.source(a))&&gx.evt.fireControlValueChanging(a)},oncontrolpasting:function(a){(a=gx.evt.source(a))&&gx.lang.doCallTimeout(gx.evt.fireControlValueChanging,gx.evt,[a],0)},onkeypress:function(a,b,d){if(a=a||window.event){var c=13===a.keyCode;27===a.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(a,!0);var f=gx.fn,l=gx.util.browser;b={event:a,
hasEnter:b,skipOnEnter:d,cancel:!1};if(27===a.keyCode&&gx.popup.ispopup())f.cancelWindow();else if(gx.fx.obs.notify("gx.keypress",[b]),!b.cancel){c&&!gx.isInputEnabled()&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var n=a.ctrlKey;b=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(b,a)||this.cancel(a,!0);9!==a.keyCode&&gx.csv.invalidateCtrl(b,
a);if(!(this.isEnterEvtCtrl(b)&&this.isTriggerKey(a)&&this.cancelAndRefresh(a))&&(this.checkFuncKey(a,b),(32==a.charCode||32==a.keyCode||c&&!d)&&gx.dom.hasClass(b,"gx_newrow")&&g(b).find("span").trigger("click"),c&&d||!gx.grid.handleKeyPressEvt(a)))switch(a.keyCode){case 13:c=this.triggersEvt(b),d?f.enterHasFocus()||this.shiftPressed&&"TEXTAREA"===b.nodeName||(n&&"TEXTAREA"===b.nodeName?(gx.dom.replaceAtCaretPosition(b,"\n"),this.cancel(a,!0)):(l.isIE()&&"file"!=b.type?(gx.evt.isEnterEvtCtrl(b)&&
gx.O.executeEnterEvent(a,b),this.lastKey=9,a.keyCode=this.lastKey,this.cancel(a,!0),f.skipFocus(d,b)):(b.value&&l.isIE()&&"SELECT"!=b.tagName&&(l=b.value,b.value="",b.value=l),f.skipFocus(d),this.cancel(a,!0)),this.enter=!1)):c||gx.O.executeEnterEvent(a,b)}}}},onkeyup:function(a){var b=window.event?window.event:a;a=gx.evt.source(b);var d=a.getAttribute("maxlength")||(a.getAttribute("max")?a.getAttribute("max").length:0),c="undefined"==typeof a.value?"":a.value;gx.evt.isComposing&&!b.isComposing&&
gx.fx.obs.notify("gx.endcomposing");gx.evt.isComposing=b.isComposing;if(""==a.type&&9==b.keyCode||this.autoSkip&&""!=a.type&&!this.isControlKey(this.lastKey)&&c.length>=d&&0<d){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(a)||gx.dom.isImageWithLink(a)){if(d=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))d=gx.O.getValidStructId(d),gx.evt.onfocus(a,d,"",!1,"",0);return}a=a.getAttribute("gxfocusable");if(null!=a&&"1"==a)return;a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:
gx.csv.lastControl);if(-1==a)return!0;var f=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);a=f.value;gx.fn.setFocus(f);gx.lang.doCallTimeout(function(l){b.isComposing&&(f.value=l)},this,[a],50)}gx.grid.handleKeyUpEvt(b)},shouldIgnoreEscKey:function(){var a=gx.popup.getPopup();return gx.evt.processing||a&&"opening"==a.state},validKeypressForCtrl:function(a,b){if(!a||"text"!==a.type&&"number"!==a.type)return!0;var d=gx.O.getValidStructFld(a);if(d){var c=gx.rtPicture(d,a),f=gx.numericLenDec(c),
l=f.Decimals;f=f.Integers;var n=d.type;d=a.value;if("int"==n||"decimal"==n){if("e"===b.key)return!1;a:{try{if(null!==a.selectionStart&&void 0!==a.selectionStart){var q=a.selectionEnd-a.selectionStart;break a}else if(window.getSelection){q=window.getSelection().toString().length;break a}}catch(r){}q=void 0}if(void 0===q)return!0;if(gx.util.browser.isFirefox()&&"number"==a.type&&0===l)!a.gxoninput&&a.max&&a.min&&(a.gxoninput=!0,gx.evt.attach(a,"input",function(r){if(r.max&&r.min){var v=Number(r.value);
if(v>r.max||v<r.min)r.value=r.value.substr(0,r.max.length)}}.closure(this,[a])));else{if(1<b.key.length)return!0;if(/[^\+\-\.,]/.test(b.key)&&/\D/.test(b.key)&&!b.ctrlKey&&isNaN(Number(b.key)))return!1;if(b.key===gx.thousandSeparator)return!0;if(b.key===gx.decimalPoint)return a=d.substring(a.selectionStart,a.selectionEnd),0<a.length&&gx.text.contains(a,b.key)?!0:!gx.text.contains(d,b.key);if(/[\+\-]/.test(b.key))return!gx.text.contains(d,b.key);digits=d.split("").filter(function(r){return"0"<=r&&
"9">=r}).length;d=gx.num.normalize_decimal_sep(c,gx.thousandSeparator,gx.decimalPoint,d);picinputs=f+(-1==d.indexOf(gx.decimalPoint)?0:l);return digits-q<picinputs}}}return!0},setEventRow:function(a,b){var d=gx.fn.rowGridId(b),c=d&&(gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(d)||"0001");d&&c&&(void 0!=b.gxGridName&&gx.fn.setHidden(a.CmpContext+b.gxGridName.toUpperCase()+"_ROW",c),gx.evt.setCurrentGridRows(d,c));gx.csv.lastEvtRow=c},ctrlOnchange:function(a,b,d,c,f){gx.csv.pkDirty=d;"UPD"==a.value?
"1"==b.value?(d?null!=c&&(c.value=gx.getMessage("GXM_captionadd")):null!=c&&(c.value=gx.getMessage("GXM_captionupdate")),b.value="0"):d&&null!=c&&(c.value=gx.getMessage("GXM_captionadd")):"INS"==a.value&&"1"==b.value&&(null!=c&&(c.value=gx.getMessage("GXM_captionadd")),b.value="0")},onchange:function(){var a=function(){return gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0,async:!0}):a.apply(gx.evt,
arguments)},onchange_impl:function(a,b,d){var c=gx.fn.getControlContext(a)||gx.O,f=c.getValidStructFld(a),l=f&&f.hasRVFmt,n=g.Deferred();if(a.GXFormatError&&!l)n.resolve();else{gx.evt.setReady(!1,"onchange_impl");gx.evt.lastControl=a;l=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"===a.type)a.onfocus();var q=!1,r=gx.O.focusControl,v=function(){delete gx.fx.delayedValidation;gx.evt.setReady(!0,"onchange_impl");var u=gx.util.browser.isWebkit()&&("radio"==
a.type||"checkbox"==a.type||"file"==a.type),w="radio"==a.type||"checkbox"==a.type;q&&f&&(gx.fn.lastMainLevelCtrlId(r,f.grid)||f.gxsgprm)&&(w=u=!0);d&&(w=!1);if(u&&a.onblur)a.onblur();u=function(){gx.evt.execUsrOnchange(a);gx.fx.obs.notify("gx.validation");n.resolve()};!w||"undefined"!=typeof a.GXFormatError&&0!=a.GXFormatError?u():gx.csv.validControls(r,r+1,!0,c).then(u)};if(gx.csv.controlValueHasChanged(a,l,f)){q=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");
gx.csv.invalidateGXCtrl(a);var t=!0;if(f){var y=f.grid?gx.fn.controlRowIndex(a):void 0;"function"==typeof f.c2v&&f.c2v(y);"function"==typeof f.v2bc&&f.v2bc.call(c,y)}d||gx.fn.setControlOldValue(a,l);var B=function(){var u=g.Deferred();if("select-one"==a.type||"checkbox"==a.type||"radio"==a.type){t=!1;gx.evt.setReady(!1,"validationCallback");var w=f?gx.fn.currentGridRowImpl(f.grid):null;gx.csv.validate(a,f.id||r,!0,c,w).done(function(z){z&&gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);gx.evt.execOnchange(a,
z);gx.evt.setReady(!0,"validationCallback");u.resolve()}).fail(function(){gx.evt.setReady(!0,"validationCallback");u.resolve()})}t&&(gx.evt.execOnchange(a,!1),u.resolve());return u.promise()};l=function(){B.call(this).then(v.closure(this))}.closure(this);gx.evt.fireControlValueChange(c,a,b).always(l)}else v.call(this);return n.promise()}},execOnchange:function(a,b,d){var c="";if(a.attributes["data-gxoch1"])try{c+=a.attributes["data-gxoch1"].value+";"}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&
a.attributes["data-gxoch2"])try{c+=a.attributes["data-gxoch2"].value+";"}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}try{""!=c&&eval(c)}catch(f){gx.dbg.logEx(f,"gxapi.js","execOnchange")}b||gx.fn.setControlGxValid(a,"0");d||(a.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));!0!==d&&gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(a){var b="";try{b=a.attributes["data-gxoch0"].value}catch(d){return!0}return(new Function(b)).call(a)},jsEvent:function(a){if(!gx.isInputEnabled())return!1;
a=a.getAttribute?a.getAttribute("data-jsevent")||a.getAttribute("jsevent"):a.jsevent;return gx.lang.emptyObject(a)?!0:eval(a)},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var b=gx.dom.id(a);b||"A"!=a.tagName||(b=a.parentNode.id);b&&0==b.indexOf("span_")&&(b=b.substring(5));if(!b)return!1;var d=gx.O.EnterCtrl;a=gx.fn.rowGridId(a);for(var c=0,f=d.length;c<f;c++){var l=gx.csv.ctxControlId(d[c]);if(a&&-1!=b.search(new RegExp(".*"+l+"_[0-9]{4}$"))||l==b)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){a=
gx.dom.id(a);for(var b in gx.O.CheckCtrl)if(gx.O.CheckCtrl[b]==a||gx.O.CmpContext+gx.O.CheckCtrl[b]==a)return!0}return!1},isTriggerKey:function(a){for(var b=this.triggerKeys.length,d=0;d<b;d++)if(a.keyCode==this.triggerKeys[d]||a.charCode==this.triggerKeys[d])return!0;return!1},isControlKey:function(a){for(var b=this.controlKeys.length,d=0;d<b;d++)if(a==this.controlKeys[d])return!0;return!1},invalidDSPKey:function(a){var b=a.keyCode-111;a.shiftKey&&(b+=12);return this.keyListeners[b]&&"ENTER"==this.keyListeners[b][gx.O.CmpContext]||
13==a.keyCode?!0:!1},addKeyListener:function(a,b,d){1==b&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[b]&&(this.keyListeners[b]=[]);this.keyListeners[b][a]=d},setEvtName:function(a,b){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){var b=gx.O;if(b&&b.conditionsChanged){this.cancel(a,!0);b.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(b.Grids||[]);if(b.autoRefresh||b.hasEnterEvent||b.anyGridBaseTable)b.executeServerEvent("RFR",!1);else return!1;return!0}return!1},
resetGridsPagingVarsIfConditionsChanged:function(a){var b=!1;g.each(a,function(d,c){c.conditionsChanged&&c.conditionsChanged()&&(c.setPagingVars(0,0),b=!0)});return b},setGridEvt:function(a,b){if(gx.isInputEnabled()&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(b)){var d=gx.fn.getGridObj(a);d&&(b=gx.fn.getHidden(gx.O.CmpContext+d.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",b);b&&gx.fn.setCurrentGridRow(a,b)}},checkFuncKey:function(a,b){var d=
this.lastKey-111;a.shiftKey&&(d+=12);if(0<d&&24>=d&&void 0!=this.keyListeners[d]){var c=this.keyListeners[d][gx.O.CmpContext];if("undefined"!=typeof c)this.execFnKeyEvt(a,gx.O,c,b);else for(var f in this.keyListeners[d])if(c=this.keyListeners[d][f],"undefined"!=typeof c){var l=gx.getObj(f,!1);if(null!=l){this.execFnKeyEvt(a,l,c,b);break}}}},execFnKeyEvt:function(a,b,d,c){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(a,!0),"PROMPT"==d){if((a=b.getValidStructFld(c))&&a.attachedCtrls){d=
a.attachedCtrls;for(var f=0,l=d.length;f<l;f++)if((c=d[f])&&c.info&&c.info.isPrompt){var n=d[f].id;"function"==typeof b.promptKeyHandlers[n]&&(c=0<a.grid?"_"+gx.fn.currentGridRowImpl(a.grid):"",c=gx.dom.el(b.CmpContext+n+c),b.promptKeyHandlers[n].call(b,c))}}}else b.isTransaction()&&"SELECT"==d?(b=gx.dom.byId(b.CmpContext+"BTN_SELECT"))&&"function"==typeof b.click&&b.click():b.executeEvent(d,!1)},keyModifiesValue:function(a){a=window.event?a.keyCode:a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){if(!gx.lang.emptyObject(a)){if(a==
gx.evt.dummyCtrl)return!0;var b=gx.config.evt.triggersEvtNodes||{};if("A"===a.nodeName||"TEXTAREA"===a.nodeName||b[a.nodeName])return!0;if("INPUT"===a.nodeName){if("button"===a.type||"image"===a.type)return!0}else if("IMG"===a.tagName&&gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(a){var b=a.status;a=a.cond;"undefined"!=typeof a&&!a||gx.evt.redirecting||(gx.evt.processing=b,gx.dbg.enabled&&(console.groupCollapsed("setProcessing ${ctx} ${gx.evt.processing}"),
console.trace(),console.groupEnd()),gx.evt.setReady(!gx.evt.processing,"setProcessing"),gx.evt.processing||gx.fx.obs.notify("gx.endprocessing"))},doAfterProcessing:function(a,b){gx.evt.processing?gx.fx.obs.addObserver("gx.endprocessing",b,a,{single:!0}):a.call(b)},doAfterComposing:function(a,b){gx.evt.isComposing?gx.fx.obs.addObserver("gx.endcomposing",b,a,{single:!0}):a.call(b)},doAfterValidating:function(a,b){gx.csv.isvalidating()?gx.fx.obs.addObserver("gx.onaftervalidatecompleted",b,a,{single:!0}):
a.call(b)},startValidation:function(a,b){if(a||b)gx.csv.validatingGrid=a,gx.csv.validating+=1},endValidation:function(a,b){a&&a!==gx.csv.validatingGrid||(--gx.csv.validating,0===gx.csv.validating&&(gx.csv.validatingGrid=null,gx.fx.obs.notify("gx.onaftervalidatecompleted")),0>gx.csv.validating&&gx.dbg.logMsg("WARNING! endValidation unexpected condition (gx.csv.validating < 0)"),gx.fx.obs.notify("gx.onaftervalidate",[b]))},userReadyThresholdWait:function(){gx.evt.userReadyTStamp||(gx.evt.userReadyTStamp=
Date.now());return Date.now()>gx.evt.userReadyTStamp+gx.evt.userReadyThreshold},setReady:function(a,b){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;0==gx.evt.userReadyCnt?(gx.evt._userReady=!0,gx.evt.userReadyTStamp=Date.now()):gx.evt._userReady=!1;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0);gx.dbg.enabled&&(console.groupCollapsed("setReady ${Context} ${gx.evt.userReadyCnt}"),console.trace(),console.groupEnd())},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,
setCurrentGridRows:function(a,b){for(;0<a&&b&&b.length&&4<=b.length;){var d=b.substr(0,4),c=b.substr(4);gx.fn.setCurrentGridRow(a,d);if(a=gx.O.getGridById(a,c))a=a.parentGrid;a=a?a.gridId:0;b=b.substr(4,b.length)}},canExecuteEvent:function(a,b){return!(!b&&(gx.spa.isNavigating()||gx.evt.redirecting||!gx.csv.isvalidating()&&(gx.lang.emptyObject(a)||gx.evt.processing)))},execEvt:function(a,b,d,c,f,l,n,q,r,v,t,y){gx.dbg.logPerf("execEvt");gx.text.contains(d,"EENTER")&&gx.ajax.saveFormForAutoComplete();
if(this.canExecuteEvent(d,v)){var B=gx.setGxObyCtx(a,b),u=f,w=this.EVT_ROW_ID_REGEXP.exec(d),z=w&&1<w.length?w[1]:null;w&&2<w.length&&gx.evt.setCurrentGridRows(u,z);z||(z=gx.fn.currentGridRowImpl(u));w=function(){gx.fx.obs.notify("gx.validation",null,function(){if(!v&&B&&B.inputHasFormatErrors(d,f,z))t&&t.call();else{gx.setGxObyCtx(a,b);n&&(gx.evt.srvCommand=!0,c&&(u=gx.fn.rowGridId(c),z=gx.fn.controlRowId(c),gx.lang.emptyObject(u)||gx.lang.emptyObject(z)||(gx.csv.lastGrid=u,gx.fn.setCurrentGridRow(u,
z))));if(0<gx.csv.lastId&&!gx.csv.validatingAll){var C=gx.O.getValidStruct(gx.csv.lastId);if((gx.evt.isEnterEvtCtrl(c)&&0<c.id?gx.O.getValidStructId(c.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(c)||C&&C.isuc)||y)gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=!1}this.setEvtName(d,c);this.lastEvent=d;if(!n&&(gx.grid.drawAtServer||c&&"INPUT"==c.nodeName&&"submit"==c.type))this.execEvtSubmit(d,c);else{gx.evt.setProcessing({status:!0,
ctx:"notifyValidation"});var F=function(){gx.evt.setProcessing({status:!1,ctx:"notifyValidation"})};C=function(){gx.ajax.doPost((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),l,q,f,z,r);F()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(d,gx.O,u,z,!0,void 0,q).done(function(G){G||t&&t.call();r&&r(G);F()}).fail(C):gx.evt.execNonFullAjaxEvent(C)}}}.closure(this))};gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(c)&&c!=gx.csv.lastControl&&void 0!=
c.onfocus?(gx.fx.obs.addObserver("gx.onafterfocus",this,w,{single:!0}),c.onfocus()):w.call(this)}else t&&t.call()},execEvtSubmit:function(a,b){if(gx.isInputEnabled()){gx.evt.setProcessing({status:!0,ctx:"execEvtSubmit"});gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);a=gx.dom.form();var d=gx.popup.getPopup();if(null!=d&&(b=a.action,d=d.window.gx.popup.lvl,-1!=d)){var c=gx.http.urlParameterPrefix(b);c+=encodeURIComponent("gxPopupLevel="+
d+";");a.action=b+c}a.submit()}},execCliEvt:function(a,b,d,c,f,l){var n=g.Deferred();if(!this.canExecuteEvent(!0,!1))return n.reject();gx.fx.obs.notify("gx.validation");l=void 0!=l?l:[];var q=gx.getObj(a,b);if(null!=q){gx.setGxO(a,b);if("string"==typeof c&&""!=c&&4<arguments.length){var r=q.getGrid(c);r.instanciateRow(f);r=r.gridId}if(q.inputHasFormatErrors(q.getServerEventName(d),r,f))return n.reject();var v=q.isServerEvent(d);gx.evt.setProcessing({status:!0,cond:!v,ctx:"execCliEvt"});q.execC2VFunctions();
var t=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing({status:!1,cond:!v,ctx:"execCliEvt"})});q.conditionsChanged?q.executeServerEvent("RFR",!0):gx.fx.obs.notify("gx.onafterevent",[]);n.resolve()},y=function(){q[d](l);t();gx.fx.obs.notify("gx.afterNonFullajax")};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(q.getServerEventName(d),q,r,f,!1,l).done(t).fail(y):gx.evt.execNonFullAjaxEvent(y);return n.promise()}return n.reject()},execNonFullAjaxEvent:function(a){gx.evt.NonFullAjaxserialRunner=
gx.evt.NonFullAjaxserialRunner||gx.evt.serialRunner();gx.fx.obs.addObserver("gx.afterNonFullajax",gx.evt,function(){gx.evt.NonFullAjaxserialRunner.signalEndTask()},{single:!0});gx.evt.NonFullAjaxserialRunner.addTask(a)},fixWebKitOnFocus:function(){var a=gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcherTimeout:30,dispatcher:function(){var a=function(b,d){d=[];var c,f={};for(c=0;c<b.length;c++){var l=b[c];f[l.eventName]||(f[l.eventName]=[]);f[l.eventName].push(l.deferred);
0!==d.length&&l.eventName===d[d.length-1].eventName||d.push(l)}for(c=0;c<d.length;c++){l=d[c];var n=f[l.eventName];for(b=0;b<n.length;b++)l.deferred!==n[b]&&l.deferred.done(function(){this.resolve.apply(this,arguments)}.closure(n[b]))}return d};return{dispatchedEvents:{},serialRunner:gx.evt.serialRunner(),getContextKey:function(b,d,c,f){return f+(b.CmpContext+b.ServerClass)+(d||"")+(c||"")},getEventParmsMetadata:function(b,d,c){return d.EvtParms[b]["input"==c?0:1]},eventDepends:function(b,d,c){d=
this.getEventParmsMetadata(d,c,"output");b=this.getEventParmsMetadata(b,c,"input");for(var f,l=0,n=d.length;l<n;l++){c=gx.ajax.resolveParmKey(d[l]);for(var q=0,r=b.length;q<r;q++)if(f=gx.ajax.resolveParmKey(b[q]),c==f)return!0}return!1},initialize:function(){this.t&&clearTimeout(this.t);this.serialRunner=gx.evt.serialRunner();this.dispatchedEvents={}},beforeDispatch:function(b){var d=gx.ajax.getSecurityToken(b);d&&(b.InternalParms[d.id]=d.value)},types:{event:"event",validation:"validation"},dispatch:function(b,
d,c,f,l,n,q,r){r=r||gx.evt.dispatcher.types.event;l=void 0===l||l;var v=g.Deferred();if("object"===typeof b){var t=b.fn;b=b.eventName}d.cleanEventName(b);d.getClientEventName(b);if(r===gx.evt.dispatcher.types.validation){var y=b.toUpperCase();var B=b}else y=d.cleanEventName(b),B=d.getClientEventName(b);this.beforeDispatch(d);if(!d.EvtParms[y])return v.reject(),v.promise();b=this.getContextKey(d,c,f,r);var u=this.dispatchedEvents[b];l={eventName:y,clientSideEventName:B,clientSideFunction:l?null:(t||
d[B]).closure(d,n||[]),serverSide:l,deferred:v,arguments:n,disableForm:q};u?u.events.push(l):(u={gxO:d,grid:c,row:f,type:r,events:[l]},this.dispatchedEvents[b]=u,this.t=setTimeout(this.serialRunner.addTask.closure(this.serialRunner,[this.dispatchTimeoutCallback.closure(this,[b])]),gx.evt.dispatcherTimeout));return v.promise()},dispatchTimeoutCallback:function(b){var d=this.dispatchedEvents[b],c=d.type,f=d.gxO,l=d.grid,n=d.row,q=[],r=[],v=[],t={};delete this.dispatchedEvents[b];if(c!==gx.evt.dispatcher.types.validation){b=
0;for(var y=d.events.length;b<y;b++){var B=d.events[b];if(B.serverSide)r.push(B);else{var u=!0;for(var w=0;w<b;w++)if(this.eventDepends(B.eventName,d.events[w].eventName,f)){u=!1;break}u?q.push(B):r.push(B)}}}else r=d.events;d=a(q,c).concat(a(r,c));q=!1;b=0;for(y=d.length;b<y;b++){r=d[b].eventName;t[r]||(t[r]=[]);t[r].push(d[b].deferred);if(q&&d[b].serverSide)z.addMethod(r);else{var z=this.createMessage(c,r,f,l,n,d[b].serverSide,d[b].disableForm);d[b].serverSide||(z.callback=d[b].clientSideFunction);
v.push(z)}q=d[b].serverSide}var C=function(k,m,p){for(var x=0,A=k.methods.length;x<A;x++)for(var D=t[k.methods[x]],E=0;E<D.length;E++){var I=D[E];I&&(m?I.resolve(p):I.reject(p))}};runCount=0;var F=this.serialRunner,G=function(){if(runCount<v.length){var k=v[runCount++],m=runCount==v.length;k.call().done(function(p){C(k,!0,p);G();m&&F.signalEndTask()}).fail(function(p){C(k,!1,p);for(var x=runCount;x<v.length;x++)C(v[x],!1,p);F.signalEndTask()})}};G()},createMessage:function(b,d,c,f,l,n,q){return b===
gx.evt.dispatcher.types.validation?new gx.ajax.validationMessage(d,c,f,l,n,q):new gx.ajax.message(d,c,f,l,n,q)}}}(),mouse:{x:-1,y:-1,update:function(a){try{gx.lang.emptyObject(a.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY):0<a.touches.length&&(this.x=a.touches[0].pageX,this.y=a.touches[0].pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_deinit:function(){this.lastEvent=
this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}}}(gx.$);
gx.csv_i=function(g){var a=function(b,d,c,f){f=[];for(var l=0;l<b.length;l++)f.push(d.validControl.apply(d,b[l]));g.when.apply(g,f).done(c)};return{GX_OLD_VALUE_ATTRIBUTE:"data-gxoldvalue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:0,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,
validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],resetRow:function(){gx.csv.lastEvtRow=null;gx.csv.validatingGrid=null;gx.csv.instanciatedRowGrid=null},isvalidating:function(){return 0<gx.csv.validating},validateAll:function(b){var d=g.Deferred();b=b||gx.O;this.validControls(b.fromValid,b.toValid,!1,b).done(function(c,f){try{null!=this.invalidControl&&gx.csv.stopOnError||
(b.fromValid=f||b.toValid)}catch(l){gx.dbg.logEx(l,"gxapi.js","validateAll")}d.resolve()}.closure(this));return d.promise()},validControls:function(b,d,c,f,l){var n=g.Deferred(),q=[],r=0,v=0,t=0,y=gx.csv.fullGridValidation&&1<=d-b&&gx.O.isTransaction();f=f||gx.O;f.startFeedback();var B=function(H,L){gx.csv.stopOnError&&(-1!=L?(H=gx.fn.validStruct(L,f),H=gx.fn.getControlGridRef(H.fld,H.grid),gx.csv.disableFocus=document.activeElement!==H,gx.fn.isAccepted(H,f)?gx.fn.setFocus(H):gx.fn.setFocus(gx.evt.lastControl)):
gx.dom.isButton(gx.csv.lastControl)||null==gx.csv.validActivatedControl||gx.fn.setFocus(gx.csv.validActivatedControl))};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;var u=null;if(d>b){y&&(u=gx.fn.validStruct(b),void 0!=u&&void 0!=u.lvl&&(r=u.lvl),u=gx.fn.validStruct(d),void 0!=u&&void 0!=u.lvl&&(v=u.lvl));q=[];for(var w=b;w<d;w++){u=gx.fn.validStruct(w);var z=null;if(u){var C=gx.fn.currentGridRowImpl(u.grid);var F=!!u.hasRVFmt;z=1==u.isuc?u.uc.getRealControl():
gx.fn.getControlGridRef(u.fld,u.grid)}else F=!1;if(z&&z.GXFormatError&&!0===z.GXFormatError&&!F){var G=w;break}q.push([w,c,f,C,l]);if(y&&w>b&&w<d&&void 0!=u&&void 0!=u.lvl&&(t=u.lvl,t!=r&&t!=v&&u&&u.grid)){var k=gx.fn.getGridObj(u.grid),m=k.grid.rows.length,p=gx.fn.currentGridRowImpl(u.grid),x=gx.fn.lastGridControl(u.grid);if(w==x){var A=gx.fn.firstGridControl(u.grid);for(z=0;z<m;z++){var D=k.grid.rows[z],E=D.gxDeleted(),I=D.gxExists(),J=D.gxIsMod();if(!E&&(I||J)&&D.gxId!=p)for(var K=A;K<=x;K++)q.push([K,
c,f,p,D.gxId])}}}}if(0<q.length)return gx.evt.setProcessing({status:!0,ctx:"validControls"}),a(q,this,function(){for(var H=!0,L=-1,N=0,O=arguments.length;N<O;N++){var P=arguments[N].ret;if(H&&!P){L=arguments[N].ctrl;H=!1;break}}B(H,L);gx.evt.setProcessing({status:!1,ctx:"validControls"});f.endFeedback();n.resolve(H,G)}),n.promise()}B(!0,-1);f.endFeedback();n.resolve(!0,G)}catch(H){gx.dbg.logEx(H,"gxapi.js","validControls")}return n.promise()},validControl:function(b,d,c,f,l){var n=g.Deferred();c=
c||gx.O;var q=gx.fn.validStruct(b,c),r=!0;if(void 0!=q){if(0!=q.grid){var v=f?f:gx.fn.currentGridRowImpl(q.grid);gx.lang.emptyObject(v)||gx.fn.setCurrentGridRow(q.grid,v)}1==q.isuc?(v=0!=q.grid?f?f:gx.fn.currentGridRowImpl(q.grid):null,q.getUCInstance(v),q.uc.execC2VFunctions()):"function"==typeof q.c2v&&q.c2v();"function"==typeof q.v2bc&&q.v2bc.call(c);try{if(0==q.lvl||0!=q.grid&&gx.fn.gridRowIsMod(q.lvl,gx.fn.currentGridRow(q.grid))||!c.isTransaction()){var t=null;if(t=1==q.isuc?q.uc.getRealControl():
gx.fn.getControlGridRef(q.fld,q.grid))return this.validate(t,b,d,c,f,l).done(function(y){try{var B=!1,u=!0,w=-1;0!=q.grid&&(B=gx.fn.rowIsRemoved(q.grid,gx.fn.currentGridRow(q.grid)));y||B||(gx.csv.invalidControl=t,gx.csv.invalidId=b,u=!1,w=b);gx.csv.lastId=b;0==gx.fn.isAccepted(t)&&(gx.evt.executeOnblur(b,t),t.getAttribute("data-gxhiddenonchange")!=t.value&&(t.setAttribute("data-gxhiddenonchange",t.value),gx.evt.execOnchange(t,!1,!0)))}catch(z){gx.dbg.logEx(z,"gxapi.js","validControl - callback")}n.resolve({ret:u,
ctrl:w})}),r=!1,n.promise()}}catch(y){gx.dbg.logEx(y,"gxapi.js","validControl")}}r&&n.resolve({ret:!0,ctrl:-1});return n.promise()},validate:function(b,d,c,f,l,n){var q=g.Deferred();f=f||gx.O;var r=!0;gx.csv.anyError=!1;var v=gx.fn.validStruct(d,f);if(void 0==v)return q.resolve(!0),q.promise();gx.csv.refreshVars(v,f);if(null==v.fnc&&null==v.isvalid){if("SELECT"!=b.tagName&&"checkbox"!=b.type&&!gx.evt.eachKeyAutorefreshType(v.type)&&!gx.lang.emptyObject(v.rgrid)){r=v.rgrid.length;for(var t=0;t<r;t++)v.rgrid[t].filterVarChanged()}q.resolve(!0);
return q.promise()}try{-1==d||!c&&"1"==b.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||(gx.csv.currentId=d,gx.evt.startValidation(v.gxgrid,!0),gx.csv.refreshVars(v),c=function(y){1==f.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=b),gx.csv.anyError=!0,f.AnyError=0);gx.csv.anyError&&(y=!gx.csv.anyError);if(!y)return gx.evt.endValidation(),q.resolve(!1),q.promise();gx.csv.refreshControls(v,f,l);gx.csv.invalidateDeps(d,f);if(!gx.lang.emptyObject(v.rgrid)&&!gx.lang.emptyObject(v.hc)){y=
v.rgrid.length;for(var B=0;B<y;B++)v.rgrid[B].filterVarChanged()}var u=gx.fn.isAccepted(b,!1,f),w=function(){q.resolve(!0);try{if(!n){var F=gx.dom.byId(b.id);u?gx.fn.setControlGxValid(F,"1"):gx.fn.setControlGxValid(F,"0")}gx.evt.endValidation()}catch(G){gx.dbg.logEx(G,"gxapi.js","validate")}};if(null!=v.isvalid&&u&&"1"!=b.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!n)if(B=v.gxgrid?v.gxgrid:null,y=v.isvalid,gx.pO.supportAjaxEvents){B=v.gxgrid?v.gxgrid.gridId:!1;var z=f.isServerEvent(y);y?gx.evt.dispatcher.dispatch(f.getServerEventName(y),
f,B,l,z).done(w).fail(w):f[y](l).then(w)}else{var C=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=B;f[y](l).then(function(){gx.csv.instanciatedRowGrid=C;w()})}else w()},r=!1,v.isuc?c.call(this,v.fnc.call(v.uc)):null!=v.fnc?(t=v.fnc.call(f))&&t.done?t.done(c.closure(this)):c.call(this,t):c.call(this,!0))}catch(y){gx.dbg.logEx(y,"gxapi.js","validate")}r&&q.resolve(!0);return q.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var b=gx.fn.controlIds(),d=b.length,c=0;c<d;c++){var f=
gx.fn.validStruct(b[c]);f&&f.fld&&!f.isuc&&(f=gx.fn.getControlGridRef(f.fld,f.grid),this.invalidateGXCtrl(f,!1))}},invalidateGXCtrl:function(b,d){"undefined"===typeof d&&(d=!0);b&&(1!=b.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)||d&&!gx.csv.controlValueHasChanged(b)||gx.fn.setControlGxValid(b,"0"))},invalidateCtrl:function(b,d){try{this.invalidateGXCtrl(b);var c=gx.fn.validStruct(gx.O.focusControl);if(c&&0!=c.grid&&(!0===d||gx.evt.keyModifiesValue(d))){var f=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(c.grid)||
"0001";c.gxgrid.setRowModified(f)}}catch(l){gx.dbg.logEx(l,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(b,d){for(var c=gx.fn.controlIds(d),f=c.length,l=0;l<f;l++){var n=c[l];if(n>b){n=gx.fn.validStruct(n,d);for(var q=n.ip?n.ip.length:0,r=0;r<q;r++)if(n.ip[r]==b)if(0==n.grid){var v=gx.fn.getControlGridRef(n.fld,n.grid);v&&gx.fn.setControlGxValid(v,"0")}else{var t=gx.fn.getGridObj(n.grid);if(t)for(var y=t.grid.rows.length,B=0;B<y;B++){v=t.grid.rows[B];var u=v.gxDeleted(),w=v.gxExists();!u&&
w&&(t.setRowModified(v.gxId),(v=gx.fn.getControlRef(n.fld+"_"+v.gxId))&&gx.fn.setControlGxValid(v,"0"))}}}}},controlValueHasChanged:function(b,d,c){if(!b)return!1;"undefined"===typeof d&&(d=b.value);var f=b.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE),l=gx.applyPicture(c,f,b);return null===f||l!==gx.applyPicture(c,d,b)||gx.evt.fixWebKitOnFocus()&&"radio"===b.type},setFormatError:function(b,d){b=gx.dom.el(b);if(b.id){var c=void 0!==this.gxFormatErrors[b.id];d||"undefined"==typeof d?(c||(this.gxFormatErrors[b.id]=
this.gxFormatErrors.push(b.id)-1),b.GXFormatError=!0):(c&&this.gxFormatErrors.splice(this.gxFormatErrors[b.id],1),delete this.gxFormatErrors[b.id],b.GXFormatError=!1)}},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var b=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var d=gx.fn.validStruct(gx.O.focusControl);
if(d&&d.nac&&1==d.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var c=gx.fn.searchFocusFwd(cn);null!=c&&gx.fn.setFocus(c);gx.setVar("Gx_mode",b);return!0}gx.setVar("Gx_mode",b)}catch(f){}return!1},loadScreen:function(b){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0,void 0,void 0,b,!1))}catch(d){gx.dbg.logEx(d,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(b,
d){var c=d||gx.O;return c&&c.IsMasterPage&&0!=b.indexOf("MP")&&(c=this.CTRL_ROW_INDEX_REGEXP.exec(b))&&1<c.length?(b=c[1],d=2<c.length?"_"+c[2]:"",b+(-1===b.indexOf("_MPAGE")?"_MPAGE":"")+d):(d=(d?d.CmpContext:this.cmpCtx)||"")&&0==b.indexOf(d)||0<=b.search(gx.GxObject.CONTROL_CMP_REGEX)?b:d+b},isProperty:function(b){return b instanceof Array&&2==b.length||"object"==typeof b&&"undefined"!=typeof b[0]&&"undefined"!=typeof b[1]?!0:!1},checkGridChange:function(b,d,c,f){if(b){var l=b.gridId;b=gx.fn.currentGridRowImpl(l);
gx.csv.validGridRowChange(l,b,c,b).done(function(){var n=c.getGridById(l,f);gx.csv.checkGridChange(n.parentGrid,!0,c,f)})}},checkRowChange:function(b,d,c,f){var l=g.Deferred();try{var n=gx.fn.validStruct(b,c);if("undefined"!=typeof n){var q=n.grid;if(0!=q){var r=gx.fn.currentGridRowImpl(q);if(r&&(r!=f||d)&&1<r.length&&f&&1<f.length){gx.csv.rowChanged=!0;var v=c.Gx_BScreen;c.Gx_BScreen=1;gx.csv.validGridRowChange(q,r,c,f).done(function(t){t&&(t=c.getGridById(q,f))&&(t.instanciateRow(r),t.parentGrid&&
gx.csv.checkGridChange(t.parentGrid,!0,c,f));c.Gx_BScreen=v;l.resolve(!0)})}else l.resolve(!1);void 0!=r&&gx.fn.setCurrentGridRow(q,r)}else l.resolve(!1)}else l.resolve(!1)}catch(t){gx.dbg.logEx(t,"gxfrmutl.js","checkRowChange")}return l.promise()},validGridRow:function(b,d){void 0!=d&&gx.fn.setCurrentGridRow(b,d);d=gx.fn.firstGridControl(b);b=gx.fn.lastGridControl(b);gx.csv.validControls(d,b+1,!0,gx.O)},validGridRowChange:function(b,d,c,f){var l=g.Deferred();void 0!=f&&gx.fn.setCurrentGridRow(b,
f);var n=gx.fn.firstGridControl(b,c),q=gx.fn.lastGridControl(b,c);f=!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(d)&&f.length==d.length&&parseInt(f)>parseInt(d);gx.csv.anyFormatError()?(c=gx.csv.gxFormatErrors,gx.csv.invalidForcedCtrl=gx.csv.invalidForcedCtrl||{},gx.csv.invalidForcedCtrl.Ctrl=gx.dom.el(c[0]),gx.csv.invalidForcedCtrl.ForceFocus=!0,gx.fn.setFocus(gx.csv.invalidForcedCtrl.Ctrl),l.resolve(!1)):gx.csv.validControls(n,q+1,!0,c,f).done(function(r){!r&&gx.csv.stopOnError||gx.csv.changeGridRow(b,
n,d);l.resolve(r)});return l.promise()},changeGridRow:function(b,d,c){gx.csv.lastId=d;gx.O.fromValid>d&&(gx.O.fromValid=d);gx.csv.lastRow[b]=c;Gx_BScreen=1},targetRowIsMod:function(b){return(b=gx.fn.validStruct(b))?gx.fn.gridRowIsMod(b.lvl,gx.fn.currentGridRow(b.grid)):!1},refreshVars:function(b,d){for(var c=b.ip?b.ip.length:0,f=0;f<c;f++)try{"function"==typeof gx.fn.validStruct(b.ip[f],d).c2v&&gx.fn.validStruct(b.ip[f],d).c2v()}catch(l){gx.dbg.logEx(l,"gxapi.js","refreshVars")}},refreshControls:function(b,
d,c){for(var f=b.op?b.op.length:0,l=0;l<f;l++)try{var n=gx.fn.validStruct(b.op[l],d),q=null;if(0==n.grid)gx.fn.v2c(n),q=gx.dom.el(gx.csv.ctxControlId(n.fld));else{var r=gx.fn.currentGridRowImpl(n.grid);gx.text.endsWith(c,r)&&(gx.fn.v2c(n),q=gx.fn.getControlGridRef(n.fld,n.grid))}q&&gx.fn.setControlGxValid(q,"0")}catch(v){gx.dbg.logEx(v,"gxapi.js","refreshControls")}f=b.ucs?b.ucs.length:0;for(l=0;l<f;l++)try{gx.fn.validStruct(b.ucs[l],d).uc.execV2CFunctions(!0)}catch(v){gx.dbg.logEx(v,"gxapi.js","refreshControls")}},
setValidValues:function(b,d,c){var f=[];if(1<c.length-d.length){var l=gx.json.evalJSON(c[c.length-1]);for(h in l)gx.fn.setHidden(h,l[h]);f=gx.json.evalJSON(c[c.length-2])}l={};b={fields:b,msgs:f};gx.O.cmpCtx?l[gx.O.cmpCtx]=b:l.MAIN=b;gx.fn.setErrorViewer(l);if(!gx.O.AnyError){var n=!1;b=d.length;for(l=0;l<b;l++){var q=d[l];f=c[l];if(this.isProperty(q)){var r=gx.fn.vStructForVar(q[0])||gx.O.getValidStructFld(q[0]);null!=r&&gx.fn.setCtrlProperty(r.fld,q[1],f)}else if(r=gx.fn.validStruct(this.currentId),
gx.lang.emptyObject(r)||gx.lang.emptyObject(r.hc)||(r.hc==q?(gx.O[r.hc]=f,gx.fn.setHidden(this.cmpCtx+"GXH_"+r.fld,f)):r.hd==q&&(gx.O[r.hd]=f)),r=gx.fn.vStructForVarWId(q,this.currentId),gx.lang.emptyObject(r)){r=gx.fn.vStructForHC(q);if(null!=r){var v="";0!=r.grid&&(v="_"+gx.fn.currentGridRow(r.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+r.fld+v,f)}r=gx.fn.gridObjFromGxO(q);void 0!=r?(n=!0,r.loadGrid({rowProps:f})):gx.fn.saveLvlOldParm(q,f)&&(gx.setVar(q,f),gx.fn.setGridHidden(q,f))}else q=gx.fn.screen_CtrlRef(r.fld),
!gx.lang.emptyObject(q)&&f instanceof Object&&("SELECT"==q.tagName?(-1!=q.selectedIndex&&gx.fn.invalidEmptyValue(f)&&(f.s=q.options[q.selectedIndex].value),v=gx.dom.id(q),gx.fn.loadComboBox(v,f.v),gx.fn.setComboBoxValue(v,f.s)):gx.lang.emptyObject(f.s)||(f.s=gx.fn.trimSelectValue(f.s,r.type)),v=gx.fn.selectedDescription(f,r.type),f=gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(q.value)?q.value:"SPAN"!=q.tagName||gx.lang.emptyObject(f.s)||gx.lang.emptyObject(v)?f.s:v,gx.fn.setControlValue_span_safe(this.cmpCtx+
r.fld,f,0)),r.v2v&&(r.v2v(f),gx.fn.v2c(r,f,"bits"==r.type))}}gx.O.refreshOlds();gx.fn.enableDisableDelete(gx.O);n&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=this.lastControl=null}}}(gx.$);
gx.http_i=function(g){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(a,b){return"{"!=b[0]&&200==a.status&&0!=a.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+
a.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(a,b,d){null!=gx.dom.el(a,!1,!0,!0)?gx.fn.setControlValue_impl(a,b):d&&(gx.dom.createInput(a,"hidden"),gx.fn.setControlValue_impl(a,b))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=null;this.viewStateLoaded=!1;g(gx.dom.el("GXState")).val("{}")},applyWellKnownPtys:function(){gx.wpo(function(){this.viewState.FORM_Caption&&gx.fn.setCtrlPropertyImpl(document,
"Caption",this.viewState.FORM_Caption)},this)},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=!0;this.applyWellKnownPtys()}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a);a=b;this.useBase64State&&(a=gx.base64.encode(b));b=
gx.dom.el("GXState");null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var b=
a.getControlIdsh();if(null!=b){var d="";a.IsComponent&&null!=a.CmpContext&&(d=a.CmpContext);for(var c="",f=0;f<b.length;f++)if((validStruct=a.getValidStruct(b[f]))&&"function"==typeof validStruct.val){var l=gx.fn.getControlValue_impl(d+validStruct.fld);c="checkbox"==validStruct.ctrltype&&""==gx.text.trim(l)?c+validStruct.val():c+l}gx.http.createHsh(d+"GXHSH11",c)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");b=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,b)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(a){a+="=";for(var b=document.cookie.split(";"),d=b.length,c=0;c<d;c++){for(var f=b[c];" "==f.charAt(0);)f=f.substring(1,f.length);if(0==f.indexOf(a))return f.substring(a.length,f.length)}return null},setCookie:function(a,b,d,c,f){d=d||1;var l=[];d=new Date((new Date).getTime()+864E5*d);l.push(a+"="+escape(b));f&&l.push("path="+f);l.push(c?"session":"expires="+d.toGMTString());"https:"===location.protocol&&
(l.push("secure"),l.push("samesite=none"));document.cookie=l.join(";");return this.getCookie(a)==b},checkResponseStatus:function(a,b){return a.status==this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(b),!0):this.isBadResponse(a)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",a.status)),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.timeoutActions.warn&&
gx.http.reloadOnTimeout(b),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&b&&a&&gx.pO.AjaxSecurity&&a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(a){if((a||gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?
this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,b,d,c,f){f=void 0===f?!0:f;c=c||gx.O;var l=gx.popup.getPopup();if(null!=l&&gx.util.sameAppUrl(a)&&(l=l.window.gx.popup.lvl,-1!=l)){var n=gx.http.urlParameterPrefix(a);n+=encodeURIComponent("gxPopupLevel="+l+";");a+=n}f&&!gx.isabsoluteurl(a)&&(a=gx.absoluteurl(a));b?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=c?c.endFeedback():gx.ajax.enableForm()},200);gx.spa.started&&!d?(gx.spa.redirect(a),gx.pO!=c?c.endFeedback():
gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&(a=new XMLHttpRequest);if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,b){b=b||gx.http.postDataFormat.HTTP;var d=b==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)d=a.reqData;else{a=a.formNode;a="Form"==a.tagName?a.elements:g("input[type!=file],textarea,select");for(var c=a.length,
f=0;f<c;f++){var l=gx.http.elementPostData(a[f],b);null!=l&&(b==gx.http.postDataFormat.HTTP?d.push(l):d[l[0]]=l[1])}}gx.lang.isArray(d)&&b==gx.http.postDataFormat.HTTP&&(d=d.join("&")+"&");return d},elementPostData:function(a,b){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var d="";if("select-multiple"==a.type)for(var c=a.options.length,f=0;f<c;f++)a.options[f].selected&&(d=a.options[f].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)d=a.value;else{if("radio"==
a.type)return null}else d="image"===a.type?a.src:this.element_gxvalue(a);return b==gx.http.postDataFormat.HTTP?encodeURIComponent(a.name)+"="+encodeURIComponent(d):[a.name,d]},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,dt.HasDatePart=0<a.gxtype.len,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){if(a.readyState==this.STATE_DONE){if(a.status==this.STATUS_OK||b.handleAllStatusCodes){var d=
new gx.util.Url(a.responseURL);if(gx.text.endsWith(d.path,".html")){window.location.href=a.responseURL;return}this.isOffline(a)&&(this.handleOffline(a),b.offline&&b.offline.call(b.obj||window,a,b));this.doCallHandler(a,b)}else gx.http.checkResponseStatus(a,b.warnOnTimeout)||gx.lang.doCallTimeout(gx.dom.writeError,document,[a.responseText,gx.getMessage("GXM_runtimeappsrv"),a.status],50);b.always&&b.always.call(b.obj||window,a,b);window.gx&&(gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog())}},
onRequestError:function(a,b){b.error&&b.error.call(b.obj||window,a,b);b.always&&b.always.call(b.obj||window,a,b);gx.evt.setProcessing({status:!1,cond:!gx.csv.isvalidating(),ctx:"onRequestError"});a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a,b.warnOnTimeout):this.isBadResponse(a)&&gx.http.reloadOnTimeout(b.warnOnTimeout)},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){a.gxInitiator=gx.util.executionContext.getContext();
gx.util.alert.hide();a.handler||"function"!=typeof a.load||(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&!a.sync){var d=gx.http.doHandleRequest.closure(this,[b,a]),c=gx.http.onRequestError.closure(this,[b,a]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?b.onreadystatechange=d:(b.onload=d,b.onerror=c)}d=null;"POST"==a.method&&
(d=gx.http.getPostData(a));c=!1!==a.avoidCache?this.uncache(a.url):a.url;b.open(a.method,c,!a.sync);!1!==a.ajaxHeader&&b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&gx.AjaxSecurity&&gx.OnSessionTimeout==gx.timeoutActions.ignore&&b.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(b,a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||window,b);try{b.send(d)}catch(f){gx.dbg.logEx(f,
"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a);return b}}return null},doCallHandler:function(a,b){if(!b.gxInitiator||!gx.util.executionContext.changedContext(b.gxInitiator))if(b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a),window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){gx.http.saveState(!0);this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");b.setAttribute("action",
a.url);a.oldTarget=b.getAttribute("target");b.setAttribute("target",this.iframeName);a.reqData&&(gx.http.saveHidden("GXAjaxMultipart",a.reqData,!0),this.setSecurityToken(null,a.gxO));b.submit()},setSecurityToken:function(a,b){(b=gx.ajax.getSecurityToken(b))&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",b.value,!0):a.setRequestHeader("X-GXAUTH-TOKEN",b.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?
"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.byId(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe id="'+a+'" name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top="0px",b.style.height="1px",b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,
this.iFrameloadEventName(),gx.http.iframeOnload);return b},iFrameJsonResponse:function(a){return g(a).find("input[data-response-content-type='application/json']").val()},captureIframeHTTPStatusCode:function(a){var b=/HTTP Status (\d\d\d)/gi,d=0;a.title&&(a=b.exec(a.title),0<a.length&&(d=Number(a[1])));return{status:d}},iframeOnload:function(){var a=gx.dom.byId(gx.http.iframeName);if(!gx.http.useReadyStateEvent()||"complete"==a.readyState)if(a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&
(a=a.frameElement),a)try{gx.http.useReadyStateEvent()&&(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,d=b.formNode;d.setAttribute("action",b.oldAction);d.setAttribute("target",b.oldTarget);var c=a.contentDocument?a.contentDocument:a.contentWindow.document;if(c){var f=c.body,l=gx.http.iFrameJsonResponse(f),n=!gx.lang.emptyObject(l);n||(n=gx.dom.allChildrenAreText(f))&&(l=gx.http.multipartResponse(f));if(n){var q=gx.base64.decode(l);gx.http.clearMultipartHidden();
b.handler(null,q,b);if(window.gx&&"function"===typeof b.onReady)b.onReady();b.always&&b.always.call(b.obj||window,null,b)}else{var r=gx.http.captureIframeHTTPStatusCode(c);gx.http.checkResponseStatus(r,b.warnOnTimeout)||document.write(c.documentElement.innerHTML)}}}catch(v){a="Unknown error";d=gx.getMessage("GXM_NetworkError").replace("%1","NoStatusCode");gx.text.startsWith(v.message,"Blocked a frame with origin")&&(a="Upload File Changed",d=gx.getMessage("GXM_FileUploadFileChanged"),g('input[type="file"]').val(""));
gx.dbg.logEx(v,"gxapi.js","FileUpload error: "+a);if(b.error)b.error.call(b.obj||window,null,b);else if(gx.fx.obs.notify("gx.afterNonFullajax"),window.gx&&"function"===typeof b.onReady)b.onReady();b.always&&b.always.call(b.obj||window,null,b);gx.util.alert.showError(d)}},multipartResponse:function(a){var b="";try{b=g(a).text()}catch(d){gx.dbg.logEx(d,"gxapi.js","multipartResponse")}return b},uncache:function(a){var b=(new Date).getTime();return a+gx.http.urlParameterPrefix(a)+"gx-no-cache="+b},callBackend_simple:function(a,
b,d,c,f,l,n,q){gx.http.callBackend_impl(void 0,a,b,gx.http.modes.none,d,c,f,l,n,q)},callBackend:function(a,b,d,c,f,l,n,q,r,v,t){gx.http.callBackend_impl(a,b,c,f,l,n,q,r,v,t)},callBackend_impl:function(a,b,d,c,f,l,n,q,r,v,t){var y=this.getRequest();v=v||{};if(y){try{var B=gx.O;f||B.startFeedback();l="undefined"!=typeof l?l:"GET";n="undefined"!=typeof n?n:null;r="undefined"!=typeof r?r:!1;q||(b=this.uncache(b));y.open(l,b,r);y.setRequestHeader(gx.ajax.reqHeader,"2");for(var u in v)y.setRequestHeader(u,
v[u]);try{"POST"==l?y.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.timeoutActions.ignore&&y.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(z){gx.dbg.logEx(z,"gxapi.js","callBackend_impl: gx.O cannot be null")}var w=function(){f||B.endFeedback();this.lastStatus=y.status;this.lastResponse=y.responseText;if(y.readyState!=this.STATE_DONE||y.status!=this.STATUS_OK)gx.http.checkResponseStatus(y)||(window.status=
"GXAjax HTTP error: ("+y.status+") - "+y.statusText,gx.dbg.logEx(y.responseText),t&&t());else if(c!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(c==this.modes.full)this.handleFull(this.lastResponse);else if(c==this.modes.call)return this.handleCall(this.lastResponse,a);return this.handleRetVal(this.lastResponse,a,d)}catch(z){gx.dbg.logEx(z,"gxapi.js","callBackend"),t&&t()}}else window.status="GXAjax HTTP error: (bad response format)",
t&&t()}.closure(this);r&&(gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?y.onreadystatechange=w:y.onload=w);y.send(n);r||w()}catch(z){window.status="GXAjax HTTP error: "+z.message}window.status=""}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b){if(b){var d=g.parseJSON(a);if(gx.lang.isArray(d))return b(d);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},handleRetVal:function(a,b,d){var c=
gx.json.evalJSON(a),f=c[0];this.lastStatus=c[1];void 0==this.lastStatus&&(this.lastStatus=0);if(b&&(d||null==this.lastStatus||0==this.lastStatus)){d=g.parseJSON(a);if(gx.lang.isArray(d))return b(d);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}else return f},postHandler:function(a,b,d,c){try{if(gx.csv.lastEvtResponse=null,200>d.status||299<d.status)gx.dom.writeError(d.responseText,gx.getMessage("GXM_runtimeappsrv"),d.status);else if(gx.http.validJsonResponse(d,
b)){var f=gx.json.evalJSON(b);null==f?gx.dom.writeError(b.toString(),gx.getMessage("GXM_runtimeappsrv"),d.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=f,gx.fn.forceEnableControls(!0),f.rowId=this.rowId,f.gridId=this.gridId,gx.ajax.setPostResponse(f,gx.O,c).done(function(l){l||(gx.fx.obs.notify("gx.onafterevent",[f]),gx.fx.obs.notify("gx.afterNonFullajax"))}))}}catch(l){gx.dbg.logEx(l,"gxapi.js","postHandler")}},encodeUriSegment:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},
formatLink:function(a,b,d){a=gx.ajax.objectUrl(a);if(b&&0<b.length){var c=",",f="";d&&(c="&");a+="?";for(var l=b.length,n=0;n<l;n++)0<n&&(a+=c),d&&(f=d[n]+"="),a+=f+gx.http.encodeUriSegment("function"==typeof b[n].getUrlVal?b[n].getUrlVal():b[n])}return a},loadScripts:function(a,b,d,c){"undefined"==typeof d&&(d=0);d>=a.length?b():gx.http.loadScript(a[d],function(f,l,n){gx.http.loadScripts(f,l,n+1,c)}.closure(this,[a,b,d]),c)},loadStyle:function(a,b,d,c,f){if(c=f?document.querySelector('style[data-gx-href="'+
c+'"]'):c?gx.dom.byId(c):null)c.href=a;else{var l=gx.dom.byTag("head")[0];f?(c||(c=document.createElement("style"),c.setAttribute("data-gx-href",a)),c.innerHTML='@import url("'+a+'") layer('+f+")"):(c=document.createElement("link"),c.rel="stylesheet",c.type="text/css",c.href=a);"function"==typeof b&&(c.onload=b);d?(a=gx.getThemeElement(),g(c).insertBefore(a),gx.util.browser.isIE()&&g(a).insertAfter(c)):l.appendChild(c)}},applyDeferredStyles:function(){g("link[rel='preload'][as='style']").each(function(a,
b){b.rel="stylesheet"})},layerNaming:function(a){return a.replace(/\?\w*$/,"").replace(/[\/\.]/g,"_")},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var d=a[b];d=gx.util.resolveUrl(d);gx.cache.fileLoaded(d)||(gx.cache.addRemoteFile(d),this.loadStyle(d,void 0,!0,void 0,this.layerNaming(d)))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)},isOffline:function(a){return"1"===
a.getResponseHeader("X-GX-OFFLINE")},handleOffline:function(a){gx.util.alert.showError(gx.getMessage("GXM_OfflineUnsupported"))},useNamedParameters:function(a){return!1===gx.csv.useNamedParameters?!1:-1<a.indexOf("=")},urlParameterSeparator:function(a){return this.useNamedParameters(a)?"&":","},urlParameterPrefix:function(a){var b=a.indexOf("?");return-1<b?b==a.length-1?"":this.urlParameterSeparator(a):"?"}}}(gx.$);gx.$.extend(gx.evt,gx.evt_i);gx.$.extend(gx.csv,gx.csv_i);gx.$.extend(gx.http,gx.http_i);
var defaultConfig={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}},csv:{scrollTopOnError:!1}};gx.config=gx.$.extend({},defaultConfig,window.gxCustomConfig||{});var GlobalEvents=function(g){return{executeMethod:function(a,b){gx.fx.obs.notify(a,b);try{for(var d=window;null!=d&&d.parent!==d;)d=d.parent,d!=window&&d.gx&&d.gx.fx.obs.notify(a,b)}catch(c){}}}}(jQuery);
gx.util.browser.isIE()&&function(){function g(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return d}if("function"===typeof window.CustomEvent)return!1;g.prototype=window.Event.prototype;window.CustomEvent=g}();
gx.fx.obs.addObserver("gx.onload",gx,function(){var g={};gx.serviceWorkerUrl&&"serviceWorker"in navigator&&(gx.staticDirectory&&gx.basePath&&(g={scope:gx.util.resourceUrl(gx.basePath,!1)+"/"}),navigator.serviceWorker.register(gx.serviceWorkerUrl,g).then(function(a){console.log("Service Worker Registered:",gx.serviceWorkerUrl,"scope: ",a.scope)}))});
(function(g){function a(k,m){k=g(k);var p=k.is("SPAN,DIV");return k.attr(m)||(p?k.find("> a").first().attr(m):"")}var b=gx.GxObject.prototype;b.sPrefix=function(){return this.CmpContext};b.declareDomainHdlr=function(k,m){this.GXValidFnc[k].dom_hdl=m};b.setVCMap=function(k,m,p,x,A,D){this.VarControlMap[k]={id:m,grid:p,type:x,length:A,decimals:D}};b.setSDTMapping=function(k,m){this.SDTMap=this.SDTMap||{};this.SDTMap[k]=m;k={};for(var p in m)m[p].extr&&(k[m[p].extr]=p);m.extrn=k};b.applySDTVarMapping=
function(k,m){if(this.VarControlMap[m]&&this.VarControlMap[m].type)var p=this.VarControlMap[m].type;return this.applySDTMapping(k,p,!0)};b.applySDTMapping=function(k,m,p){if(k&&m){m=this.SDTMap?this.SDTMap[m]:void 0;var x;if(m){for(x in m.extrn)p?(k[m.extrn[x]]=k[x],delete k[x]):(k[x]=k[m.extrn[x]],delete k[m.extrn[x]]);for(x in m)if(m[x].sdt){var A=k[x]?k[x].length:0;if(A)for(var D=0;D<A;D++)this.applySDTMapping(k[x][D],m[x].sdt,p);else this.applySDTMapping(k[x],m[x].sdt,p)}}}return k};b.Initialize=
function(){this.InitStandaloneVars();gx.wpo(function(){this.initTargets()},this)};b.InitStandaloneVars=function(){var k=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=k&&gx.setGxO(k)};b.getCmpType=function(k){k=this.cmpRegex.exec(k);this.cmpRegex.lastIndex=0;return k};b.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);if(!this.CmpContext&&!this.IsMasterPage)return g(".gx-content-placeholder").get(0)||document.body;var k,m=this.getCmpType(this.CmpContext);
m&&(k=gx.dom.byId(m[1]+"gxHTMLWrp"+m[2]+(m[3]||"")));if(k)return k};b.setContainer=function(k){this.containerControl=k};b.setObjectType=function(k){this.ObjectType=k};b.getObjectType=function(){return this.ObjectType};b.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};b.setAjaxSecurity=function(k){this.AjaxSecurity=k};b.setOnAjaxSessionTimeout=function(k){switch(k){case "Warn":this.OnSessionTimeout=gx.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=
gx.timeoutActions.callObj}};b.addKeyListener=function(k,m){gx.evt.addKeyListener(this.CmpContext,k,m)};b.clearMessages=function(){this.MsgList.length=0};b.addMessage=function(k){this.MsgList.push(k)};b.showMessages=function(k){for(var m=[],p=this.MsgList.length,x=0;x<p;x++){var A=this.MsgList[x];"string"===typeof A?m.push({att:"",type:2,text:this.MsgList[x]}):m.push(A)}p={};p[""==this.CmpContext?"MAIN":this.CmpContext]=m;k?gx.fn.setErrorViewer(p,!1):gx.fn.setErrorViewer(p);this.clearMessages()};b.setPrompt=
function(k,m){gx.fn.attachCtrl(this.CmpContext+k,{id:k,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:m,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[k]=function(p){if((p=(p||gx.dom.el(k)).parentNode)&&p.href&&(p=p.href.match("javascript:(.+)"))&&1<p.length){p=decodeURIComponent(p[1]);try{eval(p)}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","setPrompt")}}}};b.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var k=[],m=gx.csv.lastEvtResponse.gxValues,
p=m.length,x=0;x<p;x++){var A=m[x];if(A.CmpContext==this.CmpContext&&gx.lang.booleanValue(A.IsMasterPage)==this.IsMasterPage){k.push(A);break}}gx.fn.setJsonValues(k)}};b.call=function(k,m,p,x){gx.nav.willRedirect(k)?(!1===gx.csv.useNamedParameters&&(x=void 0),this.postEventRedirect={url:gx.http.formatLink(k,m,x),forceDisableFrm:!1}):gx.nav.call.apply(gx.nav,arguments)};b.callUrl=function(k,m){gx.nav.willRedirectByUrl(k)?this.postEventRedirect={url:k,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,
arguments)};b.popupOpen=function(k){this.postEventPopupCommands.push({popup:gx.lang.clone(k)})};b.popupOpenUrl=function(k,m){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(k,m)})};b.refreshInputs=function(k){for(var m=k.length,p=0;p<m;p++){var x=this.getValidStructFld(k[p][1]);null!=x&&"function"==typeof x.c2v&&x.c2v()}};b.refreshOutputs_impl=function(k){for(var m=[],p=0,x=k.length;p<x;p++){var A=k[p];if(A.fld){var D=this.getValidStructFld(A.fld);if(null!=D)gx.fn.v2c(D),
A=gx.fn.getControlGridRef(D.fld,D.grid),gx.csv.invalidateGXCtrl(A),gx.fn.setControlOldValue(A,D.val());else{D=this.getVariable(A.av);if(null!=D&&"object"==typeof D){var E=this.getFormBCForVar(A.av);null!=E&&this.bcToScreen(E,D);(E=this.getGridForColl(A.av))&&E.refreshCollection(D)}gx.fn.setHidden(gx.csv.ctxControlId(A.fld,this),D)}}else A.ctrl&&m.push(A)}gx.uc.StartRender();p=0;for(x=m.length;p<x;p++)A=m[p],gx.uc.isUserControl(A.ctrl)&&(A.ctrl.execV2CFunctions(!1),A.ctrl.execShowFunction());gx.uc.EndRender()};
b.OnClientEventEnd=function(){gx.fn.usrSetFocus_commit()};b.refreshOutputs=function(k){var m=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(m.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<m.length&&gx.ajax.dispatchCommands(m);this.refreshOutputs_impl(k);this.showMessages()};b.refreshRowOutputs=function(k){this.refreshOutputs_impl(k)};b.refreshServerOutputs=function(k){for(var m=k.length,p=0;p<m;p++){var x=k[p],A=gx.fn.getHidden(this.CmpContext+
x.fld);void 0!=A&&((x=this.getValidStructFld(x.fld))&&x.v2v?(x.v2v(A),gx.fn.v2c(x,A)):this.setVariable(k[p].av,A))}};b.getContextObject=function(k){return null!=this.getValidStructFld(k)&&(k=gx.fn.getControlValue_impl(this.CmpContext+k),null!=k)?k:""};b.getValidStructId=function(k){if(!gx.lang.emptyObject(k))for(var m=this.getControlIds(),p=0;p<m.length;p++){var x=this.getValidStruct(m[p]);if(this.isSameField(x,k))return m[p]}return-1};b.getValidStructFld=function(k){if("function"==typeof k||"object"==
typeof k&&k.tagName)k="object"==typeof k&&"radio"===k.type&&k.name?k.name:gx.dom.id(k);var m=this.getValidStructFld_cache[k];if(m)return m;if(!gx.lang.emptyObject(k)){m=this.getControlIds();for(var p=m.length,x=0;x<p;x++){var A=this.getValidStruct(m[x]);if(this.isSameField(A,k))return this.getValidStructFld_cache[k]=A}}return this.getValidStructFld_cache[k]=null};b.isSameField=function(k,m){var p=k.fld;if(p==m)return!0;this.IsComponent&&0==m.indexOf(this.CmpContext)&&(m=m.substring(this.CmpContext.length));
0!=k.grid&&(m=m.replace(this.rowPatternRegex,""));this.IsMasterPage&&(p=p.replace(/_MPAGE$/,""),m=m.replace(/_MPAGE$/,""));return p==m};b.getUserFocus=function(){var k=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(k)&&"notset"!=k){var m=gx.dom.byId(k);if(!gx.lang.emptyObject(m)&&!gx.fn.isAccepted(m)){k=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var p=gx.O;gx.O=this;m=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=p;gx.csv.cmpCtx=k;k=gx.lang.emptyObject(m)?"":m.id}}if(gx.lang.emptyObject(k)){if(this.hasMasterPage()&&
(k=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(k)))return k;m=[];for(p=0;p<this.WebComponents.length;p++)if(0==this.WebComponents[p].CmpContext.indexOf("MP"))m.push(this.WebComponents[p]);else if(k=this.WebComponents[p].getUserFocus(),!gx.lang.emptyObject(k))return k;for(p=0;p<m.length&&(k=m[p].getUserFocus(),gx.lang.emptyObject(k));p++);}return k};b.getGridColumn=function(k,m){var p=null,x=gx.fn.controlGridId(k);0!=x&&(m=gx.O.getGridById(x,m))&&(p=m.grid.getColumnByHtmlName(k));return p};
b.hasMasterPage=function(){return null!=this.MasterPage};b.setComponent=function(k){this.CmpControls[k.id.toLowerCase()]=k};b.getComponentByPrefix=function(k){var m=g.map(this.CmpControls,function(p,x){return p.Prefix==k?p:null});return 1==m.length?m[0]:null};b.refreshGrid=function(k){(k=this.getGrid(k))&&k.doRefresh()};b.refreshComponent=function(k){var m=this.getWebComponent(this.CmpContext+this.getComponentData(k).Prefix);m?gx.evt.dispatcher.dispatch("REFRESH",m):(m=gx.fn.controlGridId(k),0!==
m&&(m=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(k).Prefix+gx.fn.currentGridRow(m)))&&gx.evt.dispatcher.dispatch("REFRESH",m))};b.getComponentPrefix=function(k){return(k=this.getComponentData(k))?k.Prefix||"":""};b.getComponentData=function(k){return this.CmpControls[k.toLowerCase()]};b.createWebComponent=function(k,m,p,x,A,D,E){D=D||this.getComponentPrefix(k);x||(k=gx.fn.controlGridId(k),x=0!==k?gx.fn.currentGridRow(k):"");A=A||this.CmpContext+"gxHTMLWrp"+D+x;D=this.CmpContext+D;
var I=gx.getObj(D,!1);I?I.startFeedback():(k=gx.dom.byId(A),k.firstChild&&gx.dom.mask(A));k=gx.gen.isJava()&&gx.pO.PackageName&&!gx.text.startsWith(m,"/")?gx.pO.PackageName+".":"";gx.ajax.dynComponent(k+m,p,D,x).done(function(J){J.DynComponentMap||(J.DynComponentMap={});J.DynComponentMap[D+x]=A;gx.ajax.setJsonResponse({response:J,isPostBack:!0,gxObject:I||gx.O,afterCmpLoaded:function(){E&&E(D)}});I?I.endFeedback():gx.dom.unmask(A)})};b.registerComponent=function(k){this.WebComponents[k.CmpContext]=
k;this.WebComponents.push(k)};b.setWebComponent=function(k,m){this.deleteComponent(k.CmpContext,k,!1);m&&this.restoreComponentHiddens(k.CmpContext,m);this.registerComponent(k);k.JustCreated=!0;gx.fn.setHidden(k.CmpContext,k.ServerClass);gx.fx.obs.notify("webcom.render",[k])};b.getWebComponent=function(k){return this.WebComponents[k]};b.deleteComponent=function(k,m,p){p="undefined"==typeof p?!0:p;var x=this.getWebComponent(k);if(x){var A=gx.gen.isJava()&&x.PackageName?x.PackageName+".":"";gx.cache.deleteInlineCode(k+
A+x.ServerClass.toLowerCase());p&&this.deleteComponentHiddens(k);gx.lang.emptyObject(m)||gx.fn.setHidden(m.CmpContext,m.ServerClass);x.ondestroy();delete this.WebComponents[k];m=this.WebComponents.length;for(p=0;p<m;p++)if(this.WebComponents[p].CmpContext==k){this.WebComponents.splice(p,1);break}for(m=gx.attachedControls.length;m--;)gx.attachedControls[m].info.wc===k&&gx.attachedControls.splice(m,1);m=this.WebComponents;for(var D in m)isNaN(parseInt(D))&&0===D.indexOf(k)&&this.deleteComponent(D)}};
b.deleteComponentHiddens=function(k){if(gx.lang.isArray(k)){if(0==k.length)return;k=gx.fn.getCmpRegex("("+k.join("|")+")")}else k=gx.fn.getCmpRegex(k);k=gx.fn.filterHiddens(k,gx.http.viewState);for(var m in k)m&&gx.fn.deleteHidden(m)};b.restoreComponentHiddens=function(k,m){k=gx.fn.getCmpRegex(k);m=gx.fn.filterHiddens(k,m);for(var p in m)p&&gx.fn.setHidden(p,m[p])};b.setCmpContext=function(k){void 0!=k&&(this.IsTypeComponent=!0,""!==k&&(this.IsComponent=!0),this.CmpContext=k)};b.getOldLvl=function(k){for(var m in this.LvlOlds)for(var p=
this.LvlOlds[m],x=p.length,A=0;A<x;A++)if(p[A]==k)return m;return-1};b.refreshDependantGrids=function(k){for(var m=this.Grids.length,p=0;p<m;p++)for(var x=this.Grids[p],A=x.refreshVars,D=A.length,E=0;E<D;E++)if(A[E].fld==k.fld){x.filterVarChanged();break}};b.getCtrlPropertyValue=function(k,m){var p=gx.fn.getCtrlProperty(k,m);void 0===p&&(p=gx.fn.getHidden(k+"_"+m));return p};b.setGrid=function(k){this.Grids[k.gridName]=k;this.GridsUpper[k.gridName.toUpperCase()]=k;var m=this.getGridIdxByName(k.gridName);
-1!=m?this.Grids[m]=k:this.Grids.push(k)};b.getGrid=function(k){k=k||"";return this.Grids[k]||this.GridsUpper[k.toUpperCase()]};b.getGridIdxByProp=function(k){for(var m=this.Grids.length,p=0;p<m;p++)if(k(this.Grids[p]))return p;return-1};b.getGridIdxByName=function(k){return this.getGridIdxByProp(function(m){return m.gridName===k})};b.getGridByBaseName=function(k){var m=this.getGridIdxByProp(function(p){return p.gridName===k||p.grid.GridBaseName===k});return-1===m?null:this.Grids[m]};b.getGridIdx=
function(k){for(var m=this.Grids.length,p=0;p<m;p++)if(this.Grids[p].gridId==k)return p;return-1};b.getGridById=function(k,m){m=m||"";for(var p=this.Grids.length,x=0;x<p;x++){var A=this.Grids[x];if(A.gridId==k&&(!A.parentRow||gx.text.endsWith(m,A.parentRow.gxId)))return A}return null};b.getGridForColl=function(k){k=this.getAllGridsForColl(k);return 0===k.length?null:k[0]};b.getAllGridsForColl=function(k){for(var m=this.Grids.length,p=[],x=0;x<m;x++){var A=this.Grids[x];A.boundedCollName==k&&p.push(A)}return p};
b.getFormBCForVar=function(k){for(var m in this.FormBCs){var p=this.FormBCs[m];if(p&&p.gxvar==k)return p}return null};b.getGridBC=function(k){var m=k;this.IsComponent&&0===k.indexOf(this.CmpContext)&&(m=k.substring(this.CmpContext.length));return this.GridBCs[m]};b.getFormBC=function(k){var m=k;this.IsComponent&&0===k.indexOf(this.CmpContext)&&(m=k.substring(this.CmpContext.length));return this.FormBCs[m]};b.addGridBCProperty=function(k,m,p,x){var A=this.getGridBC(k);"undefined"==typeof A&&(A={},
A.gxvar=x,this.GridBCs[k]=A);this.addBCProperties(A,m,p,x)};b.addBCProperty=function(k,m,p,x){var A=this.getFormBC(k);"undefined"==typeof A&&(A={},A.gxvar=x,this.FormBCs[k]=A);this.addBCProperties(A,m,p,x)};b.addBCProperties=function(k,m,p,x){if(k&&p)if(m instanceof Array)for(var A=m.length,D=function(I){var J=this[p.gxvar];gx.lang.emptyObject(p.hc)||(J=this[p.hc]);if("date"==p.type)J=(new gx.date.gxdate(J)).getString("Y4MD");else if("bitstr"===p.type&&gx.pO.fullAjax){var K=gx.fn.getControlGridRef(p.fld,
p.grid,I);K&&g(K).val()&&(J="gxformdataref:"+K.id)}this.valueToBCProp(this[x],m,p,J,I)},E=0;E<A;E++){if("undefined"==typeof k[m[E]])if(E<A-1)k[m[E]]={};else{k[m[E]]=p;"object"==typeof this[x]&&(p.v2bc=D);break}k=k[m[E]]}else"string"==typeof m&&(k[m]=p)};b.valueToBCProp=function(k,m,p,x,A){try{if(k){var D=m.length,E=A||"",I=A=0,J,K=function(H){if(gx.lang.isArray(H)&&p&&p.grid){var L=gx.fn.getGridObj(p.grid,E&&4===E.length?E:void 0);L=L&&L.grid&&!L.InfiniteScrolling?L.grid.firstRecordOnPage:0;J=E?E:
gx.fn.currentGridRow(p.grid);3<J.length&&(I+=1,J=J.substr(-4*I,4),H=H[Number(L||0)+Number(J)-1])}return H};for(k=K(k);k&&A<D-1;A++)k=K(k[m[A]]);k&&(A=m.length-1,k[m[A]]=x,void 0!==k[m[A]+"_N"]&&(k[m[A]+"_N"]=0))}}catch(H){gx.dbg.logEx(H,"gxfrmutl.js","valueToBCProp")}};b.bcToScreen=function(k,m){for(var p in k)if("gxvar"!=p)try{if("object"==typeof m[p])this.bcToScreen(k[p],m[p]);else{var x=k[p];(0==x.grid||gx.csv.validatingGrid&&x.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(x.hc)&&void 0!=
m[p]&&x.v2v&&(x.v2v(m[p]),gx.fn.v2c(x,m[p]))}}catch(A){gx.dbg.logEx(A,"gxfrmutl.js","bcToScreen")}};b.addGridUCEventHandler=function(k,m,p){gx.lang.emptyObject(this.GridUCsEvts[k])&&(this.GridUCsEvts[k]=[]);this.GridUCsEvts[k].push({e:m,h:p})};b.getGridUCEventHandlers=function(k){k=this.GridUCsEvts[k];return gx.lang.emptyObject(k)?[]:k};b.setGridUCDynProp=function(k,m,p,x,A){this.setGridUCProp(k,m,p,x,A)};b.setGridUCProp=function(k,m,p,x,A){gx.lang.emptyObject(this.GridUCsProps[k])&&(this.GridUCsProps[k]=
[]);this.GridUCsProps[k].push({p:m,h:p,v:x,t:A});"InternalTitle"==m&&(this.GridUCsProps[k].title=x)};b.getGridUCProperties=function(k){k=this.GridUCsProps[k];return gx.lang.emptyObject(k)?[]:k};b.addUsercontrolBinding=function(k,m,p){this.UCBindings[k]||(this.UCBindings[k]={fld:m,uc:[]},this.UCBindingsHiddens[m]=this.UCBindings[k]);gx.util.inArray(p,this.UCBindings[k].uc)||this.UCBindings[k].uc.push(p)};b.setUserControl=function(k){k.ContainerName&&(this.UserControls[k.ContainerName]=k)};b.getUserControl=
function(k){var m=this.UserControls[k];m||""==this.CmpContext||(m=this.UserControls[this.CmpContext+k]);return m};b.getUserControlGrids=function(){return g.map(this.Grids,function(k){if(k.grid&&k.isUsercontrol)return k.grid})};b.execV2CFunctions=function(k,m,p,x){p=void 0===p||p;m||(m=this.UserControls);var A=this;gx.uc.StartRender();g.each(m,function(D,E){!E||A!=E.ParentObject||!p&&E.GridId&&!E.gxGridName||x&&!x(E)||E.updateAndShow(k)});gx.uc.EndRender()};b.execC2VFunctions=function(){g.each(this.UserControls,
function(k,m){try{m.execC2VFunctions()}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","execC2VFunctions")}try{m.saveProperties()}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","execC2VFunctions")}})};b.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};b.setVariable=function(k,m){var p=this[k]=m;0!=k.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+k,m);if(void 0!=this.VarControlMap[k]){var x=this.VarControlMap[k].type;if("date"==
x||"dtime"==x)"string"==typeof m&&(m=new gx.date.gxdate(m),this[k]=m),"date"==x?p=m.getStringWithFmt("Y4MD"):(p=this.VarControlMap[k].decimals,p=m.getStringWithFmt("Y4MD")+" "+m.getTimeString(!0,!0,1<p,12<=p));"decimal"==x&&"."!=gx.decimalPoint?(p=m.toString().replace(".",gx.decimalPoint),"string"==typeof m&&(this[k]=gx.num.parseFloat(m))):"int"==x&&"string"==typeof m&&(this[k]=gx.num.parseInt(m));gx.fn.setHidden(this.CmpContext+this.VarControlMap[k].id,p)}"Gx_mode"==k&&this.setMode();void 0!=this.UCBindings[k]&&
gx.fn.setHidden(this.CmpContext+this.UCBindings[k].fld,m)};b.getVariable=function(k){return this[k]};b.isServerEvent=function(k){return this.Events[k][1]||!1};b.getServerEventName=function(k){return this.Events[k][0]||""};b.getClientEventName=function(k){for(var m in this.Events)if(this.Events[m][0]==k)return m;return""};var d={RFR:"REFRESH",RFR_MPAGE:"REFRESH"},c=[".CONTROLVALUECHANGED",".CONTROLVALUECHANGING"],f=function(k){for(var m=0;m<c.length;m++)if(0<=k.indexOf(c[m]))return!1;return!0};b.cleanEventName=
function(k){k=k.replace(new RegExp("^"+this.CmpContext),"");var m=(gx.pO.fullAjax?/^E('?(.*)\.?'?)/:/^E('?(\w+)\.?([^\.]*)'?)/).exec(k);k=m&&m.length&&1<m.length?m[1].replace(/\.\d*$/,""):k;return d[k]||k};b.inputHasFormatErrors=function(k,m,p){var x=this;m=this.cleanEventName(k);var A,D,E=!1;k=gx.csv.anyFormatError();var I;if(!this.fullAjax&&k)return!0;if(!k||!this.EvtParms[m]||!f(m))return!1;p=this.EvtParms[m][0];var J=this,K=function(O,P,M){var Q=P||Q,S=M||S;if(O)if(Q&&S&&O.grid==Q){if((A=gx.fn.getControlGridRef(O.fld,
Q,S))&&A.id&&void 0!==gx.csv.gxFormatErrors[A.id])return!0}else if((A=gx.fn.getControlGridRef(O.fld,O.grid))&&A.id)for(I in gx.csv.gxFormatErrors)if(O==J.getValidStructFld(I))return!0;return!1};m=0;for(len=p.length;m<len&&!E;m++){var H=p[m];if(H.postForm)return k;if(H.fld)if(D=this.getValidStructFld(H.fld))E=E||K(D);else{var L=this.getFormBCForVar(H.av);if(null!=L)for(var N in L)D=L[N],"object"===typeof D&&(E=E||K(D));(H=gx.O.getAllGridsForColl(H.av))&&H.some(function(O){var P=O.gridId;gx.O.GXValidFnc.filter(function(M){return M.grid===
P}).forEach(function(M){(D=x.getValidStructFld(M.fld))&&O.grid.rows.forEach(function(Q){E=E||K(D,P,Q.gxId)});return E})})}}return E};b.setEventParameters=function(k,m){gx.csv.lastEvtRow=null;gx.O=this;var p=!0,x=-1;gx.csv.cmpCtx=this.CmpContext;for(var A=k.length,D=0;D<A;D++){var E=k[D][0],I=k[D][1],J=k[D][2],K=!1;if(m instanceof u)this.setVariable(J,m.parms[D]),K=!0;else for(var H in m)if(H.toLowerCase()==E.toLowerCase()){this.setVariable(J,m[H]);K=!0;break}K||this.setVariable(J,m);E=this.getValidStructFld(I);
null!=E?(0!=E.grid&&-1==x?x=E.grid:0!=E.grid&&E.grid!=x&&(p=!1),gx.fn.v2c(E)):gx.fn.setHidden(this.CmpContext+I,this.getVariable(J))}p&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(x))};b.executeEvent=function(k,m,p,x,A){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var D=this.getClientEventName(k);(D?this.isServerEvent(D):1)?(A?(D=this.getGrid(A))&&p?D.instanciateRow(p):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,k=this.executeServerEvent(k,m,p,x,this.fullAjax&&!p&&!A)):k=gx.evt.execCliEvt(this.CmpContext,
this.IsMasterPage,D,A,p,"");gx.csv.instanciatedRowGrid=null;return k};b.executeServerEvent=function(k,m,p,x,A){var D=g.Deferred();gx.O=this;gx.csv.cmpCtx=this.CmpContext;var E=!0;void 0!=m&&0==m&&(E=!1);(m=null!=p&&(gx.csv.validatingGrid||gx.csv.instanciatedRowGrid))&&m.parentObject!=this&&(m=null);var I=gx.lang.emptyObject(m)?!1:m.gridId;p=p||gx.csv.lastEvtRow||"";A?(p="",I=null):(""==p&&I&&(p=gx.csv.lastRow[I]),"undefined"==typeof p&&(p=gx.fn.currentGridRowImpl(m.gridId)));gx.evt.execEvt(this.CmpContext,
this.IsMasterPage,this.CmpContext+"E"+k+"."+(p||""),gx.evt.dummyCtrl,I,E,null,null,function(){D.resolve()},x,function(){D.resolve()},!1);return D.promise()};b.executeEnterEvent=function(k,m,p){var x=this.gxOWithEnter(m),A=!1;if(m&&m.onblur)m.onblur();if((gx.pO.fullAjax||null==x)&&k&&gx.evt.cancelAndRefresh(k)){if(null==x||x.autoRefresh||!x.hasEnterEvent||x.anyGridBaseTable)return;A=!0}k?(gx.dom.hasSubmitControl()&&gx.evt.cancel(k,!0),m&&"INPUT"==m.nodeName&&gx.dom.isEditControl(m)&&gx.evt.cancel(k,
!0)):A=!0;if(null!=x){var D="ENTER";x.IsMasterPage&&(D+="_MPAGE");D=x.CmpContext+"E"+D+".";if(m&&gx.evt.isEnterEvtCtrl(m)){var E=gx.fn.controlRowId(m);var I=gx.fn.controlGridId(m.id);E&&(D+=E)}gx.evt.execEvt(x.CmpContext,x.IsMasterPage,D,gx.evt.dummyCtrl,I,!1,null,p,null,A,void 0,null!=x);k&&gx.evt.cancel(k,!0)}};b.gxOWithEnter=function(k){if(k&&(k=gx.fn.getControlContext(k))&&k.hasEnterEvent)return k;if(this.hasEnterEvent)return this;if(this.IsComponent){k=this.getCmpType(this.CmpContext);var m=
""==k[1]&&0==k[0].indexOf("MP");k=gx.getObj(k[1],m);if(!gx.lang.emptyObject(k))return k.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};b.getLastControlId=function(){return this.GXLastCtrlId};b.getValidStruct=function(k){return this.GXValidFnc[k]};b.getControlIds=function(){return this.GXCtrlIds};b.getControlIdsh=function(){return this.GXCtrlIdsh};b.getUsercontrolFromChild=function(k){g.each(this.UserControls,function(m,p){m=p.getContainerControl();if(gx.dom.isChildNode(k,
m))return p});return null};b.installFlatLevelDatePickers=function(){for(var k,m=this.getControlIds(),p=m.length,x=0;x<p;x++)k=this.getValidStruct(m[x]),void 0!=k&&0==k.grid&&void 0!=k.dp&&gx.fn.installDatePicker(this.CmpContext+k.fld,k,this,k.dp.f,k.dp.st,k.dp.wn,k.dp.mf,gx.fn.datePickerFormat(k.dp.pic,k.dp.dec,k.len),k.len,k.dp.dec)};b.installImageControls=function(){for(var k=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),m=0,p=k.length;m<p;m++)gx.html.multimediaUpload.createControl(k[m]);
k={};this.IsComponent&&(m=gx.pO.getWebComponent(this.CmpContext),k.observerKey=m&&m.getContainer()&&m.getContainer().id);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue,k)};b.initControlsEnabledFlag=function(k){if("bits"!=k.type&&"audio"!=k.type&&"video"!=k.type&&(k=gx.fn.getControlRef(k.fld))){var m=gx.http.viewState[gx.dom.id(k)+"_Enabled"];void 0!==m&&gx.fn.setEnabledProperty(k,gx.lang.gxBoolean(m),!1)}};b.initControlsBehaviour=function(){var k=this;g.each(gx.O.GXValidFnc,
function(m,p){p&&p.fld&&(k.initControlsEnabledFlag(p),p.gxsgprm&&(m=gx.fn.getControlRef(p.fld))&&gx.fx.installSuggest(m))})};var l=function(k){if(gx.lang.emptyObject(k))return!1;try{var m=new Function(gx.text.contains(k.toLowerCase(),"return")?k:"return "+k)}catch(p){return gx.lang.doEval(k)}try{return m()}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","evaluateCode")}return!1},n=function(k){var m=k.tagName.toLowerCase();return"img"==m||"input"==m?g(k).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR):g("a["+
gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR+"]",k).attr(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR)},q=function(){var k={select:!0,textarea:!0},m=gx.lang.apply({radio:!0,checkbox:!0,file:!0},gx.dom.editControls);return function(p){if(!p)return!1;var x=p.tagName.toLowerCase();return"input"==x?m[p.type.toLowerCase()]:k[x]}}(),r=function(k){return k&&"label"==k.tagName.toLowerCase()&&(k=k.getAttribute("for"))?(k=gx.dom.el(k),q(k)&&gx.fn.isVisible(k,0)):!1},v=function(k){if("keypress"!==k.type||13===k.keyCode||
32===k.keyCode&&gx.dom.isButton(k))if("keypress"===k.type&&(gx.evt.processing||gx.evt.redirecting))k.preventDefault();else{var m=k.target,p=g(m),x=g(k.currentTarget);gx.dom.isRoundedBtnWrapper(p)&&(p=p.find("input"),x=x.find("input"));var A=gx.fn.getControlContext(x);if(!m||"A"!==m.tagName.toUpperCase()||void 0!==g(m).attr(gx.GxObject.GX_EVENT_DATA_ATTR)||!m.href)if(!A)k.preventDefault();else if(!x.hasClass("gx-disabled")&&(!q(m)&&!r(m)||g(m).is(x))&&!gx.dom.hasAttribute(m,gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS)){k.stopPropagation();
var D=function(){var E=x.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR);gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?y.apply(this,[k,p,A,E]):t.apply(this,[k,p,A,E])};gx.wr(function(){gx.evt.doAfterProcessing(D,this)},this)}}},t=function(k,m,p,x){var A=function(){gx.csv.resetRow();var E=p.getValidStructFld(x);E&&E.grid&&gx.evt.setEventRow(p,m.get(0))},D=function(){A();m.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);p.handleControlEvent(k,x,this)}.closure(this);gx.fx.dom.delayedDispatch(k)?
m.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?(A(),gx.fx.dom.raiseEvent("dblclick",k)):(D=setTimeout(D,gx.config.evt.dblclick.delay),m.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,D)):D.call()},y=function(k,m,p,x){if(!m.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var A=function(){gx.csv.resetRow();var D=p.getValidStructFld(x);D&&D.grid&&gx.evt.setEventRow(p,m.get(0));m.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);p.handleControlEvent(k,x,this)}.closure(this);gx.fx.dom.delayedDispatch(k)?
(A=setTimeout(A,gx.config.evt.dblclick.delay),m.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,A)):A.call()}},B=function(k,m,p){try{p&&k.preventDefault(),m&&k.stopPropagation()}catch(x){}};b.handleControlEvent=function(k,m,p){var x=this.controlEventMap;if(x[m]){var A=x[m],D=x[m].evt;m=this.Events[D]?this.Events[D][0]:x[m].std;var E=a(p,gx.GxObject.GX_EVENT_DATA_ATTR),I=a(p,gx.GxObject.GX_EVENT_CODE_DATA_ATTR),J=n(p);x=0<A.grid?gx.fn.controlRowId(k.currentTarget):null;var K=this.getGridById(A.grid,
x);D=!0;var H=!1,L=g(k.target);if(!gx.util.inArray(A.ctrltype,gx.GxObject.GX_EVENT_EXCLUDED_CTRLTYPES))switch(E){case "1":B(k,!0,!0);J&&!l(J)||gx.fn.closeWindow();break;case "3":case "4":B(k,!0,!0);I&&l(I);break;case "8":gx.ajax.doRefresh(this);break;default:if(!J||l(J)){if(K)var N=K.gridName;"checkbox"===A.ctrltype&&(gx.fn.checkboxClick(A,p,A.values[0],A.values[1]),D=!1,H=!0);if(m){A=m.substring(m.indexOf(".")+1,m.length).toLowerCase();E=k.type.toLowerCase();if(A.includes("click")&&!E.includes("click")&&
k.currentTarget&&"textarea"===k.currentTarget.type)break;L.attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,!0);this.executeEvent(m,!1,x,!1,N).always(function(O){var P=function(){g(O).attr(gx.GxObject.GX_EVENT_EVENT_IN_PROGRESS,null)};gx.evt.redirecting?P():gx.spa.isNavigatingRaw()?gx.spa.addObserver("onnavigate",this,P,{single:!0}):P()}.closure(this,[L]))}if(H)gx.evt.onchange(p)}B(k,!0,D)}}};b.registerCtrlsEventHandlers=function(){var k,m=this.GXCtrlIds,p=this.GXValidFnc,x=this.IsMasterPage,A=this.CmpContext,
D=x?"_MPAGE":"",E="["+gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR+"]",I=!A&&!x;void 0===this.listeningControlEvents&&(this.listeningControlEvents=!1);this.controlEventMap||(this.controlEventMap={});var J=this.controlEventMap;var K=0;for(k=m.length;K<k;K++){var H=p[m[K]];var L=gx.fn.controlFiresEvent(H);var N=this.hasEnterEvent&&!gx.lang.emptyObject(H.ctrltype)||H.evt_cvc||H.evt_cvcing;if(L||N)if(L&&(J[H.fld]=H),0===H.grid){var O=A+H.fld+(H.gxvar?"":D);N="#span_"+O;O="#"+O;N=H.gxvar&&0<g(N).length?g(N):
g(O);L&&(N.attr(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,H.fld),N.is("img")&&N.attr("tabindex","0"),q(N.get(0))||N.attr("tabindex","0"));N.attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,gx.json.serializeJson([A,x]))}}I&&!this.listeningControlEvents&&(this.listeningControlEvents=!0,g(document.body).on("click keypress",E,v),g(E).each(function(){for(var P=g(this).parent().first();gx.dom.isRoundedBtnWrapper(P);)P.on("click keypress",null,v),P=P.parent().first()}))};b.unregisterCtrlsEventHandlers=function(){this.listeningControlEvents&&
g(document.body).off("click keypress",v);this.listeningControlEvents=!1};b.clearMultimediaValue=function(k){k=gx.html.multimediaUpload.getElements(k);k.fileField.onchange(k.fileField);gx.fn.setHidden(k.fileField.id,"");gx.fn.setHidden(k.uriField.id,"");gx.fn.setHidden(k.fileField.id+"_gxBlob","")};b.refreshOlds=function(){for(var k in this.LvlOlds){var m=this.LvlOlds[k];if("function"!=typeof m){var p=gx.fn.lvlGrid(parseInt(k,10));if(0!=p){var x=gx.fn.currentGridRow(p);if("9999"===x)continue}p=m.length;
for(var A=0;A<p;A++){var D=m[A],E=D,I="",J=gx.fn.vStructForOld(E);if(J){if(!J.gxgrid||0<J.gxgrid.grid.rows.length)I=gx.typedOld(J.fld,E,J.type)}else gx.lang.emptyObject(x)||(D+="_"+x),I=gx.fn.getHidden(this.CmpContext+D);"undefined"!=typeof I&&(J||(window[E]=I),this[E]=I)}}}};var u=function(k){this.parms=k;return this};b.addExoEventHandler=function(k,m){var p=function(){var x=gx.O;gx.setGxO(this);m.call(this,null,null,new u(Array.prototype.slice.call(arguments,0)));gx.setGxO(x)};gx.fx.obs.addObserver(k,
this,p);this.exoEventHandlers=this.exoEventHandlers||{};this.exoEventHandlers[k]=p};b.deleteExoEventHandlers=function(){for(var k in this.exoEventHandlers)this.exoEventHandlers.hasOwnProperty(k)&&gx.fx.obs.deleteObserver(k,this,this.exoEventHandlers[k])};b.restoreExoEventHandlers=function(){for(var k in this.exoEventHandlers)gx.fx.obs.addObserver(k,this,this.exoEventHandlers[k])};b.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),
this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","deleteEventHandlers")}};b.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),g.each(this.UserControls,function(k,m){if(!gx.lang.emptyObject(m.destroy))try{m.destroy()}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","ondestroy")}}),this.UserControls=[],delete this.containerControl}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","ondestroy")}};b.onpost=function(){var k=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();
for(var m=this.WebComponents.length,p=0;p<m;p++)this.WebComponents[p].onpost();this.ReadonlyForm&&this.IsComponent&&k!=this&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(k)};b.roControlsAsHidden=function(){for(var k=this.getControlIds(),m=k.length,p=0;p<m;p++){var x=this.getValidStruct(k[p]);if(0==x.grid&&"function"==typeof x.val){x=this.CmpContext+x.fld;var A=gx.dom.el(x);A&&!gx.fn.isAccepted(A)&&gx.fn.setHidden(x,gx.fn.getControlValue(x))}}};b.onload=function(k,m){g.Deferred();var p=
[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();gx.wmp(function(){this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this))},this);var x=this.Grids.length;if(!1!==k)for(var A=0;A<x;A++)p.push(this.Grids[A].loadGrid());x=this.WebComponents.length;for(A=0;A<x;A++)p.push(this.WebComponents[A].onload(k));m?this.afterLoad():gx.wr(this.afterLoad.closure(this),this);gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var D=this;
g.when.apply(g,p).done(function(){D.execV2CFunctions(!0,void 0,!1,function(E){return E.ownerGrid&&E.ownerGrid.parentGrid});D.onLoadDeferred.resolve()})};b.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0,void 0,!1);this.JustCreated=!1;this.registerCtrlsEventHandlers();gx.$.map(gx.$("input[data-gx-disable], select[data-gx-disable]",
this.getContainer()),function(k,m){gx.fn.disableCtrl(k.getAttribute("data-gx-disable"));k.removeAttribute("data-gx-disable")});this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.goOnload()};b.onunload=function(k){if(this.hasMasterPage()&&!1!==k)this.MasterPage.onunload();k=this.Grids.length;for(--k;0<=k;k--)delete this.Grids[this.Grids[k].gridName],this.Grids[k].cleanup(),this.Grids.splice(k,
1);k=this.WebComponents.length;for(--k;0<=k;k--)delete this.WebComponents[this.WebComponents[k].CmpContext],this.WebComponents[k].onunload(),this.WebComponents.splice(k,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};b.clean=function(k){this.cleanHiddens();this.onunload(k)};b.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};b.screenToVars=function(){try{for(var k=this.getControlIds(),m=k.length,p=0;p<m;p++){var x=this.getValidStruct(k[p]);
x&&0==x.lvl&&"function"==typeof x.c2v&&x.c2v()}}catch(A){gx.dbg.logEx(A,"gxfrmutl.js","screenToVars")}};b.postbackLoad=function(k,m){var p=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(k);for(var x=this.WebComponents.length,A=0;A<x;A++)this.WebComponents[A].postbackLoad(k);p&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,p?!1:k);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&
gx.fn.doAttachs(m);gx.goOnload();this.onLoadDeferred.resolve()};b.addDragSource=function(k,m,p,x){gx.fx.dnd.addSource(this,k,m,p,x)};b.addDropTarget=function(k,m,p,x){gx.fx.dnd.addTarget(this,k,m,p,x)};b.addContextSetter=function(k,m,p,x){gx.fx.ctx.addSetter(this,k,m,p,x)};b.addContextTracker=function(k,m,p,x){gx.fx.ctx.addTracker(this,p,x)};b.addOnMessage=function(k,m,p,x,A){gx.fx.notifications.addTracker(this,k,m,p,x,A)};b.addEventHandler=function(k,m,p){gx.fx.dom.addEventHandler(this,k,m,p)};b.updateBitmapValue=
function(k,m,p,x){k=gx.html.multimediaUpload.getContainer(k);"file"==gx.html.multimediaUpload.getOptionValue(k)?this[m]=x:this[p]=x};b.getFeedbackContainer=function(){return this==gx.pO?document.body:this.getContainer()};b.startFeedback=function(k,m){this.feedbackCallCounter++;m&&gx.fn.disableKeys();var p=!0===k?0:void 0===gx.NotificationDelay?1E3:gx.NotificationDelay,x=function(){var A=this.getFeedbackContainer();A&&gx.dom.mask(A)};1==this.feedbackCallCounter&&(0===p?x.call(this):this.feedbackTimeoutId||
(p=gx.lang.doCallTimeout(x,this,arguments,p),this.feedbackTimeoutId=p.t))};b.endFeedback=function(){gx.fn.enableKeys();0<this.feedbackCallCounter&&this.feedbackCallCounter--;if(0==this.feedbackCallCounter){this.feedbackTimeoutId&&(clearTimeout(this.feedbackTimeoutId),this.feedbackTimeoutId=!1);var k=this.getFeedbackContainer();k&&gx.dom.unmask(k)}};b.isFeedbackOn=function(){return 0<this.feedbackCallCounter};(function(){var k=9996,m=this;return function(p){var x="MPW"+k++,A=m.CmpContext+"gxHTMLWrp"+
x;m.setComponent({id:w(p),GXClass:null,Prefix:x,lvl:1});return g('<div class="gx-call-target '+p+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+'" id="'+A+'"></div></div>')}}).call(this);var w=function(k){return"GX-"+k.toUpperCase()+"-TARGET"};b.initSingleTarget=function(k){var m="MPW"+this.targetsCounter++,p=this.CmpContext+"gxHTMLWrp"+m;this.setComponent({id:w(k),GXClass:null,Prefix:m,lvl:1});return g('<div class="gx-call-target '+k+' off empty"><div class="'+gx.GxObject.WEBCOMPONENT_CLASS_NAME+
'" id="'+p+'"></div></div>')};b.initTargets=function(){if(gx.pO&&gx.pO.fullAjax&&this.IsMasterPage){var k=g(gx.dom.form());var m=k.children("[data-abstract-form]").first();m.length||(m=g("<div></div>"),m.append(k.children()),k.append(m));k=m.addClass("gx-center-target");m=this.initSingleTarget("top");var p=this.initSingleTarget("right");var x=this.initSingleTarget("bottom");var A=this.initSingleTarget("left");g('<div id="gx-column-targets"></div>').insertBefore(k).append(A).append(k).append(p).before(m).after(x)}};
b.createObjectInTarget=function(k,m,p){k=k.toLowerCase();var x=z(k);this.createWebComponent(w(k),m,p,void 0,void 0,void 0,function(A){this.targetComponents=this.targetComponents||{};(A=gx.pO.getWebComponent(A))&&(this.targetComponents[k]=A)});g(x.selector).removeClass("empty")};b.restoreTargetComponents=function(){var k;this.targetComponents=this.targetComponents||{};for(k in this.targetComponents)targetComponents.hasOwnProperty(k)&&gx.pO.registerComponent(this.targetComponents[k])};var z=function(k){return{selector:".gx-call-target."+
k,centerSelector:".gx-center-target"}},C,F={useCapture:!0};b.showTarget=function(k,m){k=k.toLowerCase();var p=z(k),x=p.selector,A=p.centerSelector;g(p.selector).removeClass("empty");g(x).removeClass("off");g(A).addClass("slideout "+k);g(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",[k]);if(!1!==m){C=function(E){g(E.target).closest(x).length||g(E.target).is(x)||!g(x).is(":visible")||(D.call(this),E.stopImmediatePropagation(),E.preventDefault())}.closure(this);
var D=function(){this.hideTarget(k)};gx.evt.attach(document,"click",C,!1,F);gx.spa.addObserver("onnavigate",this,D)}};b.hideTarget=function(k){k=k.toLowerCase();var m=z(k),p=m.centerSelector;g(m.selector).addClass("off");g(p).removeClass("slideout "+k);g(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,"click",C,F);gx.fx.obs.notify("gx.targethidden",[k])};b.collapseTarget=function(k){k=k.toLowerCase();var m=z(k),p=m.selector;m=m.centerSelector;this.showTarget(k,!1);g(p).addClass("collapsed");
g(m).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[k])};b.expandTarget=function(k){k=k.toLowerCase();var m=z(k),p=m.selector;m=m.centerSelector;this.showTarget(k,!1);g(p).removeClass("collapsed");g(m).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[k])};var G=function(k,m){k=Array.prototype.slice.call(k,0);k.push(m);return k};b.validSrvEvt=function(){return gx.ajax.validSrvEvt.apply(gx.ajax,G(arguments,this))};b.validCliEvt=function(){return gx.ajax.validCliEvt.apply(gx.ajax,
G(arguments,this))}})(gx.$);gx.lang.apply(gx.GxObject.prototype,new gx.util.Observable);
gx.printing=function(g){return{IFrameId:"gxprintHelper_Iframe",print:function(a){this.printDirect(a)},printDirect:function(a){a&&(gx.printing._deinit(),$iframe=g("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),g(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",a.reportFile))},_deinit:function(){g("#"+gx.printing.IFrameId).remove()}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(g,a){this.map[g]=a};this.remove=function(g){delete this.map[g]};this.get=function(g){return null==g?null:this.map[g]};this.first=function(){return this.get(this.nextKey())};this.next=function(g){return this.get(this.nextKey(g))};this.nextKey=function(g){for(i in this.map){if(!g)return i;g==i&&(g=null)}return null}},Command:function(g,a,b){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){a.apply(g,
b)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(g,a,b,d){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(c,f){gx.thread.Mutex.Wait.get(c).attempt(gx.thread.Mutex.Wait.get(f))};this.attempt=function(c){for(;c;c=gx.thread.Mutex.Wait.next(c.c.id))if(c.enter||c.number&&(c.number<this.number||c.number==this.number&&c.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+c.c.id+")",10);try{retVal=this.c.execute()}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if("function"==typeof d)try{d.call(g,retVal)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(g,a,b);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,iv:null,keyName:"GX_AJAX_KEY",ivName:"GX_AJAX_IV",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var g=gx.fn.getHidden(this.keyName);gx.lang.emptyObject(g)?this.key=null:this.key=g;null!=this.key&&this.loadSecToken();this.iv=gx.fn.getHidden(this.ivName)},loadSecToken:function(){var g=gx.fn.getHidden(this.secTokenName);gx.lang.emptyObject(g)?this.secToken=null:this.secToken=g},encrypt:function(g,a){try{if(a=null==a?this.key:a,null!=a){var b=this.rijndael;a=b.hexToByteArray(a);
var d=null!=this.iv?b.rijndaelEncrypt(g,a,"CBC",b.hexToByteArray(this.iv)):b.rijndaelEncrypt(g,a);return b.byteArrayToHex(d)}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","encrypt")}return g},decrypt:function(g,a){try{if(a=null==a?this.key:a,null!=a){var b=this.rijndael;a=b.hexToByteArray(a);var d=b.hexToByteArray(g),c=b.rijndaelDecrypt(d,a,"CBC");return b.byteArrayToString(c)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","decrypt")}return g},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(g,a){return g<<a|g>>>32-a},AddUnsigned:function(g,a){var b=g&2147483648;var d=a&2147483648;var c=g&1073741824;var f=a&1073741824;g=(g&1073741823)+(a&1073741823);return c&f?g^2147483648^b^d:c|f?g&1073741824?g^3221225472^b^d:g^1073741824^b^d:g^b^d},F:function(g,a,b){return g&a|~g&b},G:function(g,a,b){return g&b|a&~b},H:function(g,a,b){return g^a^b},I:function(g,a,b){return a^(g|~b)},FF:function(g,a,b,d,c,f,l){g=gx.MD5.AddUnsigned(g,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(a,
b,d),c),l));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(g,f),a)},GG:function(g,a,b,d,c,f,l){g=gx.MD5.AddUnsigned(g,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(a,b,d),c),l));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(g,f),a)},HH:function(g,a,b,d,c,f,l){g=gx.MD5.AddUnsigned(g,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(a,b,d),c),l));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(g,f),a)},II:function(g,a,b,d,c,f,l){g=gx.MD5.AddUnsigned(g,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(a,b,d),c),l));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(g,f),a)},ConvertToWordArray:function(g){var a=g.length;var b=a+8;for(var d=16*((b-b%64)/64+1),c=Array(d-1),f,l=0;l<a;)b=(l-l%4)/4,f=l%4*8,c[b]|=g.charCodeAt(l)<<f,l++;b=(l-l%4)/4;c[b]|=128<<l%4*8;c[d-2]=a<<3;c[d-1]=a>>>29;return c},WordToHex:function(g){var a="",b;for(b=0;3>=b;b++){var d=g>>>8*b&255;d="0"+d.toString(16);a+=d.substr(d.length-2,2)}return a},Utf8Encode:function(g){g=g.replace(/\r\n/g,"\n");for(var a="",b=0;b<g.length;b++){var d=g.charCodeAt(b);
128>d?a+=String.fromCharCode(d):(127<d&&2048>d?a+=String.fromCharCode(d>>6|192):(a+=String.fromCharCode(d>>12|224),a+=String.fromCharCode(d>>6&63|128)),a+=String.fromCharCode(d&63|128))}return a},getHsh:function(g){var a;g=gx.MD5.Utf8Encode(g);g=gx.MD5.ConvertToWordArray(g);var b=1732584193;var d=4023233417;var c=2562383102;var f=271733878;for(a=0;a<g.length;a+=16){var l=b;var n=d;var q=c;var r=f;b=gx.MD5.FF(b,d,c,f,g[a+0],7,3614090360);f=gx.MD5.FF(f,b,d,c,g[a+1],12,3905402710);c=gx.MD5.FF(c,f,b,
d,g[a+2],17,606105819);d=gx.MD5.FF(d,c,f,b,g[a+3],22,3250441966);b=gx.MD5.FF(b,d,c,f,g[a+4],7,4118548399);f=gx.MD5.FF(f,b,d,c,g[a+5],12,1200080426);c=gx.MD5.FF(c,f,b,d,g[a+6],17,2821735955);d=gx.MD5.FF(d,c,f,b,g[a+7],22,4249261313);b=gx.MD5.FF(b,d,c,f,g[a+8],7,1770035416);f=gx.MD5.FF(f,b,d,c,g[a+9],12,2336552879);c=gx.MD5.FF(c,f,b,d,g[a+10],17,4294925233);d=gx.MD5.FF(d,c,f,b,g[a+11],22,2304563134);b=gx.MD5.FF(b,d,c,f,g[a+12],7,1804603682);f=gx.MD5.FF(f,b,d,c,g[a+13],12,4254626195);c=gx.MD5.FF(c,f,
b,d,g[a+14],17,2792965006);d=gx.MD5.FF(d,c,f,b,g[a+15],22,1236535329);b=gx.MD5.GG(b,d,c,f,g[a+1],5,4129170786);f=gx.MD5.GG(f,b,d,c,g[a+6],9,3225465664);c=gx.MD5.GG(c,f,b,d,g[a+11],14,643717713);d=gx.MD5.GG(d,c,f,b,g[a+0],20,3921069994);b=gx.MD5.GG(b,d,c,f,g[a+5],5,3593408605);f=gx.MD5.GG(f,b,d,c,g[a+10],9,38016083);c=gx.MD5.GG(c,f,b,d,g[a+15],14,3634488961);d=gx.MD5.GG(d,c,f,b,g[a+4],20,3889429448);b=gx.MD5.GG(b,d,c,f,g[a+9],5,568446438);f=gx.MD5.GG(f,b,d,c,g[a+14],9,3275163606);c=gx.MD5.GG(c,f,b,
d,g[a+3],14,4107603335);d=gx.MD5.GG(d,c,f,b,g[a+8],20,1163531501);b=gx.MD5.GG(b,d,c,f,g[a+13],5,2850285829);f=gx.MD5.GG(f,b,d,c,g[a+2],9,4243563512);c=gx.MD5.GG(c,f,b,d,g[a+7],14,1735328473);d=gx.MD5.GG(d,c,f,b,g[a+12],20,2368359562);b=gx.MD5.HH(b,d,c,f,g[a+5],4,4294588738);f=gx.MD5.HH(f,b,d,c,g[a+8],11,2272392833);c=gx.MD5.HH(c,f,b,d,g[a+11],16,1839030562);d=gx.MD5.HH(d,c,f,b,g[a+14],23,4259657740);b=gx.MD5.HH(b,d,c,f,g[a+1],4,2763975236);f=gx.MD5.HH(f,b,d,c,g[a+4],11,1272893353);c=gx.MD5.HH(c,f,
b,d,g[a+7],16,4139469664);d=gx.MD5.HH(d,c,f,b,g[a+10],23,3200236656);b=gx.MD5.HH(b,d,c,f,g[a+13],4,681279174);f=gx.MD5.HH(f,b,d,c,g[a+0],11,3936430074);c=gx.MD5.HH(c,f,b,d,g[a+3],16,3572445317);d=gx.MD5.HH(d,c,f,b,g[a+6],23,76029189);b=gx.MD5.HH(b,d,c,f,g[a+9],4,3654602809);f=gx.MD5.HH(f,b,d,c,g[a+12],11,3873151461);c=gx.MD5.HH(c,f,b,d,g[a+15],16,530742520);d=gx.MD5.HH(d,c,f,b,g[a+2],23,3299628645);b=gx.MD5.II(b,d,c,f,g[a+0],6,4096336452);f=gx.MD5.II(f,b,d,c,g[a+7],10,1126891415);c=gx.MD5.II(c,f,
b,d,g[a+14],15,2878612391);d=gx.MD5.II(d,c,f,b,g[a+5],21,4237533241);b=gx.MD5.II(b,d,c,f,g[a+12],6,1700485571);f=gx.MD5.II(f,b,d,c,g[a+3],10,2399980690);c=gx.MD5.II(c,f,b,d,g[a+10],15,4293915773);d=gx.MD5.II(d,c,f,b,g[a+1],21,2240044497);b=gx.MD5.II(b,d,c,f,g[a+8],6,1873313359);f=gx.MD5.II(f,b,d,c,g[a+15],10,4264355552);c=gx.MD5.II(c,f,b,d,g[a+6],15,2734768916);d=gx.MD5.II(d,c,f,b,g[a+13],21,1309151649);b=gx.MD5.II(b,d,c,f,g[a+4],6,4149444226);f=gx.MD5.II(f,b,d,c,g[a+11],10,3174756917);c=gx.MD5.II(c,
f,b,d,g[a+2],15,718787259);d=gx.MD5.II(d,c,f,b,g[a+9],21,3951481745);b=gx.MD5.AddUnsigned(b,l);d=gx.MD5.AddUnsigned(d,n);c=gx.MD5.AddUnsigned(c,q);f=gx.MD5.AddUnsigned(f,r)}return(gx.MD5.WordToHex(b)+gx.MD5.WordToHex(d)+gx.MD5.WordToHex(c)+gx.MD5.WordToHex(f)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(g){try{if(window.atob)return decodeURIComponent(atob(g).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(a){}return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(g)))},encode:function(g){try{if(window.btoa)return btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))}catch(a){}return this.encodeImpl(this.UTF8BytesFromString(g))},bytesFromUTF8Bytes:function(g){var a=
[],b=0;c1=c2=0;for(var d=g.length;b<d;){var c=g[b];128>c?(a.push(c),b++):191<c&&224>c?(c2=g[b+1],a.push((c&31)<<6|c2&63),b+=2):(c2=g[b+1],c3=g[b+2],a.push((c&15)<<12|(c2&63)<<6|c3&63),b+=3)}return a},UTF8BytesFromString:function(g){g=g.replace(/\r\n/g,"\n");for(var a=[],b=g.length,d=0;d<b;d++){var c=g.charCodeAt(d);128>c?a.push(c):(127<c&&2048>c?a.push(c>>6|192):(a.push(c>>12|224),a.push(c>>6&63|128)),a.push(c&63|128))}return a},bytesToString:function(g){for(var a=gx.util.browser.isChrome()?32765:
5E4,b=[];g.length>=a;)b.push(eval("String.fromCharCode("+g.slice(0,a).join(",")+");")),g=g.slice(a);0!=g.length&&b.push(eval("String.fromCharCode("+g.join(",")+");"));return b.join("")},decodeImpl:function(g){var a=this.f64,b=[],d=0;g=g.replace(/\n|\r/g,"");g=g.replace(/=/g,"");for(var c=g.length;d<c;)b[b.length]=a[g.charAt(d)]<<2|a[g.charAt(d+1)]>>4,b[b.length]=(a[g.charAt(d+1)]&15)<<4|a[g.charAt(d+2)]>>2,b[b.length]=(a[g.charAt(d+2)]&3)<<6|a[g.charAt(d+3)],d+=4;2==g.length%4&&(b=b.slice(0,b.length-
2));3==g.length%4&&(b=b.slice(0,b.length-1));return b},encodeImpl:function(g){var a=this.b64,b=[],d=0,c=g.length;1==c%3&&(g[g.length]=0,g[g.length]=0);2==c%3&&(g[g.length]=0);for(var f=g.length;d<f;)b[b.length]=a[g[d]>>2],b[b.length]=a[(g[d]&3)<<4|g[d+1]>>4],b[b.length]=a[(g[d+1]&15)<<2|g[d+2]>>6],b[b.length]=a[g[d+2]&63],d+=3;1==c%3&&(b[b.length-1]=b[b.length-2]="=");2==c%3&&(b[b.length-1]="=");return b.join("")},_init:function(){for(var g=0;64>g;g++){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g);
this.b64[g]=a;this.f64[a]=g}}};
gx.webSocket=function(g){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=g.maxRetries||6;this.retryDelay=g.retryDelay||2500;this._init=function(d){if(!this.initialized&&"WebSocket"in window){d=d||{};d.clientId=d.clientId||"";d.basePath=d.basePath||"";this.namespace="."+d.namespace;try{var c=d.wsProtocol+d.host+d.basePath+d.resourceUrl+d.clientId;this.create(d.wsURL||c);this.initialized=!0;this.wsOpts=d}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","Could not initialize WebSocket")}}};
var a=this,b=function(){this.initialized=this.opened=!1;this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries)&&(this.retryCount++,this.retryHandle=gx.lang.doCallTimeout(this._init,this,[this.wsOpts],this.retryDelay*this.retryCount))};this.create=function(d){try{this.ws=new WebSocket(d),this.ws.onopen=function(){a.opened=!0;a.retryCount=0;a.stopRetry=!1;gx.fx.obs.notify("gx.ws.onOpen"+a.namespace,[])},this.ws.onerror=function(c){gx.dbg.logDebug("gx.webSocket - Error: "+c.data);gx.fx.obs.notify("gx.ws.onError"+
a.namespace,[c.data]);a.stopRetry||b.apply(a);a.stopRetry=!1},this.ws.onmessage=function(c){gx.dbg.logDebug("gx.webSocket - New Message: "+c.data);gx.fx.obs.notify("gx.ws.onMessage"+a.namespace,[c.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");a.opened?(a.retryCount=0,b.apply(a)):gx.fx.obs.notify("gx.ws.OnClose"+a.namespace,[])}}catch(c){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+a.namespace,[c]],100)}};window.onbeforeunload=function(){a.opened&&
a.ws.close()};this.close=function(){a.opened&&(a.opened=!1,a.ws.close());a.stopRetry=!0;a.retryHandle&&clearInterval(a.retryHandle.t)};this.send=function(d){a.ws?a.ws.send(d):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};this._init(g)};
gx.util.alert=function(g){var a=!1,b=!1,d=function(f){f=f||{};var l=f.message||"",n=f.cssClass||"",q=f.cssDisBtnClass||"",r=f.dataDisAtt;f=f.dismissmitAt;a&&0!=g("#gx-main-error").length||(g(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),a=!0);c();var v=g("#gx-main-error");v.html('<div class="'+n+'"><button type="button" class="'+q+'" data-dismiss="'+r+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+l+"</span></div>");v.slideDown();
b=!0;f&&window.setTimeout(function(){c()},f)},c=function(){b&&(g("#gx-main-error").fadeOut(500,function(){g(this).empty()}),b=!1)};return{showMessage:function(f,l){g("#gx-main-error");d(g.extend({message:f,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},l))},showError:function(f,l){g("#gx-main-error");d(g.extend({message:f,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},l))},hide:c}}(gx.$);
gx.geolocation=function(g){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(a){a.attachedCtrl=g("#"+a.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(a);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(a){var b=attachedCtrls.shift(),d=gx.fn.validStruct(gx.O.getValidStructId(b.attachedCtrl.id));
a=a.coords.latitude+","+a.coords.longitude;gx.evt.setEventRow(gx.pO,b.attachedCtrl);d.v2v&&(d.v2v(a),d.v2c());d.gxgrid&&d.gxgrid.updateControlValue(d,!0)},handle_errors:function(a){attachedCtrls.shift();switch(a.code){case a.PERMISSION_DENIED:a="user did not share geolocation data";break;case a.POSITION_UNAVAILABLE:a="could not detect current position";break;case a.TIMEOUT:a="retrieving position timed out";break;default:a="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(a);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(g,a){var b=g.slice(0,a);return g=g.slice(a).concat(b)},xtime:function(g){g<<=1;return g&256?g^283:g},mult_GF256:function(g,a){var b,d=0;for(b=1;256>b;b*=2,a=this.xtime(a))g&b&&(d^=a);return d},byteSub:function(g,a){a="encrypt"==a?this.SBox:this.SBoxInverse;for(var b=0;4>b;b++)for(var d=0;d<this.Nb;d++)g[b][d]=a[g[b][d]]},shiftRow:function(g,a){for(var b=
1;4>b;b++)g[b]="encrypt"==a?this.cyclicShiftLeft(g[b],this.shiftOffsets[this.Nb][b]):this.cyclicShiftLeft(g[b],this.Nb-this.shiftOffsets[this.Nb][b])},mixColumn:function(g,a){for(var b=[],d=0;d<this.Nb;d++){for(var c=0;4>c;c++)b[c]="encrypt"==a?this.mult_GF256(g[c][d],2)^this.mult_GF256(g[(c+1)%4][d],3)^g[(c+2)%4][d]^g[(c+3)%4][d]:this.mult_GF256(g[c][d],14)^this.mult_GF256(g[(c+1)%4][d],11)^this.mult_GF256(g[(c+2)%4][d],13)^this.mult_GF256(g[(c+3)%4][d],9);for(c=0;4>c;c++)g[c][d]=b[c]}},addRoundKey:function(g,
a){for(var b=0;b<this.Nb;b++)g[0][b]^=a[b]&255,g[1][b]^=a[b]>>8&255,g[2][b]^=a[b]>>16&255,g[3][b]^=a[b]>>24&255},keyExpansion:function(g){var a=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var b=0;b<this.Nk;b++)a[b]=g[4*b]|g[4*b+1]<<8|g[4*b+2]<<16|g[4*b+3]<<24;for(b=this.Nk;b<this.Nb*(this.Nr+1);b++)g=a[b-1],0==b%this.Nk?g=(this.SBox[g>>8&255]|this.SBox[g>>16&255]<<8|this.SBox[g>>24&255]<<16|this.SBox[g&255]<<24)^this.Rcon[Math.floor(b/
this.Nk)-1]:6<this.Nk&&4==b%this.Nk&&(g=this.SBox[g>>24&255]<<24|this.SBox[g>>16&255]<<16|this.SBox[g>>8&255]<<8|this.SBox[g&255]),a[b]=a[b-this.Nk]^g;return a},Round:function(g,a){this.byteSub(g,"encrypt");this.shiftRow(g,"encrypt");this.mixColumn(g,"encrypt");this.addRoundKey(g,a)},InverseRound:function(g,a){this.addRoundKey(g,a);this.mixColumn(g,"decrypt");this.shiftRow(g,"decrypt");this.byteSub(g,"decrypt")},FinalRound:function(g,a){this.byteSub(g,"encrypt");this.shiftRow(g,"encrypt");this.addRoundKey(g,
a)},InverseFinalRound:function(g,a){this.addRoundKey(g,a);this.shiftRow(g,"decrypt");this.byteSub(g,"decrypt")},encrypt:function(g,a){var b;if(g&&8*g.length==this.blockSizeInBits&&a){g=this.packBytes(g);this.addRoundKey(g,a);for(b=1;b<this.Nr;b++)this.Round(g,a.slice(this.Nb*b,this.Nb*(b+1)));this.FinalRound(g,a.slice(this.Nb*this.Nr));return this.unpackBytes(g)}},decrypt:function(g,a){var b;if(g&&8*g.length==this.blockSizeInBits&&a){g=this.packBytes(g);this.InverseFinalRound(g,a.slice(this.Nb*this.Nr));
for(b=this.Nr-1;0<b;b--)this.InverseRound(g,a.slice(this.Nb*b,this.Nb*(b+1)));this.addRoundKey(g,a);return this.unpackBytes(g)}},byteArrayToString:function(g){for(var a="",b=g.length,d=0;d<b;d++)0!=g[d]&&(a+=String.fromCharCode(g[d]));return a},stringToByteArray:function(g){for(var a=[],b=g.length,d=0;d<b;d++)a[a.length]=g.charCodeAt();return a},byteArrayToHex:function(g){var a="";if(g){for(var b=g.length,d=0;d<b;d++)a+=(16>g[d]?"0":"")+g[d].toString(16);return a}},hexToByteArray:function(g){var a=
[];if(!(g.length%2)){if(0==g.indexOf("0x")||0==g.indexOf("0X"))g=g.substring(2);for(var b=g.length,d=0;d<b;d+=2)a[Math.floor(d/2)]=parseInt(g.slice(d,d+2),16);return a}},packBytes:function(g){var a=[];if(g&&!(g.length%4)){a[0]=[];a[1]=[];a[2]=[];a[3]=[];for(var b=g.length,d=0;d<b;d+=4)a[0][d/4]=g[d],a[1][d/4]=g[d+1],a[2][d/4]=g[d+2],a[3][d/4]=g[d+3];return a}},unpackBytes:function(g){for(var a=[],b=g[0].length,d=0;d<b;d++)a[a.length]=g[0][d],a[a.length]=g[1][d],a[a.length]=g[2][d],a[a.length]=g[3][d];
return a},formatPlaintext:function(g){var a=this.blockSizeInBits/8,b;if("string"==typeof g||g.indexOf){g=g.split("");var d=g.length;for(b=0;b<d;b++)g[b]=g[b].charCodeAt(0)&255}for(b=a-g.length%a;0<b&&b<a;b--)g[g.length]=0;return g},rijndaelEncrypt:function(g,a,b,d){var c,f=this.blockSizeInBits/8;if(g&&a&&8*a.length==this.keySizeInBits){"CBC"!=b&&(b="ECB",d=[]);g=this.formatPlaintext(g);a=this.keyExpansion(a);for(var l=0;l<g.length/f;l++){var n=g.slice(l*f,(l+1)*f);if("CBC"==b)for(c=0;c<f;c++)n[c]^=
d[l*f+c];d=d.concat(this.encrypt(n,a))}return d}},rijndaelDecrypt:function(g,a,b){var d=this.blockSizeInBits/8,c=[],f;if(g&&a&&"string"!=typeof g&&8*a.length==this.keySizeInBits){b||(b="ECB");a=this.keyExpansion(a);for(f=g.length/d-1;0<f;f--){var l=this.decrypt(g.slice(f*d,(f+1)*d),a);if("CBC"==b)for(var n=0;n<d;n++)c[(f-1)*d+n]=l[n]^g[(f-1)*d+n];else c=l.concat(c)}"ECB"==b&&(c=this.decrypt(g.slice(0,d),a).concat(c));return c}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.popup=function(g){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var a=function(b){0===g(this.getEl()).find(b.target).length&&(g(document.body).off("click",a),this.close())}.closure(this);this.open=function(b){this.state=
"opening";this.id=b.id||"gxdialog";this.callbacks=b.callbacks;var d=void 0===b.resizable||b.resizable,c="PopupBorder gx-popup gx-popup-default";this.cssClass&&(c=c.replace("gx-popup-default",""),c+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,b.w,b.h,b.contentHtml,"white",b.title,"black","black","black","black",void 0===b.isModal||b.isModal,!0,!0,d,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",c,"PopupShadow",
b.showParentPopups,!1,b.callbacks,b.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){g(document.body).on("click",a)},1)};this.close=function(){g(document.body).off("click",a);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(a,b){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=b?b:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){gx.lang.isArray(a)?(this.url=a[0],this.autoresize=a[1],this.width=a[2],this.height=a[3],this.position=a[4],this.top=
a[5],this.left=a[6],this.OncloseCmds=a[7]||[],this.ReturnParms=a[8]||[],this.cssClass=a[9]):a&&a.Url&&(this.url=a.Url,"undefined"!=typeof a.Autoresize&&(this.autoresize=a.Autoresize),"undefined"!=typeof a.Width&&(this.width=a.Width),"undefined"!=typeof a.Height&&(this.height=a.Height),"undefined"!=typeof a.Position&&(this.position=a.Position),"undefined"!=typeof a.Top&&(this.top=a.Top),"undefined"!=typeof a.Left&&(this.left=a.Left),"undefined"!=typeof a.Class&&(this.cssClass=a.Class),"undefined"!=
typeof a.OncloseCmds&&(this.OncloseCmds=a.OncloseCmds),"undefined"!=typeof a.ReturnParms&&(this.ReturnParms=a.ReturnParms))};this.open=function(){this.state="opening";var d=gx.popup.gxOpener();this.lvl=-1;this.lvl=d&&d.gx&&d.gx.popup.ext.win&&d.gx.popup.ext.win.gx?d.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;d=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var c="?",f,l,n=this.ReturnParms.length,q=0;q<n;q++){f="";if(gx.lang.emptyObject(this.ReturnParms[q].Ctrl))if("string"==typeof this.ReturnParms[q])f=gx.util.urlValue(this.ReturnParms[q])+",";else if("number"==typeof this.ReturnParms[q])f=gx.util.urlValue(this.ReturnParms[q].toString())+",";else if(this.CustomRenderGrid)l=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[q].id),gx.lang.emptyObject(l)||(f=gx.util.urlValue(l+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[q].id))continue;
else l=gx.fn.getHidden(this.ReturnParms[q].id),gx.lang.emptyObject(l)||(f=gx.util.urlValue(l)),f+=",";else f=gx.util.urlValue(this.ReturnParms[q].Ctrl)+",";c="out"==this.ReturnParms[q].IOType?c+",":c+f;this.ReturnParms[q].isLastKey&&gx.fn.isOutputParm(this.ReturnParms[q])&&!this.PromptIsGet&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);d+=c}c=document.activeElement;gx.csv.lastControl&&c&&gx.util.inArray(c.tagName,["BODY",
"FORM"])&&(c=gx.csv.lastControl);c&&(c&&(this.callerActiveElement=c),c.blur&&c.blur());this.InternalPopup=gx.popup.Impl(this,d,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var d=[];if(this.IsPrompt)for(var c=this.ReturnParms.length,f=0;f<c;f++){var l=this.ReturnParms[f];gx.fn.isOutputParm(l)&&d.push(l)}else return this.ReturnParms;return d};this.close=function(d,c,f){c=c||{};this.state="closing";d&&(this.RawReturnedParms=d);var l=window;
gx.popup.ext.win?(l=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var n=function(){var v=g.Deferred();this.setCellValue.apply(this,arguments);return v.resolve()},q=function(){var v;this.beforeClose&&this.beforeClose(d);!this.isPdf&&this.frameWindow&&this.frameWindow.gx&&(this.IsPrompt&&(null==this.parentPopup?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null),
this.frameWindow.gx.evt.onunload.call(this.frameWindow),gx.util.browser.isIE()||(this.frameDocument.gxPopup=null),this.frameWindow=this.frameDocument=null);gx.popup.ext.close(this);var t=this.getOutputParms(),y=function(){c&&!0===c.ignoreCmds&&(this.OncloseCmds=[]);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:t});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(d);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",
[this])}.closure(this),B=!0;gx.csv.lastId=0;if(null!=d&&this.IsPrompt){if(f&&c.parmsMetadata&&c.updateParms){var u=c.parmsMetadata.length;for(v=0;v<u;v++)B=c.parmsMetadata[v],gx.util.inArray(B,c.updateParms)&&(d[v]=f[B])}u=d.length;var w=gx.popup.assignPromptFields,z=gx.popup;gx.lang.emptyObject(this.CustomRenderGrid)||(w=n,z=this.CustomRenderGrid.grid);B=!1;w.call(z,t,d).then(function(){var C=null;u=t.length;for(v=0;v<u;v++){var F=t[v].Ctrl;gx.fn.isAccepted(F)&&(C=F)}C&&gx.TabOnPrompSelect&&(F=gx.fn.getControlIndex(C),
-1!=F&&(C=gx.fn.searchFocus(F+1,!0)));gx.fn.setFocus(C);if(this.PromptIsGet)if(this.Opener.fullAjax){var G;(F=gx.csv.ctxControlId(C.id))&&(G=gx.O.getValidStructFld(F));G&&gx.csv.validControls(G.id,G.id+1,!0,this.Opener)}else{gx.csv.loadScreen(function(){gx.fn.setFocus(C);y()});return}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),"undefined"==typeof window.GXPkIsDirty?!1:window.GXPkIsDirty,null,"eng")}catch(k){gx.dbg.logEx(k,
"gxpopup.js","close")}y()}.closure(this))}else d&&t&&t instanceof Array&&0<t.length&&gx.fn.setReturnParms(this.Opener,t,d,this.CustomRenderGrid);B&&y()},r=gx.util.browser;r.isFirefox()||r.isIE()?l.setTimeout(q.closure(this),10):q.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload(!1)};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,
this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(d){gx.dbg.logEx(d,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},getWindowIframeElement:function(a){var b;a=a.document.getElementsByTagName("iframe");for(var d=0;d<a.length&&!b;d++){var c=a[d];c.contentWindow===window&&(b=c)}return b},gxOpener:function(){try{parent.gxTestAvailable=1;var a=this.getWindowIframeElement(parent);return a&&void 0!==g(a).attr("data-gx-popup-ct")?parent:window}catch(b){}return null},
setFocus:function(){var a=this.getPopup();a&&a.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(a){var b=gx.popup.getPopup();b?"opened"==b.state?a():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[a],50):a()},getPopup:function(){var a=this.gxOpener();try{if(!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.gx))return a.gx.popup.currentPopup}catch(b){}return null},setPopup:function(a){this.currentPopup=
a},open:function(a,b){return this.openPopup(a,b)},openUrlToOpenPopupParms:function(a,b,d){var c=1,f=0,l=0,n=0,q=0,r=0;d&&(c=d[0],f=d[1],l=d[2],n=d[3],q=d[4],r=d[5]);return[a,c,f,l,n,q,r,[],b]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(a,b){var d=this.getPopup(),c,f;if(d&&d.Opener===gx.O&&gx.lang.isArray(a))d.OncloseCmds.push({popup:a});else{a=new this.Popup(a,!1);a.Opener=b||gx.O;b=0;for(d=a.ReturnParms.length;b<d&&!((f=gx.fn.vStructForVar(a.ReturnParms[b]))&&
f.grid&&(c=gx.O.getGridById(f.grid)));b++);c&&c.isUsercontrol&&(a.CustomRenderGrid=c);a.open();return a}},openDialog:function(a){var b=new this.Dialog;b.Opener=gx.O;b.open(a);return b},openPrompt:function(a,b,d,c,f,l){if(null==gx.popup.currentPrompt){c&&gx.setGxO(c,f);var n=b[0].Ctrl,q=!1,r;if(n){var v=gx.fn.rowGridId(n);n=gx.fn.controlRowId(n);gx.lang.emptyObject(v)||gx.lang.emptyObject(n)||(gx.csv.lastGrid=v,gx.fn.setCurrentGridRow(v,n))}else{n=0;for(var t=b.length;n<t;n++)if(b[n].IOType){v=b[n].id;
break}v&&(v=gx.O.getValidStructFld(v),!gx.lang.emptyObject(v)&&(r=gx.O.getGridById(v.grid)))&&(q=r.isUsercontrol)&&(v=r.gridId+"",n=gx.lang.emptyObject(r.grid.getSelectedRow)?void 0:gx.text.padl(r.grid.getSelectedRow()+"",4,"0"),gx.lang.emptyObject(v)||gx.lang.emptyObject(n)||(gx.csv.lastGrid=v,gx.fn.setCurrentGridRow(v,n)))}if(l||this.outParmsAccepted(b)||q)a=new this.Popup([a,1,0,0,0,0,0,[],b],!0),a.IsMod=d,a.Opener=gx.getObj(c,f),q&&(a.CustomRenderGrid=r),a.open()}},outParmsAccepted:function(a){for(var b=
a.length,d=!1,c=0;c<b;c++){var f=a[c];gx.fn.isOutputParm(f)&&(d=!0);if(gx.fn.isOutputParm(f)&&f.Ctrl&&gx.fn.isAccepted(f.Ctrl))return!0}return!d},gxReturn:function(a){gx.fn.closeWindow(a)},parmId:function(a){a=gx.dom.id(a);0===a.indexOf("span_")&&(a=a.substring(5));return a},popuplvl:function(){var a=gx.popup.getPopup();return a&&a.window?a.window.gx.popup.lvl:-1},assignPromptFields:function(a,b){var d=[],c=gx.O,f=[],l=99999,n=b.length,q=0;for(q=0;q<n;q++){var r=a[q],v=b[q];if(r.Ctrl&&!gx.lang.emptyObject(r)){gx.csv.pkDirty=
r.isKey;"checkbox"==r.Ctrl.type&&r.Ctrl.value!=v&&(r.Ctrl.checked=!r.Ctrl.checked);r.Ctrl.value!=v&&r.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var t=gx.csv.ctxControlId(this.parmId(r.Ctrl)),y=c.getValidStructFld(t);f.push({idx:y?y.id:l++,ParmCtrl:r.Ctrl,ControlId:t,VStruct:y,PValue:v})}}f.sort(function(B,u){return B.idx<u.idx?-1:B.idx>u.idx?1:0});for(q=0;q<f.length;q++)this.assignPromptFieldValue(f[q],c);for(q=0;q<f.length;q++)d.push(this.assignAndValidatePromptField(f[q],c));return g.when.apply(g,
d)},assignPromptFieldValue:function(a,b){var d=a.VStruct,c=a.ParmCtrl;a=a.PValue;gx.lang.emptyObject(d)||gx.lang.emptyObject(d.v2c)||"date"!=d.type&&"dtime"!=d.type?(gx.fn.setControlValue(this.parmId(c),a,0),d.c2v(),"function"===typeof d.v2bc&&d.v2bc.call(b)):(d.v2v(a),"function"===typeof d.v2bc&&d.v2bc.call(b),gx.fn.v2c(d,a));gx.fn.setControlGxValid(c,"0");gx.evt.execOnchange(c);b=gx.dom.byId("span_"+c.name);null!=b&&(0===b.childNodes.length&&b.appendChild(gx.popup.gxOpener().document.createTextNode("")),
b.childNodes[0].nodeValue=a);d&&d.gxgrid&&d.gxgrid.updateControlValue(d,!1)},assignAndValidatePromptField:function(a,b){var d=g.Deferred(),c=!0,f=a.ControlId,l=a.VStruct,n,q=function(){gx.popup.assignPromptFieldValue(a,b);gx.util.balloon.clear(f);n&&(gx.O.toValid=n+1,gx.csv.validateAll().done(function(){if(!gx.lang.emptyObject(l.rgrid)){for(var r=l.rgrid.length,v=0;v<r;v++)l.rgrid[v].filterVarChanged();d.resolve()}}));d.resolve()}.closure(this);!gx.lang.emptyObject(l)&&(n=b.getValidStructId(l.fld))&&
(n>gx.O.toValid&&(b.toValid=n),c=!1,gx.csv.validateAll().done(q));c&&d.resolve();return d.promise()},autofit:function(){var a=this.getPopup();gx.lang.emptyObject(a)||"opened"!=a.state||this.ext.autofit(a,null,!1)},Impl:function(a,b,d,c,f,l,n,q){var r="PopupBorder gx-popup gx-popup-default";a.cssClass&&(r=r.replace("gx-popup-default",""),r+=" "+a.cssClass);return new this.ext.popUp(a,d,l,q,n,c,f,"gxp",b,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,
!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",r,"PopupShadow",void 0)},setZIndex:function(a){a=gx.dom.getStyle(a,"zIndex");isNaN(a)&&(a=999);a++;this.zindex=a;this.ext.zdx=a},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},
hide:function(a){var b=gx.dom.byId;gx.popup.ext.compatMode()&&(b(a+"_t").style.visibility="hidden",b(a+"_c").style.visibility="hidden",b(a+"_rs").style.visibility="hidden");b(a+"_b").style.visibility="hidden"},show:function(a){var b=gx.dom.byId,d=g("#"+a+"_b");gx.popup.ext.compatMode()?(b(a+"_t").style.visibility="visible",b(a+"_c").style.visibility="visible",b(a+"_rs").style.visibility="visible"):g(document.body).toggleClass("gx-popup-opened",!0);d.css("visibility","visible")},close:function(a,b){g(document.body).toggleClass("gx-popup-opened",
!1);if(!b||"function"!=typeof b||!1!==b()){a.draggable&&a.draggable.deinit();a.resizable&&a.resizable.deinit();gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var d=a.id;b=document.getElementById(d+"_b");d=document.getElementById(d+"_ifrm");gx.popup.ext.deinitmodal(a);gx.popup.setPopup(a.parentPopup);var c=a.callerActiveElement;c&&c.focus&&c.focus();a.parentPopup?a.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[a]):gx.fx.obs.notify("popup.close",
[a]);d&&(d.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?b.parentNode.removeChild(b):gx.dom.removeControlSafe(b)}},move:function(a,b,d){a=g("#"+a+"_b");a.toggleClass("gx-popup-centered",!1);void 0!==b?a.css({left:Math.max(b,0)}).toggleClass("gx-popup-horizontal-center",!1):a.toggleClass("gx-popup-horizontal-center",!0);void 0!==d&&a.css({top:Math.max(d,0)})},resize:function(a,b,d){var c=gx.dom.byId;if(c(a+"_rs").rsEnable){var f=c(a+"_rs"),l=c(a+"_b"),n=c(a+
"_t");c=c(a+"_c");gx.popup.ext.compatMode()?(f.style.left=Math.max(b,92)+"px",f.style.top=Math.max(d,72)+"px",l.style.width=Math.max(b+8,100)+"px",l.style.height=Math.max(d+8,80)+"px",n.style.width=Math.max(b+3,92)+"px",c.style.width=Math.max(b-5,87)+"px",c.style.height=Math.max(d-28,44)+"px"):(a=document.getElementById(a+"_ifrm"),g(a).css({width:b,height:d}));this.resizePopupContent(b,d)}},movepopup:function(){null!=this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+
this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(a,b){var d=gx.popup.ext,c=a.pageX;a=a.pageY;var f=g(b);gx.popup.ext.compatMode()?(d.rsxoff=parseInt(b.style.left,0)-c,d.rsyoff=parseInt(b.style.top,0)-a):(d.rsxoff=f.position().left-c,d.rsyoff=f.position().top-a);d.currRS=b;return!1},changez:function(a){a=null!=a?a:this;var b=gx.popup.ext,d=gx.dom.byId;a.style.zIndex=
++b.zdx;d(a.cid+"_rs").style.zIndex=++b.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(a,b){var d=gx.popup.ext,c=gx.dom.byId;b=c(b.cid+"_b");gx.evt.mouse.update(a);a=gx.evt.mouse.x;c=gx.evt.mouse.y;gx.popup.ext.compatMode()?(d.xoff=parseInt(b.style.left,0)-a,d.yoff=parseInt(b.style.top,0)-c):(d.xoff=g(b).position().left-a,d.yoff=g(b).position().top-c);d.currIDb=b;return!1},subBox:function(a,b,d,c,f,l){f=document.createElement("div");f.setAttribute("id",l);f.style.position="absolute";
f.style.left=a+"px";f.style.top=b+"px";f.style.width=d+"px";f.style.height=c+"px";f.style.visibility="visible";f.style.padding="0px";f.style.width=d+"px";return f},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(a,b,d,c,f,l,n,q,r,v,t,y,B,u,w,z,C,F,G,k,m,p,x,A,D,E,I,J){D=void 0!==D?D:gx.popup.showParentPopups;b=a.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);c=this.win.gx.dom.byId.closure(this.win.gx.dom);
d=g("<div/>",{id:b+"_b",style:w?"":"visibility:hidden;"})[0];g(d).addClass("gx-responsive-popup gx-popup-centered "+x+" gx-popup-initial");x=g("<div/>",{id:b+"_t"})[0];x.className=k;x.innerHTML='<span id="'+b+'_gxtitle" class="PopupTitle">'+r+'</span><span class="'+m+'"; id="'+b+'_cls"></span>';r=g("<div/>",{id:b+"_c"})[0];r.className=p;"string"==typeof n?r.innerHTML=n:r.appendChild(n);d.appendChild(x);d.appendChild(r);J=gx.dom.byId(J)||this.doc.body;J.appendChild(d);w||this.hide(b);n=c(b+"_b");w=
c(b+"_cls");n.cid=b;n.isExt=F?!0:!1;F=c(b+"_t");F.cid=b;C&&(a.resizable=new gx.popup.ext.resizable(n,b,G,d));z&&(a.draggable=new gx.popup.ext.draggable(n,F));gx.evt.attach(w,"click",I.close||this.close.closure(this,[a,I.beforeClose]));(u||D)&&this.initmodal(a,D,E)},resizable:function(a,b,d,c){var f,l=!1,n,q,r,v,t;this.init=function(y,B,u,w){var z=g("<div/>",{id:B+"_rs"})[0];z.className+="gx-popup-resize";z.innerHTML='<img src="'+u+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">';
z.rsEnable=!0;z.style.cursor="se-resize";z.cid=B;w.appendChild(z);r=y;z.firstChild.addEventListener("dragstart",function(C){gx.evt.cancel(C,!0)},!0);v=this.onMouseup.closure(this);t=this.onMousemove.closure(this);z.addEventListener("mousedown",this.onMousedown.closure(this));document.addEventListener("mouseup",v);document.addEventListener("mousemove",t);f=!0};this.deinit=function(){f&&(document.removeEventListener("mouseup",v),document.removeEventListener("mousemove",t),f=r=null)};this.onMousemove=
function(y){if(l){var B=g(r).find("iframe");g("iframe").css("pointer-events","none");var u=g(r).hasClass("gx-popup-centered")?2:1,w=y.clientX-n,z=y.clientY-q;w=g(B).width()+w*u;u=g(B).height()+z*u;g(B).css({width:w,height:u});n=y.clientX;q=y.clientY}};this.onMousedown=function(y){n=y.clientX;q=y.clientY;l=!0};this.onMouseup=function(){l&&(g("iframe").css("pointer-events",""),l=!1)};this.init(a,b,d,c)},draggable:function(a,b){var d,c=!1,f,l,n=0,q=0,r,v,t,y,B;this.init=function(u,w){r=u;v=w;B=this.onMousedown.closure(this);
y=this.onMousemove.closure(this);t=this.onMouseup.closure(this);r.addEventListener("mousedown",B);r.addEventListener("mouseup",t);document.addEventListener("mousemove",y);d=!0};this.deinit=function(){d&&(r.removeEventListener("mousedown",B),r.removeEventListener("mouseup",t),document.removeEventListener("mousemove",y),d=r=v=null)};this.onMousemove=function(u){if(c){g("iframe").css("pointer-events","none");var w=u.clientY-l;r.style.left=n+(u.clientX-f)+"px";r.style.top=q+w+"px"}};this.onMousedown=
function(u){if(u.target===v){var w=g(r);n=w.position().left;q=w.position().top;w.css({left:n,top:q}).toggleClass("gx-popup-centered gx-popup-horizontal-center",!1);f=u.clientX;l=u.clientY;c=!0}};this.onMouseup=function(){c&&(g("iframe").css("pointer-events",""),c=!1,n=parseInt(r.style.left,10)||0,q=parseInt(r.style.top,10)||0)};this.init(a,b)},window_compat:function(a,b,d,c,f,l,n,q,r,v,t,y,B,u,w,z,C,F,G,k,m,p,x,A,D,E,I,J){D=void 0!==D?D:gx.popup.showParentPopups;y=a.id;this.win||(this.win=window);
this.doc||(this.doc=this.win.document);B=this.win.gx.dom.byId.closure(this.win.gx.dom);f=Math.max(f,100);l=Math.max(l,80);b=new this.subBox(f-8,l-8,7,7,"",y+"_rs");C&&(b.className+="gx-popup-resize",b.innerHTML='<img src="'+G+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',b.style.cursor="se-resize");b.rsEnable=C;d=new this.subBox(d,c,f,l,t,y+"_b");d.className=x;d.style.display="block";d.style.boxSizing="content-box";d.style.zIndex=++this.zdx;w||
(d.style.visibility="hidden");v=new this.subBox(2,2,f-5,20,v,y+"_t");v.style.overflow="hidden";v.style.boxSizing="content-box";v.className=k;v.innerHTML='<span id="'+y+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+r+'</span><span class="'+m+'" style="z-index:'+ ++this.zdx+';" id="'+y+'_cls"></span>';f=new this.subBox(2,24,f-13,l-36,q,y+"_c");f.className=p;"string"==typeof n?f.innerHTML=n:f.appendChild(n);f.style.overflow="hidden";f.style.boxSizing=
"content-box";w||(d.style.visibility="hidden",v.style.visibility="hidden",f.style.visibility="hidden");d.appendChild(v);d.appendChild(f);d.appendChild(b);J=gx.dom.byId(J)||this.doc.body;J.appendChild(d);w||this.hide(y);var K=B(y+"_b");K.cid=y;K.isExt=F?!0:!1;var H=B(y+"_t");H.cid=y;C&&(n=B(y+"_rs"),n.cid=y,n.style.boxSizing="content-box",gx.evt.attach(n,"mousedown",this.startRS.closure(this,[n],!0)),gx.evt.attach(n,"mouseup",this.stopRS.closure(this,[n],!0)));n=B(y+"_cls");gx.evt.attach(n,"click",
I.close||this.close.closure(this,[a,I.beforeClose]));z&&(gx.evt.attach(H,"mousedown",function(L){this.grab_id(L,H);gx.evt.attach(K,"mouseup",this.stopdrag.closure(this,[H],!0),this,{single:!0})},this),C&&gx.evt.attach(b.firstChild,"dragstart",function(L){gx.evt.cancel(L,!0)},!0));(u||D)&&this.initmodal(a,D,E)},popUp:function(a,b,d,c,f,l,n,q,r,v,t,y,B,u,w,z,C,F,G,k,m,p,x,A,D,E,I,J,K,H,L,N,O,P,M){t=gx.popup.ext;null!=a.parentPopup?(y=a.parentPopup.window,t=y.gx.popup.ext,t.win=y,t.doc=y.document,gx.popup.ext=
t):(t.win=window,t.doc=t.win.document);t.win.gx.popup.setPopup(a);a.window=t.win;a.document=t.doc;t.win.gx.popup.lvl++;q+=t.win.gx.popup.lvl;a.id=q;a.IsPrompt||gx.util.sameAppUrl(r)?(r+=gx.http.urlParameterPrefix(r),r+=encodeURIComponent("gxPopupLevel="+t.win.gx.popup.lvl+";"),d=gx.util.getFileName(r),d=d.charAt(0).toUpperCase()+d.slice(1),gx.popup.ext.compatMode()?(y=gx.HTML5?"auto":"100%",r='<iframe id="'+q+'_ifrm" src="'+r+'" width="'+y+'" height="'+y+'" frameborder="0" style="overflow:auto;" title="'+
d+'" data-gx-popup-ct=""></iframe>'):(y=!b&&0<l?l:gx.dom.fixes.getPopupMinWidth(),r=g("<iframe/>",{id:q+"_ifrm",src:r,title:d,style:"width:"+gx.dom.addUnits(y)}),r.attr("data-gx-popup-ct",""),r=r[0].outerHTML,gx.util.browser.isIPad()&&(r='<div class="iframe-container">'+r+"</div>")),d={close:a.close.closure(a,[null,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel}])},t.window(a,b,c,f,l,n,r,v,B,u,z,C,F,G,k,m,p,A,K,H,L,N,O,P,M,!0,d),b=t.win.gx.dom.byId(q+"_ifrm"),t.iFrame=b,gx.lang.doCallTimeout(t.showIfLoaded,
t,[a,b,1],50)):(gx.popup.setPopup(null),a=new Date,a=a.getTime(),q="",1==d&&(q="left="+c+",top="+f),c="",b||(c=",width="+l+",height="+n),window.open(A?r:"","gx"+a,"status=no,menubar=no"+c+",resizable="+(p?"yes":"no")+",scrollbars=yes,"+q))},initmodal:function(a,b,d){a.showParentPopups=b;null==a.parentPopup?gx.ajax.disableForm(d,!0):b||this.hide(a.parentPopup.id)},deinitmodal:function(a){if(null==a.parentPopup)gx.ajax.enableForm();else{this.show(a.parentPopup.id);var b=a.parentPopup.frameWindow;b&&
b.gx&&a.parentPopup.frameWindow.gx.ajax.enableForm()}},getDocumentContentType:function(a){return a.contentType||g(a.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(a,b){if(void 0===b.isPdf){var d=a.src;if(gx.util.getContentTypeFromExt(d)==gx.util.contentTypes.pdf)return b.isPdf=!0;var c=gx.util.contentTypes.html;try{var f=a.contentDocument;f=a.contentWindow.document;c=this.getDocumentContentType(f);if(c==gx.util.contentTypes.pdf)return b.isPdf=!0}catch(n){c=
null}if(gx.lang.emptyObject(c)){var l;a={};a.url=d;a.method="HEAD";a.sync=!0;a.ajaxHeader=!1;a.handler=function(n,q,r){l=r.getResponseHeader("Content-Type")};a.obj=!0;gx.http.doCall(a);if(l&&0<=l.indexOf(gx.util.contentTypes.pdf))return b.isPdf=!0}return!1}return b.isPdf},showIfLoaded:function(a,b,d){try{if(a.isActive()&&(this.docReady(b,d)||10<d&&this.isPDFPopup(b,a))){var c=gx.dom.iFrameDoc(b),f=!1;try{f=c&&"about:blank"!=c.URL}catch(n){}var l=this.isPDFPopup(b,a);if(f||l){a.state="opened";this.autofit(a,
c,!0);return}}}catch(n){gx.dbg.logEx(n,"gxpopup.js","showIfLoaded")}d++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[a,b,d],50*d)},docReady:function(a,b){if("complete"==a.readyState)return!0;if(a=gx.dom.iFrameDoc(a)){try{var d="undefined"!=typeof a.gxReadyState?a.gxReadyState:a.readyState}catch(c){return!0}if("complete"==d)return!0}return!gx.util.browser.isIE()&&50<=b&&a&&a.body&&0!==a.body.childNodes.length?!0:!1},resizePopupContentLegacy:function(a,b){var d=gx.dom.iFrameDoc(this.iFrame);
b=0<b?b:"100%";a=0<a?a:"100%";var c=g(this.iFrame);d&&(a=b="100%");c.width(a);void 0===b&&(b=Math.max(Math.max(d.body.scrollHeight,d.documentElement.scrollHeight),Math.max(d.body.offsetHeight,d.documentElement.offsetHeight)));c.height(b)},resizePopupContent:function(a,b){gx.HTML5&&this.iFrame&&(gx.popup.ext.compatMode()?this.resizePopupContentLegacy(a,b):this.resizePopupContentImpl(a,b))},resizePopupContentImpl:function(a,b){var d=gx.dom.iFrameDoc(this.iFrame),c=g(this.iFrame);if(0<a&&0<b)c.width(a),
c.height(b);else if(d){try{var f=c[0].contentWindow.gx&&c[0].contentWindow.gx.runtimeTemplates}catch(l){}f||c.width(50);a=Math.max(d.body.scrollWidth,d.body.getBoundingClientRect().width,d.documentElement.scrollWidth,d.documentElement.getBoundingClientRect().width);try{a+=c.height()<d.body.offsetHeight?gx.dom.getScrollbarWidth():0}catch(l){}1<Math.abs(c.width()-a)&&c.width(a);d=Math.max(d.body.scrollHeight,d.body.getBoundingClientRect().height,d.documentElement.scrollHeight,d.documentElement.getBoundingClientRect().height);
c.height(d)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(a,b,d){if(!gx.lang.emptyObject(a)){var c=a.id,f=a.isPdf,l=g("#"+c+"_c");this.doc||(this.doc=a.document);var n=this.doc;var q=n.getElementById(c+"_ifrm"),r=g(n.getElementById(c+"_gxtitle"));!b&&gx.popup.ispopup()&&(b=gx.dom.iFrameDoc(q));this.iFrame=this.iFrame||q;r.text(b&&!f?b.title:"");a.frameDocument=b;a.frameWindow=q.contentWindow;
b&&!f&&(b.gxPopup=a);gx.util.browser.isIPad()&&(l.css("overflow-y","auto"),l.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var v=this.getiFrameSizeInfo(n);v.accessParentFrame&&(r=v.scrollTop,q=v.maxHeight+Math.min(window.top.document.body.scrollTop-v.y,0)-50,l.css("max-height",q).parent().css("margin-top","0px"),this.move(c,void 0,Math.max(window.top.document.body.scrollTop-v.y,0)+r+(q-Math.min(b.body.offsetHeight,q))/2))}if(f){l.addClass("gx-popup-pdf");var t=.5*n.body.clientWidth;
var y=.85*n.body.clientHeight}a.autoresize||(t=a.width,y=a.height);this.resizePopupContent(t,y);d&&(a.position&&(b=parseInt(a.top,0),a=parseInt(a.left,0),this.move(c,a,b)),this.show(c))}},autofit_comp:function(a,b,d){if(!gx.lang.emptyObject(a)){var c=document;a.zindex=null!=c.gxPopup?this.zdx+c.gxPopup.zindex:this.zdx;var f=a.id,l=a.isPdf;this.doc||(this.doc=a.document);c=this.doc;var n=c.getElementById(f+"_ifrm");!b&&gx.popup.ispopup()&&(b=gx.dom.iFrameDoc(n));a.frameDocument=b;a.frameWindow=n.contentWindow;
b&&!l&&(b.gxPopup=a);n=c.getElementById(f+"_rs");var q=c.getElementById(f+"_t"),r=c.getElementById(f+"_b"),v=c.getElementById(f+"_c"),t=c.getElementById(f+"_gxtitle");t.innerHTML=b&&!l?b.title:"";t.style.width="auto";var y=gx.dom.getComputedStyle(v),B=gx.dom.getComputedStyle(q),u=gx.dom.getComputedStyle(r),w=gx.dom.getComputedStyle(n),z=parseInt(y.height,0),C=parseInt(y.width,0),F=this.getiFrameSizeInfo(c),G=F.maxWidth,k=F.maxHeight,m=F.scrollTop,p=F.scrollLeft,x=F.x;F=F.y;var A=gx.dom.dimensions(r);
a.autoresize||(z=a.height-z+A.h,C=a.width-C+A.w);var D=a.width-C,E=a.height-z;a.autoresize&&(!l&&b?(b=gx.HTML5?b.documentElement||b.body:b.body,c=d&&gx.util.browser.isEdge()?g.position.scrollbarWidth():0,b?(b.gxwidth||(b.gxwidth=b.scrollWidth),D=b.gxwidth+c,c=b.gxwidth+30-G,E=b.scrollHeight+30-k,D=Math.max(D,t.clientWidth+15)-C-(0<c?c:0),E=b.scrollHeight-z-(0<E?E:0)):gx.util.browser.isIE()&&(0>D&&(D=0),0>E&&(E=0))):l&&(D=c.body.clientWidth/2,E=c.body.clientHeight/2));t=parseInt(a.top,0);z=parseInt(a.left,
0);a.position||(t=(k-E)/2-A.h/2+m-F,z=(G-D)/2-A.w/2+p-x,0>t&&(t=5,E-=5),0>z&&(z=5,D-=5));r.style.top=parseInt(t,0)+"px";r.style.left=parseInt(z,0)+"px";a.autoresize?(a=function(I,J){J=parseInt(I,0)+J;return 0<J?J:I},q.style.width=a(B.width,D)+"px",r.style.height=a(u.height,E)+"px",r.style.width=a(u.width,D)+"px",v.style.height=a(y.height,E)+"px",v.style.width=a(y.width,D)+"px",a=gx.util.browser.isIE()?4:2,n.style.top=parseInt(u.height,0)-parseInt(w.height,0)-a+"px",n.style.left=parseInt(u.width,0)-
parseInt(w.width,0)-a+"px"):(z=a.height,C=a.width,n.style.left=Math.max(C,92)+"px",n.style.top=Math.max(z,72)+"px",r.style.width=Math.max(C+8,100)+"px",r.style.height=Math.max(z+8,80)+"px",q.style.width=Math.max(C+3,92)+"px",v.style.width=Math.max(C-5,87)+"px",v.style.height=Math.max(z-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(v.style["overflow-y"]="auto",v.style["-webkit-overflow-scrolling"]="touch"):v.style.overflow="hidden";l&&gx.util.browser.isIE()?this.resizePopupContent("100%",
"100%"):this.resizePopupContent(parseInt(v.offsetWidth,10),parseInt(v.offsetHeight,10));d&&this.show(f)}},getiFrameSizeInfo:function(a){var b=gx.util.getWindowInfo().canAccessFrame,d={x:0,y:0,accessParentFrame:b};!b||window==window.top||gx.lang.emptyObject(window.top)?(d.maxWidth=window.innerWidth||a.documentElement.clientWidth||a.body.offsetWidth,d.maxHeight=window.innerHeight||a.documentElement.clientHeight||a.body.offsetHeight,d.scrollTop=gx.dom.documentScroll(a).scrollTop,d.scrollLeft=gx.dom.documentScroll(a).scrollLeft):
(b=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>a.body.clientHeight?d.maxHeight=a.body.clientHeight:(d.maxHeight=window.top.document.body.clientHeight,d.y=b.y),d.scrollTop=a.body.scrollTop,d.scrollLeft=a.body.scrollLeft,d.maxWidth=Math.min(window.top.document.body.clientWidth,a.body.clientWidth),window.top.document.body.clientWidth>a.body.clientWidth?d.maxWidth=a.body.clientWidth:(d.maxWidth=window.top.document.body.clientWidth,d.x=b.x));return d},_init:function(){}},
_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var a=this.getPopup();if(a){try{a.frameDocument&&(gx.util.browser.isIE()?a.frameDocument=a.frameWindow.document:a.frameDocument.gxPopup=a)}catch(b){a.frameDocument=a.frameWindow.document,gx.dbg.logEx(b,"gxpopup.js","_init")}a=a.window.gx.popup;gx.fx.obs.addObserver("gx.onload",a,function(){this.autofit()}.closure(a));gx.fx.obs.addObserver("grid.onafterrefresh",a,function(b,d,c){d<c&&this.autofit()}.closure(a));gx.fx.obs.addObserver("gx.onafterevent",
a,function(){this.autofit()}.closure(a))}}}}(gx.$);
gx.ajax=function(g){function a(c,f,l){0<c&&(l=l||gx.O,gx.fn.setCurrentGridRow(c,f),(c=l.getGridById(c))&&c.instanciateRow(f))}var b=/\?(.*)/,d=function(c,f,l){gx.dbg.logMsg("Unable to execute external object "+c+" - "+f+"("+l+")")};return{reqHeader:"GxAjaxRequest",dfTimer:null,resolveParmKey:function(c){var f=!1;c.av?f=c.av:c.ctrl&&c.prop?f=c.ctrl+c.prop:c.ctrl&&(f=c.ctrl);return f},serviceUrl:function(c){var f=gx.ajax.selfUrl();c&&(f=b.test(f)?f.replace(b,"?"+c+gx.http.urlParameterSeparator(f)+"$1"):
f+("?"+c));return f},validationMessage:function(c,f,l,n,q,r){c=new gx.ajax.message(c,f,l,n,q,r);return gx.lang.apply(c,{isValidation:!0,beforeCall:gx.emptyFn,beforeAjaxCall:function(v){v.warnOnTimeout=!0;v.beforeSend=function(t){t.setRequestHeader("X-FULL-AJAX-REQUEST","1")}},beforeProcesResponse:function(v){var t,y=[],B=this.getParmsMetadata("input");for(t=0;t<B.length;t++)B[t].av&&y.push(B[t].av);v.isValidation=!0;v.validationInput=y}})},message:function(c,f,l,n,q,r){var v;return{disableForm:r,
gxO:f,grid:l,row:n,methods:[c],isValidation:!1,addMethod:function(t){this.methods.push(t)},gridsData:function(){var t=this.gxO.getGridById(this.grid,this.row),y={},B=function(w,z){z[w.gridName]={id:w.gridId,lastRow:Math.max(0,Number(w.lastRowId)),pRow:w.parentRow?w.parentRow.gxId:""}};if(t){var u=function(w,z){if(w){B(w,z);var C=gx.fn.currentGridRowImpl(w.gridId);C&&(z[w.gridName].lastRow=Math.max(0,Number(C.substr(-4,4))-1));u(w.parentGrid,z)}};(function(w,z,C,F){var G=function(k,m){return k?m.parentGrid===
k&&gx.text.startsWith(m.parentRow.gxId,F)?m:G(k.parentGrid,m):null};C=g.map(gx.O.Grids,function(k){return G(w,k)});g.each(C,function(k,m){B(m,z)})})(t,y,this.gxO,this.row);u(t,y)}else g.each(this.gxO.Grids,function(w,z){B(z,y)});return y},to_json:function(){var t={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(t.fullPost=this.fullPost);this.addGXStateParms(t);
this.grid&&(t.grid=this.grid);t.grids=this.gridsData();this.row&&(t.row=this.row.substring(0,4),t.pRow=this.row.substring(4));return gx.json.serializeJson(t)},getParmsMetadata:function(t){for(var y=[],B={},u=0,w=this.methods.length;u<w;u++){var z=this.methods[u];if(this.gxO.EvtParms[z]){z=this.gxO.EvtParms[z]["input"==t?0:1];for(var C=0;C<z.length;C++)if(z[C].postForm||z[C].sPrefix||z[C].sSFPrefix||z[C].sCompEvt)y.push(z[C]);else{var F=gx.ajax.resolveParmKey(z[C]);F&&(void 0===B[F]?(B[F]=y.length,
y.push(z[C])):void 0===y[B[F]].grid&&void 0!==z[C].grid&&(y[B[F]]=z[C]))}}}return y},parmFromHidden:function(t,y){var B=gx.O;gx.setGxO(y);if(!gx.lang.emptyObject(t)&&!gx.lang.emptyObject(y)&&t.v2v){var u=gx.fn.getHidden(this.gxO.IsMasterPage?t.fld+"_MPAGE":gx.O.CmpContext+t.fld);t.v2v(u);u=y[t.gxvar]}gx.setGxO(B);return u},getInputParms:function(){for(var t=this.getParmsMetadata("input"),y=this.gxO.CmpContext,B=[],u=[],w,z,C,F,G,k,m=0,p=t.length;m<p;m++)if(z=C=void 0,k="",w=t[m],w.postForm){F={};
F.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(F,gx.http.postDataFormat.JSON);for(var x in gx.http.viewState)this.fullPost[x]||void 0===gx.http.viewState[x]||(this.fullPost[x]=gx.http.viewState[x])}else if(this.gxO.isTransaction()&&0<this.grid&&this.row&&"Gx_mode"===w.av&&"vMODE"===w.fld)B.push(gx.fn.getGridRowModeImpl(gx.fn.gridLvl(this.grid),this.grid,this.row));else if("Referrer"==w.prop)B.push(gx.referrer?gx.referrer:document.referrer);else if(w.sPrefix)B.push(this.gxO.sPrefix());
else if(w.sSFPrefix)B.push("");else if(w.sCompEvt)B.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else{if(w.ctrl)if(w.prop)"GridRC"==w.prop?(F=(F=gx.parentGridRow(w.grid,this.gxO))?"_"+F:"",z={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+w.av+F),rowSuffix:F,grid:w.grid}):z="GridCurrRow"==w.prop?gx.fn.currentGridRowImpl(w.grid):this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+w.ctrl,w.prop);else{if(C=this.gxO.getValidStructFld(w.ctrl))F=gx.fn.getControlGridRef(C.fld,C.grid),gx.html.controls.isMultiSelection(C.ctrltype)?
k=gx.dom.comboBoxToObj(F,z):"radio"===C.ctrltype&&(k=gx.dom.radioToObj(F,z)),k&&(z=k)}else if((C=this.getParmVarVStruct(w))&&"function"==typeof C.c2v&&"function"==typeof C.val&&(F=C.grid===this.grid?this.row:gx.fn.currentGridRowImpl(C.grid),void 0!==C.val(F)&&C.c2v(F)),C&&!0===C.isuc&&(G=this.row||(C&&C.grid?gx.fn.currentGridRowImpl(C.grid):void 0),(C.getUCInstance(G)||C.uc).execC2VFunctions()),z="function"==typeof this.gxO[w.av]?this.gxO[w.av](this.row):void 0===this.gxO[w.av]?w.fld?gx.fn.getControlValue(w.fld):
"":this.gxO[w.av],F=gx.fn.vStructForOld(w.av),!F||"date"!=F.type&&"dtime"!=F.type||"string"===typeof z&&(z=new gx.date.gxdate(z)),this.isValidation&&z instanceof gx.date.gxdate&&!z.HasDatePart&&(F=new gx.date.gxdate(""),F.assign_date(z),F.JsonNullFormat=gx.date.jsonNullFormat.YearOne,z=F),void 0!==w.grid){var A=z,D=[];g.each(this.gxO.Grids,function(E,I){if(I.gridId===w.grid){E=I.parentRow?I.parentRow.gxId:"";if(C){z={pRow:E,c:[],hc:[],hsh:[],v:A};for(var J=1;J<=I.lastRowId;J++){G=gx.grid.getPaddedRowId(J);
var K=C.isuc?gx.fn.getControlValue(C.fld+"_"+G+E):C.val(G+E);z.c.push(K);w.hsh&&z.hsh.push(gx.fn.getHash(y,C.fld,G+E));gx.lang.emptyObject(C.hc)||z.hc.push(gx.fn.getControlValue("GXHC"+C.fld+"_"+G+E))}}else gx.lang.isArray(z)&&(z={pRow:E,c:z,v:z[Number(gx.fn.currentGridRowImpl(w.grid))-1]});D.push(z)}});z=D}else w.hsh&&(C&&C.grid?(G=gx.fn.currentGridRowImpl(C.grid)||"",""===G&&(z=this.parmFromHidden(C,this.gxO))):G="",u.push({hsh:gx.fn.getHash(this.gxO.CmpContext,w.fld,G),row:G}));B.push(void 0!==
z?z:null)}return{input:B,hashed:u}},refreshOutputParms:function(){for(var t=this.getParmsMetadata("output"),y,B,u=0,w=t.length;u<w;u++)y=t[u],(y=this.getParmVarVStruct(y))&&y.grid&&"function"==typeof y.c2v&&"function"==typeof y.val&&(B=gx.fn.currentGridRowImpl(y.grid),void 0!==y.val(B)&&y.v2c(B))},getParmVarVStruct:function(t){var y;if(void 0!==t.fld)return t.fld?this.gxO.getValidStructFld(t.fld):null;if(this.grid&&this.row&&(y=this.gxO.getGridById(this.grid,this.row))&&(t=y.grid.getColumnForVar(t.av)))return this.gxO.getValidStruct(t.gxId)},
addGXStateParms:function(t){var y={};gx.notifications&&gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(y.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(y)||(t.gxstate=y)},beforeCall:function(){q&&gx.fn.objectOnpost()},call:function(){v=g.Deferred();var t=gx.O;gx.setGxO(this.gxO);if(this.grid&&this.row){var y=gx.fn.currentGridRowImpl(this.grid);gx.fn.setCurrentGridRow(this.grid,this.row)}this.beforeCall();var B=this.getInputParms();q?(this.parms=B.input,
this.hashedParms=B.hashed,this.doAjaxCall(!1,this.disableForm)):(this.doClientSideCall(),this.refreshOutputParms());this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,y);gx.setGxO(t);return v.promise()},doAjaxCall:function(t,y){var B=this.to_json();gx.evt.setProcessing({status:!0,ctx:"doAjaxCall"});!1!==y&&this.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[B,t]);t=gx.ajax.getPostInfo(this.gxO,B,t);t.handler=this.ajaxCallHandler.closure(this);t.error=this.ajaxCallError.closure(this);t.handleAllStatusCodes=
!0;t.url=gx.ajax.serviceUrl((gx.http.useNamedParameters(gx.ajax.selfUrl())?"gxevent=":"")+gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));t.reqData=B;t.always=this.callback;t.contentType="application/json";this.beforeAjaxCall(t);gx.http.doCall(t)},beforeAjaxCall:gx.emptyFn,doClientSideCall:function(){var t=this.callback();v.resolve(t)},ajaxCallError:function(){v.resolve(!1);f.endFeedback()},afterAjaxCallHandler:function(t,y,B){B=B||gx.O;gx.evt.setProcessing({status:!1,ctx:"afterAjaxCallHandler"});
v.resolve(!t);t&&(B.endFeedback(),gx.fx.obs.notify("gx.onafterevent",[y]))},ajaxCallHandler:function(t,y,B){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=B.status;t=!1;if(B.status==gx.http.STATUS_FORBIDDEN)gx.util.alert.showError(gx.getMessage("GXM_runtimeappsrv")+" ("+B.status+" "+B.statusText+")"),t=!0;else if(gx.http.checkResponseStatus(B,this.isValidation))t=!0;else if(200>B.status||299<B.status)gx.dom.writeError(B.responseText,gx.getMessage("GXM_runtimeappsrv"),B.status),t=!0;
else if(gx.http.validJsonResponse(B,y)){var u=gx.json.evalJSON(y);null==u?gx.dom.writeError(y.toString(),gx.getMessage("GXM_runtimeappsrv"),B.status):(gx.csv.lastEvtResponse=u,y={response:u,isPostBack:!0,context:{fullAjaxCall:!0},gxObject:this.gxO,gridId:this.grid,row:this.row},this.beforeProcesResponse(y),gx.ajax.setJsonResponse(y).done(function(){gx.fx.obs.notify("gx.onafterevent",[u])}))}else t=!0;this.afterAjaxCallHandler(t,u,this.gxO)},beforeProcesResponse:gx.emptyFn,startFeedback:function(){this.gxO.startFeedback(!1,
this.isValidation)}}},maxGETLength:function(c){return c.AjaxSecurity?600:1350},getImageUrl:function(c,f){var l=c[f];if(gx.lang.emptyObject(l))return"";"object"==typeof l&&(c[f]=gx.ajax.resolveImageUrl(l));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c[f],!0)},resolveImageUrl:function(c){var f;for(f=0;f<c.length;f++){var l=c[f];if(l.l==gx.languageCode&&l.t==gx.theme)return(l.i?"Resources/":"")+l.p}},encryptParms:function(c,f){return c.AjaxSecurity?gx.sec.encrypt(f):f},doPost:function(c,
f,l,n,q,r){!1!==l&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,f]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);f=this.getPostInfo(gx.O,c,f);f.rowId=q;f.gridId=n;f.url=gx.ajax.serviceUrl(c);var v=gx.O;f.always=function(){!1!==l&&v.endFeedback();r&&r()};gx.http.doCall(f)},getPostInfo:function(c,f,l){f={};f.formNode=gx.dom.form();f.method="POST";f.encoding="UTF-8";f.useCash=!1;f.gxO=c;!0===l&&(f.sync=!0);f.handler=gx.http.postHandler;this.multipartInfo(f);return f},
multipartInfo:function(c){gx.dom.hasSelectedFile()&&(c.multipart=!0,c.mimetype="text/html",c.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(c,f){var l=void 0!==c.refresh_form;c=c.refresh||c.refresh_form;gx.util.balloon.clearAll();if("GET"==c)gx.http.reload(!0);else return c="RFR",f.IsMasterPage&&(c+="_MPAGE"),f=l||!gx.pO.fullAjax?gx.pO:f,l=f.fullAjax,f.executeServerEvent(c,!gx.pO.fullAjax,null,!0,l);return g.Deferred().resolve()},doRefresh:function(c){var f=c.IsMasterPage?
"RFR_MPAGE":"RFR";c=gx.pO.fullAjax?c:gx.pO;c.executeServerEvent(f,!0,null,!0,c.fullAjax)},dispatchCommands:function(c,f,l,n){l=l||{};var q,r=l.ignoreCmds||[];n=void 0===n?0:n;f=f||gx.O;if(c&&0<c.length){for(var v=c.length,t=n;t<v;t++){n=c[t];var y=Object.keys?Object.keys(n)[0]:"";if(!gx.util.inArray(y,r)){n.set_focus&&gx.fn.usrSetFocus(n.set_focus);n.print&&gx.printing.print(n.print);n.close&&(y=[],n.close.values instanceof Array&&(y=n.close.values),gx.fn.closeWindow(y,{parmsMetadata:n.close.metadata,
updateParms:l.updateParms},f));if(void 0!==n.refresh||void 0!==n.refresh_form||""===n.cmp_refresh){gx.ajax.dispatchRefreshCommand(n,f).then(function(){gx.ajax.dispatchCommands(c,f,l,t+1)});return}n.redirect&&(y=n.redirect,y.url=gx.ajax.removeGXParms(y.url),gx.http.redirect(y.url,1===y.forceDisableFrm,2===y.forceDisableFrm,f,!1));n.calltarget&&gx.nav.callFromServerRedirect(n.calltarget.url,n.calltarget.target);n.callback&&n.callback.apply(n.callback.scope,n.args||[]);n.cmp_refresh&&(y=gx.pO.getWebComponent(n.cmp_refresh),
gx.evt.dispatcher.dispatch("REFRESH",y));if(n.popup){c.length>t+1&&(gx.lang.isArray(n.popup)?n.popup[7]=c.slice(t+1):n.popup.OncloseCmds=c.slice(t+1));gx.popup.open(n.popup,f);break}if(n.ucmethod&&(q=gx.getObj(n.ucmethod.CmpContext,n.ucmethod.IsMasterPage))){y=gx.O;gx.setGxO(q);if((q=gx.O.getUserControl(n.ucmethod.Control))&&"function"==typeof q[n.ucmethod.Method])try{q[n.ucmethod.Method].apply(q,n.ucmethod.Parms);var B=!0}catch(u){gx.dbg.logEx(u,"gxcallrpc.js","Failed to execute usercontrol method: "+
n.ucmethod.Method)}gx.setGxO(y)}n.exomethod&&(gx.ajax.dispatchExoMethod(n.exomethod),B=!0);n.exoprop&&gx.ajax.dispatchExoProperty(n.exoprop)}}B&&f.showMessages(!0)}gx.fn.usrSetFocus_commit()},resolveExoObject:function(c,f){c=c[f];var l;if(!c){f=f.split(".");c=window;var n=0;for(l=f.length;n<l;n++)if(c=c[f[n]],void 0===c)return}return c},dispatchExoMethod:function(c){var f=gx.getObj(c.CmpContext,c.IsMasterPage),l,n;if(f){var q=gx.O;gx.setGxO(f);try{(l=this.resolveExoObject(f,c.ObjectName))&&"GlobalEvents"===
c.ObjectName?l.executeMethod(c.Method,c.Parms):c.IsEvent?gx.fx.obs.notify(c.Method,c.Parms):l?(n=l[c.Method])?n.apply(l,c.Parms):d("method","Method not found",c.Method):d("method","Object not found",c.ObjectName)}catch(r){gx.dbg.logEx(r,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(q)}}},dispatchExoProperty:function(c){var f=gx.getObj(c.CmpContext,c.IsMasterPage),l;if(f){var n=gx.O;gx.setGxO(f);try{(l=this.resolveExoObject(f,c.ObjectName))?l[c.PropertyName]=c.Value:d("property","Object not found",
c.ObjectName)}catch(q){gx.dbg.logEx(q,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(n)}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(c,f,l,n,q,r,v,t){f=f||gx.O;if(c&&0<c.length)for(l=c.length,r=0;r<l;r++){var y=c[r];if(y.load){if(n=f.getGridById(y.load.grid,t))y.load.props.values=y.load.values,n.loadNewRows(y.load.props)}else y.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,q),gx.lang.doCall(gx.fn.setJsonProperties,v,t),(n=f.getGridById(y.addlines.grid,t))&&n.getNewRows(y.addlines.count))}},
willLeavePage:function(c){if(c)for(var f=c.length,l=0;l<f;l++)if(c[l].close)return!0;return!1},getRedirectCommand:function(c){if(c)for(var f=c.length,l=0;l<f;l++){var n=c[l];if(n.popup)break;if(n.redirect)return n}return null},saveJsonResponse:function(c){this.lastJsonResponse=JSON.parse(gx.lang.htmlDecode(c))},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(c,
f,l){return this.setJsonResponse({gridId:c.gridId,row:c.rowId,response:c,isPostBack:!0,gxObject:f||gx.O,context:l})},setJsonResponse:function(c){var f=g.Deferred(),l=c.response,n,q=c.isPostBack,r=c.afterCmpLoaded,v=c.gxObject,t=c.gridId,y=c.row,B=c.context||{},u=!!c.isValidation,w=gx.fn,z=gx.lang.doCall,C=this.willLeavePage(l.gxCommands),F=this.getShouldUpdatePropertyFunction(l);if(v){var G=gx.O;gx.O=v}if(t&&y){var k=gx.fn.currentGridRow(t);gx.fn.setCurrentGridRow(t,y)}if(gx.evt.srvCommand)gx.evt.srvCommand=
!1,z(gx.ajax.dispatchCommands,l.gxCommands,v),f.resolve(C);else{var m=this.getRedirectCommand(l.gxCommands);if(m&&1===m.redirect.forceDisableFrm)z(gx.ajax.dispatchCommands,l.gxCommands,v,{ignoreCmds:["refresh","cmp_refresh"]}),f.resolve(C);else if(C)z(gx.ajax.dispatchCommands,l.gxCommands,v),f.resolve(C);else{z(gx.ajax.dispatchPreCommands,l.gxCommands,v,l.gxComponents,l.gxHiddens,l.gxValues,l.gxGrids,l.gxProps,y);z(w.clearCompontHiddens,l.gxComponents);var p=z(w.setJsonHiddens,v,l.gxHiddens);z(w.setJsonComponents,
l.gxComponents,l.DynComponentMap,l.gxHiddens,function(x){gx.http.loadStyles();gx.updateTheme();q&&gx.fn.installComponents(!1);"function"==typeof r&&r();G&&(gx.O=G);var A=[],D=z(w.setJsonValues,l.gxValues,u,t,y,F),E=z(w.setJsonProperties,l.gxProps,y),I=g.map(x,function(L){L=w.cmpContextFromCtrl(L);if(L=gx.pO.WebComponents[L])return gx.lang.objToArray(L.UserControls).concat(L.getUserControlGrids())});u||!v.isTransaction()&&v.fullAjax||gx.util.balloon.clearAll();w.enableDisableDelete(v);q&&(n=z(w.loadJsonGrids,
l.gxGrids,q,A));u&&gx.ajax.transformValidationMessages(c,v,l.gxMessages);z(w.setErrorViewer,l.gxMessages);var J=function(L){L=L||[];var N;gx.pO.supportAjaxEvents&&(N=gx.lang.arrayUnique(E.concat(D,I,L,p),function(O,P){return O.ControlName===P.ControlName}));w.objectPostback(N,x);u||w.setFocusAfterLoad(!0);return g.Deferred().resolve()}.closure(this),K=function(){!B.fullAjaxCall||B.autoRefreshing||!q&&gx.popup.currentPopup||v.endFeedback();z(gx.ajax.dispatchCommands,l.gxCommands,v);k&&gx.fn.setCurrentGridRowSafe(t,
k);f.resolve(C)}.closure(this),H=[];q&&(v.execV2CFunctions(!0,A,!1),n&&H.push(n.done(J)),x&&x.length&&H.push(J.apply(this,[])));g.when.apply(g,H).done(K)},q)}}return f.promise()},getShouldUpdatePropertyFunction:function(c){var f,l,n,q={};if(c.gxGrids)for(f=0;f<c.gxGrids.length;f++){var r=c.gxGrids[f];for(l=0;l<r.Count;l++)for(n=0;n<r[l].Props.length;n++)q[r[l].Props[n][0]]=!0}return function(v){return!q[v]}},transformValidationMessages:function(c,f,l){f=f.cmpCtx||"MAIN";"undefined"!=typeof l[f]&&
(l[f]={fields:c.validationInput,msgs:l[f]})},disableForm:function(c,f){gx.pO.startFeedback(f,void 0===c||c)},enableForm:function(c){c=c||gx.O;gx.pO&&gx.pO.endFeedback();c!=gx.pO&&c.endFeedback()},isFormEnabled:function(){var c=gx.getActiveContext();return c==top&&null!=gx.popup.getPopup()?!0:gx.pO?!c.gx.pO.isFeedbackOn()&&!c.gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(!(!gx.ajax.formAutocomplete||gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||
7>=gx.util.browser.ieVersion()))){var c=gx.dom.form(),f=document.createElement("iframe");f.id="gx_iframe_force_ajax_autocomplete";f.name="gx_iframe_force_ajax_autocomplete";f.style.cssText="display: none";f.src="/content/blank";document.body.appendChild(f);var l=document.createElement("input");l.type="submit";l.style.cssText="display: none";c.appendChild(l);var n=c.target,q=c.action;c.target=f.name;c.action=f.src;var r=g(l);gx.evt.attach(l,"click",function(v){v.stopPropagation();return!0});r.trigger("click");
setTimeout(function(){c.target=n;c.action=q;c.removeChild(l);document.body.removeChild(f)})}},suggest:function(c,f,l,n,q,r,v){c=new gx.fx.suggestProvider(c,f,l,n);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(l),c,l,q,r,v)},hideCode:function(c,f,l){var n=this.objectUrl()+"?";f="gxajaxHideCode_"+f;for(var q=c.length,r=0;r<q;r++)f+=","+encodeURIComponent(eval(c[r]));n+=gx.ajax.encryptParms(gx.O,f);gx.http.callBackend_impl(function(v){gx.fn.setVarValues(l,v)},n,!0,gx.http.modes.retval);return this.lastStatus},
callCrl:function(c,f,l){var n=l?gx.fn.setGridComboValues:gx.fn.setComboValues,q=l?f:gx.fn.screen_CtrlRef(f).name;l=this.objectUrl()+"?";c="gxajaxCallCrl_"+f+","+this.arrayToUrl(c);l+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(r){n(q,r)},l,!0,gx.http.modes.retval)},refreshGrid:function(c,f){var l=gx.O;gx.setGxO(c.parentObject);var n="GET",q=gx.ajax.gxObjectUrl(c.parentObject)+"?",r="gxajaxGridRefresh_"+c.gridName+","+f;gx.fx.obs.notify("grid.onbeforerefresh",[c]);c.autoRefreshing=
!0;gx.csv.autoRefreshing=c;var v=c.grid.rows.length;c.setPagingVars(0,0);if(r.length>gx.ajax.maxGETLength(gx.O)){n="POST";var t=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+c.gridName)];f=f.split(",");r=0;for(var y=f.length;r<y;r++)t.push("GXParm"+r+"="+f[r])}else q+=gx.ajax.encryptParms(gx.O,r);c.grid.mask();gx.http.doCall({method:n,url:q,reqData:t,handler:function(B,u,w){gx.http.postHandler(B,u,w,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[c,v,c.grid.rows.length])},
always:function(){gx.csv.autoRefreshing=null;c.autoRefreshing=!1;c.grid.unmask();gx.setGxO(l)}})},newRows:function(c,f,l,n,q,r,v,t){var y=this.objectUrl()+"?",B=[],u=gx.O;c=gx.fn.gridObj(c,v?l+"_"+v:l,f);f="GET";l="gxajaxNewRow_"+l;B.push(l);B.push(n);B.push(q);B.push(r);(u.IsComponent||u.IsTypeComponent)&&B.push(u.CmpContext);B=B.concat(c.getParmsValues(!1,c.postingVariables,!1));n=B.join(",");if(n.length>gx.ajax.maxGETLength(u)){f="POST";u=["GXEvent="+gx.ajax.encryptParms(u,l)];n=1;for(q=B.length;n<
q;n++)u.push("GXParm"+(n-1)+"="+B[n]);n=u.join("&")}else y+=gx.ajax.encryptParms(u,n),n=null;gx.http.callBackend_simple(y,!0,null,f,n);if(y=gx.http.lastResponse)y=gx.json.evalJSON(y),t.call(c,y),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[y])},loadCrl:function(c,f,l){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var n=this.objectUrl()+"?";c="gxajaxExecAct_"+c+","+this.arrayToUrl(f);n+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(q){gx.fn.setVarValues(l,
q)},n,!0,gx.http.modes.retval)}},udp:function(c,f,l){var n=this.objectUrl()+"?";c=c+","+this.arrayToUrl(f);n+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(q){gx.fn.setVarValues(l,q)},n,!0,gx.http.modes.retval)},srvEvt:function(c,f,l,n){var q=this.objectUrl()+"?";c=c+","+f+","+this.arrayToUrl(l);q+=gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(r){gx.fn.setVarValues(n,r)},q,!0,gx.http.modes.full)},validSrvEvt:function(c,f,l){var n=gx.fn.currentGridRowImpl(f);if(0<
f){var q=gx.fn.currentGridRowImpl(f);a(f,n,l)}if(gx.fx.delayedValidation){var r=g.Deferred(),v=arguments;gx.fx.obs.addObserver("gx.validation",this,function(){return this.validSrvEvt_impl.apply(this,v).then(function(t){r.resolve(t);a(f,q,l)})},{single:!0,async:!0});return r.promise()}return this.validSrvEvt_impl.apply(this,arguments).then(function(t){a(f,q,l);return t})},validCliEvt:function(c,f,l,n){n=n||gx.O;return gx.evt.dispatcher.dispatch({eventName:c,fn:l},n,f,gx.fn.currentGridRowImpl(f),!1,
void 0,void 0,gx.evt.dispatcher.types.validation)},validSrvEvt_impl:function(c,f,l){l=l||gx.O;var n=gx.fn.currentGridRowImpl(f);return gx.evt.dispatcher.dispatch(c,l,f,n,!0,void 0,void 0,gx.evt.dispatcher.types.validation).then(function(q){l.refreshOlds();return q})},getParmsPostData:function(c){for(var f="",l=0;l<c.length;l++)0<l&&(f+="&"),f+="GXParm"+l+"="+this.parmToUrl(c[l],!0);return f},getCallerUrl:function(c){if(gx.stackSupported()){c=(c=gx.call_stack_storage.get(gx.stackId(c)))||[];var f=
1==c.length&&c[0]!=gx.ajax.selfUrl()?c[0]:"";return f=1<c.length?c[c.length-2]:f}return gx.fn.getHidden("sCallerURL")},pushReferer:function(c,f){f="undefined"==typeof f?location.href:gx.absoluteurl(f);if(gx.stackSupported()){"undefined"==typeof c&&(c=gx.popup.popuplvl());var l=gx.call_stack_storage.get(gx.stackId(c));l=l||[];f!=gx.util.lastArray(l)&&l.push(f);gx.call_stack_storage.set(gx.stackId(c),l)}else c=this.objectUrl()+"?",f="dyncall,PushReferer,"+encodeURIComponent(f),c+=gx.ajax.encryptParms(gx.O,
f),gx.http.callBackend_simple(c,!0,!0)},windowClosed:function(c){if(gx.stackSupported())if(-1==c){c=gx.stackId(gx.popup.popuplvl());var f=gx.call_stack_storage.get(c);f=f||[];f.pop();gx.call_stack_storage.set(c,f)}else gx.call_stack_storage.remove(gx.stackId(c));else c=-1==c?",PopReferer":",DeleteReferer,"+c.toString(),f=this.objectUrl()+"?",f+=gx.ajax.encryptParms(gx.O,"dyncall"+c),gx.http.callBackend_simple(f,!0,!0)},aggSel:function(c,f,l){var n=this.objectUrl()+"?";c="gxajaxAggSel"+f+"_"+c+","+
this.arrayToUrl(l);n+=gx.ajax.encryptParms(gx.O,c);return gx.http.callBackend_impl(null,n,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(c,f,l,n,q){return gx.num.parseFloat(this.aggSel(c,f,q),l,n)},aggSelInteger:function(c,f,l){return parseInt(this.aggSel(c,f,l),10)},dynComponent:function(c,f,l,n){var q=g.Deferred();c=gx.util.removeBaseUrl(c).toLowerCase();gx.gen.isDotNet()&&(c+=".aspx");c=gx.ajax.objectUrl(c);l="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(l)+
"&GXParm0="+encodeURIComponent(n);for(n=0;n<f.length;n++)l+="&GXParm"+(n+1).toString()+"="+encodeURIComponent("function"==typeof f[n].getUrlVal?f[n].getUrlVal():f[n]);gx.http.doCall({method:"POST",url:c,reqData:l,handler:function(r,v){q.resolve(gx.json.evalJSON(v))},error:function(){q.reject()}});return q.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(c){return c.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(c){if(c&&c.ajaxSecurityToken){var f=
"GX_AUTH_"+(c.CmpContext?c.CmpContext:"")+c.ServerClass;f=f.toUpperCase();c=gx.fn.getHidden(f)||c.InternalParms[f];return{id:f,value:c}}},arrayToUrl:function(c,f){for(var l="",n=c.length,q=0;q<n;q++)l+=this.parmToUrl(c[q],f)+",";return l},ControlValuesObject:function(c,f){c=gx.fn.vStructForVar(gx.unprefixVar(c));return null!=c&&gx.html.controls.isMultiSelection(c.ctrltype)?(c=gx.fn.getControlGridRef(c.fld,c.grid),gx.dom.comboBoxToObj(c,f)):null},parmToUrl:function(c,f){var l=eval(c);if(l instanceof
Array&&2==l.length&&"string"==typeof l[0]&&"string"==typeof l[1]){var n=gx.fn.vStructForVar(l[0]);null!=n&&(l=gx.fn.getGridCtrlProperty(n.grid,n.fld,l[1]))}f&&(f=gx.ajax.ControlValuesObject(c,l))&&(l=f);"object"==typeof l&&(l=gx.json.serializeJson(l));if("undefined"==typeof l||null==l)f=!1,c&&0===c.indexOf("gx.O.")&&(c=gx.unprefixVar(c),c=gx.fn.getHidden(gx.O.CmpContext+c),null!=c&&"undefined"!=typeof c&&(l=c,f=!0)),f||(l="");return encodeURIComponent(l)},gxObjectUrl:function(c){return this.objectUrl(c.serviceUrl,
c&&c.fullAjax?c.CmpContext:void 0)},objectUrl:function(c,f){f=void 0!==f?f:gx.csv.cmpCtx;c||(c=f?gx.fn.getControlValue(f+"_CMPPGM"):gx.ajax.selfUrl(),null!=c&&(c=c.replace(/\?.*/,""),c=c.replace(/#[\s\S]*$/,"")),c=this.objnameFromUrl(c));return gx.absoluteurl(this.objToRelativeUrl(c))},objToRelativeUrl:function(c){return null==c||gx.isabsoluteurl(c)?c:""===gx.servletBasePath?c:gx.servletBasePath+"/"+c},objnameFromUrl:function(c){0<=c.indexOf("?")&&(c=c.split("?")[0]);var f=c.split("/"),l=f.length;
return 0===l?c:f[l-1]},_init:function(){if(gx.stackSupported()){var c=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(c)for(var f=0;f<c.length;f++)gx.ajax.pushReferer(gx.popup.popuplvl(),c[f]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function g(a,b){var d=$("#"+a.id+"_dp_trigger");if(0<d.length)return d.get(0);if(b&&0<b.length&&(d=$("[data-gx-attached-ctrl~='"+a.id+"']"),0<d.length))return d.parent().get(0)}this.init=function(a,b){this.id=a;this.balloonid=a+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=b||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr=
"";this.active=!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(a){this.hasMessage||(this.messageWar=a,this.hasMessage=!0)};this.setAsFormatError=function(){this.isFormatError=!0;gx.csv.setFormatError(this.id,!1)};this.setError=function(a){this.hasMessage||(this.messageErr=a,this.hasMessage=this.isError=!0,this.isFormatError&&gx.csv.setFormatError(this.id))};this.create=function(a,b,d,c){var f=document.createElement("span");f.id=a;f.className=d;a=document.createElement("div");
a.style.position="absolute";a.style.zIndex=100;a.style.display="none";a.classList.add("gx-error__message-container");c=document.createTextNode(c);f.appendChild(c);a.appendChild(f);"right"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition?(c=$(b).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<c.length?c.append(a):(c=g(b))?0<=c.id.indexOf("_dp_trigger")?$(c).closest(".dp_container").append(a):$(c).after(a):$(b).after(a)):!0===gx.csv.overlap?$(b).after(a):$(b).before(a);
!0===gx.csv.overlap?(f.style.position="static",f.style.zIndex="1"):(a.style.position="relative",f.style.position="relative");return f};this.getControlValue=function(){for(var a=[gx.fn.getControlValue(this.id)],b=0,d=this.sourceElements.length;b<d;b++)a.push(gx.fn.getControlValue(this.sourceElements[b]));return a.join(";")};this.groupControl=function(a){(a=gx.dom.el(a))&&"INPUT"===a.nodeName&&"radio"===a.type&&(a=a.parentNode&&"SPAN"==a.parentNode.tagName?a.parentNode:gx.dom.findParentByTagName(a,
"table"));return a};this.hideBalloon=function(a){a=a.parentNode;try{a&&(a.style.display="none")}catch(b){gx.dbg.logEx(b,"gxballoon.js","hideBalloon")}};this.showBalloon=function(a){try{var b=gx.csv.messagePosition,d=gx.dom.el(this.id),c=a.parentNode,f=$(c),l,n,q=gx.popup.ispopup()?"flipfit":"none",r=d,v=g(d,this.sourceElements);gx.lang.requestAnimationFrame(function(){if(this.active)if(!0===gx.csv.overlap){switch(b){case "top":l="left bottom";n="left top";break;case "right":l="left center";n="right center";
r=v||r;break;case "bottom":l="left top";n="left bottom";break;case "left":l="right center",n="left center"}f.fadeIn({queue:!1}).css("display","block");f.position({my:l,at:n,of:r,collision:q})}else c.style.display="top"!=b&&"bottom"!=b||!1!==gx.csv.overlap?"inline":"block"},this)}catch(t){gx.dbg.logEx(t,"gxballoon.js","showBalloon")}};this.show=function(a){var b,d,c;if(void 0===document.readyState||"complete"==document.readyState){try{if(!1===this.hasMessage)return!0;var f=gx.dom.el(this.id);null===
f&&null!==gx.csv.validatingUC&&(f=gx.csv.validatingUC.getContainerControl());if("hidden"==f.type){var l=gx.dom.byId("span_"+this.id);null!==l&&(f=l)}else if("INPUT"===f.nodeName&&"radio"===f.type){var n=gx.dom.byName(gx.dom.id(f));if(f.parentNode&&"SPAN"==f.parentNode.tagName)f=f.parentNode;else{var q=n[0];f=gx.dom.findParentByTagName(f,"table")}}if(n){l=[];var r=0;for(c=n.length;r<c;r++)l.push(n[r]);n=l}else for(n=[f],r=0,c=this.sourceElements.length;r<c;r++)n.push(gx.dom.el(this.sourceElements[r]));
this.active=b=!0;if(0<this.messageErr.length){var v="Error";var t=this.messageErr}else 0<this.messageWar.length&&(v="Warning",t=gx.html.encode(this.messageWar));""!==v&&(l=v+"Messages",gx.dom.addPrefixClass(f,v),(d=gx.dom.byId(this.balloonid))?(d.innerHTML=t,d.className=l,b=!1):d=this.create(this.balloonid,q?q:f,l,t));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=d;!0===a?gx.csv.oneAtAtime||this.showBalloon(d):this.showBalloon(d);if(!1===
gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(b)for(gx.csv.oneAtAtime&&(gx.evt.attach(f,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(f,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this))),c=n.length,r=0;r<c;r++)"INPUT"===n[r].nodeName&&"radio"===n[r].type?gx.evt.attach(n[r],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(n[r],
"blur",gx.util.balloon.cvsHide,this);this.errorValue=this.getControlValue()}catch(y){gx.dbg.logEx(y,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){try{var g=this.groupControl(this.id);var a=this.getControlValue();if(a!=this.errorValue){this.errorValue=a;var b=gx.dom.byId(this.balloonid);null!=b&&(g&&(gx.dom.removePrefixClass(g,"Error"),gx.dom.removePrefixClass(g,"Warning")),this.hideBalloon(b),this.active=!1)}}catch(d){}},cvsMouseOutHandler:function(){if(this.active){var g=gx.dom.byId(this.balloonid);
null!=g&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=g.id&&this.hideBalloon(g):this.hideBalloon(g))}},cvsMouseOverHandler:function(){if(this.active){var g=gx.dom.byId(this.balloonid);null!=g&&this.showBalloon(g)}},clearAll:function(){var g;this.timerOn=!1;for(g in this.balloons){var a=this.balloons[g];var b=gx.util.balloon.cvsHide.closure(a);a.clear();b()}},clear:function(g){try{var a=gx.csv.ctxControlId(g);if(this.balloons[a]){var b=this.balloons[a];var d=gx.util.balloon.cvsHide.closure(b);
b.clear();d()}}catch(c){gx.dbg.logEx(c,"gxballoon.js","clear")}},getNew:function(g,a,b){b=b||[];var d,c=b.length;"undefined"!=typeof a&&(g=g+"_"+a);try{var f=gx.fn.screen_CtrlRef(g);var l=gx.dom.id(f);g=gx.csv.ctxControlId(l);for(d=0;d<c;d++)f=gx.fn.screen_CtrlRef(b[d]),l=gx.dom.id(f),b[d]=gx.csv.ctxControlId(l)}catch(n){gx.dbg.logEx(n,"gxballoon.js","getNew")}this.balloons[g]?(a=this.balloons[g],a.sourceElements=b||[],a.clear()):(a=new this.impl,this.balloons[g]=a,a.init(g,b));return a}};
(function(g){var a=function(){var b={"America/Denver":["America/Mazatlan"],"Europe/London":["Africa/Casablanca"],"America/Chicago":["America/Mexico_City"],"America/Asuncion":["America/Campo_Grande","America/Santiago"],"America/Montevideo":["America/Sao_Paulo","America/Santiago"],"Asia/Beirut":"Asia/Amman Asia/Jerusalem Europe/Helsinki Asia/Damascus Africa/Cairo Asia/Gaza Europe/Minsk".split(" "),"Pacific/Auckland":["Pacific/Fiji"],"America/Los_Angeles":["America/Santa_Isabel"],"America/New_York":["America/Havana"],
"America/Halifax":["America/Goose_Bay"],"America/Godthab":["America/Miquelon"],"Asia/Dubai":["Asia/Yerevan"],"Asia/Jakarta":["Asia/Krasnoyarsk"],"Asia/Shanghai":["Asia/Irkutsk","Australia/Perth"],"Australia/Sydney":["Australia/Lord_Howe"],"Asia/Tokyo":["Asia/Yakutsk"],"Asia/Dhaka":["Asia/Omsk"],"Asia/Baku":["Asia/Yerevan"],"Australia/Brisbane":["Asia/Vladivostok"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Majuro":["Asia/Kamchatka","Pacific/Fiji"],"Pacific/Tongatapu":["Pacific/Apia"],"Asia/Baghdad":["Europe/Minsk",
"Europe/Moscow"],"Asia/Karachi":["Asia/Yekaterinburg"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"]},d=function(v){v=-v.getTimezoneOffset();return null!==v?v:0},c=function(){var v=d(new Date(2014,0,2)),t=d(new Date(2014,5,2)),y=v-t;return 0>y?v+",1":0<y?t+",1,s":v+",0"},f=function(){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat){var v=Intl.DateTimeFormat();if("undefined"!==typeof v&&"undefined"!==typeof v.resolvedOptions&&(v=v.resolvedOptions().timeZone)&&(-1<v.indexOf("/")||
"UTC"===v))return v}},l=function u(t,y,B){"undefined"===typeof y&&(y=864E5,B=36E5);var w=(new Date(t.getTime()-y)).getTime();t=t.getTime()+y;for(var z=(new Date(w)).getTimezoneOffset(),C=null;w<t-B;){var F=new Date(w);if(F.getTimezoneOffset()!==z){C=F;break}w+=B}return 864E5===y?u(C,36E5,6E4):36E5===y?u(C,6E4,1E3):C},n=function(t,y,B,u){if("N/A"!==B)return B;if("Asia/Beirut"===y){if("Africa/Cairo"===u.name&&13983768E5===t[6].s&&14116788E5===t[6].e||"Asia/Jerusalem"===u.name&&13959648E5===t[6].s&&
14118588E5===t[6].e)return 0}else if("America/Santiago"===y){if("America/Asuncion"===u.name&&14124816E5===t[6].s&&1397358E6===t[6].e||"America/Campo_Grande"===u.name&&14136912E5===t[6].s&&13925196E5===t[6].e)return 0}else if("America/Montevideo"===y){if("America/Sao_Paulo"===u.name&&14136876E5===t[6].s&&1392516E6===t[6].e)return 0}else if("Pacific/Auckland"===y&&"Pacific/Fiji"===u.name&&14142456E5===t[6].s&&13961016E5===t[6].e)return 0;return B},q=function(t,y){for(var B={},u=a.olson.dst_rules.zones,
w=u.length,z=b[y],C=0;C<w;C++){for(var F=u[C],G=u[C],k=0,m=0;m<t.length;m++)if(G.rules[m]&&t[m]){if(t[m].s>=G.rules[m].s&&t[m].e<=G.rules[m].e)k=0,k+=Math.abs(t[m].s-G.rules[m].s),k+=Math.abs(G.rules[m].e-t[m].e);else{k="N/A";break}if(864E6<k){k="N/A";break}}G=n(t,y,k,G);"N/A"!==G&&(B[F.name]=G)}for(var p in B)if(B.hasOwnProperty(p))for(t=0;t<z.length;t++)if(z[t]===p)return p;return y},r=function(t){var y=function(){for(var B=[],u=0;u<a.olson.dst_rules.years.length;u++){var w=a.olson.dst_rules.years[u],
z=(new Date(w,0,1,0,0,1,0)).getTime();w=(new Date(w,12,31,23,59,59)).getTime();for(var C=(new Date(z)).getTimezoneOffset(),F=null,G=null;z<w-864E5;){var k=new Date(z),m=k.getTimezoneOffset();m!==C&&(m<C&&(F=k),m>C&&(G=k),C=m);z+=864E5}w=F&&G?{s:l(F).getTime(),e:l(G).getTime()}:!1;B.push(w)}return B}();return function(B){for(var u=0;u<B.length;u++)if(!1!==B[u])return!0;return!1}(y)?q(y,t):t};return{determine:function(){var t=navigator.userAgent.toLowerCase(),y=f();y||(-1!=t.indexOf("firefox")&&"undefined"!==
typeof Intl&&"undefined"!==typeof Intl.DateTimeFormat&&(t=Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).format(new Date).toLowerCase(),-1!=t.indexOf("montevideo")||-1!=t.indexOf("uruguay"))&&(y="America/Montevideo"),y||(y=a.olson.timezones[c()]),"undefined"!==typeof b[y]&&(y=r(y)));return{name:function(){return y}}}}}();a.olson=a.olson||{};a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-660,1,s":"Pacific/Apia","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas",
"-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Asuncion","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires",
"-180,1,s":"America/Montevideo","-120,0":"America/Noronha","-120,1":"America/Noronha","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata",
"345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea",
"690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Majuro","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"};a.olson.dst_rules={years:[2008,2009,2010,2011,2012,2013,2014],zones:[{name:"Africa/Cairo",rules:[{e:12199572E5,s:12090744E5},{e:1250802E6,s:1240524E6},{e:12858804E5,s:12840696E5},!1,!1,!1,{e:14116788E5,s:1406844E6}]},{name:"Africa/Casablanca",rules:[{e:12202236E5,s:12122784E5},{e:12508092E5,s:12438144E5},{e:1281222E6,
s:12727584E5},{e:13120668E5,s:13017888E5},{e:13489704E5,s:1345428E6},{e:13828392E5,s:13761E8},{e:14142888E5,s:14069448E5}]},{name:"America/Asuncion",rules:[{e:12050316E5,s:12243888E5},{e:12364812E5,s:12558384E5},{e:12709548E5,s:12860784E5},{e:13024044E5,s:1317528E6},{e:1333854E6,s:13495824E5},{e:1364094E6,s:1381032E6},{e:13955436E5,s:14124816E5}]},{name:"America/Campo_Grande",rules:[{e:12032172E5,s:12243888E5},{e:12346668E5,s:12558384E5},{e:12667212E5,s:1287288E6},{e:12981708E5,s:13187376E5},{e:13302252E5,
s:1350792E6},{e:136107E7,s:13822416E5},{e:13925196E5,s:14136912E5}]},{name:"America/Goose_Bay",rules:[{e:122559486E4,s:120503526E4},{e:125704446E4,s:123648486E4},{e:128909886E4,s:126853926E4},{e:13205556E5,s:129998886E4},{e:13520052E5,s:13314456E5},{e:13834548E5,s:13628952E5},{e:14149044E5,s:13943448E5}]},{name:"America/Havana",rules:[{e:12249972E5,s:12056436E5},{e:12564468E5,s:12364884E5},{e:12885012E5,s:12685428E5},{e:13211604E5,s:13005972E5},{e:13520052E5,s:13332564E5},{e:13834548E5,s:13628916E5},
{e:14149044E5,s:13943412E5}]},{name:"America/Mazatlan",rules:[{e:1225008E6,s:12074724E5},{e:12564576E5,s:1238922E6},{e:1288512E6,s:12703716E5},{e:13199616E5,s:13018212E5},{e:13514112E5,s:13332708E5},{e:13828608E5,s:13653252E5},{e:14143104E5,s:13967748E5}]},{name:"America/Mexico_City",rules:[{e:12250044E5,s:12074688E5},{e:1256454E6,s:12389184E5},{e:12885084E5,s:1270368E6},{e:1319958E6,s:13018176E5},{e:13514076E5,s:13332672E5},{e:13828572E5,s:13653216E5},{e:14143068E5,s:13967712E5}]},{name:"America/Miquelon",
rules:[{e:12255984E5,s:12050388E5},{e:1257048E6,s:12364884E5},{e:12891024E5,s:12685428E5},{e:1320552E6,s:12999924E5},{e:13520016E5,s:1331442E6},{e:13834512E5,s:13628916E5},{e:14149008E5,s:13943412E5}]},{name:"America/Santa_Isabel",rules:[{e:12250116E5,s:1207476E6},{e:12564612E5,s:12389256E5},{e:12885156E5,s:12703752E5},{e:13199652E5,s:13018248E5},{e:13514148E5,s:13332744E5},{e:13828644E5,s:13653288E5},{e:1414314E6,s:13967784E5}]},{name:"America/Santiago",rules:[{e:1206846E6,s:1223784E6},{e:1237086E6,
s:12552336E5},{e:127035E7,s:12866832E5},{e:13048236E5,s:13138992E5},{e:13356684E5,s:13465584E5},{e:1367118E6,s:13786128E5},{e:13985676E5,s:14100624E5}]},{name:"America/Sao_Paulo",rules:[{e:12032136E5,s:12243852E5},{e:12346632E5,s:12558348E5},{e:12667176E5,s:12872844E5},{e:12981672E5,s:1318734E6},{e:13302216E5,s:13507884E5},{e:13610664E5,s:1382238E6},{e:1392516E6,s:14136876E5}]},{name:"Asia/Amman",rules:[{e:1225404E6,s:12066552E5},{e:12568536E5,s:12381048E5},{e:12883032E5,s:12695544E5},{e:13197528E5,
s:13016088E5},!1,!1,{e:14147064E5,s:13959576E5}]},{name:"Asia/Damascus",rules:[{e:12254868E5,s:120726E7},{e:125685E7,s:12381048E5},{e:12882996E5,s:12701592E5},{e:13197492E5,s:13016088E5},{e:13511988E5,s:13330584E5},{e:13826484E5,s:1364508E6},{e:14147028E5,s:13959576E5}]},{name:"Asia/Dubai",rules:[!1,!1,!1,!1,!1,!1,!1]},{name:"Asia/Gaza",rules:[{e:12199572E5,s:12066552E5},{e:12520152E5,s:12381048E5},{e:1281474E6,s:126964086E4},{e:1312146E6,s:130160886E4},{e:13481784E5,s:13330584E5},{e:13802292E5,s:1364508E6},
{e:1414098E6,s:13959576E5}]},{name:"Asia/Irkutsk",rules:[{e:12249576E5,s:12068136E5},{e:12564072E5,s:12382632E5},{e:12884616E5,s:12697128E5},!1,!1,!1,!1]},{name:"Asia/Jerusalem",rules:[{e:12231612E5,s:12066624E5},{e:1254006E6,s:1238112E6},{e:1284246E6,s:12695616E5},{e:131751E7,s:1301616E6},{e:13483548E5,s:13330656E5},{e:13828284E5,s:13645152E5},{e:1414278E6,s:13959648E5}]},{name:"Asia/Kamchatka",rules:[{e:12249432E5,s:12067992E5},{e:12563928E5,s:12382488E5},{e:12884508E5,s:12696984E5},!1,!1,!1,!1]},
{name:"Asia/Krasnoyarsk",rules:[{e:12249612E5,s:12068172E5},{e:12564108E5,s:12382668E5},{e:12884652E5,s:12697164E5},!1,!1,!1,!1]},{name:"Asia/Omsk",rules:[{e:12249648E5,s:12068208E5},{e:12564144E5,s:12382704E5},{e:12884688E5,s:126972E7},!1,!1,!1,!1]},{name:"Asia/Vladivostok",rules:[{e:12249504E5,s:12068064E5},{e:12564E8,s:1238256E6},{e:12884544E5,s:12697056E5},!1,!1,!1,!1]},{name:"Asia/Yakutsk",rules:[{e:1224954E6,s:120681E7},{e:12564036E5,s:12382596E5},{e:1288458E6,s:12697092E5},!1,!1,!1,!1]},{name:"Asia/Yekaterinburg",
rules:[{e:12249684E5,s:12068244E5},{e:1256418E6,s:1238274E6},{e:12884724E5,s:12697236E5},!1,!1,!1,!1]},{name:"Asia/Yerevan",rules:[{e:1224972E6,s:1206828E6},{e:12564216E5,s:12382776E5},{e:1288476E6,s:12697272E5},{e:13199256E5,s:13011768E5},!1,!1,!1]},{name:"Australia/Lord_Howe",rules:[{e:12074076E5,s:12231342E5},{e:12388572E5,s:12545838E5},{e:12703068E5,s:12860334E5},{e:13017564E5,s:1317483E6},{e:1333206E6,s:13495374E5},{e:13652604E5,s:1380987E6},{e:139671E7,s:14124366E5}]},{name:"Australia/Perth",
rules:[{e:12068136E5,s:12249576E5},!1,!1,!1,!1,!1,!1]},{name:"Europe/Helsinki",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]},{name:"Europe/Minsk",rules:[{e:12249792E5,s:12068352E5},{e:12564288E5,s:12382848E5},{e:12884832E5,s:12697344E5},!1,!1,!1,!1]},{name:"Europe/Moscow",rules:[{e:12249756E5,s:12068316E5},{e:12564252E5,s:12382812E5},{e:12884796E5,
s:12697308E5},!1,!1,!1,!1]},{name:"Pacific/Apia",rules:[!1,!1,!1,{e:13017528E5,s:13168728E5},{e:13332024E5,s:13489272E5},{e:13652568E5,s:13803768E5},{e:13967064E5,s:14118264E5}]},{name:"Pacific/Fiji",rules:[!1,!1,{e:12696984E5,s:12878424E5},{e:13271544E5,s:1319292E6},{e:1358604E6,s:13507416E5},{e:139005E7,s:1382796E6},{e:14215032E5,s:14148504E5}]},{name:"Europe/London",rules:[{e:12249828E5,s:12068388E5},{e:12564324E5,s:12382884E5},{e:12884868E5,s:1269738E6},{e:13199364E5,s:13011876E5},{e:1351386E6,
s:13326372E5},{e:13828356E5,s:13646916E5},{e:14142852E5,s:13961412E5}]}]};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=a:"undefined"!==typeof define&&null!==define&&null!=define.amd?define([],function(){return a}):"undefined"===typeof g?window.jstz=a:g.jstz=a})();gx.livePrev=function(g){gx.ajax.getPostInfo("",!1);postInfo=gx.ajax.getPostInfo("",!1);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1?(gx.livePrevWS.IPNamesIdx+=1,gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx],gx.livePrev.port=gx.livePrevWS.FIRST_PORT,gx.livePrevWS.Connect()):gx.livePrev.port<gx.livePrevWS.LAST_PORT?(gx.livePrevWS.IPNamesIdx=0,gx.livePrev.port+=1,gx.livePrevWS.Connect()):gx.util.alert.showMessage("Can not Connect to LivePreview",{dismissmitAt:5E3})},
onMessage:function(g){var a=function(f){var l=$.map(document.styleSheets,function(n){return n.href==f?n:null});return 0<l.length?l[0]:void 0},b=function(f,l,n){return n((f||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(l||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},d=function(f,l,n){var q=f.cssRules,r=q.length,v=!1,t=!1;$.each(q,function(y,B){B&&B.selectorText&&b(B.selectorText,l.replace(":","::"),function(u,w){return u==w})&&(f.deleteRule(y),r=y,v=!0)});v||$.each(q,function(y,B){B&&B.selectorText&&
b(B.selectorText,l.replace(":","::")+",",function(u,w){return 0==u.indexOf(w)})&&(f.deleteRule(y),r=y,f.insertRule(B.selectorText+n.replace(/.*{/,"{"),r),t=!0)});t||f.insertRule(n,r)},c=function(f){var l=gx.getThemeElement();if(l=a(l.href))for(var n=0==f.indexOf("@media",0),q=f.split(/{|}/),r=0;r<q.length-1;r+=2){var v=q[r].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(v)||(n?$.each(l.cssRules,function(t,y){n&&!y.selectorText&&(t=y.cssText.split(/{/)[0],b(t.replace(/ all and/gm,""),v)&&(v=
q[r+1].replace(/(\r\n|\r|\n| )/gm,""),d(y,v,v+" {"+q[r+2]+"}")))}):d(l,v,v+" {"+q[r+1]+"}"))}};g=gx.json.evalJSON(g);if("KBOK"===g.Type)gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if("KBDoesNotMatchGUID"===g.Type)gx.livePrevWS.onError();else"ThemeStyleChanged"===g.Type&&c(g.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=0;gx.livePrevWS.SocketConnect()},
onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var g={};gx.livePrev.port=gx.livePrev.port||gx.livePrevWS.FIRST_PORT;
g.port=gx.livePrev.port;g.wsProtocol="https:"===location.protocol?"wss://":"ws://";g.host=gx.livePrevWS.host+":"+g.port;g.resourceUrl="/live/";g.namespace="livepreview";g.maxRetries=10;g.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(g);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",gx.livePrevWS,gx.livePrevWS.onOpen,
{single:!1});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:!1});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:!1});if(!gx.livePrevWS.clientGUID){var g=gx.livePrevWS,a=gx.http.getCookie("GXClientID");a=a||gx.guid.generate();gx.http.setCookie("GXClientID",a,1,!1);g.clientGUID=a}g="";a=[];var b=gx.livePreviewUri.split("?");
0<b.length&&(b=b[1],b=b.split(":"),2<b.length&&(g=b[1],a=b[2].substring(1,b[2].length-1).split(","),b=b[0]));gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=a;gx.livePrevWS.KBName=g;gx.livePrevWS.KBUUID=b;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,!1),gx.livePrevWS.Connect)}}};
gx.nav=function(){var g=function(){var c={top:!0,right:!0,bottom:!0,left:!0};return function(f){return!!c[f.toLowerCase()]}}(),a=function(c){var f=c;gx.gen.isDotNet()&&(f=c.replace(/\.aspx$/,""));gx.gen.isJava()&&gx.pO.PackageName&&gx.text.startsWith(c,gx.pO.PackageName)&&(f=c.substring(gx.pO.PackageName.length+1));return f},b=function(c){var f=c.split("?"),l;if(0<f.length){var n=2==f.length?f[1].split(gx.http.urlParameterSeparator(c)):[];var q=0;for(l=n.length;q<l;q++)n[q]=gx.http.useNamedParameters(c)?
decodeURIComponent(n[q].split("=")[1]):decodeURIComponent(n[q]);return{obj:f[0],args:n}}return!1},d={};return{setCallTarget:function(c,f){d[c.toLowerCase()]=f.toLowerCase()},willRedirect:function(c){return gx.pO&&!gx.pO.fullAjax?!0:!g(d[a(c).toLowerCase()]||"")},willRedirectByUrl:function(c){c=b(c);return this.willRedirect(c.obj,c.args)},call:function(c,f,l){var n=a(c),q=gx.pO.MasterPage;l=l||d[n.toLowerCase()]||"";delete d[n.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(c,
f),!1,!1,gx.pO):g(l)?q&&q.createObjectInTarget(l,n,f):gx.http.redirect(gx.http.formatLink(c,f),!1,!1,gx.pO)},callUrl:function(c,f){(c=b(c))&&this.call(c.obj,c.args,f)},callFromServerRedirect:function(c,f){this.callUrl(c,f)}}}(gx.$);
(function(g){"function"===typeof define&&define.amd?define(["jquery"],g):g(jQuery)})(function(g){(function(){function a(u,w,z){return[parseFloat(u[0])*(y.test(u[0])?w/100:1),parseFloat(u[1])*(y.test(u[1])?z/100:1)]}function b(u){var w=u[0];return 9===w.nodeType?{width:u.width(),height:u.height(),offset:{top:0,left:0}}:null!=w&&w===w.window?{width:u.width(),height:u.height(),offset:{top:u.scrollTop(),left:u.scrollLeft()}}:w.preventDefault?{width:0,height:0,offset:{top:w.pageY,left:w.pageX}}:{width:u.outerWidth(),
height:u.outerHeight(),offset:u.offset()}}g.ui=g.ui||{};var d,c,f=Math.max,l=Math.abs,n=Math.round,q=/left|center|right/,r=/top|center|bottom/,v=/[\+\-]\d+(\.[\d]+)?%?/,t=/^\w+/,y=/%$/,B=g.fn.position;g.position={scrollbarWidth:function(){if(void 0!==d)return d;var u=g("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var w=u.children()[0];g("body").append(u);var z=w.offsetWidth;u.css("overflow","scroll");w=w.offsetWidth;
z===w&&(w=u[0].clientWidth);u.remove();return d=z-w},getScrollInfo:function(u){var w=u.isWindow||u.isDocument?"":u.element.css("overflow-x"),z=u.isWindow||u.isDocument?"":u.element.css("overflow-y");w="scroll"===w||"auto"===w&&u.width<u.element[0].scrollWidth;return{width:"scroll"===z||"auto"===z&&u.height<u.element[0].scrollHeight?g.position.scrollbarWidth():0,height:w?g.position.scrollbarWidth():0}},getWithinInfo:function(u){var w=g(u||window);var z=w[0];z=null!=z&&z===z.window;var C=!!w[0]&&9===
w[0].nodeType;return{element:w,isWindow:z,isDocument:C,offset:z||C?{left:0,top:0}:g(u).offset(),scrollLeft:w.scrollLeft(),scrollTop:w.scrollTop(),width:z||C?w.width():w.outerWidth(),height:z||C?w.height():w.outerHeight()}}};g.fn.position=function(u){if(!u||!u.of)return B.apply(this,arguments);u=g.extend({},u);var w=g(u.of),z=g.position.getWithinInfo(u.within),C=g.position.getScrollInfo(z),F=(u.collision||"flip").split(" "),G={},k=w[0];var m=b(w);w[0].preventDefault&&(u.at="left top");var p=m.width;
var x=m.height;var A=m.offset;0!==A.top+A.left||w.is(":visible")||(A=g(k.parentElement).offset(),p=g(k.parentElement).width());var D=g.extend({},A);g.each(["my","at"],function(){var I=(u[this]||"").split(" ");1===I.length&&(I=q.test(I[0])?I.concat(["center"]):r.test(I[0])?["center"].concat(I):["center","center"]);I[0]=q.test(I[0])?I[0]:"center";I[1]=r.test(I[1])?I[1]:"center";var J=v.exec(I[0]);var K=v.exec(I[1]);G[this]=[J?J[0]:0,K?K[0]:0];u[this]=[t.exec(I[0])[0],t.exec(I[1])[0]]});1===F.length&&
(F[1]=F[0]);"right"===u.at[0]?D.left+=p:"center"===u.at[0]&&(D.left+=p/2);"bottom"===u.at[1]?D.top+=x:"center"===u.at[1]&&(D.top+=x/2);var E=a(G.at,p,x);D.left+=E[0];D.top+=E[1];return this.each(function(){var I,J=g(this),K=J.outerWidth(),H=J.outerHeight(),L=parseInt(g.css(this,"marginLeft"),10)||0,N=parseInt(g.css(this,"marginTop"),10)||0,O=K+L+(parseInt(g.css(this,"marginRight"),10)||0)+C.width,P=H+N+(parseInt(g.css(this,"marginBottom"),10)||0)+C.height,M=g.extend({},D),Q=a(G.my,J.outerWidth(),
J.outerHeight());"right"===u.my[0]?M.left-=K:"center"===u.my[0]&&(M.left-=K/2);"bottom"===u.my[1]?M.top-=H:"center"===u.my[1]&&(M.top-=H/2);M.left+=Q[0];M.top+=Q[1];c||(M.left=n(M.left),M.top=n(M.top));var S={marginLeft:L,marginTop:N};g.each(["left","top"],function(U,R){if(g.ui.position[F[U]])g.ui.position[F[U]][R](M,{targetWidth:p,targetHeight:x,elemWidth:K,elemHeight:H,collisionPosition:S,collisionWidth:O,collisionHeight:P,offset:[E[0]+Q[0],E[1]+Q[1]],my:u.my,at:u.at,within:z,elem:J})});u.using&&
(I=function(U){var R=A.left-M.left,W=R+p-K,V=A.top-M.top,X=V+x-H,T={target:{element:w,left:A.left,top:A.top,width:p,height:x},element:{element:J,left:M.left,top:M.top,width:K,height:H},horizontal:0>W?"left":0<R?"right":"center",vertical:0>X?"top":0<V?"bottom":"middle"};p<K&&l(R+W)<p&&(T.horizontal="center");x<H&&l(V+X)<x&&(T.vertical="middle");f(l(R),l(W))>f(l(V),l(X))?T.important="horizontal":T.important="vertical";u.using.call(this,U,T)});J.offset(g.extend(M,{using:I}))})};g.ui.position={fit:{left:function(u,
w){var z=w.within,C=z.isWindow?z.scrollLeft:z.offset.left,F=z.width,G=u.left-w.collisionPosition.marginLeft;z=C-G;var k=G+w.collisionWidth-F-C;w.collisionWidth>F?0<z&&0>=k?(w=u.left+z+w.collisionWidth-F-C,u.left+=z-w):u.left=0<k&&0>=z?C:z>k?C+F-w.collisionWidth:C:u.left=0<z?u.left+z:0<k?u.left-k:f(u.left-G,u.left)},top:function(u,w){var z=w.within,C=z.isWindow?z.scrollTop:z.offset.top,F=w.within.height,G=u.top-w.collisionPosition.marginTop;z=C-G;var k=G+w.collisionHeight-F-C;w.collisionHeight>F?0<
z&&0>=k?(w=u.top+z+w.collisionHeight-F-C,u.top+=z-w):u.top=0<k&&0>=z?C:z>k?C+F-w.collisionHeight:C:u.top=0<z?u.top+z:0<k?u.top-k:f(u.top-G,u.top)}},flip:{left:function(u,w){var z=w.within,C=z.offset.left+z.scrollLeft,F=z.width,G=z.isWindow?z.scrollLeft:z.offset.left,k=u.left-w.collisionPosition.marginLeft;z=k-G;var m=k+w.collisionWidth-F-G;k="left"===w.my[0]?-w.elemWidth:"right"===w.my[0]?w.elemWidth:0;var p="left"===w.at[0]?w.targetWidth:"right"===w.at[0]?-w.targetWidth:0,x=-2*w.offset[0];if(0>z){if(w=
u.left+k+p+x+w.collisionWidth-F-C,0>w||w<l(z))u.left+=k+p+x}else 0<m&&(w=u.left-w.collisionPosition.marginLeft+k+p+x-G,0<w||l(w)<m)&&(u.left+=k+p+x)},top:function(u,w){var z=w.within,C=z.offset.top+z.scrollTop,F=z.height,G=z.isWindow?z.scrollTop:z.offset.top,k=u.top-w.collisionPosition.marginTop;z=k-G;var m=k+w.collisionHeight-F-G;k="top"===w.my[1]?-w.elemHeight:"bottom"===w.my[1]?w.elemHeight:0;var p="top"===w.at[1]?w.targetHeight:"bottom"===w.at[1]?-w.targetHeight:0,x=-2*w.offset[1];if(0>z){if(w=
u.top+k+p+x+w.collisionHeight-F-C,0>w||w<l(z))u.top+=k+p+x}else 0<m&&(w=u.top-w.collisionPosition.marginTop+k+p+x-G,0<w||l(w)<m)&&(u.top+=k+p+x)}},flipfit:{left:function(){g.ui.position.flip.left.apply(this,arguments);g.ui.position.fit.left.apply(this,arguments)},top:function(){g.ui.position.flip.top.apply(this,arguments);g.ui.position.fit.top.apply(this,arguments)}}};(function(){var u,w=document.getElementsByTagName("body")[0];var z=document.createElement("div");var C=document.createElement(w?"div":
"body");var F={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};w&&g.extend(F,{position:"absolute",left:"-1000px",top:"-1000px"});for(u in F)C.style[u]=F[u];C.appendChild(z);F=w||document.documentElement;F.insertBefore(C,F.firstChild);z.style.cssText="position: absolute; left: 10.7432222px;";z=g(z).offset().left;c=10<z&&11>z;C.innerHTML="";F.removeChild(C)})()})()});
