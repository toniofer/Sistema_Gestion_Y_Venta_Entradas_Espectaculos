System.register(["./p-810da28d.system.js"],(function(t){"use strict";var e,i,n;return{setters:[function(t){e=t.r;i=t.h;n=t.H}],execute:function(){function r(t){if(t.OnPaginationFirst){t.OnPaginationFirst()}else if(t.usePaging){t.changeGridPage("FIRST")}}function o(t){if(t.OnPaginationPrevious){t.OnPaginationPrevious()}else if(t.usePaging){t.changeGridPage("PREV")}}function s(t){if(t.OnPaginationNext){t.OnPaginationNext()}else if(t.usePaging){t.changeGridPage("NEXT")}}function a(t){if(t.OnPaginationLast){t.OnPaginationLast()}else if(t.usePaging){t.changeGridPage("LAST")}}var l;(function(t){t["FIRST"]="first";t["PREVIOUS"]="previous";t["NEXT"]="next";t["LAST"]="last"})(l||(l={}));function d(t){t.ParentObject.refreshGrid(t.ControlName)}function g(t,e,i){var n=t.getColumnByHtmlName(e);t.setSort(n.index,i=="desc"?false:true)}var u=function(){function t(){}t.load=function(t,e){var i;this.grid=t;this.state=e!==null&&e!==void 0?e:{};this.state.Columns=(i=this.state.Columns)!==null&&i!==void 0?i:[];this.apply()};t.setColumnSort=function(t,e){this.state.SortColumnName=t;this.state.SortDirection=e};t.setColumnHidden=function(t,e){this.getColumn(t).Hidden=e};t.setColumnSize=function(t,e){this.getColumn(t).Size=e};t.setColumnOrder=function(t,e){this.getColumn(t).Order=e};t.setColumnFilterEqual=function(t,e){this.getColumnFilter(t).Equal=e};t.setColumnFilterLess=function(t,e){this.getColumnFilter(t).Less=e};t.setColumnFilterGreater=function(t,e){this.getColumnFilter(t).Greater=e};t.apply=function(){var t=this;var e,i;var n=this.grid.getColumnByHtmlName(((e=this.state.SortColumnName)!==null&&e!==void 0?e:"").toUpperCase());if(n){n.SortDirection=this.state.SortDirection}(i=this.state.Columns)===null||i===void 0?void 0:i.forEach((function(e){var i,n,r,o,s,a;var l=t.grid.getColumnByHtmlName(e.Name.toUpperCase());if(l){l.Hidden=e.Hidden?-1:0;l.filterEqual=(n=((i=e.Filter)!==null&&i!==void 0?i:{}).Equal)!==null&&n!==void 0?n:l.filterEqual;l.filterLess=(o=((r=e.Filter)!==null&&r!==void 0?r:{}).Less)!==null&&o!==void 0?o:l.filterLess;l.filterGreater=(a=((s=e.Filter)!==null&&s!==void 0?s:{}).Greater)!==null&&a!==void 0?a:l.filterGreater}}))};t.getColumn=function(t){var e=this.state.Columns.find((function(e){return e.Name.localeCompare(t)==0}));if(!e){e={Name:t};this.state.Columns.push(e)}return e};t.getColumnFilter=function(t){var e=this.getColumn(t);if(!e.Filter){e.Filter={}}return e.Filter};return t}();var c="gx-grid-chameleon{display:contents}";var h=t("gx_grid_chameleon",function(){function t(t){e(this,t)}t.prototype.selectionChangedHandler=function(t){var e=this.getRowIndexByGxId(t.detail.rowsId[0]);if(e>=0){this.grid.execC2VFunctions();this.grid.selectRow(e)}};t.prototype.cellClickedHandler=function(t){var e=this.getRowIndexByGxId(t.detail.rowId);var i=parseInt(t.detail.cellId);if(e>=0){this.grid.executeEvent(i,e)}};t.prototype.navigationClickedHandler=function(t){switch(t.detail.navigationType){case l.FIRST:r(this.grid);break;case l.PREVIOUS:o(this.grid);break;case l.NEXT:s(this.grid);break;case l.LAST:a(this.grid);break}};t.prototype.refreshClickedHandler=function(){d(this.grid)};t.prototype.columnHiddenChangedHandler=function(t){u.setColumnHidden(t.detail.columnId,t.detail.hidden)};t.prototype.columnSizeChangedHandler=function(t){u.setColumnSize(t.detail.columnId,t.detail.size)};t.prototype.columnSortChangedHandler=function(t){u.setColumnSort(t.detail.columnId,t.detail.sortDirection);switch(this.grid.SortMode){case"client":g(this.grid,t.detail.columnId,t.detail.sortDirection);this.gridTimestamp=Date.now();break;case"server":d(this.grid);break}};t.prototype.columnOrderChangedHandler=function(t){u.setColumnOrder(t.detail.columnId,t.detail.order)};t.prototype.controlStateHandler=function(){this.loadState()};t.prototype.handleChangeFilterEqual=function(t){var e=t.target;this.grid.getColumnByHtmlName(e.dataset.columnId).filterEqual=e.value;u.setColumnFilterEqual(e.dataset.columnId,e.value);d(this.grid)};t.prototype.handleChangeFilterLess=function(t){var e=t.target;this.grid.getColumnByHtmlName(e.dataset.columnId).filterLess=e.value;u.setColumnFilterLess(e.dataset.columnId,e.value);d(this.grid)};t.prototype.handleChangeFilterGreater=function(t){var e=t.target;this.grid.getColumnByHtmlName(e.dataset.columnId).filterGreater=e.value;u.setColumnFilterGreater(e.dataset.columnId,e.value);d(this.grid)};t.prototype.componentWillLoad=function(){this.loadState()};t.prototype.componentWillRender=function(){this.defineColumnRender()};t.prototype.componentDidLoad=function(){this.setCurrentRow();this.notifyResizePopup()};t.prototype.render=function(){return i(n,null,i("ch-grid",{class:this.grid.Class,rowSelectionMode:this.grid.gxAllowSelection?"single":"none",onRowSelectedClass:this.grid.RowSelectedClass.trim(),onRowHighlightedClass:this.grid.RowHighlightedClass.trim()},this.grid.header&&this.renderTitle(),this.renderActionbar("header",this.grid.ActionbarHeaderClass),this.renderActionbar("footer",this.grid.ActionbarFooterClass),this.renderColumns(),this.renderRows(),this.grid.PaginatorShow&&this.grid.pageSize>0&&this.renderPaginator()))};t.prototype.renderTitle=function(){return i("h1",{slot:"header"},this.grid.header)};t.prototype.renderActionbar=function(t,e){var n=this.grid.ActionRefreshPosition==t,r=this.grid.ActionSettingsPosition==t;if(n||r){return i("ch-grid-actionbar",{slot:t,class:e},n&&this.renderActionRefresh(),r&&this.renderActionSettings())}};t.prototype.renderActionRefresh=function(){return i("ch-grid-action-refresh",{class:this.grid.ActionRefreshClass,title:this.grid.ActionRefreshTextPosition=="title"?gx.getMessage("GX_BtnRefresh"):""},this.grid.ActionRefreshTextPosition=="text"?gx.getMessage("GX_BtnRefresh"):"")};t.prototype.renderActionSettings=function(){return i("ch-grid-action-settings",{class:this.grid.ActionSettingsClass,title:this.grid.ActionSettingsTextPosition=="title"?gx.getMessage("GXM_Settings"):""},this.grid.ActionSettingsTextPosition=="text"?gx.getMessage("GXM_Settings"):"")};t.prototype.renderColumns=function(){var t=this;return i("ch-grid-columnset",{class:this.grid.ColumnsetClass},this.grid.columns.map((function(e){if(gx.lang.gxBoolean(e.render)){return i("ch-grid-column",{columnId:e.htmlName,columnIconUrl:e.Icon,columnName:e.title,columnNamePosition:e.NamePosition,size:t.getColumnSize(e),displayObserverClass:e.gxColumnClass,class:t.grid.ColumnClass+" "+e.HeaderClass,hidden:e.Hidden==-1,hideable:e.Hideable==-1,resizeable:e.Resizeable==-1,sortable:e.Sortable==-1,settingable:e.Filterable==-1,sortDirection:e.SortDirection},e.Filterable==-1&&t.renderColumnFilter(e))}})))};t.prototype.renderColumnFilter=function(t){return i("div",{slot:"settings"},i("fieldset",null,i("caption",null,"Filter"),t.FilterMode=="single"&&this.renderColumnFilterControl(t.htmlName,t.gxControl.type,t.gxControl.dataType,t.filterEqual,this.handleChangeFilterEqual),t.FilterMode=="range"&&this.renderColumnFilterControl(t.htmlName,t.gxControl.type,t.gxControl.dataType,t.filterLess,this.handleChangeFilterLess),t.FilterMode=="range"&&this.renderColumnFilterControl(t.htmlName,t.gxControl.type,t.gxControl.dataType,t.filterGreater,this.handleChangeFilterGreater)))};t.prototype.renderColumnFilterControl=function(t,e,n,r,o){switch(e){case m.EDIT:case m.CHECK:return i("label",null,i("input",{type:this.getFilterInputType(n),value:r,"data-column-id":t,onChange:o.bind(this)}))}};t.prototype.renderRows=function(){var t=this;return this.grid.rows.map((function(e,n){var r=t.grid.RowClass+" "+t.grid.RowEvenClass;var o=t.grid.RowClass+" "+t.grid.RowOddClass;return i("ch-grid-row",{rowid:e.gxId,class:n%2===0?r:o},t.renderCells(e))}))};t.prototype.renderCells=function(t){var e=this;return t.gxProps.map((function(t,n){var r=e.grid.columns[n];if(gx.lang.gxBoolean(r.render)){return i("ch-grid-cell",{class:e.grid.CellClass,cellid:n,innerHTML:e.renderControl(r.gxControl,t)})}}))};t.prototype.renderControl=function(t,e){t.setProperties.apply(t,e);return t.getHtml()};t.prototype.renderPaginator=function(){return i("ch-paginator",{class:this.grid.pagingBarClass,slot:"footer"},this.renderPaginatorNavigate(l.FIRST,this.grid.isFirstPage(),this.grid.pagingButtonFirstClass,gx.getMessage("GXM_first")),this.renderPaginatorNavigate(l.PREVIOUS,this.grid.isFirstPage(),this.grid.pagingButtonPreviousClass,gx.getMessage("GXM_previous")),this.renderPaginatorNavigate(l.NEXT,this.grid.isLastPage(),this.grid.pagingButtonNextClass,gx.getMessage("GXM_next")),this.renderPaginatorNavigate(l.LAST,this.grid.isLastPage(),this.grid.pagingButtonLastClass,gx.getMessage("GXM_last")))};t.prototype.renderPaginatorNavigate=function(t,e,n,r){var o=this.grid.PaginatorNavigationButtonTextPosition;return i("ch-paginator-navigate",{type:t,disabled:e,class:n,title:o=="title"?r:""},o=="text"?r:"")};t.prototype.getColumnSize=function(t){var e;switch(t.Size){case"auto":e="auto";break;case"css":e="var(--"+t.SizeVariableName+", min-content)";break;case"length":e=t.SizeLength;break;case"max":e="max-content";break;case"min":e="min-content";break;case"minmax":e="minmax("+(t.SizeMinLength||"min-content")+", "+(t.SizeMaxLength||"auto")+")";break;default:e="min-content";break}return e||"min-content"};t.prototype.defineColumnRender=function(){var t=this.grid.properties;this.grid.columns.forEach((function(e,i){e.render=t.length==0&&e.visible||t.some((function(t){return t[i].visible}))}))};t.prototype.getRowIndexByGxId=function(t){return this.grid.rows.findIndex((function(e){return e.gxId==t}))};t.prototype.notifyResizePopup=function(){if(gx.popup.ispopup()){gx.fx.obs.notify("gx.onafterevent")}};t.prototype.setCurrentRow=function(){var t=this.grid.rows[0];if(t&&!gx.fn.currentGridRowImpl(this.grid.gxId)){gx.fn.setCurrentGridRow(this.grid.gxId,t.gxId)}};t.prototype.loadState=function(){u.load(this.grid,this.state)};t.prototype.getFilterInputType=function(t){switch(t){case f.BOOLEAN:return"checkbox";case f.CHAR:case f.VARCHAR:case f.LONGVARCHAR:return"text";case f.DATE:return"date";case f.DATETIME:return"datetime-local";case f.NUMBER:return"number";default:return"text"}};Object.defineProperty(t,"watchers",{get:function(){return{state:["controlStateHandler"]}},enumerable:false,configurable:true});return t}());var m;(function(t){t[t["EDIT"]=1]="EDIT";t[t["RADIO"]=4]="RADIO";t[t["COMBO"]=5]="COMBO";t[t["CHECK"]=7]="CHECK"})(m||(m={}));var f;(function(t){t[t["NUMBER"]=0]="NUMBER";t[t["CHAR"]=1]="CHAR";t[t["DATE"]=2]="DATE";t[t["DATETIME"]=3]="DATETIME";t[t["VARCHAR"]=5]="VARCHAR";t[t["LONGVARCHAR"]=6]="LONGVARCHAR";t[t["BOOLEAN"]=7]="BOOLEAN"})(f||(f={}));h.style=c}}}));